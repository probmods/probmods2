(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(str.charCodeAt(i)&255);return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}};module.exports=charenc},{}],2:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var emptyObject=require("fbjs/lib/emptyObject");var _invariant=require("fbjs/lib/invariant");if(process.env.NODE_ENV!=="production"){var warning=require("fbjs/lib/warning")}var MIXINS_KEY="mixins";function identity(fn){return fn}var ReactPropTypeLocationNames;if(process.env.NODE_ENV!=="production"){ReactPropTypeLocationNames={prop:"prop",context:"context",childContext:"child context"}}else{ReactPropTypeLocationNames={}}function factory(ReactComponent,isValidElement,ReactNoopUpdateQueue){var injectedMixins=[];var ReactClassInterface={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"};var ReactClassStaticInterface={getDerivedStateFromProps:"DEFINE_MANY_MERGED"};var RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins){for(var i=0;i<mixins.length;i++){mixSpecIntoComponent(Constructor,mixins[i])}}},childContextTypes:function(Constructor,childContextTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,childContextTypes,"childContext")}Constructor.childContextTypes=_assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,contextTypes,"context")}Constructor.contextTypes=_assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){if(Constructor.getDefaultProps){Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps)}else{Constructor.getDefaultProps=getDefaultProps}},propTypes:function(Constructor,propTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,propTypes,"prop")}Constructor.propTypes=_assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)},autobind:function(){}};function validateTypeDef(Constructor,typeDef,location){for(var propName in typeDef){if(typeDef.hasOwnProperty(propName)){if(process.env.NODE_ENV!=="production"){warning(typeof typeDef[propName]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"React.PropTypes.",Constructor.displayName||"ReactClass",ReactPropTypeLocationNames[location],propName)}}}}function validateMethodOverride(isAlreadyDefined,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;if(ReactClassMixin.hasOwnProperty(name)){_invariant(specPolicy==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override "+"`%s` from your class specification. Ensure that your method names "+"do not overlap with React methods.",name)}if(isAlreadyDefined){_invariant(specPolicy==="DEFINE_MANY"||specPolicy==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define "+"`%s` on your component more than once. This conflict may be due "+"to a mixin.",name)}}function mixSpecIntoComponent(Constructor,spec){if(!spec){if(process.env.NODE_ENV!=="production"){var typeofSpec=typeof spec;var isMixinValid=typeofSpec==="object"&&spec!==null;if(process.env.NODE_ENV!=="production"){warning(isMixinValid,"%s: You're attempting to include a mixin that is either null "+"or not an object. Check the mixins included by the component, "+"as well as any mixins they include themselves. "+"Expected object but got %s.",Constructor.displayName||"ReactClass",spec===null?null:typeofSpec)}}return}_invariant(typeof spec!=="function","ReactClass: You're attempting to "+"use a component class or function as a mixin. Instead, just use a "+"regular object.");_invariant(!isValidElement(spec),"ReactClass: You're attempting to "+"use a component as a mixin. Instead, just use a regular object.");var proto=Constructor.prototype;var autoBindPairs=proto.__reactAutoBindPairs;if(spec.hasOwnProperty(MIXINS_KEY)){RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins)}for(var name in spec){if(!spec.hasOwnProperty(name)){continue}if(name===MIXINS_KEY){continue}var property=spec[name];var isAlreadyDefined=proto.hasOwnProperty(name);validateMethodOverride(isAlreadyDefined,name);if(RESERVED_SPEC_KEYS.hasOwnProperty(name)){RESERVED_SPEC_KEYS[name](Constructor,property)}else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name);var isFunction=typeof property==="function";var shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&spec.autobind!==false;if(shouldAutoBind){autoBindPairs.push(name,property);proto[name]=property}else{if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];_invariant(isReactClassMethod&&(specPolicy==="DEFINE_MANY_MERGED"||specPolicy==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s "+"when mixing in component specs.",specPolicy,name);if(specPolicy==="DEFINE_MANY_MERGED"){proto[name]=createMergedResultFunction(proto[name],property)}else if(specPolicy==="DEFINE_MANY"){proto[name]=createChainedFunction(proto[name],property)}}else{proto[name]=property;if(process.env.NODE_ENV!=="production"){if(typeof property==="function"&&spec.displayName){proto[name].displayName=spec.displayName+"_"+name}}}}}}}function mixStaticSpecIntoComponent(Constructor,statics){if(!statics){return}for(var name in statics){var property=statics[name];if(!statics.hasOwnProperty(name)){continue}var isReserved=name in RESERVED_SPEC_KEYS;_invariant(!isReserved,"ReactClass: You are attempting to define a reserved "+'property, `%s`, that shouldn\'t be on the "statics" key. Define it '+"as an instance property instead; it will still be accessible on the "+"constructor.",name);var isAlreadyDefined=name in Constructor;if(isAlreadyDefined){var specPolicy=ReactClassStaticInterface.hasOwnProperty(name)?ReactClassStaticInterface[name]:null;_invariant(specPolicy==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define "+"`%s` on your component more than once. This conflict may be "+"due to a mixin.",name);Constructor[name]=createMergedResultFunction(Constructor[name],property);return}Constructor[name]=property}}function mergeIntoWithNoDuplicateKeys(one,two){_invariant(one&&two&&typeof one==="object"&&typeof two==="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var key in two){if(two.hasOwnProperty(key)){_invariant(one[key]===undefined,"mergeIntoWithNoDuplicateKeys(): "+"Tried to merge two objects with the same key: `%s`. This conflict "+"may be due to a mixin; in particular, this may be caused by two "+"getInitialState() or getDefaultProps() methods returning objects "+"with clashing keys.",key);one[key]=two[key]}}return one}function createMergedResultFunction(one,two){return function mergedResult(){var a=one.apply(this,arguments);var b=two.apply(this,arguments);if(a==null){return b}else if(b==null){return a}var c={};mergeIntoWithNoDuplicateKeys(c,a);mergeIntoWithNoDuplicateKeys(c,b);return c}}function createChainedFunction(one,two){return function chainedFunction(){one.apply(this,arguments);two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);if(process.env.NODE_ENV!=="production"){boundMethod.__reactBoundContext=component;boundMethod.__reactBoundMethod=method;boundMethod.__reactBoundArguments=null;var componentName=component.constructor.displayName;var _bind=boundMethod.bind;boundMethod.bind=function(newThis){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(newThis!==component&&newThis!==null){if(process.env.NODE_ENV!=="production"){warning(false,"bind(): React component methods may only be bound to the "+"component instance. See %s",componentName)}}else if(!args.length){if(process.env.NODE_ENV!=="production"){warning(false,"bind(): You are binding a component method to the component. "+"React does this for you automatically in a high-performance "+"way, so you can safely remove this call. See %s",componentName)}return boundMethod}var reboundMethod=_bind.apply(boundMethod,arguments);reboundMethod.__reactBoundContext=component;reboundMethod.__reactBoundMethod=method;reboundMethod.__reactBoundArguments=args;return reboundMethod}}return boundMethod}function bindAutoBindMethods(component){var pairs=component.__reactAutoBindPairs;for(var i=0;i<pairs.length;i+=2){var autoBindKey=pairs[i];var method=pairs[i+1];component[autoBindKey]=bindAutoBindMethod(component,method)}}var IsMountedPreMixin={componentDidMount:function(){this.__isMounted=true}};var IsMountedPostMixin={componentWillUnmount:function(){this.__isMounted=false}};var ReactClassMixin={replaceState:function(newState,callback){this.updater.enqueueReplaceState(this,newState,callback)},isMounted:function(){if(process.env.NODE_ENV!=="production"){warning(this.__didWarnIsMounted,"%s: isMounted is deprecated. Instead, make sure to clean up "+"subscriptions and pending requests in componentWillUnmount to "+"prevent memory leaks.",this.constructor&&this.constructor.displayName||this.name||"Component");this.__didWarnIsMounted=true}return!!this.__isMounted}};var ReactClassComponent=function(){};_assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);function createClass(spec){var Constructor=identity(function(props,context,updater){if(process.env.NODE_ENV!=="production"){warning(this instanceof Constructor,"Something is calling a React component directly. Use a factory or "+"JSX instead. See: https://fb.me/react-legacyfactory")}if(this.__reactAutoBindPairs.length){bindAutoBindMethods(this)}this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue;this.state=null;var initialState=this.getInitialState?this.getInitialState():null;if(process.env.NODE_ENV!=="production"){if(initialState===undefined&&this.getInitialState._isMockFunction){initialState=null}}_invariant(typeof initialState==="object"&&!Array.isArray(initialState),"%s.getInitialState(): must return an object or null",Constructor.displayName||"ReactCompositeComponent");this.state=initialState});Constructor.prototype=new ReactClassComponent;Constructor.prototype.constructor=Constructor;Constructor.prototype.__reactAutoBindPairs=[];injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor));mixSpecIntoComponent(Constructor,IsMountedPreMixin);mixSpecIntoComponent(Constructor,spec);mixSpecIntoComponent(Constructor,IsMountedPostMixin);if(Constructor.getDefaultProps){Constructor.defaultProps=Constructor.getDefaultProps()}if(process.env.NODE_ENV!=="production"){if(Constructor.getDefaultProps){Constructor.getDefaultProps.isReactClassApproved={}}if(Constructor.prototype.getInitialState){Constructor.prototype.getInitialState.isReactClassApproved={}}}_invariant(Constructor.prototype.render,"createClass(...): Class specification must implement a `render` method.");if(process.env.NODE_ENV!=="production"){warning(!Constructor.prototype.componentShouldUpdate,"%s has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value.",spec.displayName||"A component");warning(!Constructor.prototype.componentWillRecieveProps,"%s has a method called "+"componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",spec.displayName||"A component");warning(!Constructor.prototype.UNSAFE_componentWillRecieveProps,"%s has a method called UNSAFE_componentWillRecieveProps(). "+"Did you mean UNSAFE_componentWillReceiveProps()?",spec.displayName||"A component")}for(var methodName in ReactClassInterface){if(!Constructor.prototype[methodName]){Constructor.prototype[methodName]=null}}return Constructor}return createClass}module.exports=factory}).call(this,require("_process"))},{_process:407,"fbjs/lib/emptyObject":42,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"object-assign":63}],3:[function(require,module,exports){(function(){var base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number){return crypt.rotl(n,8)&16711935|crypt.rotl(n,24)&4278255360}for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(Math.random()*256));return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<words.length*32;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++){hex.push((bytes[i]>>>4).toString(16));hex.push((bytes[i]&15).toString(16))}return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3){var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2];for(var j=0;j<4;j++)if(i*8+j*6<=bytes.length*8)base64.push(base64map.charAt(triplet>>>6*(3-j)&63));else base64.push("=")}return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/gi,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4){if(imod4==0)continue;bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<imod4*2|base64map.indexOf(base64.charAt(i))>>>6-imod4*2)}return bytes}};module.exports=crypt})()},{}],4:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.d3_dsv={})})(this,function(exports){"use strict";function dsv(delimiter){return new Dsv(delimiter)}function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}")}function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}function inferColumns(rows){var columnSet=Object.create(null),columns=[];rows.forEach(function(row){for(var column in row){if(!(column in columnSet)){columns.push(columnSet[column]=column)}}});return columns}function Dsv(delimiter){var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);this.parse=function(text,f){var convert,columns,rows=this.parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?customConverter(row,f):objectConverter(row)});rows.columns=columns;return rows};this.parseRows=function(text,f){var EOL={},EOF={},rows=[],N=text.length,I=0,n=0,t,eol;function token(){if(I>=N)return EOF;if(eol)return eol=false,EOL;var j=I,c;if(text.charCodeAt(j)===34){var i=j;while(i++<N){if(text.charCodeAt(i)===34){if(text.charCodeAt(i+1)!==34)break;++i}}I=i+2;c=text.charCodeAt(i+1);if(c===13){eol=true;if(text.charCodeAt(i+2)===10)++I}else if(c===10){eol=true}return text.slice(j+1,i).replace(/""/g,'"')}while(I<N){var k=1;c=text.charCodeAt(I++);if(c===10)eol=true;else if(c===13){eol=true;if(text.charCodeAt(I)===10)++I,++k}else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}while((t=token())!==EOF){var a=[];while(t!==EOL&&t!==EOF){a.push(t);t=token()}if(f&&(a=f(a,n++))==null)continue;rows.push(a)}return rows};this.format=function(rows,columns){if(columns==null)columns=inferColumns(rows);return[columns.map(formatValue).join(delimiter)].concat(rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})).join("\n")};this.formatRows=function(rows){return rows.map(formatRow).join("\n")};function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}}dsv.prototype=Dsv.prototype;var csv=dsv(",");var tsv=dsv("\t");var version="0.1.14";exports.version=version;exports.dsv=dsv;exports.csv=csv;exports.tsv=tsv})},{}],5:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define("d3-format",["exports"],factory):factory(global.d3_format={})})(this,function(exports){"use strict";function formatDecimal(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent(x){return x=formatDecimal(Math.abs(x)),x?x[1]:NaN}function formatGroup(grouping,thousands){return function(value,width){var i=value.length,t=[],j=0,g=grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring(i-=g,i+g));if((length+=g+1)>width)break;g=grouping[j=(j+1)%grouping.length]}return t.reverse().join(thousands)}}var prefixExponent;function formatPrefixAuto(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(exponent/3)))*3)+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]}function formatRounded(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}function formatDefault(x,p){x=x.toPrecision(p);out:for(var n=x.length,i=1,i0=-1,i1;i<n;++i){switch(x[i]){case".":i0=i1=i;break;case"0":if(i0===0)i0=i;i1=i;break;case"e":break out;default:if(i0>0)i0=0;break}}return i0>0?x.slice(0,i0)+x.slice(i1+1):x}var formatTypes={"":formatDefault,"%":function(x,p){return(x*100).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(x*100,p)},r:formatRounded,s:formatPrefixAuto,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};var re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier(specifier){return new FormatSpecifier(specifier)}function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match,fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zero=!!match[5],width=match[6]&&+match[6],comma=!!match[7],precision=match[8]&&+match[8].slice(1),type=match[9]||"";if(type==="n")comma=true,type="g";else if(!formatTypes[type])type="";if(zero||fill==="0"&&align==="=")zero=true,fill="0",align="=";this.fill=fill;this.align=align;this.sign=sign;this.symbol=symbol;this.zero=zero;this.width=width;this.comma=comma;this.precision=precision;this.type=type}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var prefixes=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function identity(x){return x}function locale(locale){var group=locale.grouping&&locale.thousands?formatGroup(locale.grouping,locale.thousands):identity,currency=locale.currency,decimal=locale.decimal;function format(specifier){specifier=formatSpecifier(specifier);var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,type=specifier.type;var prefix=symbol==="$"?currency[0]:symbol==="#"&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix=symbol==="$"?currency[1]:/[%p]/.test(type)?"%":"";var formatType=formatTypes[type],maybeSuffix=!type||/[defgprs%]/.test(type);precision=precision==null?type?6:12:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));return function(value){var valuePrefix=prefix,valueSuffix=suffix;if(type==="c"){valueSuffix=formatType(value)+valueSuffix;value=""}else{value=+value;var valueNegative=(value<0||1/value<0)&&(value*=-1,true);value=formatType(value,precision);if(valueNegative){var i=-1,n=value.length,c;valueNegative=false;while(++i<n){if(c=value.charCodeAt(i),48<c&&c<58||type==="x"&&96<c&&c<103||type==="X"&&64<c&&c<71){valueNegative=true;break}}}valuePrefix=(valueNegative?sign==="("?sign:"-":sign==="-"||sign==="("?"":sign)+valuePrefix;valueSuffix=valueSuffix+(type==="s"?prefixes[8+prefixExponent/3]:"")+(valueNegative&&sign==="("?")":"");if(maybeSuffix){var i=-1,n=value.length,c;while(++i<n){if(c=value.charCodeAt(i),48>c||c>57){valueSuffix=(c===46?decimal+value.slice(i+1):value.slice(i))+valueSuffix;value=value.slice(0,i);break}}}}if(comma&&!zero)value=group(value,Infinity);var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";if(comma&&zero)value=group(padding+value,padding.length?width-valueSuffix.length:Infinity),padding="";switch(align){case"<":return valuePrefix+value+valueSuffix+padding;case"=":return valuePrefix+padding+value+valueSuffix;case"^":return padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length)}return padding+valuePrefix+value+valueSuffix}}function formatPrefix(specifier,value){var f=format((specifier=formatSpecifier(specifier),specifier.type="f",specifier)),e=Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))*3,k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}return{format:format,formatPrefix:formatPrefix}}var defaultLocale=locale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var caES=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]});var csCZ=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0K\u010d"]});var deCH=locale({decimal:",",thousands:"'",grouping:[3],currency:["","\xa0CHF"]});var deDE=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]});var enCA=locale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var enGB=locale({decimal:".",thousands:",",grouping:[3],currency:["\xa3",""]});var esES=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]});var fiFI=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0\u20ac"]});var frCA=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","$"]});var frFR=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]});var heIL=locale({decimal:".",thousands:",",grouping:[3],currency:["\u20aa",""]});var huHU=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0Ft"]});var itIT=locale({decimal:",",thousands:".",grouping:[3],currency:["\u20ac",""]});var jaJP=locale({decimal:".",thousands:",",grouping:[3],currency:["","\u5186"]});var koKR=locale({decimal:".",thousands:",",grouping:[3],currency:["\u20a9",""]});var mkMK=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u0434\u0435\u043d."]});var nlNL=locale({decimal:",",thousands:".",grouping:[3],currency:["\u20ac\xa0",""]});var plPL=locale({decimal:",",thousands:".",grouping:[3],currency:["","z\u0142"]});var ptBR=locale({decimal:",",thousands:".",grouping:[3],currency:["R$",""]});var ruRU=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0\u0440\u0443\u0431."]});var svSE=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","SEK"]});var zhCN=locale({decimal:".",thousands:",",grouping:[3],currency:["\xa5",""]});function precisionFixed(step){return Math.max(0,-exponent(Math.abs(step)))}function precisionPrefix(step,value){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))*3-exponent(Math.abs(step)))}function precisionRound(step,max){step=Math.abs(step),max=Math.abs(max)-step;return Math.max(0,exponent(max)-exponent(step))+1}var format=defaultLocale.format;var formatPrefix=defaultLocale.formatPrefix;var version="0.4.2";exports.version=version;exports.format=format;exports.formatPrefix=formatPrefix;exports.locale=locale;exports.localeCaEs=caES;exports.localeCsCz=csCZ;exports.localeDeCh=deCH;exports.localeDeDe=deDE;exports.localeEnCa=enCA;exports.localeEnGb=enGB;exports.localeEnUs=defaultLocale;exports.localeEsEs=esES;exports.localeFiFi=fiFI;exports.localeFrCa=frCA;exports.localeFrFr=frFR;exports.localeHeIl=heIL;exports.localeHuHu=huHU;exports.localeItIt=itIT;exports.localeJaJp=jaJP;exports.localeKoKr=koKR;exports.localeMkMk=mkMK;exports.localeNlNl=nlNL;exports.localePlPl=plPL;exports.localePtBr=ptBR;exports.localeRuRu=ruRU;exports.localeSvSe=svSE;exports.localeZhCn=zhCN;exports.formatSpecifier=formatSpecifier;exports.precisionFixed=precisionFixed;exports.precisionPrefix=precisionPrefix;exports.precisionRound=precisionRound})},{}],6:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports,require("d3-time")):typeof define==="function"&&define.amd?define("d3-time-format",["exports","d3-time"],factory):factory(global.d3_time_format={},global.d3_time)})(this,function(exports,d3Time){"use strict";function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);date.setFullYear(d.y);return date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));date.setUTCFullYear(d.y);return date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}function locale$1(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;var periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths);var formats={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,S:formatSeconds,U:formatWeekNumberSunday,w:formatWeekdayNumber,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent};var utcFormats={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,S:formatUTCSeconds,U:formatUTCWeekNumberSunday,w:formatUTCWeekdayNumber,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent};var parses={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,S:parseSeconds,U:parseWeekNumberSunday,w:parseWeekdayNumber,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};formats.x=newFormat(locale_date,formats);formats.X=newFormat(locale_time,formats);formats.c=newFormat(locale_dateTime,formats);utcFormats.x=newFormat(locale_date,utcFormats);utcFormats.X=newFormat(locale_time,utcFormats);utcFormats.c=newFormat(locale_dateTime,utcFormats);function newFormat(specifier,formats){return function(date){var string=[],i=-1,j=0,n=specifier.length,c,pad,format;if(!(date instanceof Date))date=new Date(+date);while(++i<n){if(specifier.charCodeAt(i)===37){string.push(specifier.slice(j,i));if((pad=pads[c=specifier.charAt(++i)])!=null)c=specifier.charAt(++i);else pad=c==="e"?" ":"0";if(format=formats[c])c=format(date,pad);string.push(c);j=i+1}}string.push(specifier.slice(j,i));return string.join("")}}function newParse(specifier,newDate){return function(string){var d=newYear(1900),i=parseSpecifier(d,specifier,string+="",0);if(i!=string.length)return null;if("p"in d)d.H=d.H%12+d.p*12;if("W"in d||"U"in d){if(!("w"in d))d.w="W"in d?1:0;var day="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay();d.m=0;d.d="W"in d?(d.w+6)%7+d.W*7-(day+5)%7:d.w+d.U*7-(day+6)%7}if("Z"in d){d.H+=d.Z/100|0;d.M+=d.Z%100;return utcDate(d)}return newDate(d)}}function parseSpecifier(d,specifier,string,j){var i=0,n=specifier.length,m=string.length,c,parse;while(i<n){if(j>=m)return-1;c=specifier.charCodeAt(i++);if(c===37){c=specifier.charAt(i++);parse=parses[c in pads?specifier.charAt(i++):c];if(!parse||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++)){return-1}}return j}function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)}function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)}function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)}function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]}function formatWeekday(d){return locale_weekdays[d.getDay()]}function formatShortMonth(d){return locale_shortMonths[d.getMonth()]}function formatMonth(d){return locale_months[d.getMonth()]}function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]}function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]}function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]}function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]}function formatUTCMonth(d){return locale_months[d.getUTCMonth()]}function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]}return{format:function(specifier){var f=newFormat(specifier+="",formats);f.parse=newParse(specifier,localDate);f.toString=function(){return specifier};return f},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);f.parse=newParse(specifier,utcDate);f.toString=function(){return specifier};return f}}}var pads={"-":"",_:" ",0:"0"};var numberRe=/^\s*\d+/;var percentRe=/^%/;var requoteRe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){var map={},i=-1,n=names.length;while(++i<n)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+d3Time.day.count(d3Time.year(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekNumberSunday(d,p){return pad(d3Time.sunday.count(d3Time.year(d),d),p,2)}function formatWeekdayNumber(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(d3Time.monday.count(d3Time.year(d),d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+d3Time.utcDay.count(d3Time.utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekNumberSunday(d,p){return pad(d3Time.utcSunday.count(d3Time.utcYear(d),d),p,2)}function formatUTCWeekdayNumber(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(d3Time.utcMonday.count(d3Time.utcYear(d),d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}var locale=locale$1({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var caES=locale$1({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","mar\xe7","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","mar\xe7","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]});var deCH=locale$1({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});var deDE=locale$1({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});var enCA=locale$1({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var enGB=locale$1({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var esES=locale$1({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],shortDays:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]});var fiFI=locale$1({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kes\xe4kuu","hein\xe4kuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kes\xe4","Hein\xe4","Elo","Syys","Loka","Marras","Joulu"]});var frCA=locale$1({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"],shortMonths:["jan","f\xe9v","mar","avr","mai","jui","jul","ao\xfb","sep","oct","nov","d\xe9c"]});var frFR=locale$1({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"],shortMonths:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."]});var heIL=locale$1({dateTime:"%A, %e \u05d1%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],shortDays:["\u05d0\u05f3","\u05d1\u05f3","\u05d2\u05f3","\u05d3\u05f3","\u05d4\u05f3","\u05d5\u05f3","\u05e9\u05f3"],months:["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"],shortMonths:["\u05d9\u05e0\u05d5\u05f3","\u05e4\u05d1\u05e8\u05f3","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05f3","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05f3","\u05e1\u05e4\u05d8\u05f3","\u05d0\u05d5\u05e7\u05f3","\u05e0\u05d5\u05d1\u05f3","\u05d3\u05e6\u05de\u05f3"]});var huHU=locale$1({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vas\xe1rnap","h\xe9tf\u0151","kedd","szerda","cs\xfct\xf6rt\xf6k","p\xe9ntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["janu\xe1r","febru\xe1r","m\xe1rcius","\xe1prilis","m\xe1jus","j\xfanius","j\xfalius","augusztus","szeptember","okt\xf3ber","november","december"],shortMonths:["jan.","feb.","m\xe1r.","\xe1pr.","m\xe1j.","j\xfan.","j\xfal.","aug.","szept.","okt.","nov.","dec."]});var itIT=locale$1({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]});var jaJP=locale$1({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],shortDays:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],months:["\u7766\u6708","\u5982\u6708","\u5f25\u751f","\u536f\u6708","\u7690\u6708","\u6c34\u7121\u6708","\u6587\u6708","\u8449\u6708","\u9577\u6708","\u795e\u7121\u6708","\u971c\u6708","\u5e2b\u8d70"],shortMonths:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"]});var koKR=locale$1({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["\uc624\uc804","\uc624\ud6c4"],days:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"],shortDays:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],months:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],shortMonths:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"]});var mkMK=locale$1({dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u043d\u0435\u0434\u0435\u043b\u0430","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a","\u043f\u0435\u0442\u043e\u043a","\u0441\u0430\u0431\u043e\u0442\u0430"],shortDays:["\u043d\u0435\u0434","\u043f\u043e\u043d","\u0432\u0442\u043e","\u0441\u0440\u0435","\u0447\u0435\u0442","\u043f\u0435\u0442","\u0441\u0430\u0431"],months:["\u0458\u0430\u043d\u0443\u0430\u0440\u0438","\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0438\u043b","\u043c\u0430\u0458","\u0458\u0443\u043d\u0438","\u0458\u0443\u043b\u0438","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438","\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438","\u043d\u043e\u0435\u043c\u0432\u0440\u0438","\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438"],shortMonths:["\u0458\u0430\u043d","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0458","\u0458\u0443\u043d","\u0458\u0443\u043b","\u0430\u0432\u0433","\u0441\u0435\u043f","\u043e\u043a\u0442","\u043d\u043e\u0435","\u0434\u0435\u043a"]});var nlNL=locale$1({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]});var plPL=locale$1({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","\u015ar.","Czw.","Pt.","Sob."],months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Pa\u017adz.","Listop.","Grudz."]});var ptBR=locale$1({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],months:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]});var ruRU=locale$1({dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],shortDays:["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],months:["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],shortMonths:["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"]});var svSE=locale$1({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],shortDays:["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]});var zhCN=locale$1({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["\u4e0a\u5348","\u4e0b\u5348"],days:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],shortDays:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],shortMonths:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]});var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(date){return date.toISOString()}formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date};formatIsoNative.toString=function(){return isoSpecifier};var formatIso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?formatIsoNative:locale.utcFormat(isoSpecifier);var format=locale.format;var utcFormat=locale.utcFormat;var version="0.2.1";exports.version=version;exports.format=format;exports.utcFormat=utcFormat;exports.locale=locale$1;exports.localeCaEs=caES;exports.localeDeCh=deCH;exports.localeDeDe=deDE;exports.localeEnCa=enCA;exports.localeEnGb=enGB;exports.localeEnUs=locale;exports.localeEsEs=esES;exports.localeFiFi=fiFI;exports.localeFrCa=frCA;exports.localeFrFr=frFR;exports.localeHeIl=heIL;exports.localeHuHu=huHU;exports.localeItIt=itIT;exports.localeJaJp=jaJP;exports.localeKoKr=koKR;exports.localeMkMk=mkMK;exports.localeNlNl=nlNL;exports.localePlPl=plPL;exports.localePtBr=ptBR;exports.localeRuRu=ruRU;exports.localeSvSe=svSE;exports.localeZhCn=zhCN;exports.isoFormat=formatIso})},{"d3-time":7}],7:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define("d3-time",["exports"],factory):factory(global.d3_time={})})(this,function(exports){"use strict";var t0=new Date;var t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=new Date(+date)),date}interval.floor=interval;interval.round=function(date){var d0=new Date(+date),d1=new Date(date-1);floori(d0),floori(d1),offseti(d1,1);return date-d0<d1-date?d0:d1};interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),date};interval.offset=function(date,step){return offseti(date=new Date(+date),step==null?1:Math.floor(step)),date};interval.range=function(start,stop,step){var range=[];start=new Date(start-1);stop=new Date(+stop);step=step==null?1:Math.floor(step);if(!(start<stop)||!(step>0))return range;offseti(start,1),floori(start);if(start<stop)range.push(new Date(+start));while(offseti(start,step),floori(start),start<stop)range.push(new Date(+start));return range};interval.filter=function(test){return newInterval(function(date){while(floori(date),!test(date))date.setTime(date-1)},function(date,step){while(--step>=0)while(offseti(date,1),!test(date));})};if(count){interval.count=function(start,end){t0.setTime(+start),t1.setTime(+end);floori(t0),floori(t1);return Math.floor(count(t0,t1))};interval.every=function(step){step=Math.floor(step);return!isFinite(step)||!(step>0)?null:!(step>1)?interval:interval.filter(field?function(d){return field(d)%step===0}:function(d){return interval.count(0,d)%step===0})}}return interval}var millisecond=newInterval(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond.every=function(k){k=Math.floor(k);if(!isFinite(k)||!(k>0))return null;if(!(k>1))return millisecond;return newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k})};var second=newInterval(function(date){date.setMilliseconds(0)},function(date,step){date.setTime(+date+step*1e3)},function(start,end){return(end-start)/1e3},function(date){return date.getSeconds()});var minute=newInterval(function(date){date.setSeconds(0,0)},function(date,step){date.setTime(+date+step*6e4)},function(start,end){return(end-start)/6e4},function(date){return date.getMinutes()});var hour=newInterval(function(date){date.setMinutes(0,0,0)},function(date,step){date.setTime(+date+step*36e5)},function(start,end){return(end-start)/36e5},function(date){return date.getHours()});var day=newInterval(function(date){date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*6e4)/864e5},function(date){return date.getDate()-1});function weekday(i){return newInterval(function(date){date.setHours(0,0,0,0);date.setDate(date.getDate()-(date.getDay()+7-i)%7)},function(date,step){date.setDate(date.getDate()+step*7)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*6e4)/6048e5})}var sunday=weekday(0);var monday=weekday(1);var tuesday=weekday(2);var wednesday=weekday(3);var thursday=weekday(4);var friday=weekday(5);var saturday=weekday(6);var month=newInterval(function(date){date.setHours(0,0,0,0);date.setDate(1)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+(end.getFullYear()-start.getFullYear())*12},function(date){return date.getMonth()});var year=newInterval(function(date){date.setHours(0,0,0,0);date.setMonth(0,1)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()});var utcSecond=newInterval(function(date){date.setUTCMilliseconds(0)},function(date,step){date.setTime(+date+step*1e3)},function(start,end){return(end-start)/1e3},function(date){return date.getUTCSeconds()});var utcMinute=newInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+step*6e4)},function(start,end){return(end-start)/6e4},function(date){return date.getUTCMinutes()});var utcHour=newInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+step*36e5)},function(start,end){return(end-start)/36e5},function(date){return date.getUTCHours()});var utcDay=newInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864e5},function(date){return date.getUTCDate()-1});function utcWeekday(i){return newInterval(function(date){date.setUTCHours(0,0,0,0);date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7)},function(date,step){date.setUTCDate(date.getUTCDate()+step*7)},function(start,end){return(end-start)/6048e5})}var utcSunday=utcWeekday(0);var utcMonday=utcWeekday(1);var utcTuesday=utcWeekday(2);var utcWednesday=utcWeekday(3);var utcThursday=utcWeekday(4);var utcFriday=utcWeekday(5);var utcSaturday=utcWeekday(6);var utcMonth=newInterval(function(date){date.setUTCHours(0,0,0,0);date.setUTCDate(1)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+(end.getUTCFullYear()-start.getUTCFullYear())*12},function(date){return date.getUTCMonth()});var utcYear=newInterval(function(date){date.setUTCHours(0,0,0,0);date.setUTCMonth(0,1)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()});var milliseconds=millisecond.range;var seconds=second.range;var minutes=minute.range;var hours=hour.range;var days=day.range;var sundays=sunday.range;var mondays=monday.range;var tuesdays=tuesday.range;var wednesdays=wednesday.range;var thursdays=thursday.range;var fridays=friday.range;var saturdays=saturday.range;var weeks=sunday.range;var months=month.range;var years=year.range;var utcMillisecond=millisecond;var utcMilliseconds=milliseconds;var utcSeconds=utcSecond.range;var utcMinutes=utcMinute.range;var utcHours=utcHour.range;var utcDays=utcDay.range;var utcSundays=utcSunday.range;var utcMondays=utcMonday.range;var utcTuesdays=utcTuesday.range;var utcWednesdays=utcWednesday.range;var utcThursdays=utcThursday.range;var utcFridays=utcFriday.range;var utcSaturdays=utcSaturday.range;var utcWeeks=utcSunday.range;var utcMonths=utcMonth.range;var utcYears=utcYear.range;var version="0.1.1";exports.version=version;exports.milliseconds=milliseconds;exports.seconds=seconds;exports.minutes=minutes;exports.hours=hours;exports.days=days;exports.sundays=sundays;exports.mondays=mondays;exports.tuesdays=tuesdays;exports.wednesdays=wednesdays;exports.thursdays=thursdays;exports.fridays=fridays;exports.saturdays=saturdays;exports.weeks=weeks;exports.months=months;exports.years=years;exports.utcMillisecond=utcMillisecond;exports.utcMilliseconds=utcMilliseconds;exports.utcSeconds=utcSeconds;exports.utcMinutes=utcMinutes;exports.utcHours=utcHours;exports.utcDays=utcDays;exports.utcSundays=utcSundays;exports.utcMondays=utcMondays;exports.utcTuesdays=utcTuesdays;exports.utcWednesdays=utcWednesdays;exports.utcThursdays=utcThursdays;exports.utcFridays=utcFridays;exports.utcSaturdays=utcSaturdays;exports.utcWeeks=utcWeeks;exports.utcMonths=utcMonths;exports.utcYears=utcYears;exports.millisecond=millisecond;exports.second=second;exports.minute=minute;exports.hour=hour;exports.day=day;exports.sunday=sunday;exports.monday=monday;exports.tuesday=tuesday;exports.wednesday=wednesday;exports.thursday=thursday;exports.friday=friday;exports.saturday=saturday;exports.week=sunday;exports.month=month;exports.year=year;exports.utcSecond=utcSecond;exports.utcMinute=utcMinute;exports.utcHour=utcHour;exports.utcDay=utcDay;exports.utcSunday=utcSunday;exports.utcMonday=utcMonday;exports.utcTuesday=utcTuesday;exports.utcWednesday=utcWednesday;exports.utcThursday=utcThursday;exports.utcFriday=utcFriday;exports.utcSaturday=utcSaturday;exports.utcWeek=utcSunday;exports.utcMonth=utcMonth;exports.utcYear=utcYear;exports.interval=newInterval})},{}],8:[function(require,module,exports){!function(){var d3={version:"3.5.17"};var d3_arraySlice=[].slice,d3_array=function(list){return d3_arraySlice.call(list)};var d3_document=this.document;function d3_documentElement(node){return node&&(node.ownerDocument||node.document||node).documentElement}function d3_window(node){return node&&(node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView)}if(d3_document){try{d3_array(d3_document.documentElement.childNodes)[0].nodeType}catch(e){d3_array=function(list){var i=list.length,array=new Array(i);while(i--)array[i]=list[i];return array}}}if(!Date.now)Date.now=function(){return+new Date};if(d3_document){try{d3_document.createElement("DIV").style.setProperty("opacity",0,"")}catch(error){var d3_element_prototype=this.Element.prototype,d3_element_setAttribute=d3_element_prototype.setAttribute,d3_element_setAttributeNS=d3_element_prototype.setAttributeNS,d3_style_prototype=this.CSSStyleDeclaration.prototype,d3_style_setProperty=d3_style_prototype.setProperty;d3_element_prototype.setAttribute=function(name,value){d3_element_setAttribute.call(this,name,value+"")};d3_element_prototype.setAttributeNS=function(space,local,value){d3_element_setAttributeNS.call(this,space,local,value+"")};d3_style_prototype.setProperty=function(name,value,priority){d3_style_setProperty.call(this,name,value+"",priority)}}}d3.ascending=d3_ascending;function d3_ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};d3.min=function(array,f){var i=-1,n=array.length,a,b;if(arguments.length===1){while(++i<n)if((b=array[i])!=null&&b>=b){a=b;break}while(++i<n)if((b=array[i])!=null&&a>b)a=b}else{while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>=b){a=b;break}while(++i<n)if((b=f.call(array,array[i],i))!=null&&a>b)a=b}return a};d3.max=function(array,f){var i=-1,n=array.length,a,b;if(arguments.length===1){while(++i<n)if((b=array[i])!=null&&b>=b){a=b;break}while(++i<n)if((b=array[i])!=null&&b>a)a=b}else{while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>=b){a=b;break}while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>a)a=b}return a};d3.extent=function(array,f){var i=-1,n=array.length,a,b,c;if(arguments.length===1){while(++i<n)if((b=array[i])!=null&&b>=b){a=c=b;break}while(++i<n)if((b=array[i])!=null){if(a>b)a=b;if(c<b)c=b}}else{while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>=b){a=c=b;break}while(++i<n)if((b=f.call(array,array[i],i))!=null){if(a>b)a=b;if(c<b)c=b}}return[a,c]};function d3_number(x){return x===null?NaN:+x}function d3_numeric(x){return!isNaN(x)}d3.sum=function(array,f){var s=0,n=array.length,a,i=-1;if(arguments.length===1){while(++i<n)if(d3_numeric(a=+array[i]))s+=a}else{while(++i<n)if(d3_numeric(a=+f.call(array,array[i],i)))s+=a}return s};d3.mean=function(array,f){var s=0,n=array.length,a,i=-1,j=n;if(arguments.length===1){while(++i<n)if(d3_numeric(a=d3_number(array[i])))s+=a;else--j}else{while(++i<n)if(d3_numeric(a=d3_number(f.call(array,array[i],i))))s+=a;else--j}if(j)return s/j};d3.quantile=function(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v};d3.median=function(array,f){var numbers=[],n=array.length,a,i=-1;if(arguments.length===1){while(++i<n)if(d3_numeric(a=d3_number(array[i])))numbers.push(a)}else{while(++i<n)if(d3_numeric(a=d3_number(f.call(array,array[i],i))))numbers.push(a)}if(numbers.length)return d3.quantile(numbers.sort(d3_ascending),.5)};d3.variance=function(array,f){var n=array.length,m=0,a,d,s=0,i=-1,j=0;if(arguments.length===1){while(++i<n){if(d3_numeric(a=d3_number(array[i]))){d=a-m;m+=d/++j;s+=d*(a-m)}}}else{while(++i<n){if(d3_numeric(a=d3_number(f.call(array,array[i],i)))){d=a-m;m+=d/++j;s+=d*(a-m)}}}if(j>1)return s/(j-1)};d3.deviation=function(){var v=d3.variance.apply(this,arguments);return v?Math.sqrt(v):v};function d3_bisector(compare){return{left:function(a,x,lo,hi){if(arguments.length<3)lo=0;if(arguments.length<4)hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(compare(a[mid],x)<0)lo=mid+1;else hi=mid}return lo},right:function(a,x,lo,hi){if(arguments.length<3)lo=0;if(arguments.length<4)hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(compare(a[mid],x)>0)hi=mid;else lo=mid+1}return lo}}}var d3_bisect=d3_bisector(d3_ascending);d3.bisectLeft=d3_bisect.left;d3.bisect=d3.bisectRight=d3_bisect.right;d3.bisector=function(f){return d3_bisector(f.length===1?function(d,x){return d3_ascending(f(d),x)}:f)};d3.shuffle=function(array,i0,i1){if((m=arguments.length)<3){i1=array.length;if(m<2)i0=0}var m=i1-i0,t,i;while(m){i=Math.random()*m--|0;t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t}return array};d3.permute=function(array,indexes){var i=indexes.length,permutes=new Array(i);while(i--)permutes[i]=array[indexes[i]];return permutes};d3.pairs=function(array){var i=0,n=array.length-1,p0,p1=array[0],pairs=new Array(n<0?0:n);while(i<n)pairs[i]=[p0=p1,p1=array[++i]];return pairs};d3.transpose=function(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=d3.min(matrix,d3_transposeLength),transpose=new Array(m);++i<m;){for(var j=-1,n,row=transpose[i]=new Array(n);++j<n;){row[j]=matrix[j][i]}}return transpose};function d3_transposeLength(d){return d.length}d3.zip=function(){return d3.transpose(arguments)};d3.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys};d3.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values};d3.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries};d3.merge=function(arrays){var n=arrays.length,m,i=-1,j=0,merged,array;while(++i<n)j+=arrays[i].length;merged=new Array(j);while(--n>=0){array=arrays[n];m=array.length;while(--m>=0){merged[--j]=array[m]}}return merged};var abs=Math.abs;d3.range=function(start,stop,step){if(arguments.length<3){step=1;if(arguments.length<2){stop=start;start=0}}if((stop-start)/step===Infinity)throw new Error("infinite range");var range=[],k=d3_range_integerScale(abs(step)),i=-1,j;start*=k,stop*=k,step*=k;if(step<0)while((j=start+step*++i)>stop)range.push(j/k);else while((j=start+step*++i)<stop)range.push(j/k);return range};function d3_range_integerScale(x){var k=1;while(x*k%1)k*=10;return k}function d3_class(ctor,properties){for(var key in properties){Object.defineProperty(ctor.prototype,key,{value:properties[key],enumerable:false})}}d3.map=function(object,f){var map=new d3_Map;if(object instanceof d3_Map){object.forEach(function(key,value){map.set(key,value)})}else if(Array.isArray(object)){var i=-1,n=object.length,o;if(arguments.length===1)while(++i<n)map.set(i,object[i]);else while(++i<n)map.set(f.call(object,o=object[i],i),o)}else{for(var key in object)map.set(key,object[key])}return map};function d3_Map(){this._=Object.create(null)}var d3_map_proto="__proto__",d3_map_zero="\0";d3_class(d3_Map,{has:d3_map_has,get:function(key){return this._[d3_map_escape(key)]},set:function(key,value){return this._[d3_map_escape(key)]=value},remove:d3_map_remove,keys:d3_map_keys,values:function(){var values=[];for(var key in this._)values.push(this._[key]);return values},entries:function(){var entries=[];for(var key in this._)entries.push({key:d3_map_unescape(key),value:this._[key]});return entries},size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key),this._[key])}});function d3_map_escape(key){return(key+="")===d3_map_proto||key[0]===d3_map_zero?d3_map_zero+key:key}function d3_map_unescape(key){return(key+="")[0]===d3_map_zero?key.slice(1):key}function d3_map_has(key){return d3_map_escape(key)in this._}function d3_map_remove(key){return(key=d3_map_escape(key))in this._&&delete this._[key]}function d3_map_keys(){var keys=[];for(var key in this._)keys.push(d3_map_unescape(key));return keys}function d3_map_size(){var size=0;for(var key in this._)++size;return size}function d3_map_empty(){for(var key in this._)return false;return true}d3.nest=function(){var nest={},keys=[],sortKeys=[],sortValues,rollup;function map(mapType,array,depth){if(depth>=keys.length)return rollup?rollup.call(nest,array):sortValues?array.sort(sortValues):array;var i=-1,n=array.length,key=keys[depth++],keyValue,object,setter,valuesByKey=new d3_Map,values;while(++i<n){if(values=valuesByKey.get(keyValue=key(object=array[i]))){values.push(object)}else{valuesByKey.set(keyValue,[object])}}if(mapType){object=mapType();setter=function(keyValue,values){object.set(keyValue,map(mapType,values,depth))}}else{object={};setter=function(keyValue,values){object[keyValue]=map(mapType,values,depth)}}valuesByKey.forEach(setter);return object}function entries(map,depth){if(depth>=keys.length)return map;var array=[],sortKey=sortKeys[depth++];map.forEach(function(key,keyMap){array.push({key:key,values:entries(keyMap,depth)})});return sortKey?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}nest.map=function(array,mapType){return map(mapType,array,0)};nest.entries=function(array){return entries(map(d3.map,array,0),0)};nest.key=function(d){keys.push(d);return nest};nest.sortKeys=function(order){sortKeys[keys.length-1]=order;return nest};nest.sortValues=function(order){sortValues=order;return nest};nest.rollup=function(f){rollup=f;return nest};return nest};d3.set=function(array){var set=new d3_Set;if(array)for(var i=0,n=array.length;i<n;++i)set.add(array[i]);return set};function d3_Set(){this._=Object.create(null)}d3_class(d3_Set,{has:d3_map_has,add:function(key){this._[d3_map_escape(key+="")]=true;return key},remove:d3_map_remove,values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key))}});d3.behavior={};function d3_identity(d){return d}d3.rebind=function(target,source){var i=1,n=arguments.length,method;while(++i<n)target[method=arguments[i]]=d3_rebind(target,source,source[method]);return target};function d3_rebind(target,source,method){return function(){var value=method.apply(source,arguments);return value===source?target:value}}function d3_vendorSymbol(object,name){if(name in object)return name;name=name.charAt(0).toUpperCase()+name.slice(1);for(var i=0,n=d3_vendorPrefixes.length;i<n;++i){var prefixName=d3_vendorPrefixes[i]+name;if(prefixName in object)return prefixName}}var d3_vendorPrefixes=["webkit","ms","moz","Moz","o","O"];function d3_noop(){}d3.dispatch=function(){var dispatch=new d3_dispatch,i=-1,n=arguments.length;while(++i<n)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch};function d3_dispatch(){}d3_dispatch.prototype.on=function(type,listener){var i=type.indexOf("."),name="";if(i>=0){name=type.slice(i+1);type=type.slice(0,i)}if(type)return arguments.length<2?this[type].on(name):this[type].on(name,listener);if(arguments.length===2){if(listener==null)for(type in this){if(this.hasOwnProperty(type))this[type].on(name,null)}return this}};function d3_dispatch_event(dispatch){var listeners=[],listenerByName=new d3_Map;function event(){var z=listeners,i=-1,n=z.length,l;while(++i<n)if(l=z[i].on)l.apply(this,arguments);return dispatch}event.on=function(name,listener){var l=listenerByName.get(name),i;if(arguments.length<2)return l&&l.on;if(l){l.on=null;listeners=listeners.slice(0,i=listeners.indexOf(l)).concat(listeners.slice(i+1));listenerByName.remove(name)}if(listener)listeners.push(listenerByName.set(name,{on:listener}));return dispatch};return event}d3.event=null;function d3_eventPreventDefault(){d3.event.preventDefault()}function d3_eventSource(){var e=d3.event,s;while(s=e.sourceEvent)e=s;return e}function d3_eventDispatch(target){var dispatch=new d3_dispatch,i=0,n=arguments.length;while(++i<n)dispatch[arguments[i]]=d3_dispatch_event(dispatch);dispatch.of=function(thiz,argumentz){return function(e1){try{var e0=e1.sourceEvent=d3.event;e1.target=target;d3.event=e1;dispatch[e1.type].apply(thiz,argumentz)}finally{d3.event=e0}}};return dispatch}d3.requote=function(s){return s.replace(d3_requote_re,"\\$&")};var d3_requote_re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var d3_subclass={}.__proto__?function(object,prototype){object.__proto__=prototype}:function(object,prototype){for(var property in prototype)object[property]=prototype[property]};function d3_selection(groups){d3_subclass(groups,d3_selectionPrototype);return groups}var d3_select=function(s,n){return n.querySelector(s)},d3_selectAll=function(s,n){return n.querySelectorAll(s)},d3_selectMatches=function(n,s){var d3_selectMatcher=n.matches||n[d3_vendorSymbol(n,"matchesSelector")];d3_selectMatches=function(n,s){return d3_selectMatcher.call(n,s)};return d3_selectMatches(n,s)};if(typeof Sizzle==="function"){d3_select=function(s,n){return Sizzle(s,n)[0]||null};d3_selectAll=Sizzle;d3_selectMatches=Sizzle.matchesSelector}d3.selection=function(){return d3.select(d3_document.documentElement)};var d3_selectionPrototype=d3.selection.prototype=[];d3_selectionPrototype.select=function(selector){var subgroups=[],subgroup,subnode,group,node;selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);subgroup.parentNode=(group=this[j]).parentNode;for(var i=-1,n=group.length;++i<n;){if(node=group[i]){subgroup.push(subnode=selector.call(node,node.__data__,i,j));if(subnode&&"__data__"in node)subnode.__data__=node.__data__}else{subgroup.push(null)}}}return d3_selection(subgroups)};function d3_selection_selector(selector){return typeof selector==="function"?selector:function(){return d3_select(selector,this)}}d3_selectionPrototype.selectAll=function(selector){var subgroups=[],subgroup,node;selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i]){subgroups.push(subgroup=d3_array(selector.call(node,node.__data__,i,j)));subgroup.parentNode=node}}}return d3_selection(subgroups)};function d3_selection_selectorAll(selector){return typeof selector==="function"?selector:function(){return d3_selectAll(selector,this)}}var d3_nsXhtml="http://www.w3.org/1999/xhtml";var d3_nsPrefix={svg:"http://www.w3.org/2000/svg",xhtml:d3_nsXhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:d3_nsPrefix,qualify:function(name){var i=name.indexOf(":"),prefix=name;if(i>=0&&(prefix=name.slice(0,i))!=="xmlns")name=name.slice(i+1);return d3_nsPrefix.hasOwnProperty(prefix)?{space:d3_nsPrefix[prefix],local:name}:name}};d3_selectionPrototype.attr=function(name,value){if(arguments.length<2){if(typeof name==="string"){var node=this.node();name=d3.ns.qualify(name);return name.local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}for(value in name)this.each(d3_selection_attr(value,name[value]));return this}return this.each(d3_selection_attr(name,value))};function d3_selection_attr(name,value){name=d3.ns.qualify(name);function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrConstant(){this.setAttribute(name,value)}function attrConstantNS(){this.setAttributeNS(name.space,name.local,value)}function attrFunction(){var x=value.apply(this,arguments);if(x==null)this.removeAttribute(name);else this.setAttribute(name,x)}function attrFunctionNS(){var x=value.apply(this,arguments);if(x==null)this.removeAttributeNS(name.space,name.local);else this.setAttributeNS(name.space,name.local,x)}return value==null?name.local?attrNullNS:attrNull:typeof value==="function"?name.local?attrFunctionNS:attrFunction:name.local?attrConstantNS:attrConstant}function d3_collapse(s){return s.trim().replace(/\s+/g," ")}d3_selectionPrototype.classed=function(name,value){if(arguments.length<2){if(typeof name==="string"){var node=this.node(),n=(name=d3_selection_classes(name)).length,i=-1;if(value=node.classList){while(++i<n)if(!value.contains(name[i]))return false}else{value=node.getAttribute("class");while(++i<n)if(!d3_selection_classedRe(name[i]).test(value))return false}return true}for(value in name)this.each(d3_selection_classed(value,name[value]));return this}return this.each(d3_selection_classed(name,value))};function d3_selection_classedRe(name){return new RegExp("(?:^|\\s+)"+d3.requote(name)+"(?:\\s+|$)","g")}function d3_selection_classes(name){return(name+"").trim().split(/^|\s+/)}function d3_selection_classed(name,value){name=d3_selection_classes(name).map(d3_selection_classedName);var n=name.length;function classedConstant(){var i=-1;while(++i<n)name[i](this,value)}function classedFunction(){var i=-1,x=value.apply(this,arguments);while(++i<n)name[i](this,x)}return typeof value==="function"?classedFunction:classedConstant}function d3_selection_classedName(name){var re=d3_selection_classedRe(name);return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);var c=node.getAttribute("class")||"";if(value){re.lastIndex=0;if(!re.test(c))node.setAttribute("class",d3_collapse(c+" "+name))}else{node.setAttribute("class",d3_collapse(c.replace(re," ")))}}}d3_selectionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if(typeof name!=="string"){if(n<2)value="";for(priority in name)this.each(d3_selection_style(priority,name[priority],value));return this}if(n<2){var node=this.node();return d3_window(node).getComputedStyle(node,null).getPropertyValue(name)}priority=""}return this.each(d3_selection_style(name,value,priority))};function d3_selection_style(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleConstant(){this.style.setProperty(name,value,priority)}function styleFunction(){var x=value.apply(this,arguments);if(x==null)this.style.removeProperty(name);else this.style.setProperty(name,x,priority)}return value==null?styleNull:typeof value==="function"?styleFunction:styleConstant}d3_selectionPrototype.property=function(name,value){if(arguments.length<2){if(typeof name==="string")return this.node()[name];for(value in name)this.each(d3_selection_property(value,name[value]));return this}return this.each(d3_selection_property(name,value))};function d3_selection_property(name,value){function propertyNull(){delete this[name]}function propertyConstant(){this[name]=value}function propertyFunction(){var x=value.apply(this,arguments);if(x==null)delete this[name];else this[name]=x}return value==null?propertyNull:typeof value==="function"?propertyFunction:propertyConstant}d3_selectionPrototype.text=function(value){return arguments.length?this.each(typeof value==="function"?function(){var v=value.apply(this,arguments);this.textContent=v==null?"":v}:value==null?function(){this.textContent=""}:function(){this.textContent=value}):this.node().textContent};d3_selectionPrototype.html=function(value){return arguments.length?this.each(typeof value==="function"?function(){var v=value.apply(this,arguments);this.innerHTML=v==null?"":v}:value==null?function(){this.innerHTML=""}:function(){this.innerHTML=value}):this.node().innerHTML};d3_selectionPrototype.append=function(name){name=d3_selection_creator(name);return this.select(function(){return this.appendChild(name.apply(this,arguments))})};function d3_selection_creator(name){function create(){var document=this.ownerDocument,namespace=this.namespaceURI;return namespace===d3_nsXhtml&&document.documentElement.namespaceURI===d3_nsXhtml?document.createElement(name):document.createElementNS(namespace,name)}function createNS(){return this.ownerDocument.createElementNS(name.space,name.local)}return typeof name==="function"?name:(name=d3.ns.qualify(name)).local?createNS:create}d3_selectionPrototype.insert=function(name,before){name=d3_selection_creator(name);before=d3_selection_selector(before);return this.select(function(){return this.insertBefore(name.apply(this,arguments),before.apply(this,arguments)||null)})};d3_selectionPrototype.remove=function(){return this.each(d3_selectionRemove)};function d3_selectionRemove(){var parent=this.parentNode;if(parent)parent.removeChild(this)}d3_selectionPrototype.data=function(value,key){var i=-1,n=this.length,group,node;if(!arguments.length){value=new Array(n=(group=this[0]).length);while(++i<n){if(node=group[i]){value[i]=node.__data__}}return value}function bind(group,groupData){var i,n=group.length,m=groupData.length,n0=Math.min(n,m),updateNodes=new Array(m),enterNodes=new Array(m),exitNodes=new Array(n),node,nodeData;if(key){var nodeByKeyValue=new d3_Map,keyValues=new Array(n),keyValue;for(i=-1;++i<n;){if(node=group[i]){if(nodeByKeyValue.has(keyValue=key.call(node,node.__data__,i))){exitNodes[i]=node}else{nodeByKeyValue.set(keyValue,node)}keyValues[i]=keyValue}}for(i=-1;++i<m;){if(!(node=nodeByKeyValue.get(keyValue=key.call(groupData,nodeData=groupData[i],i)))){enterNodes[i]=d3_selection_dataNode(nodeData)}else if(node!==true){updateNodes[i]=node;node.__data__=nodeData}nodeByKeyValue.set(keyValue,true)}for(i=-1;++i<n;){if(i in keyValues&&nodeByKeyValue.get(keyValues[i])!==true){exitNodes[i]=group[i]}}}else{for(i=-1;++i<n0;){node=group[i];nodeData=groupData[i];if(node){node.__data__=nodeData;updateNodes[i]=node}else{enterNodes[i]=d3_selection_dataNode(nodeData)}}for(;i<m;++i){enterNodes[i]=d3_selection_dataNode(groupData[i])}for(;i<n;++i){exitNodes[i]=group[i]}}enterNodes.update=updateNodes;enterNodes.parentNode=updateNodes.parentNode=exitNodes.parentNode=group.parentNode;enter.push(enterNodes);update.push(updateNodes);exit.push(exitNodes)}var enter=d3_selection_enter([]),update=d3_selection([]),exit=d3_selection([]);if(typeof value==="function"){while(++i<n){bind(group=this[i],value.call(group,group.parentNode.__data__,i))}}else{while(++i<n){bind(group=this[i],value)}}update.enter=function(){return enter};update.exit=function(){return exit};return update};function d3_selection_dataNode(data){return{__data__:data}}d3_selectionPrototype.datum=function(value){return arguments.length?this.property("__data__",value):this.property("__data__")};d3_selectionPrototype.filter=function(filter){var subgroups=[],subgroup,group,node;if(typeof filter!=="function")filter=d3_selection_filter(filter);for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);subgroup.parentNode=(group=this[j]).parentNode;for(var i=0,n=group.length;i<n;i++){if((node=group[i])&&filter.call(node,node.__data__,i,j)){subgroup.push(node)}}}return d3_selection(subgroups)};function d3_selection_filter(selector){return function(){return d3_selectMatches(this,selector)}}d3_selectionPrototype.order=function(){for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=group.length-1,next=group[i],node;--i>=0;){if(node=group[i]){if(next&&next!==node.nextSibling)next.parentNode.insertBefore(node,next);next=node}}}return this};d3_selectionPrototype.sort=function(comparator){comparator=d3_selection_sortComparator.apply(this,arguments);for(var j=-1,m=this.length;++j<m;)this[j].sort(comparator);return this.order()};function d3_selection_sortComparator(comparator){if(!arguments.length)comparator=d3_ascending;return function(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}}d3_selectionPrototype.each=function(callback){return d3_selection_each(this,function(node,i,j){callback.call(node,node.__data__,i,j)})};function d3_selection_each(groups,callback){for(var j=0,m=groups.length;j<m;j++){for(var group=groups[j],i=0,n=group.length,node;i<n;i++){if(node=group[i])callback(node,i,j)}}return groups}d3_selectionPrototype.call=function(callback){var args=d3_array(arguments);callback.apply(args[0]=this,args);return this};d3_selectionPrototype.empty=function(){return!this.node()};d3_selectionPrototype.node=function(){for(var j=0,m=this.length;j<m;j++){for(var group=this[j],i=0,n=group.length;i<n;i++){var node=group[i];if(node)return node}}return null};d3_selectionPrototype.size=function(){var n=0;d3_selection_each(this,function(){++n});return n};function d3_selection_enter(selection){d3_subclass(selection,d3_selection_enterPrototype);return selection}var d3_selection_enterPrototype=[];d3.selection.enter=d3_selection_enter;d3.selection.enter.prototype=d3_selection_enterPrototype;d3_selection_enterPrototype.append=d3_selectionPrototype.append;d3_selection_enterPrototype.empty=d3_selectionPrototype.empty;d3_selection_enterPrototype.node=d3_selectionPrototype.node;d3_selection_enterPrototype.call=d3_selectionPrototype.call;d3_selection_enterPrototype.size=d3_selectionPrototype.size;d3_selection_enterPrototype.select=function(selector){var subgroups=[],subgroup,subnode,upgroup,group,node;for(var j=-1,m=this.length;++j<m;){upgroup=(group=this[j]).update;subgroups.push(subgroup=[]);subgroup.parentNode=group.parentNode;for(var i=-1,n=group.length;++i<n;){if(node=group[i]){subgroup.push(upgroup[i]=subnode=selector.call(group.parentNode,node.__data__,i,j));subnode.__data__=node.__data__}else{subgroup.push(null)}}}return d3_selection(subgroups)};d3_selection_enterPrototype.insert=function(name,before){if(arguments.length<2)before=d3_selection_enterInsertBefore(this);return d3_selectionPrototype.insert.call(this,name,before)};function d3_selection_enterInsertBefore(enter){var i0,j0;return function(d,i,j){var group=enter[j].update,n=group.length,node;if(j!=j0)j0=j,i0=0;if(i>=i0)i0=i+1;while(!(node=group[i0])&&++i0<n);return node}}d3.select=function(node){var group;if(typeof node==="string"){group=[d3_select(node,d3_document)];group.parentNode=d3_document.documentElement}else{group=[node];group.parentNode=d3_documentElement(node)}return d3_selection([group])};d3.selectAll=function(nodes){var group;if(typeof nodes==="string"){group=d3_array(d3_selectAll(nodes,d3_document));group.parentNode=d3_document.documentElement}else{group=d3_array(nodes);group.parentNode=null}return d3_selection([group])};d3_selectionPrototype.on=function(type,listener,capture){var n=arguments.length;if(n<3){if(typeof type!=="string"){if(n<2)listener=false;for(capture in type)this.each(d3_selection_on(capture,type[capture],listener));return this}if(n<2)return(n=this.node()["__on"+type])&&n._;capture=false}return this.each(d3_selection_on(type,listener,capture))};function d3_selection_on(type,listener,capture){var name="__on"+type,i=type.indexOf("."),wrap=d3_selection_onListener;if(i>0)type=type.slice(0,i);var filter=d3_selection_onFilters.get(type);if(filter)type=filter,wrap=d3_selection_onFilter;function onRemove(){var l=this[name];if(l){this.removeEventListener(type,l,l.$);delete this[name]}}function onAdd(){var l=wrap(listener,d3_array(arguments));onRemove.call(this);this.addEventListener(type,this[name]=l,l.$=capture);l._=listener}function removeAll(){var re=new RegExp("^__on([^.]+)"+d3.requote(type)+"$"),match;for(var name in this){if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l.$);delete this[name]}}}return i?listener?onAdd:onRemove:listener?d3_noop:removeAll}var d3_selection_onFilters=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(d3_document){d3_selection_onFilters.forEach(function(k){if("on"+k in d3_document)d3_selection_onFilters.remove(k)})}function d3_selection_onListener(listener,argumentz){return function(e){var o=d3.event;d3.event=e;argumentz[0]=this.__data__;try{listener.apply(this,argumentz)}finally{d3.event=o}}}function d3_selection_onFilter(listener,argumentz){var l=d3_selection_onListener(listener,argumentz);return function(e){var target=this,related=e.relatedTarget;if(!related||related!==target&&!(related.compareDocumentPosition(target)&8)){l.call(target,e)}}}var d3_event_dragSelect,d3_event_dragId=0;function d3_event_dragSuppress(node){var name=".dragsuppress-"+ ++d3_event_dragId,click="click"+name,w=d3.select(d3_window(node)).on("touchmove"+name,d3_eventPreventDefault).on("dragstart"+name,d3_eventPreventDefault).on("selectstart"+name,d3_eventPreventDefault);if(d3_event_dragSelect==null){d3_event_dragSelect="onselectstart"in node?false:d3_vendorSymbol(node.style,"userSelect")}if(d3_event_dragSelect){var style=d3_documentElement(node).style,select=style[d3_event_dragSelect];style[d3_event_dragSelect]="none"}return function(suppressClick){w.on(name,null);if(d3_event_dragSelect)style[d3_event_dragSelect]=select;if(suppressClick){var off=function(){w.on(click,null)};w.on(click,function(){d3_eventPreventDefault();off()},true);setTimeout(off,0)}}}d3.mouse=function(container){return d3_mousePoint(container,d3_eventSource())};var d3_mouse_bug44083=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function d3_mousePoint(container,e){if(e.changedTouches)e=e.changedTouches[0];var svg=container.ownerSVGElement||container;if(svg.createSVGPoint){var point=svg.createSVGPoint();if(d3_mouse_bug44083<0){var window=d3_window(container);if(window.scrollX||window.scrollY){svg=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ctm=svg[0][0].getScreenCTM();d3_mouse_bug44083=!(ctm.f||ctm.e);svg.remove()}}if(d3_mouse_bug44083)point.x=e.pageX,point.y=e.pageY;else point.x=e.clientX,point.y=e.clientY;point=point.matrixTransform(container.getScreenCTM().inverse());return[point.x,point.y]}var rect=container.getBoundingClientRect();return[e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop]}d3.touch=function(container,touches,identifier){if(arguments.length<3)identifier=touches,touches=d3_eventSource().changedTouches;if(touches)for(var i=0,n=touches.length,touch;i<n;++i){if((touch=touches[i]).identifier===identifier){return d3_mousePoint(container,touch)}}};d3.behavior.drag=function(){var event=d3_eventDispatch(drag,"drag","dragstart","dragend"),origin=null,mousedown=dragstart(d3_noop,d3.mouse,d3_window,"mousemove","mouseup"),touchstart=dragstart(d3_behavior_dragTouchId,d3.touch,d3_identity,"touchmove","touchend");function drag(){this.on("mousedown.drag",mousedown).on("touchstart.drag",touchstart)}function dragstart(id,position,subject,move,end){return function(){var that=this,target=d3.event.target.correspondingElement||d3.event.target,parent=that.parentNode,dispatch=event.of(that,arguments),dragged=0,dragId=id(),dragName=".drag"+(dragId==null?"":"-"+dragId),dragOffset,dragSubject=d3.select(subject(target)).on(move+dragName,moved).on(end+dragName,ended),dragRestore=d3_event_dragSuppress(target),position0=position(parent,dragId);if(origin){dragOffset=origin.apply(that,arguments);dragOffset=[dragOffset.x-position0[0],dragOffset.y-position0[1]]}else{dragOffset=[0,0]}dispatch({type:"dragstart"});function moved(){var position1=position(parent,dragId),dx,dy;if(!position1)return;dx=position1[0]-position0[0];dy=position1[1]-position0[1];dragged|=dx|dy;position0=position1;dispatch({type:"drag",x:position1[0]+dragOffset[0],y:position1[1]+dragOffset[1],dx:dx,dy:dy})}function ended(){if(!position(parent,dragId))return;dragSubject.on(move+dragName,null).on(end+dragName,null);dragRestore(dragged);dispatch({type:"dragend"})}}}drag.origin=function(x){if(!arguments.length)return origin;origin=x;return drag};return d3.rebind(drag,event,"on")};function d3_behavior_dragTouchId(){return d3.event.changedTouches[0].identifier}d3.touches=function(container,touches){if(arguments.length<2)touches=d3_eventSource().touches;return touches?d3_array(touches).map(function(touch){var point=d3_mousePoint(container,touch);point.identifier=touch.identifier;return point}):[]};var \u03b5=1e-6,\u03b52=\u03b5*\u03b5,\u03c0=Math.PI,\u03c4=2*\u03c0,\u03c4\u03b5=\u03c4-\u03b5,half\u03c0=\u03c0/2,d3_radians=\u03c0/180,d3_degrees=180/\u03c0;function d3_sgn(x){return x>0?1:x<0?-1:0}function d3_cross2d(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function d3_acos(x){return x>1?0:x<-1?\u03c0:Math.acos(x)}function d3_asin(x){return x>1?half\u03c0:x<-1?-half\u03c0:Math.asin(x)}function d3_sinh(x){return((x=Math.exp(x))-1/x)/2}function d3_cosh(x){return((x=Math.exp(x))+1/x)/2}function d3_tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}function d3_haversin(x){return(x=Math.sin(x/2))*x}var \u03c1=Math.SQRT2,\u03c12=2,\u03c14=4;d3.interpolateZoom=function(p0,p1){var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,i,S;if(d2<\u03b52){S=Math.log(w1/w0)/\u03c1;i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(\u03c1*t*S)]}}else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+\u03c14*d2)/(2*w0*\u03c12*d1),b1=(w1*w1-w0*w0-\u03c14*d2)/(2*w1*\u03c12*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/\u03c1;i=function(t){var s=t*S,coshr0=d3_cosh(r0),u=w0/(\u03c12*d1)*(coshr0*d3_tanh(\u03c1*s+r0)-d3_sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/d3_cosh(\u03c1*s+r0)]}}i.duration=S*1e3;return i};d3.behavior.zoom=function(){var view={x:0,y:0,k:1},translate0,center0,center,size=[960,500],scaleExtent=d3_behavior_zoomInfinity,duration=250,zooming=0,mousedown="mousedown.zoom",mousemove="mousemove.zoom",mouseup="mouseup.zoom",mousewheelTimer,touchstart="touchstart.zoom",touchtime,event=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend"),x0,x1,y0,y1;if(!d3_behavior_zoomWheel){d3_behavior_zoomWheel="onwheel"in d3_document?(d3_behavior_zoomDelta=function(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d3_document?(d3_behavior_zoomDelta=function(){return d3.event.wheelDelta},"mousewheel"):(d3_behavior_zoomDelta=function(){return-d3.event.detail},"MozMousePixelScroll")}function zoom(g){g.on(mousedown,mousedowned).on(d3_behavior_zoomWheel+".zoom",mousewheeled).on("dblclick.zoom",dblclicked).on(touchstart,touchstarted)}zoom.event=function(g){g.each(function(){var dispatch=event.of(this,arguments),view1=view;if(d3_transitionInheritId){d3.select(this).transition().each("start.zoom",function(){view=this.__chart__||{x:0,y:0,k:1};zoomstarted(dispatch)}).tween("zoom:zoom",function(){var dx=size[0],dy=size[1],cx=center0?center0[0]:dx/2,cy=center0?center0[1]:dy/2,i=d3.interpolateZoom([(cx-view.x)/view.k,(cy-view.y)/view.k,dx/view.k],[(cx-view1.x)/view1.k,(cy-view1.y)/view1.k,dx/view1.k]);return function(t){var l=i(t),k=dx/l[2];this.__chart__=view={x:cx-l[0]*k,y:cy-l[1]*k,k:k};zoomed(dispatch)}}).each("interrupt.zoom",function(){zoomended(dispatch)}).each("end.zoom",function(){zoomended(dispatch)})}else{this.__chart__=view;zoomstarted(dispatch);zoomed(dispatch);zoomended(dispatch)}})};zoom.translate=function(_){if(!arguments.length)return[view.x,view.y];view={x:+_[0],y:+_[1],k:view.k};rescale();return zoom};zoom.scale=function(_){if(!arguments.length)return view.k;view={x:view.x,y:view.y,k:null};scaleTo(+_);rescale();return zoom};zoom.scaleExtent=function(_){if(!arguments.length)return scaleExtent;scaleExtent=_==null?d3_behavior_zoomInfinity:[+_[0],+_[1]];return zoom};zoom.center=function(_){if(!arguments.length)return center;center=_&&[+_[0],+_[1]];return zoom};zoom.size=function(_){if(!arguments.length)return size;size=_&&[+_[0],+_[1]];return zoom};zoom.duration=function(_){if(!arguments.length)return duration;duration=+_;return zoom};zoom.x=function(z){if(!arguments.length)return x1;x1=z;x0=z.copy();view={x:0,y:0,k:1};return zoom};zoom.y=function(z){if(!arguments.length)return y1;y1=z;y0=z.copy();view={x:0,y:0,k:1};return zoom};function location(p){return[(p[0]-view.x)/view.k,(p[1]-view.y)/view.k]}function point(l){return[l[0]*view.k+view.x,l[1]*view.k+view.y]}function scaleTo(s){view.k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],s))}function translateTo(p,l){l=point(l);view.x+=p[0]-l[0];view.y+=p[1]-l[1]}function zoomTo(that,p,l,k){that.__chart__={x:view.x,y:view.y,k:view.k};scaleTo(Math.pow(2,k));translateTo(center0=p,l);that=d3.select(that);if(duration>0)that=that.transition().duration(duration);that.call(zoom.event)}function rescale(){if(x1)x1.domain(x0.range().map(function(x){return(x-view.x)/view.k}).map(x0.invert));if(y1)y1.domain(y0.range().map(function(y){return(y-view.y)/view.k}).map(y0.invert))}function zoomstarted(dispatch){if(!zooming++)dispatch({type:"zoomstart"})}function zoomed(dispatch){rescale();dispatch({type:"zoom",scale:view.k,translate:[view.x,view.y]})}function zoomended(dispatch){if(!--zooming)dispatch({type:"zoomend"}),center0=null}function mousedowned(){var that=this,dispatch=event.of(that,arguments),dragged=0,subject=d3.select(d3_window(that)).on(mousemove,moved).on(mouseup,ended),location0=location(d3.mouse(that)),dragRestore=d3_event_dragSuppress(that);d3_selection_interrupt.call(that);zoomstarted(dispatch);function moved(){dragged=1;translateTo(d3.mouse(that),location0);zoomed(dispatch)}function ended(){subject.on(mousemove,null).on(mouseup,null);dragRestore(dragged);zoomended(dispatch)}}function touchstarted(){var that=this,dispatch=event.of(that,arguments),locations0={},distance0=0,scale0,zoomName=".zoom-"+d3.event.changedTouches[0].identifier,touchmove="touchmove"+zoomName,touchend="touchend"+zoomName,targets=[],subject=d3.select(that),dragRestore=d3_event_dragSuppress(that);started();zoomstarted(dispatch);subject.on(mousedown,null).on(touchstart,started);function relocate(){var touches=d3.touches(that);scale0=view.k;touches.forEach(function(t){if(t.identifier in locations0)locations0[t.identifier]=location(t)});return touches}function started(){var target=d3.event.target;d3.select(target).on(touchmove,moved).on(touchend,ended);targets.push(target);var changed=d3.event.changedTouches;for(var i=0,n=changed.length;i<n;++i){locations0[changed[i].identifier]=null}var touches=relocate(),now=Date.now();if(touches.length===1){if(now-touchtime<500){var p=touches[0];zoomTo(that,p,locations0[p.identifier],Math.floor(Math.log(view.k)/Math.LN2)+1);d3_eventPreventDefault()}touchtime=now}else if(touches.length>1){var p=touches[0],q=touches[1],dx=p[0]-q[0],dy=p[1]-q[1];distance0=dx*dx+dy*dy}}function moved(){var touches=d3.touches(that),p0,l0,p1,l1;d3_selection_interrupt.call(that);for(var i=0,n=touches.length;i<n;++i,l1=null){p1=touches[i];if(l1=locations0[p1.identifier]){if(l0)break;p0=p1,l0=l1}}if(l1){var distance1=(distance1=p1[0]-p0[0])*distance1+(distance1=p1[1]-p0[1])*distance1,scale1=distance0&&Math.sqrt(distance1/distance0);p0=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2];l0=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2];scaleTo(scale1*scale0)}touchtime=null;translateTo(p0,l0);zoomed(dispatch)}function ended(){if(d3.event.touches.length){var changed=d3.event.changedTouches;for(var i=0,n=changed.length;i<n;++i){delete locations0[changed[i].identifier]}for(var identifier in locations0){return void relocate()}}d3.selectAll(targets).on(zoomName,null);subject.on(mousedown,mousedowned).on(touchstart,touchstarted);dragRestore();zoomended(dispatch)}}function mousewheeled(){var dispatch=event.of(this,arguments);if(mousewheelTimer)clearTimeout(mousewheelTimer);else d3_selection_interrupt.call(this),translate0=location(center0=center||d3.mouse(this)),zoomstarted(dispatch);mousewheelTimer=setTimeout(function(){mousewheelTimer=null;zoomended(dispatch)},50);d3_eventPreventDefault();scaleTo(Math.pow(2,d3_behavior_zoomDelta()*.002)*view.k);translateTo(center0,translate0);zoomed(dispatch)}function dblclicked(){var p=d3.mouse(this),k=Math.log(view.k)/Math.LN2;zoomTo(this,p,location(p),d3.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1)}return d3.rebind(zoom,event,"on")};var d3_behavior_zoomInfinity=[0,Infinity],d3_behavior_zoomDelta,d3_behavior_zoomWheel;d3.color=d3_color;function d3_color(){}d3_color.prototype.toString=function(){return this.rgb()+""};d3.hsl=d3_hsl;function d3_hsl(h,s,l){return this instanceof d3_hsl?void(this.h=+h,this.s=+s,this.l=+l):arguments.length<2?h instanceof d3_hsl?new d3_hsl(h.h,h.s,h.l):d3_rgb_parse(""+h,d3_rgb_hsl,d3_hsl):new d3_hsl(h,s,l)}var d3_hslPrototype=d3_hsl.prototype=new d3_color;d3_hslPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);return new d3_hsl(this.h,this.s,this.l/k)};d3_hslPrototype.darker=function(k){k=Math.pow(.7,arguments.length?k:1);return new d3_hsl(this.h,this.s,k*this.l)};d3_hslPrototype.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)};function d3_hsl_rgb(h,s,l){var m1,m2;h=isNaN(h)?0:(h%=360)<0?h+360:h;s=isNaN(s)?0:s<0?0:s>1?1:s;l=l<0?0:l>1?1:l;m2=l<=.5?l*(1+s):l+s-l*s;m1=2*l-m2;function v(h){if(h>360)h-=360;else if(h<0)h+=360;if(h<60)return m1+(m2-m1)*h/60;if(h<180)return m2;if(h<240)return m1+(m2-m1)*(240-h)/60;return m1}function vv(h){return Math.round(v(h)*255)}return new d3_rgb(vv(h+120),vv(h),vv(h-120))}d3.hcl=d3_hcl;function d3_hcl(h,c,l){return this instanceof d3_hcl?void(this.h=+h,this.c=+c,this.l=+l):arguments.length<2?h instanceof d3_hcl?new d3_hcl(h.h,h.c,h.l):h instanceof d3_lab?d3_lab_hcl(h.l,h.a,h.b):d3_lab_hcl((h=d3_rgb_lab((h=d3.rgb(h)).r,h.g,h.b)).l,h.a,h.b):new d3_hcl(h,c,l)}var d3_hclPrototype=d3_hcl.prototype=new d3_color;d3_hclPrototype.brighter=function(k){return new d3_hcl(this.h,this.c,Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)))};d3_hclPrototype.darker=function(k){return new d3_hcl(this.h,this.c,Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)))};d3_hclPrototype.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()};function d3_hcl_lab(h,c,l){if(isNaN(h))h=0;if(isNaN(c))c=0;return new d3_lab(l,Math.cos(h*=d3_radians)*c,Math.sin(h)*c)}d3.lab=d3_lab;function d3_lab(l,a,b){return this instanceof d3_lab?void(this.l=+l,this.a=+a,this.b=+b):arguments.length<2?l instanceof d3_lab?new d3_lab(l.l,l.a,l.b):l instanceof d3_hcl?d3_hcl_lab(l.h,l.c,l.l):d3_rgb_lab((l=d3_rgb(l)).r,l.g,l.b):new d3_lab(l,a,b)}var d3_lab_K=18;var d3_lab_X=.95047,d3_lab_Y=1,d3_lab_Z=1.08883;var d3_labPrototype=d3_lab.prototype=new d3_color;d3_labPrototype.brighter=function(k){return new d3_lab(Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)),this.a,this.b)};d3_labPrototype.darker=function(k){return new d3_lab(Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)),this.a,this.b)};d3_labPrototype.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)};function d3_lab_rgb(l,a,b){var y=(l+16)/116,x=y+a/500,z=y-b/200;x=d3_lab_xyz(x)*d3_lab_X;y=d3_lab_xyz(y)*d3_lab_Y;z=d3_lab_xyz(z)*d3_lab_Z;return new d3_rgb(d3_xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z),d3_xyz_rgb(-.969266*x+1.8760108*y+.041556*z),d3_xyz_rgb(.0556434*x-.2040259*y+1.0572252*z))}function d3_lab_hcl(l,a,b){return l>0?new d3_hcl(Math.atan2(b,a)*d3_degrees,Math.sqrt(a*a+b*b),l):new d3_hcl(NaN,NaN,l)}function d3_lab_xyz(x){return x>.206893034?x*x*x:(x-4/29)/7.787037}function d3_xyz_lab(x){return x>.008856?Math.pow(x,1/3):7.787037*x+4/29}function d3_xyz_rgb(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}d3.rgb=d3_rgb;function d3_rgb(r,g,b){return this instanceof d3_rgb?void(this.r=~~r,this.g=~~g,this.b=~~b):arguments.length<2?r instanceof d3_rgb?new d3_rgb(r.r,r.g,r.b):d3_rgb_parse(""+r,d3_rgb,d3_hsl_rgb):new d3_rgb(r,g,b)}function d3_rgbNumber(value){return new d3_rgb(value>>16,value>>8&255,value&255)}function d3_rgbString(value){return d3_rgbNumber(value)+""}var d3_rgbPrototype=d3_rgb.prototype=new d3_color;d3_rgbPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);var r=this.r,g=this.g,b=this.b,i=30;if(!r&&!g&&!b)return new d3_rgb(i,i,i);if(r&&r<i)r=i;if(g&&g<i)g=i;if(b&&b<i)b=i;return new d3_rgb(Math.min(255,r/k),Math.min(255,g/k),Math.min(255,b/k))};d3_rgbPrototype.darker=function(k){k=Math.pow(.7,arguments.length?k:1);return new d3_rgb(k*this.r,k*this.g,k*this.b)};d3_rgbPrototype.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)};d3_rgbPrototype.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};function d3_rgb_hex(v){return v<16?"0"+Math.max(0,v).toString(16):Math.min(255,v).toString(16)}function d3_rgb_parse(format,rgb,hsl){var r=0,g=0,b=0,m1,m2,color;m1=/([a-z]+)\((.*)\)/.exec(format=format.toLowerCase());if(m1){m2=m1[2].split(",");switch(m1[1]){case"hsl":{return hsl(parseFloat(m2[0]),parseFloat(m2[1])/100,parseFloat(m2[2])/100)}case"rgb":{return rgb(d3_rgb_parseNumber(m2[0]),d3_rgb_parseNumber(m2[1]),d3_rgb_parseNumber(m2[2]))}}}if(color=d3_rgb_names.get(format)){return rgb(color.r,color.g,color.b)}if(format!=null&&format.charAt(0)==="#"&&!isNaN(color=parseInt(format.slice(1),16))){if(format.length===4){r=(color&3840)>>4;r=r>>4|r;g=color&240;g=g>>4|g;b=color&15;b=b<<4|b}else if(format.length===7){r=(color&16711680)>>16;g=(color&65280)>>8;b=color&255}}return rgb(r,g,b)}function d3_rgb_hsl(r,g,b){var min=Math.min(r/=255,g/=255,b/=255),max=Math.max(r,g,b),d=max-min,h,s,l=(max+min)/2;if(d){s=l<.5?d/(max+min):d/(2-max-min);if(r==max)h=(g-b)/d+(g<b?6:0);else if(g==max)h=(b-r)/d+2;else h=(r-g)/d+4;h*=60}else{h=NaN;s=l>0&&l<1?0:h}return new d3_hsl(h,s,l)}function d3_rgb_lab(r,g,b){r=d3_rgb_xyz(r);g=d3_rgb_xyz(g);b=d3_rgb_xyz(b);var x=d3_xyz_lab((.4124564*r+.3575761*g+.1804375*b)/d3_lab_X),y=d3_xyz_lab((.2126729*r+.7151522*g+.072175*b)/d3_lab_Y),z=d3_xyz_lab((.0193339*r+.119192*g+.9503041*b)/d3_lab_Z);return d3_lab(116*y-16,500*(x-y),200*(y-z))}function d3_rgb_xyz(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function d3_rgb_parseNumber(c){var f=parseFloat(c);return c.charAt(c.length-1)==="%"?Math.round(f*2.55):f}var d3_rgb_names=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});d3_rgb_names.forEach(function(key,value){d3_rgb_names.set(key,d3_rgbNumber(value))});function d3_functor(v){return typeof v==="function"?v:function(){return v}}d3.functor=d3_functor;d3.xhr=d3_xhrType(d3_identity);function d3_xhrType(response){return function(url,mimeType,callback){if(arguments.length===2&&typeof mimeType==="function")callback=mimeType,mimeType=null;return d3_xhr(url,mimeType,response,callback)}}function d3_xhr(url,mimeType,response,callback){var xhr={},dispatch=d3.dispatch("beforesend","progress","load","error"),headers={},request=new XMLHttpRequest,responseType=null;if(this.XDomainRequest&&!("withCredentials"in request)&&/^(http(s)?:)?\/\//.test(url))request=new XDomainRequest;"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){request.readyState>3&&respond()};function respond(){var status=request.status,result;if(!status&&d3_xhrHasResponse(request)||status>=200&&status<300||status===304){try{result=response.call(xhr,request)}catch(e){dispatch.error.call(xhr,e);return}dispatch.load.call(xhr,result)}else{dispatch.error.call(xhr,request)}}request.onprogress=function(event){var o=d3.event;d3.event=event;try{dispatch.progress.call(xhr,request)}finally{d3.event=o}};xhr.header=function(name,value){name=(name+"").toLowerCase();if(arguments.length<2)return headers[name];if(value==null)delete headers[name];else headers[name]=value+"";return xhr};xhr.mimeType=function(value){if(!arguments.length)return mimeType;mimeType=value==null?null:value+"";return xhr};xhr.responseType=function(value){if(!arguments.length)return responseType;responseType=value;return xhr};xhr.response=function(value){response=value;return xhr};["get","post"].forEach(function(method){xhr[method]=function(){return xhr.send.apply(xhr,[method].concat(d3_array(arguments)))}});xhr.send=function(method,data,callback){if(arguments.length===2&&typeof data==="function")callback=data,data=null;request.open(method,url,true);if(mimeType!=null&&!("accept"in headers))headers["accept"]=mimeType+",*/*";if(request.setRequestHeader)for(var name in headers)request.setRequestHeader(name,headers[name]);if(mimeType!=null&&request.overrideMimeType)request.overrideMimeType(mimeType);if(responseType!=null)request.responseType=responseType;if(callback!=null)xhr.on("error",callback).on("load",function(request){callback(null,request)});dispatch.beforesend.call(xhr,request);request.send(data==null?null:data);return xhr};xhr.abort=function(){request.abort();return xhr};d3.rebind(xhr,dispatch,"on");return callback==null?xhr:xhr.get(d3_xhr_fixCallback(callback))}function d3_xhr_fixCallback(callback){return callback.length===1?function(error,request){callback(error==null?request:null)}:callback}function d3_xhrHasResponse(request){var type=request.responseType;return type&&type!=="text"?request.response:request.responseText}d3.dsv=function(delimiter,mimeType){var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);function dsv(url,row,callback){if(arguments.length<3)callback=row,row=null;var xhr=d3_xhr(url,mimeType,row==null?response:typedResponse(row),callback);xhr.row=function(_){return arguments.length?xhr.response((row=_)==null?response:typedResponse(_)):row};return xhr}function response(request){return dsv.parse(request.responseText)}function typedResponse(f){return function(request){return dsv.parse(request.responseText,f)}}dsv.parse=function(text,f){var o;return dsv.parseRows(text,function(row,i){if(o)return o(row,i-1);var a=new Function("d","return {"+row.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a})};dsv.parseRows=function(text,f){var EOL={},EOF={},rows=[],N=text.length,I=0,n=0,t,eol;function token(){if(I>=N)return EOF;if(eol)return eol=false,EOL;var j=I;if(text.charCodeAt(j)===34){var i=j;while(i++<N){if(text.charCodeAt(i)===34){if(text.charCodeAt(i+1)!==34)break;++i}}I=i+2;var c=text.charCodeAt(i+1);if(c===13){eol=true;if(text.charCodeAt(i+2)===10)++I}else if(c===10){eol=true}return text.slice(j+1,i).replace(/""/g,'"')}while(I<N){var c=text.charCodeAt(I++),k=1;if(c===10)eol=true;else if(c===13){eol=true;if(text.charCodeAt(I)===10)++I,++k}else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}while((t=token())!==EOF){var a=[];while(t!==EOL&&t!==EOF){a.push(t);t=token()}if(f&&(a=f(a,n++))==null)continue;rows.push(a)}return rows};dsv.format=function(rows){if(Array.isArray(rows[0]))return dsv.formatRows(rows);var fieldSet=new d3_Set,fields=[];rows.forEach(function(row){for(var field in row){if(!fieldSet.has(field)){fields.push(fieldSet.add(field))}}});return[fields.map(formatValue).join(delimiter)].concat(rows.map(function(row){return fields.map(function(field){return formatValue(row[field])}).join(delimiter)})).join("\n")};dsv.formatRows=function(rows){return rows.map(formatRow).join("\n")};function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}return dsv};d3.csv=d3.dsv(",","text/csv");d3.tsv=d3.dsv("\t","text/tab-separated-values");var d3_timer_queueHead,d3_timer_queueTail,d3_timer_interval,d3_timer_timeout,d3_timer_frame=this[d3_vendorSymbol(this,"requestAnimationFrame")]||function(callback){setTimeout(callback,17)};d3.timer=function(){d3_timer.apply(this,arguments)};function d3_timer(callback,delay,then){var n=arguments.length;if(n<2)delay=0;if(n<3)then=Date.now();var time=then+delay,timer={c:callback,t:time,n:null};if(d3_timer_queueTail)d3_timer_queueTail.n=timer;else d3_timer_queueHead=timer;d3_timer_queueTail=timer;if(!d3_timer_interval){d3_timer_timeout=clearTimeout(d3_timer_timeout);d3_timer_interval=1;d3_timer_frame(d3_timer_step)}return timer}function d3_timer_step(){var now=d3_timer_mark(),delay=d3_timer_sweep()-now;if(delay>24){if(isFinite(delay)){clearTimeout(d3_timer_timeout);d3_timer_timeout=setTimeout(d3_timer_step,delay)}d3_timer_interval=0}else{d3_timer_interval=1;d3_timer_frame(d3_timer_step)}}d3.timer.flush=function(){d3_timer_mark();d3_timer_sweep()};function d3_timer_mark(){var now=Date.now(),timer=d3_timer_queueHead;while(timer){if(now>=timer.t&&timer.c(now-timer.t))timer.c=null;timer=timer.n}return now}function d3_timer_sweep(){var t0,t1=d3_timer_queueHead,time=Infinity;while(t1){if(t1.c){if(t1.t<time)time=t1.t;t1=(t0=t1).n}else{t1=t0?t0.n=t1.n:d3_timer_queueHead=t1.n}}d3_timer_queueTail=t0;return time}function d3_format_precision(x,p){return p-(x?Math.ceil(Math.log(x)/Math.LN10):1)}d3.round=function(x,n){return n?Math.round(x*(n=Math.pow(10,n)))/n:Math.round(x)};var d3_formatPrefixes=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(d3_formatPrefix);d3.formatPrefix=function(value,precision){var i=0;if(value=+value){if(value<0)value*=-1;if(precision)value=d3.round(value,d3_format_precision(value,precision));i=1+Math.floor(1e-12+Math.log(value)/Math.LN10);i=Math.max(-24,Math.min(24,Math.floor((i-1)/3)*3))}return d3_formatPrefixes[8+i/3]};function d3_formatPrefix(d,i){var k=Math.pow(10,abs(8-i)*3);return{scale:i>8?function(d){return d/k}:function(d){return d*k},symbol:d}}function d3_locale_numberFormat(locale){var locale_decimal=locale.decimal,locale_thousands=locale.thousands,locale_grouping=locale.grouping,locale_currency=locale.currency,formatGroup=locale_grouping&&locale_thousands?function(value,width){var i=value.length,t=[],j=0,g=locale_grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring(i-=g,i+g));if((length+=g+1)>width)break;g=locale_grouping[j=(j+1)%locale_grouping.length]}return t.reverse().join(locale_thousands)}:d3_identity;return function(specifier){var match=d3_format_re.exec(specifier),fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zfill=match[5],width=+match[6],comma=match[7],precision=match[8],type=match[9],scale=1,prefix="",suffix="",integer=false,exponent=true;if(precision)precision=+precision.substring(1);if(zfill||fill==="0"&&align==="="){zfill=fill="0";align="="}switch(type){case"n":comma=true;type="g";break;case"%":scale=100;suffix="%";type="f";break;case"p":scale=100;suffix="%";type="r";break;case"b":case"o":case"x":case"X":if(symbol==="#")prefix="0"+type.toLowerCase();case"c":exponent=false;case"d":integer=true;precision=0;break;case"s":scale=-1;type="r";break}if(symbol==="$")prefix=locale_currency[0],suffix=locale_currency[1];if(type=="r"&&!precision)type="g";if(precision!=null){if(type=="g")precision=Math.max(1,Math.min(21,precision));else if(type=="e"||type=="f")precision=Math.max(0,Math.min(20,precision))}type=d3_format_types.get(type)||d3_format_typeDefault;var zcomma=zfill&&comma;return function(value){var fullSuffix=suffix;if(integer&&value%1)return"";var negative=value<0||value===0&&1/value<0?(value=-value,"-"):sign==="-"?"":sign;if(scale<0){var unit=d3.formatPrefix(value,precision);value=unit.scale(value);fullSuffix=unit.symbol+suffix}else{value*=scale}value=type(value,precision);var i=value.lastIndexOf("."),before,after;if(i<0){var j=exponent?value.lastIndexOf("e"):-1;if(j<0)before=value,after="";else before=value.substring(0,j),after=value.substring(j)}else{before=value.substring(0,i);after=locale_decimal+value.substring(i+1)}if(!zfill&&comma)before=formatGroup(before,Infinity);var length=prefix.length+before.length+after.length+(zcomma?0:negative.length),padding=length<width?new Array(length=width-length+1).join(fill):"";if(zcomma)before=formatGroup(padding+before,padding.length?width-after.length:Infinity);negative+=prefix;value=before+after;return(align==="<"?negative+value+padding:align===">"?padding+negative+value:align==="^"?padding.substring(0,length>>=1)+negative+value+padding.substring(length):negative+(zcomma?value:padding+value))+fullSuffix}}}var d3_format_re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var d3_format_types=d3.map({b:function(x){return x.toString(2)},c:function(x){return String.fromCharCode(x)},o:function(x){return x.toString(8)},x:function(x){return x.toString(16)},X:function(x){return x.toString(16).toUpperCase()},g:function(x,p){return x.toPrecision(p)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},r:function(x,p){return(x=d3.round(x,d3_format_precision(x,p))).toFixed(Math.max(0,Math.min(20,d3_format_precision(x*(1+1e-15),p))))}});function d3_format_typeDefault(x){return x+""}var d3_time=d3.time={},d3_date=Date;function d3_date_utc(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}d3_date_utc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){d3_time_prototype.setUTCDate.apply(this._,arguments)},setDay:function(){d3_time_prototype.setUTCDay.apply(this._,arguments)},setFullYear:function(){d3_time_prototype.setUTCFullYear.apply(this._,arguments)},setHours:function(){d3_time_prototype.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){d3_time_prototype.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){d3_time_prototype.setUTCMinutes.apply(this._,arguments)},setMonth:function(){d3_time_prototype.setUTCMonth.apply(this._,arguments)},setSeconds:function(){d3_time_prototype.setUTCSeconds.apply(this._,arguments)},setTime:function(){d3_time_prototype.setTime.apply(this._,arguments)}};var d3_time_prototype=Date.prototype;function d3_time_interval(local,step,number){function round(date){var d0=local(date),d1=offset(d0,1);return date-d0<d1-date?d0:d1}function ceil(date){step(date=local(new d3_date(date-1)),1);return date}function offset(date,k){step(date=new d3_date(+date),k);return date}function range(t0,t1,dt){var time=ceil(t0),times=[];if(dt>1){while(time<t1){if(!(number(time)%dt))times.push(new Date(+time));step(time,1)}}else{while(time<t1)times.push(new Date(+time)),step(time,1)}return times}function range_utc(t0,t1,dt){try{d3_date=d3_date_utc;var utc=new d3_date_utc;utc._=t0;return range(utc,t1,dt)}finally{d3_date=Date}}local.floor=local;local.round=round;local.ceil=ceil;local.offset=offset;local.range=range;var utc=local.utc=d3_time_interval_utc(local);utc.floor=utc;utc.round=d3_time_interval_utc(round);utc.ceil=d3_time_interval_utc(ceil);utc.offset=d3_time_interval_utc(offset);utc.range=range_utc;return local}function d3_time_interval_utc(method){return function(date,k){try{d3_date=d3_date_utc;var utc=new d3_date_utc;utc._=date;return method(utc,k)._}finally{d3_date=Date}}}d3_time.year=d3_time_interval(function(date){date=d3_time.day(date);date.setMonth(0,1);return date},function(date,offset){date.setFullYear(date.getFullYear()+offset)},function(date){return date.getFullYear()});d3_time.years=d3_time.year.range;d3_time.years.utc=d3_time.year.utc.range;d3_time.day=d3_time_interval(function(date){var day=new d3_date(2e3,0);day.setFullYear(date.getFullYear(),date.getMonth(),date.getDate());return day},function(date,offset){date.setDate(date.getDate()+offset)},function(date){return date.getDate()-1});d3_time.days=d3_time.day.range;d3_time.days.utc=d3_time.day.utc.range;d3_time.dayOfYear=function(date){var year=d3_time.year(date);return Math.floor((date-year-(date.getTimezoneOffset()-year.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(day,i){i=7-i;var interval=d3_time[day]=d3_time_interval(function(date){(date=d3_time.day(date)).setDate(date.getDate()-(date.getDay()+i)%7);return date},function(date,offset){date.setDate(date.getDate()+Math.floor(offset)*7)},function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)-(day!==i)});d3_time[day+"s"]=interval.range;d3_time[day+"s"].utc=interval.utc.range;d3_time[day+"OfYear"]=function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)}});d3_time.week=d3_time.sunday;d3_time.weeks=d3_time.sunday.range;d3_time.weeks.utc=d3_time.sunday.utc.range;d3_time.weekOfYear=d3_time.sundayOfYear;function d3_locale_timeFormat(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_days=locale.days,locale_shortDays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;function d3_time_format(template){var n=template.length;function format(date){var string=[],i=-1,j=0,c,p,f;while(++i<n){if(template.charCodeAt(i)===37){string.push(template.slice(j,i));if((p=d3_time_formatPads[c=template.charAt(++i)])!=null)c=template.charAt(++i);if(f=d3_time_formats[c])c=f(date,p==null?c==="e"?" ":"0":p);string.push(c);j=i+1}}string.push(template.slice(j,i));return string.join("")}format.parse=function(string){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=d3_time_parse(d,template,string,0);if(i!=string.length)return null;if("p"in d)d.H=d.H%12+d.p*12;var localZ=d.Z!=null&&d3_date!==d3_date_utc,date=new(localZ?d3_date_utc:d3_date);if("j"in d)date.setFullYear(d.y,0,d.j);else if("W"in d||"U"in d){if(!("w"in d))d.w="W"in d?1:0;date.setFullYear(d.y,0,1);date.setFullYear(d.y,0,"W"in d?(d.w+6)%7+d.W*7-(date.getDay()+5)%7:d.w+d.U*7-(date.getDay()+6)%7)}else date.setFullYear(d.y,d.m,d.d);date.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return localZ?date._:date};format.toString=function(){return template};return format}function d3_time_parse(date,template,string,j){var c,p,t,i=0,n=template.length,m=string.length;while(i<n){if(j>=m)return-1;c=template.charCodeAt(i++);if(c===37){t=template.charAt(i++);p=d3_time_parsers[t in d3_time_formatPads?template.charAt(i++):t];if(!p||(j=p(date,string,j))<0)return-1}else if(c!=string.charCodeAt(j++)){return-1}}return j}d3_time_format.utc=function(template){var local=d3_time_format(template);function format(date){try{d3_date=d3_date_utc;var utc=new d3_date;utc._=date;return local(utc)}finally{d3_date=Date}}format.parse=function(string){try{d3_date=d3_date_utc;var date=local.parse(string);return date&&date._}finally{d3_date=Date}};format.toString=local.toString;return format};d3_time_format.multi=d3_time_format.utc.multi=d3_time_formatMulti;var d3_time_periodLookup=d3.map(),d3_time_dayRe=d3_time_formatRe(locale_days),d3_time_dayLookup=d3_time_formatLookup(locale_days),d3_time_dayAbbrevRe=d3_time_formatRe(locale_shortDays),d3_time_dayAbbrevLookup=d3_time_formatLookup(locale_shortDays),d3_time_monthRe=d3_time_formatRe(locale_months),d3_time_monthLookup=d3_time_formatLookup(locale_months),d3_time_monthAbbrevRe=d3_time_formatRe(locale_shortMonths),d3_time_monthAbbrevLookup=d3_time_formatLookup(locale_shortMonths);locale_periods.forEach(function(p,i){d3_time_periodLookup.set(p.toLowerCase(),i)});var d3_time_formats={a:function(d){return locale_shortDays[d.getDay()]},A:function(d){return locale_days[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:d3_time_format(locale_dateTime),d:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},e:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},H:function(d,p){return d3_time_formatPad(d.getHours(),p,2)},I:function(d,p){return d3_time_formatPad(d.getHours()%12||12,p,2)},j:function(d,p){return d3_time_formatPad(1+d3_time.dayOfYear(d),p,3)},L:function(d,p){return d3_time_formatPad(d.getMilliseconds(),p,3)},m:function(d,p){return d3_time_formatPad(d.getMonth()+1,p,2)},M:function(d,p){return d3_time_formatPad(d.getMinutes(),p,2)},p:function(d){return locale_periods[+(d.getHours()>=12)]},S:function(d,p){return d3_time_formatPad(d.getSeconds(),p,2)},U:function(d,p){return d3_time_formatPad(d3_time.sundayOfYear(d),p,2)},w:function(d){return d.getDay()},W:function(d,p){return d3_time_formatPad(d3_time.mondayOfYear(d),p,2)},x:d3_time_format(locale_date),X:d3_time_format(locale_time),y:function(d,p){return d3_time_formatPad(d.getFullYear()%100,p,2)},Y:function(d,p){return d3_time_formatPad(d.getFullYear()%1e4,p,4)},Z:d3_time_zone,"%":function(){return"%"}};var d3_time_parsers={a:d3_time_parseWeekdayAbbrev,A:d3_time_parseWeekday,b:d3_time_parseMonthAbbrev,B:d3_time_parseMonth,c:d3_time_parseLocaleFull,d:d3_time_parseDay,e:d3_time_parseDay,H:d3_time_parseHour24,I:d3_time_parseHour24,j:d3_time_parseDayOfYear,L:d3_time_parseMilliseconds,m:d3_time_parseMonthNumber,M:d3_time_parseMinutes,p:d3_time_parseAmPm,S:d3_time_parseSeconds,U:d3_time_parseWeekNumberSunday,w:d3_time_parseWeekdayNumber,W:d3_time_parseWeekNumberMonday,x:d3_time_parseLocaleDate,X:d3_time_parseLocaleTime,y:d3_time_parseYear,Y:d3_time_parseFullYear,Z:d3_time_parseZone,"%":d3_time_parseLiteralPercent};function d3_time_parseWeekdayAbbrev(date,string,i){d3_time_dayAbbrevRe.lastIndex=0;var n=d3_time_dayAbbrevRe.exec(string.slice(i));return n?(date.w=d3_time_dayAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseWeekday(date,string,i){d3_time_dayRe.lastIndex=0;var n=d3_time_dayRe.exec(string.slice(i));return n?(date.w=d3_time_dayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonthAbbrev(date,string,i){d3_time_monthAbbrevRe.lastIndex=0;var n=d3_time_monthAbbrevRe.exec(string.slice(i));return n?(date.m=d3_time_monthAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonth(date,string,i){d3_time_monthRe.lastIndex=0;var n=d3_time_monthRe.exec(string.slice(i));return n?(date.m=d3_time_monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseLocaleFull(date,string,i){return d3_time_parse(date,d3_time_formats.c.toString(),string,i)}function d3_time_parseLocaleDate(date,string,i){return d3_time_parse(date,d3_time_formats.x.toString(),string,i)}function d3_time_parseLocaleTime(date,string,i){return d3_time_parse(date,d3_time_formats.X.toString(),string,i)}function d3_time_parseAmPm(date,string,i){var n=d3_time_periodLookup.get(string.slice(i,i+=2).toLowerCase());return n==null?-1:(date.p=n,i)}return d3_time_format}var d3_time_formatPads={"-":"",_:" ",0:"0"},d3_time_numberRe=/^\s*\d+/,d3_time_percentRe=/^%/;function d3_time_formatPad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function d3_time_formatRe(names){return new RegExp("^(?:"+names.map(d3.requote).join("|")+")","i")}function d3_time_formatLookup(names){var map=new d3_Map,i=-1,n=names.length;while(++i<n)map.set(names[i].toLowerCase(),i);return map}function d3_time_parseWeekdayNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+1));return n?(date.w=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberSunday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.U=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberMonday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.W=+n[0],i+n[0].length):-1}function d3_time_parseFullYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+4));return n?(date.y=+n[0],i+n[0].length):-1}function d3_time_parseYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.y=d3_time_expandYear(+n[0]),i+n[0].length):-1}function d3_time_parseZone(date,string,i){return/^[+-]\d{4}$/.test(string=string.slice(i,i+5))?(date.Z=-string,i+5):-1}function d3_time_expandYear(d){return d+(d>68?1900:2e3)}function d3_time_parseMonthNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.m=n[0]-1,i+n[0].length):-1}function d3_time_parseDay(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.d=+n[0],i+n[0].length):-1}function d3_time_parseDayOfYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.j=+n[0],i+n[0].length):-1}function d3_time_parseHour24(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.H=+n[0],i+n[0].length):-1}function d3_time_parseMinutes(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.M=+n[0],i+n[0].length):-1}function d3_time_parseSeconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.S=+n[0],i+n[0].length):-1}function d3_time_parseMilliseconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.L=+n[0],i+n[0].length):-1}function d3_time_zone(d){var z=d.getTimezoneOffset(),zs=z>0?"-":"+",zh=abs(z)/60|0,zm=abs(z)%60;return zs+d3_time_formatPad(zh,"0",2)+d3_time_formatPad(zm,"0",2)}function d3_time_parseLiteralPercent(date,string,i){d3_time_percentRe.lastIndex=0;var n=d3_time_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function d3_time_formatMulti(formats){var n=formats.length,i=-1;while(++i<n)formats[i][0]=this(formats[i][0]);return function(date){var i=0,f=formats[i];while(!f[1](date))f=formats[++i];return f[0](date)}}d3.locale=function(locale){return{numberFormat:d3_locale_numberFormat(locale),timeFormat:d3_locale_timeFormat(locale)}};var d3_locale_enUS=d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});d3.format=d3_locale_enUS.numberFormat;d3.geo={};function d3_adder(){}d3_adder.prototype={s:0,t:0,add:function(y){d3_adderSum(y,this.t,d3_adderTemp);d3_adderSum(d3_adderTemp.s,this.s,this);if(this.s)this.t+=d3_adderTemp.t;else this.s=d3_adderTemp.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var d3_adderTemp=new d3_adder;function d3_adderSum(a,b,o){var x=o.s=a+b,bv=x-a,av=x-bv;o.t=a-av+(b-bv)}d3.geo.stream=function(object,listener){if(object&&d3_geo_streamObjectType.hasOwnProperty(object.type)){d3_geo_streamObjectType[object.type](object,listener)}else{d3_geo_streamGeometry(object,listener)}};function d3_geo_streamGeometry(geometry,listener){if(geometry&&d3_geo_streamGeometryType.hasOwnProperty(geometry.type)){d3_geo_streamGeometryType[geometry.type](geometry,listener)}}var d3_geo_streamObjectType={Feature:function(feature,listener){d3_geo_streamGeometry(feature.geometry,listener)},FeatureCollection:function(object,listener){var features=object.features,i=-1,n=features.length;while(++i<n)d3_geo_streamGeometry(features[i].geometry,listener)}};var d3_geo_streamGeometryType={Sphere:function(object,listener){listener.sphere()},Point:function(object,listener){object=object.coordinates;listener.point(object[0],object[1],object[2])},MultiPoint:function(object,listener){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)object=coordinates[i],listener.point(object[0],object[1],object[2])},LineString:function(object,listener){d3_geo_streamLine(object.coordinates,listener,0)},MultiLineString:function(object,listener){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)d3_geo_streamLine(coordinates[i],listener,0)},Polygon:function(object,listener){d3_geo_streamPolygon(object.coordinates,listener)},MultiPolygon:function(object,listener){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)d3_geo_streamPolygon(coordinates[i],listener)},GeometryCollection:function(object,listener){var geometries=object.geometries,i=-1,n=geometries.length;while(++i<n)d3_geo_streamGeometry(geometries[i],listener)}};function d3_geo_streamLine(coordinates,listener,closed){var i=-1,n=coordinates.length-closed,coordinate;listener.lineStart();while(++i<n)coordinate=coordinates[i],listener.point(coordinate[0],coordinate[1],coordinate[2]);listener.lineEnd()}function d3_geo_streamPolygon(coordinates,listener){var i=-1,n=coordinates.length;listener.polygonStart();while(++i<n)d3_geo_streamLine(coordinates[i],listener,1);listener.polygonEnd()}d3.geo.area=function(object){d3_geo_areaSum=0;d3.geo.stream(object,d3_geo_area);return d3_geo_areaSum};var d3_geo_areaSum,d3_geo_areaRingSum=new d3_adder;var d3_geo_area={sphere:function(){d3_geo_areaSum+=4*\u03c0},point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_areaRingSum.reset();d3_geo_area.lineStart=d3_geo_areaRingStart},polygonEnd:function(){var area=2*d3_geo_areaRingSum;d3_geo_areaSum+=area<0?4*\u03c0+area:area;d3_geo_area.lineStart=d3_geo_area.lineEnd=d3_geo_area.point=d3_noop}};function d3_geo_areaRingStart(){var \u03bb00,\u03c600,\u03bb0,cos\u03c60,sin\u03c60;d3_geo_area.point=function(\u03bb,\u03c6){d3_geo_area.point=nextPoint;\u03bb0=(\u03bb00=\u03bb)*d3_radians,cos\u03c60=Math.cos(\u03c6=(\u03c600=\u03c6)*d3_radians/2+\u03c0/4),sin\u03c60=Math.sin(\u03c6)};function nextPoint(\u03bb,\u03c6){\u03bb*=d3_radians;\u03c6=\u03c6*d3_radians/2+\u03c0/4;var d\u03bb=\u03bb-\u03bb0,sd\u03bb=d\u03bb>=0?1:-1,ad\u03bb=sd\u03bb*d\u03bb,cos\u03c6=Math.cos(\u03c6),sin\u03c6=Math.sin(\u03c6),k=sin\u03c60*sin\u03c6,u=cos\u03c60*cos\u03c6+k*Math.cos(ad\u03bb),v=k*sd\u03bb*Math.sin(ad\u03bb);d3_geo_areaRingSum.add(Math.atan2(v,u));\u03bb0=\u03bb,cos\u03c60=cos\u03c6,sin\u03c60=sin\u03c6}d3_geo_area.lineEnd=function(){nextPoint(\u03bb00,\u03c600)}}function d3_geo_cartesian(spherical){var \u03bb=spherical[0],\u03c6=spherical[1],cos\u03c6=Math.cos(\u03c6);return[cos\u03c6*Math.cos(\u03bb),cos\u03c6*Math.sin(\u03bb),Math.sin(\u03c6)]}function d3_geo_cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function d3_geo_cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function d3_geo_cartesianAdd(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function d3_geo_cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function d3_geo_cartesianNormalize(d){var l=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l;d[1]/=l;d[2]/=l}function d3_geo_spherical(cartesian){return[Math.atan2(cartesian[1],cartesian[0]),d3_asin(cartesian[2])]}function d3_geo_sphericalEqual(a,b){return abs(a[0]-b[0])<\u03b5&&abs(a[1]-b[1])<\u03b5}d3.geo.bounds=function(){var \u03bb0,\u03c60,\u03bb1,\u03c61,\u03bb_,\u03bb__,\u03c6__,p0,d\u03bbSum,ranges,range;var bound={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){bound.point=ringPoint;bound.lineStart=ringStart;bound.lineEnd=ringEnd;d\u03bbSum=0;d3_geo_area.polygonStart()},polygonEnd:function(){d3_geo_area.polygonEnd();bound.point=point;bound.lineStart=lineStart;bound.lineEnd=lineEnd;if(d3_geo_areaRingSum<0)\u03bb0=-(\u03bb1=180),\u03c60=-(\u03c61=90);else if(d\u03bbSum>\u03b5)\u03c61=90;else if(d\u03bbSum<-\u03b5)\u03c60=-90;range[0]=\u03bb0,range[1]=\u03bb1}};function point(\u03bb,\u03c6){ranges.push(range=[\u03bb0=\u03bb,\u03bb1=\u03bb]);if(\u03c6<\u03c60)\u03c60=\u03c6;if(\u03c6>\u03c61)\u03c61=\u03c6}function linePoint(\u03bb,\u03c6){var p=d3_geo_cartesian([\u03bb*d3_radians,\u03c6*d3_radians]);if(p0){var normal=d3_geo_cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=d3_geo_cartesianCross(equatorial,normal);d3_geo_cartesianNormalize(inflection);inflection=d3_geo_spherical(inflection);var d\u03bb=\u03bb-\u03bb_,s=d\u03bb>0?1:-1,\u03bbi=inflection[0]*d3_degrees*s,antimeridian=abs(d\u03bb)>180;if(antimeridian^(s*\u03bb_<\u03bbi&&\u03bbi<s*\u03bb)){var \u03c6i=inflection[1]*d3_degrees;if(\u03c6i>\u03c61)\u03c61=\u03c6i}else if(\u03bbi=(\u03bbi+360)%360-180,antimeridian^(s*\u03bb_<\u03bbi&&\u03bbi<s*\u03bb)){var \u03c6i=-inflection[1]*d3_degrees;if(\u03c6i<\u03c60)\u03c60=\u03c6i}else{if(\u03c6<\u03c60)\u03c60=\u03c6;if(\u03c6>\u03c61)\u03c61=\u03c6}if(antimeridian){if(\u03bb<\u03bb_){if(angle(\u03bb0,\u03bb)>angle(\u03bb0,\u03bb1))\u03bb1=\u03bb}else{if(angle(\u03bb,\u03bb1)>angle(\u03bb0,\u03bb1))\u03bb0=\u03bb}}else{if(\u03bb1>=\u03bb0){if(\u03bb<\u03bb0)\u03bb0=\u03bb;if(\u03bb>\u03bb1)\u03bb1=\u03bb}else{if(\u03bb>\u03bb_){if(angle(\u03bb0,\u03bb)>angle(\u03bb0,\u03bb1))\u03bb1=\u03bb}else{if(angle(\u03bb,\u03bb1)>angle(\u03bb0,\u03bb1))\u03bb0=\u03bb}}}}else{point(\u03bb,\u03c6)}p0=p,\u03bb_=\u03bb}function lineStart(){bound.point=linePoint}function lineEnd(){range[0]=\u03bb0,range[1]=\u03bb1;bound.point=point;p0=null}function ringPoint(\u03bb,\u03c6){if(p0){var d\u03bb=\u03bb-\u03bb_;d\u03bbSum+=abs(d\u03bb)>180?d\u03bb+(d\u03bb>0?360:-360):d\u03bb}else \u03bb__=\u03bb,\u03c6__=\u03c6;d3_geo_area.point(\u03bb,\u03c6);linePoint(\u03bb,\u03c6)}function ringStart(){d3_geo_area.lineStart()}function ringEnd(){ringPoint(\u03bb__,\u03c6__);d3_geo_area.lineEnd();if(abs(d\u03bbSum)>\u03b5)\u03bb0=-(\u03bb1=180);range[0]=\u03bb0,range[1]=\u03bb1;p0=null}function angle(\u03bb0,\u03bb1){return(\u03bb1-=\u03bb0)<0?\u03bb1+360:\u03bb1}function compareRanges(a,b){return a[0]-b[0]}function withinRange(x,range){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}return function(feature){\u03c61=\u03bb1=-(\u03bb0=\u03c60=Infinity);ranges=[];d3.geo.stream(feature,bound);var n=ranges.length;if(n){ranges.sort(compareRanges);for(var i=1,a=ranges[0],b,merged=[a];i<n;++i){b=ranges[i];if(withinRange(b[0],a)||withinRange(b[1],a)){if(angle(a[0],b[1])>angle(a[0],a[1]))a[1]=b[1];if(angle(b[0],a[1])>angle(a[0],a[1]))a[0]=b[0]}else{merged.push(a=b)}}var best=-Infinity,d\u03bb;for(var n=merged.length-1,i=0,a=merged[n],b;i<=n;a=b,++i){b=merged[i];if((d\u03bb=angle(a[1],b[0]))>best)best=d\u03bb,\u03bb0=b[0],\u03bb1=a[1]}}ranges=range=null;return \u03bb0===Infinity||\u03c60===Infinity?[[NaN,NaN],[NaN,NaN]]:[[\u03bb0,\u03c60],[\u03bb1,\u03c61]]}}();d3.geo.centroid=function(object){d3_geo_centroidW0=d3_geo_centroidW1=d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0;d3.geo.stream(object,d3_geo_centroid);var x=d3_geo_centroidX2,y=d3_geo_centroidY2,z=d3_geo_centroidZ2,m=x*x+y*y+z*z;if(m<\u03b52){x=d3_geo_centroidX1,y=d3_geo_centroidY1,z=d3_geo_centroidZ1;if(d3_geo_centroidW1<\u03b5)x=d3_geo_centroidX0,y=d3_geo_centroidY0,z=d3_geo_centroidZ0;m=x*x+y*y+z*z;if(m<\u03b52)return[NaN,NaN]}return[Math.atan2(y,x)*d3_degrees,d3_asin(z/Math.sqrt(m))*d3_degrees]};var d3_geo_centroidW0,d3_geo_centroidW1,d3_geo_centroidX0,d3_geo_centroidY0,d3_geo_centroidZ0,d3_geo_centroidX1,d3_geo_centroidY1,d3_geo_centroidZ1,d3_geo_centroidX2,d3_geo_centroidY2,d3_geo_centroidZ2;var d3_geo_centroid={sphere:d3_noop,point:d3_geo_centroidPoint,lineStart:d3_geo_centroidLineStart,lineEnd:d3_geo_centroidLineEnd,polygonStart:function(){d3_geo_centroid.lineStart=d3_geo_centroidRingStart},polygonEnd:function(){d3_geo_centroid.lineStart=d3_geo_centroidLineStart}};function d3_geo_centroidPoint(\u03bb,\u03c6){\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians);d3_geo_centroidPointXYZ(cos\u03c6*Math.cos(\u03bb),cos\u03c6*Math.sin(\u03bb),Math.sin(\u03c6))}function d3_geo_centroidPointXYZ(x,y,z){++d3_geo_centroidW0;d3_geo_centroidX0+=(x-d3_geo_centroidX0)/d3_geo_centroidW0;d3_geo_centroidY0+=(y-d3_geo_centroidY0)/d3_geo_centroidW0;d3_geo_centroidZ0+=(z-d3_geo_centroidZ0)/d3_geo_centroidW0}function d3_geo_centroidLineStart(){var x0,y0,z0;d3_geo_centroid.point=function(\u03bb,\u03c6){\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians);x0=cos\u03c6*Math.cos(\u03bb);y0=cos\u03c6*Math.sin(\u03bb);z0=Math.sin(\u03c6);d3_geo_centroid.point=nextPoint;d3_geo_centroidPointXYZ(x0,y0,z0)};function nextPoint(\u03bb,\u03c6){\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians),x=cos\u03c6*Math.cos(\u03bb),y=cos\u03c6*Math.sin(\u03bb),z=Math.sin(\u03c6),w=Math.atan2(Math.sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);d3_geo_centroidW1+=w;d3_geo_centroidX1+=w*(x0+(x0=x));d3_geo_centroidY1+=w*(y0+(y0=y));d3_geo_centroidZ1+=w*(z0+(z0=z));d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_centroidLineEnd(){d3_geo_centroid.point=d3_geo_centroidPoint}function d3_geo_centroidRingStart(){var \u03bb00,\u03c600,x0,y0,z0;d3_geo_centroid.point=function(\u03bb,\u03c6){\u03bb00=\u03bb,\u03c600=\u03c6;d3_geo_centroid.point=nextPoint;\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians);x0=cos\u03c6*Math.cos(\u03bb);y0=cos\u03c6*Math.sin(\u03bb);z0=Math.sin(\u03c6);d3_geo_centroidPointXYZ(x0,y0,z0)};d3_geo_centroid.lineEnd=function(){nextPoint(\u03bb00,\u03c600);d3_geo_centroid.lineEnd=d3_geo_centroidLineEnd;d3_geo_centroid.point=d3_geo_centroidPoint};function nextPoint(\u03bb,\u03c6){\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians),x=cos\u03c6*Math.cos(\u03bb),y=cos\u03c6*Math.sin(\u03bb),z=Math.sin(\u03c6),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=Math.sqrt(cx*cx+cy*cy+cz*cz),u=x0*x+y0*y+z0*z,v=m&&-d3_acos(u)/m,w=Math.atan2(m,u);d3_geo_centroidX2+=v*cx;d3_geo_centroidY2+=v*cy;d3_geo_centroidZ2+=v*cz;d3_geo_centroidW1+=w;d3_geo_centroidX1+=w*(x0+(x0=x));d3_geo_centroidY1+=w*(y0+(y0=y));d3_geo_centroidZ1+=w*(z0+(z0=z));d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}if(a.invert&&b.invert)compose.invert=function(x,y){return x=b.invert(x,y),x&&a.invert(x[0],x[1])};return compose}function d3_true(){return true}function d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener){var subject=[],clip=[];segments.forEach(function(segment){if((n=segment.length-1)<=0)return;var n,p0=segment[0],p1=segment[n];if(d3_geo_sphericalEqual(p0,p1)){listener.lineStart();for(var i=0;i<n;++i)listener.point((p0=segment[i])[0],p0[1]);listener.lineEnd();return}var a=new d3_geo_clipPolygonIntersection(p0,segment,null,true),b=new d3_geo_clipPolygonIntersection(p0,null,a,false);a.o=b;subject.push(a);clip.push(b);a=new d3_geo_clipPolygonIntersection(p1,segment,null,false);b=new d3_geo_clipPolygonIntersection(p1,null,a,true);a.o=b;subject.push(a);clip.push(b)});clip.sort(compare);d3_geo_clipPolygonLinkCircular(subject);d3_geo_clipPolygonLinkCircular(clip);if(!subject.length)return;for(var i=0,entry=clipStartInside,n=clip.length;i<n;++i){clip[i].e=entry=!entry}var start=subject[0],points,point;while(1){var current=start,isSubject=true;while(current.v)if((current=current.n)===start)return;points=current.z;listener.lineStart();do{current.v=current.o.v=true;if(current.e){if(isSubject){for(var i=0,n=points.length;i<n;++i)listener.point((point=points[i])[0],point[1])}else{interpolate(current.x,current.n.x,1,listener)}current=current.n}else{if(isSubject){points=current.p.z;for(var i=points.length-1;i>=0;--i)listener.point((point=points[i])[0],point[1])}else{interpolate(current.x,current.p.x,-1,listener)}current=current.p}current=current.o;points=current.z;isSubject=!isSubject}while(!current.v);listener.lineEnd()}}function d3_geo_clipPolygonLinkCircular(array){if(!(n=array.length))return;var n,i=0,a=array[0],b;while(++i<n){a.n=b=array[i];b.p=a;a=b}a.n=b=array[0];b.p=a}function d3_geo_clipPolygonIntersection(point,points,other,entry){this.x=point;this.z=points;this.o=other;this.e=entry;this.v=false;this.n=this.p=null}function d3_geo_clip(pointVisible,clipLine,interpolate,clipStart){return function(rotate,listener){var line=clipLine(listener),rotatedClipStart=rotate.invert(clipStart[0],clipStart[1]);var clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing;clip.lineStart=ringStart;clip.lineEnd=ringEnd;segments=[];polygon=[]},polygonEnd:function(){clip.point=point;clip.lineStart=lineStart;clip.lineEnd=lineEnd;segments=d3.merge(segments);var clipStartInside=d3_geo_pointInPolygon(rotatedClipStart,polygon);if(segments.length){if(!polygonStarted)listener.polygonStart(),polygonStarted=true;d3_geo_clipPolygon(segments,d3_geo_clipSort,clipStartInside,interpolate,listener)}else if(clipStartInside){if(!polygonStarted)listener.polygonStart(),polygonStarted=true;listener.lineStart();interpolate(null,null,1,listener);listener.lineEnd()}if(polygonStarted)listener.polygonEnd(),polygonStarted=false;segments=polygon=null},sphere:function(){listener.polygonStart();listener.lineStart();interpolate(null,null,1,listener);listener.lineEnd();listener.polygonEnd()}};function point(\u03bb,\u03c6){var point=rotate(\u03bb,\u03c6);if(pointVisible(\u03bb=point[0],\u03c6=point[1]))listener.point(\u03bb,\u03c6)}function pointLine(\u03bb,\u03c6){var point=rotate(\u03bb,\u03c6);line.point(point[0],point[1])}function lineStart(){clip.point=pointLine;line.lineStart()}function lineEnd(){clip.point=point;line.lineEnd()}var segments;var buffer=d3_geo_clipBufferListener(),ringListener=clipLine(buffer),polygonStarted=false,polygon,ring;function pointRing(\u03bb,\u03c6){ring.push([\u03bb,\u03c6]);var point=rotate(\u03bb,\u03c6);ringListener.point(point[0],point[1])}function ringStart(){ringListener.lineStart();ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]);ringListener.lineEnd();var clean=ringListener.clean(),ringSegments=buffer.buffer(),segment,n=ringSegments.length;ring.pop();polygon.push(ring);ring=null;if(!n)return;if(clean&1){segment=ringSegments[0];var n=segment.length-1,i=-1,point;if(n>0){if(!polygonStarted)listener.polygonStart(),polygonStarted=true;listener.lineStart();while(++i<n)listener.point((point=segment[i])[0],point[1]);listener.lineEnd()}return}if(n>1&&clean&2)ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));segments.push(ringSegments.filter(d3_geo_clipSegmentLength1))}return clip}}function d3_geo_clipSegmentLength1(segment){return segment.length>1}function d3_geo_clipBufferListener(){var lines=[],line;return{lineStart:function(){lines.push(line=[])},point:function(\u03bb,\u03c6){line.push([\u03bb,\u03c6])},lineEnd:d3_noop,buffer:function(){var buffer=lines;lines=[];line=null;return buffer},rejoin:function(){if(lines.length>1)lines.push(lines.pop().concat(lines.shift()))}}}function d3_geo_clipSort(a,b){return((a=a.x)[0]<0?a[1]-half\u03c0-\u03b5:half\u03c0-a[1])-((b=b.x)[0]<0?b[1]-half\u03c0-\u03b5:half\u03c0-b[1])}var d3_geo_clipAntimeridian=d3_geo_clip(d3_true,d3_geo_clipAntimeridianLine,d3_geo_clipAntimeridianInterpolate,[-\u03c0,-\u03c0/2]);function d3_geo_clipAntimeridianLine(listener){var \u03bb0=NaN,\u03c60=NaN,s\u03bb0=NaN,clean;return{lineStart:function(){listener.lineStart();clean=1},point:function(\u03bb1,\u03c61){var s\u03bb1=\u03bb1>0?\u03c0:-\u03c0,d\u03bb=abs(\u03bb1-\u03bb0);if(abs(d\u03bb-\u03c0)<\u03b5){listener.point(\u03bb0,\u03c60=(\u03c60+\u03c61)/2>0?half\u03c0:-half\u03c0);listener.point(s\u03bb0,\u03c60);listener.lineEnd();listener.lineStart();listener.point(s\u03bb1,\u03c60);listener.point(\u03bb1,\u03c60);clean=0}else if(s\u03bb0!==s\u03bb1&&d\u03bb>=\u03c0){if(abs(\u03bb0-s\u03bb0)<\u03b5)\u03bb0-=s\u03bb0*\u03b5;if(abs(\u03bb1-s\u03bb1)<\u03b5)\u03bb1-=s\u03bb1*\u03b5;\u03c60=d3_geo_clipAntimeridianIntersect(\u03bb0,\u03c60,\u03bb1,\u03c61);listener.point(s\u03bb0,\u03c60);listener.lineEnd();listener.lineStart();listener.point(s\u03bb1,\u03c60);clean=0}listener.point(\u03bb0=\u03bb1,\u03c60=\u03c61);s\u03bb0=s\u03bb1},lineEnd:function(){listener.lineEnd();\u03bb0=\u03c60=NaN},clean:function(){return 2-clean}}}function d3_geo_clipAntimeridianIntersect(\u03bb0,\u03c60,\u03bb1,\u03c61){var cos\u03c60,cos\u03c61,sin\u03bb0_\u03bb1=Math.sin(\u03bb0-\u03bb1);return abs(sin\u03bb0_\u03bb1)>\u03b5?Math.atan((Math.sin(\u03c60)*(cos\u03c61=Math.cos(\u03c61))*Math.sin(\u03bb1)-Math.sin(\u03c61)*(cos\u03c60=Math.cos(\u03c60))*Math.sin(\u03bb0))/(cos\u03c60*cos\u03c61*sin\u03bb0_\u03bb1)):(\u03c60+\u03c61)/2}function d3_geo_clipAntimeridianInterpolate(from,to,direction,listener){var \u03c6;if(from==null){\u03c6=direction*half\u03c0;listener.point(-\u03c0,\u03c6);listener.point(0,\u03c6);listener.point(\u03c0,\u03c6);listener.point(\u03c0,0);listener.point(\u03c0,-\u03c6);listener.point(0,-\u03c6);listener.point(-\u03c0,-\u03c6);listener.point(-\u03c0,0);listener.point(-\u03c0,\u03c6)}else if(abs(from[0]-to[0])>\u03b5){var s=from[0]<to[0]?\u03c0:-\u03c0;\u03c6=direction*s/2;listener.point(-s,\u03c6);listener.point(0,\u03c6);listener.point(s,\u03c6)}else{listener.point(to[0],to[1])}}function d3_geo_pointInPolygon(point,polygon){var meridian=point[0],parallel=point[1],meridianNormal=[Math.sin(meridian),-Math.cos(meridian),0],polarAngle=0,winding=0;d3_geo_areaRingSum.reset();for(var i=0,n=polygon.length;i<n;++i){var ring=polygon[i],m=ring.length;if(!m)continue;var point0=ring[0],\u03bb0=point0[0],\u03c60=point0[1]/2+\u03c0/4,sin\u03c60=Math.sin(\u03c60),cos\u03c60=Math.cos(\u03c60),j=1;while(true){if(j===m)j=0;point=ring[j];var \u03bb=point[0],\u03c6=point[1]/2+\u03c0/4,sin\u03c6=Math.sin(\u03c6),cos\u03c6=Math.cos(\u03c6),d\u03bb=\u03bb-\u03bb0,sd\u03bb=d\u03bb>=0?1:-1,ad\u03bb=sd\u03bb*d\u03bb,antimeridian=ad\u03bb>\u03c0,k=sin\u03c60*sin\u03c6;d3_geo_areaRingSum.add(Math.atan2(k*sd\u03bb*Math.sin(ad\u03bb),cos\u03c60*cos\u03c6+k*Math.cos(ad\u03bb)));polarAngle+=antimeridian?d\u03bb+sd\u03bb*\u03c4:d\u03bb;if(antimeridian^\u03bb0>=meridian^\u03bb>=meridian){var arc=d3_geo_cartesianCross(d3_geo_cartesian(point0),d3_geo_cartesian(point));d3_geo_cartesianNormalize(arc);var intersection=d3_geo_cartesianCross(meridianNormal,arc);d3_geo_cartesianNormalize(intersection);var \u03c6arc=(antimeridian^d\u03bb>=0?-1:1)*d3_asin(intersection[2]);if(parallel>\u03c6arc||parallel===\u03c6arc&&(arc[0]||arc[1])){winding+=antimeridian^d\u03bb>=0?1:-1}}if(!j++)break;\u03bb0=\u03bb,sin\u03c60=sin\u03c6,cos\u03c60=cos\u03c6,point0=point}}return(polarAngle<-\u03b5||polarAngle<\u03b5&&d3_geo_areaRingSum<-\u03b5)^winding&1}function d3_geo_clipCircle(radius){var cr=Math.cos(radius),smallRadius=cr>0,notHemisphere=abs(cr)>\u03b5,interpolate=d3_geo_circleInterpolate(radius,6*d3_radians);return d3_geo_clip(visible,clipLine,interpolate,smallRadius?[0,-radius]:[-\u03c0,radius-\u03c0]);function visible(\u03bb,\u03c6){return Math.cos(\u03bb)*Math.cos(\u03c6)>cr}function clipLine(listener){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=false;clean=1},point:function(\u03bb,\u03c6){var point1=[\u03bb,\u03c6],point2,v=visible(\u03bb,\u03c6),c=smallRadius?v?0:code(\u03bb,\u03c6):v?code(\u03bb+(\u03bb<0?\u03c0:-\u03c0),\u03c6):0;if(!point0&&(v00=v0=v))listener.lineStart();if(v!==v0){point2=intersect(point0,point1);if(d3_geo_sphericalEqual(point0,point2)||d3_geo_sphericalEqual(point1,point2)){point1[0]+=\u03b5;point1[1]+=\u03b5;v=visible(point1[0],point1[1])}}if(v!==v0){clean=0;if(v){listener.lineStart();point2=intersect(point1,point0);listener.point(point2[0],point2[1])}else{point2=intersect(point0,point1);listener.point(point2[0],point2[1]);listener.lineEnd()}point0=point2}else if(notHemisphere&&point0&&smallRadius^v){var t;if(!(c&c0)&&(t=intersect(point1,point0,true))){clean=0;if(smallRadius){listener.lineStart();listener.point(t[0][0],t[0][1]);listener.point(t[1][0],t[1][1]);listener.lineEnd()}else{listener.point(t[1][0],t[1][1]);listener.lineEnd();listener.lineStart();listener.point(t[0][0],t[0][1])}}}if(v&&(!point0||!d3_geo_sphericalEqual(point0,point1))){listener.point(point1[0],point1[1])}point0=point1,v0=v,c0=c},lineEnd:function(){if(v0)listener.lineEnd();point0=null},clean:function(){return clean|(v00&&v0)<<1}}}function intersect(a,b,two){var pa=d3_geo_cartesian(a),pb=d3_geo_cartesian(b);var n1=[1,0,0],n2=d3_geo_cartesianCross(pa,pb),n2n2=d3_geo_cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=d3_geo_cartesianCross(n1,n2),A=d3_geo_cartesianScale(n1,c1),B=d3_geo_cartesianScale(n2,c2);d3_geo_cartesianAdd(A,B);var u=n1xn2,w=d3_geo_cartesianDot(A,u),uu=d3_geo_cartesianDot(u,u),t2=w*w-uu*(d3_geo_cartesianDot(A,A)-1);if(t2<0)return;var t=Math.sqrt(t2),q=d3_geo_cartesianScale(u,(-w-t)/uu);d3_geo_cartesianAdd(q,A);q=d3_geo_spherical(q);if(!two)return q;var \u03bb0=a[0],\u03bb1=b[0],\u03c60=a[1],\u03c61=b[1],z;if(\u03bb1<\u03bb0)z=\u03bb0,\u03bb0=\u03bb1,\u03bb1=z;var \u03b4\u03bb=\u03bb1-\u03bb0,polar=abs(\u03b4\u03bb-\u03c0)<\u03b5,meridian=polar||\u03b4\u03bb<\u03b5;if(!polar&&\u03c61<\u03c60)z=\u03c60,\u03c60=\u03c61,\u03c61=z;if(meridian?polar?\u03c60+\u03c61>0^q[1]<(abs(q[0]-\u03bb0)<\u03b5?\u03c60:\u03c61):\u03c60<=q[1]&&q[1]<=\u03c61:\u03b4\u03bb>\u03c0^(\u03bb0<=q[0]&&q[0]<=\u03bb1)){var q1=d3_geo_cartesianScale(u,(-w+t)/uu);d3_geo_cartesianAdd(q1,A);return[q,d3_geo_spherical(q1)]}}function code(\u03bb,\u03c6){var r=smallRadius?radius:\u03c0-radius,code=0;if(\u03bb<-r)code|=1;else if(\u03bb>r)code|=2;if(\u03c6<-r)code|=4;else if(\u03c6>r)code|=8;return code}}function d3_geom_clipLine(x0,y0,x1,y1){return function(line){var a=line.a,b=line.b,ax=a.x,ay=a.y,bx=b.x,by=b.y,t0=0,t1=1,dx=bx-ax,dy=by-ay,r;r=x0-ax;if(!dx&&r>0)return;r/=dx;if(dx<0){if(r<t0)return;if(r<t1)t1=r}else if(dx>0){if(r>t1)return;if(r>t0)t0=r}r=x1-ax;if(!dx&&r<0)return;r/=dx;if(dx<0){if(r>t1)return;if(r>t0)t0=r}else if(dx>0){if(r<t0)return;if(r<t1)t1=r}r=y0-ay;if(!dy&&r>0)return;r/=dy;if(dy<0){if(r<t0)return;if(r<t1)t1=r}else if(dy>0){if(r>t1)return;if(r>t0)t0=r}r=y1-ay;if(!dy&&r<0)return;r/=dy;if(dy<0){if(r>t1)return;if(r>t0)t0=r}else if(dy>0){if(r<t0)return;if(r<t1)t1=r}if(t0>0)line.a={x:ax+t0*dx,y:ay+t0*dy};if(t1<1)line.b={x:ax+t1*dx,y:ay+t1*dy};return line}}var d3_geo_clipExtentMAX=1e9;d3.geo.clipExtent=function(){var x0,y0,x1,y1,stream,clip,clipExtent={stream:function(output){if(stream)stream.valid=false;stream=clip(output);stream.valid=true;return stream},extent:function(_){if(!arguments.length)return[[x0,y0],[x1,y1]];clip=d3_geo_clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]);if(stream)stream.valid=false,stream=null;return clipExtent}};return clipExtent.extent([[0,0],[960,500]])};function d3_geo_clipExtent(x0,y0,x1,y1){return function(listener){var listener_=listener,bufferListener=d3_geo_clipBufferListener(),clipLine=d3_geom_clipLine(x0,y0,x1,y1),segments,polygon,ring;var clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){listener=bufferListener;segments=[];polygon=[];clean=true},polygonEnd:function(){listener=listener_;segments=d3.merge(segments);var clipStartInside=insidePolygon([x0,y1]),inside=clean&&clipStartInside,visible=segments.length;if(inside||visible){listener.polygonStart();if(inside){listener.lineStart();interpolate(null,null,1,listener);listener.lineEnd()}if(visible){d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener)}listener.polygonEnd()}segments=polygon=ring=null}};function insidePolygon(p){var wn=0,n=polygon.length,y=p[1];for(var i=0;i<n;++i){for(var j=1,v=polygon[i],m=v.length,a=v[0],b;j<m;++j){b=v[j];if(a[1]<=y){if(b[1]>y&&d3_cross2d(a,b,p)>0)++wn}else{if(b[1]<=y&&d3_cross2d(a,b,p)<0)--wn}a=b}}return wn!==0}function interpolate(from,to,direction,listener){var a=0,a1=0;if(from==null||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoints(from,to)<0^direction>0){do{listener.point(a===0||a===3?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1)}else{listener.point(to[0],to[1])}}function pointVisible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function point(x,y){if(pointVisible(x,y))listener.point(x,y)}var x__,y__,v__,x_,y_,v_,first,clean;function lineStart(){clip.point=linePoint;if(polygon)polygon.push(ring=[]);first=true;v_=false;x_=y_=NaN}function lineEnd(){if(segments){linePoint(x__,y__);if(v__&&v_)bufferListener.rejoin();segments.push(bufferListener.buffer())}clip.point=point;if(v_)listener.lineEnd()}function linePoint(x,y){x=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,x));y=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,y));var v=pointVisible(x,y);if(polygon)ring.push([x,y]);if(first){x__=x,y__=y,v__=v;first=false;if(v){listener.lineStart();listener.point(x,y)}}else{if(v&&v_)listener.point(x,y);else{var l={a:{x:x_,y:y_},b:{x:x,y:y}};if(clipLine(l)){if(!v_){listener.lineStart();listener.point(l.a.x,l.a.y)}listener.point(l.b.x,l.b.y);if(!v)listener.lineEnd();clean=false}else if(v){listener.lineStart();listener.point(x,y);clean=false}}}x_=x,y_=y,v_=v}return clip};function corner(p,direction){return abs(p[0]-x0)<\u03b5?direction>0?0:3:abs(p[0]-x1)<\u03b5?direction>0?2:1:abs(p[1]-y0)<\u03b5?direction>0?1:0:direction>0?3:2}function compare(a,b){return comparePoints(a.x,b.x)}function comparePoints(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:ca===0?b[1]-a[1]:ca===1?a[0]-b[0]:ca===2?a[1]-b[1]:b[0]-a[0]}}function d3_geo_conic(projectAt){var \u03c60=0,\u03c61=\u03c0/3,m=d3_geo_projectionMutator(projectAt),p=m(\u03c60,\u03c61);p.parallels=function(_){if(!arguments.length)return[\u03c60/\u03c0*180,\u03c61/\u03c0*180];return m(\u03c60=_[0]*\u03c0/180,\u03c61=_[1]*\u03c0/180)};return p}function d3_geo_conicEqualArea(\u03c60,\u03c61){var sin\u03c60=Math.sin(\u03c60),n=(sin\u03c60+Math.sin(\u03c61))/2,C=1+sin\u03c60*(2*n-sin\u03c60),\u03c10=Math.sqrt(C)/n;function forward(\u03bb,\u03c6){var \u03c1=Math.sqrt(C-2*n*Math.sin(\u03c6))/n;return[\u03c1*Math.sin(\u03bb*=n),\u03c10-\u03c1*Math.cos(\u03bb)]}forward.invert=function(x,y){var \u03c10_y=\u03c10-y;return[Math.atan2(x,\u03c10_y)/n,d3_asin((C-(x*x+\u03c10_y*\u03c10_y)*n*n)/(2*n))]};return forward}(d3.geo.conicEqualArea=function(){return d3_geo_conic(d3_geo_conicEqualArea)}).raw=d3_geo_conicEqualArea;d3.geo.albers=function(){return d3.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};d3.geo.albersUsa=function(){var lower48=d3.geo.albers();var alaska=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var hawaii=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var point,pointStream={point:function(x,y){point=[x,y]}},lower48Point,alaskaPoint,hawaiiPoint;function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];point=null;(lower48Point(x,y),point)||(alaskaPoint(x,y),point)||hawaiiPoint(x,y);return point}albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)};albersUsa.stream=function(stream){var lower48Stream=lower48.stream(stream),alaskaStream=alaska.stream(stream),hawaiiStream=hawaii.stream(stream);return{point:function(x,y){lower48Stream.point(x,y);alaskaStream.point(x,y);hawaiiStream.point(x,y)},sphere:function(){lower48Stream.sphere();alaskaStream.sphere();hawaiiStream.sphere()},lineStart:function(){lower48Stream.lineStart();alaskaStream.lineStart();hawaiiStream.lineStart()},lineEnd:function(){lower48Stream.lineEnd();alaskaStream.lineEnd();hawaiiStream.lineEnd()},polygonStart:function(){lower48Stream.polygonStart();alaskaStream.polygonStart();hawaiiStream.polygonStart()},polygonEnd:function(){lower48Stream.polygonEnd();alaskaStream.polygonEnd();hawaiiStream.polygonEnd()}}};albersUsa.precision=function(_){if(!arguments.length)return lower48.precision();lower48.precision(_);alaska.precision(_);hawaii.precision(_);return albersUsa};albersUsa.scale=function(_){if(!arguments.length)return lower48.scale();lower48.scale(_);alaska.scale(_*.35);hawaii.scale(_);return albersUsa.translate(lower48.translate())};albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream).point;alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+\u03b5,y+.12*k+\u03b5],[x-.214*k-\u03b5,y+.234*k-\u03b5]]).stream(pointStream).point;hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+\u03b5,y+.166*k+\u03b5],[x-.115*k-\u03b5,y+.234*k-\u03b5]]).stream(pointStream).point;return albersUsa};return albersUsa.scale(1070)};var d3_geo_pathAreaSum,d3_geo_pathAreaPolygon,d3_geo_pathArea={point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_pathAreaPolygon=0;d3_geo_pathArea.lineStart=d3_geo_pathAreaRingStart},polygonEnd:function(){d3_geo_pathArea.lineStart=d3_geo_pathArea.lineEnd=d3_geo_pathArea.point=d3_noop;d3_geo_pathAreaSum+=abs(d3_geo_pathAreaPolygon/2)}};function d3_geo_pathAreaRingStart(){var x00,y00,x0,y0;d3_geo_pathArea.point=function(x,y){d3_geo_pathArea.point=nextPoint;x00=x0=x,y00=y0=y};function nextPoint(x,y){d3_geo_pathAreaPolygon+=y0*x-x0*y;x0=x,y0=y}d3_geo_pathArea.lineEnd=function(){nextPoint(x00,y00)}}var d3_geo_pathBoundsX0,d3_geo_pathBoundsY0,d3_geo_pathBoundsX1,d3_geo_pathBoundsY1;var d3_geo_pathBounds={point:d3_geo_pathBoundsPoint,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop};function d3_geo_pathBoundsPoint(x,y){if(x<d3_geo_pathBoundsX0)d3_geo_pathBoundsX0=x;if(x>d3_geo_pathBoundsX1)d3_geo_pathBoundsX1=x;if(y<d3_geo_pathBoundsY0)d3_geo_pathBoundsY0=y;if(y>d3_geo_pathBoundsY1)d3_geo_pathBoundsY1=y}function d3_geo_pathBuffer(){var pointCircle=d3_geo_pathBufferCircle(4.5),buffer=[];var stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd;stream.point=point},pointRadius:function(_){pointCircle=d3_geo_pathBufferCircle(_);return stream},result:function(){if(buffer.length){var result=buffer.join("");buffer=[];return result}}};function point(x,y){buffer.push("M",x,",",y,pointCircle)}function pointLineStart(x,y){buffer.push("M",x,",",y);stream.point=pointLine}function pointLine(x,y){buffer.push("L",x,",",y)}function lineEnd(){stream.point=point}function lineEndPolygon(){buffer.push("Z")}return stream}function d3_geo_pathBufferCircle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}var d3_geo_pathCentroid={point:d3_geo_pathCentroidPoint,lineStart:d3_geo_pathCentroidLineStart,lineEnd:d3_geo_pathCentroidLineEnd,polygonStart:function(){d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidRingStart},polygonEnd:function(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint;d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidLineStart;d3_geo_pathCentroid.lineEnd=d3_geo_pathCentroidLineEnd}};function d3_geo_pathCentroidPoint(x,y){d3_geo_centroidX0+=x;d3_geo_centroidY0+=y;++d3_geo_centroidZ0}function d3_geo_pathCentroidLineStart(){var x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint;d3_geo_pathCentroidPoint(x0=x,y0=y)};function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2;d3_geo_centroidY1+=z*(y0+y)/2;d3_geo_centroidZ1+=z;d3_geo_pathCentroidPoint(x0=x,y0=y)}}function d3_geo_pathCentroidLineEnd(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint}function d3_geo_pathCentroidRingStart(){var x00,y00,x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint;d3_geo_pathCentroidPoint(x00=x0=x,y00=y0=y)};function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2;d3_geo_centroidY1+=z*(y0+y)/2;d3_geo_centroidZ1+=z;z=y0*x-x0*y;d3_geo_centroidX2+=z*(x0+x);d3_geo_centroidY2+=z*(y0+y);d3_geo_centroidZ2+=z*3;d3_geo_pathCentroidPoint(x0=x,y0=y)}d3_geo_pathCentroid.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathContext(context){var pointRadius=4.5;var stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd;stream.point=point},pointRadius:function(_){pointRadius=_;return stream},result:d3_noop};function point(x,y){context.moveTo(x+pointRadius,y);context.arc(x,y,pointRadius,0,\u03c4)}function pointLineStart(x,y){context.moveTo(x,y);stream.point=pointLine}function pointLine(x,y){context.lineTo(x,y)}function lineEnd(){stream.point=point}function lineEndPolygon(){context.closePath()}return stream}function d3_geo_resample(project){var \u03b42=.5,cosMinDistance=Math.cos(30*d3_radians),maxDepth=16;function resample(stream){return(maxDepth?resampleRecursive:resampleNone)(stream)}function resampleNone(stream){return d3_geo_transformPoint(stream,function(x,y){x=project(x,y);stream.point(x[0],x[1])})}function resampleRecursive(stream){var \u03bb00,\u03c600,x00,y00,a00,b00,c00,\u03bb0,x0,y0,a0,b0,c0;var resample={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart();resample.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd();resample.lineStart=lineStart}};function point(x,y){x=project(x,y);stream.point(x[0],x[1])}function lineStart(){x0=NaN;resample.point=linePoint;stream.lineStart()}function linePoint(\u03bb,\u03c6){var c=d3_geo_cartesian([\u03bb,\u03c6]),p=project(\u03bb,\u03c6);resampleLineTo(x0,y0,\u03bb0,a0,b0,c0,x0=p[0],y0=p[1],\u03bb0=\u03bb,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream);stream.point(x0,y0)}function lineEnd(){resample.point=point;stream.lineEnd()}function ringStart(){lineStart();resample.point=ringPoint;resample.lineEnd=ringEnd}function ringPoint(\u03bb,\u03c6){linePoint(\u03bb00=\u03bb,\u03c600=\u03c6),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0;resample.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,\u03bb0,a0,b0,c0,x00,y00,\u03bb00,a00,b00,c00,maxDepth,stream);resample.lineEnd=lineEnd;lineEnd()}return resample}function resampleLineTo(x0,y0,\u03bb0,a0,b0,c0,x1,y1,\u03bb1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*\u03b42&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=Math.sqrt(a*a+b*b+c*c),\u03c62=Math.asin(c/=m),\u03bb2=abs(abs(c)-1)<\u03b5||abs(\u03bb0-\u03bb1)<\u03b5?(\u03bb0+\u03bb1)/2:Math.atan2(b,a),p=project(\u03bb2,\u03c62),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;if(dz*dz/d2>\u03b42||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance){resampleLineTo(x0,y0,\u03bb0,a0,b0,c0,x2,y2,\u03bb2,a/=m,b/=m,c,depth,stream);stream.point(x2,y2);resampleLineTo(x2,y2,\u03bb2,a,b,c,x1,y1,\u03bb1,a1,b1,c1,depth,stream)}}}resample.precision=function(_){if(!arguments.length)return Math.sqrt(\u03b42);maxDepth=(\u03b42=_*_)>0&&16;return resample};return resample}d3.geo.path=function(){var pointRadius=4.5,projection,context,projectStream,contextStream,cacheStream;function path(object){if(object){if(typeof pointRadius==="function")contextStream.pointRadius(+pointRadius.apply(this,arguments));if(!cacheStream||!cacheStream.valid)cacheStream=projectStream(contextStream);d3.geo.stream(object,cacheStream)}return contextStream.result()}path.area=function(object){d3_geo_pathAreaSum=0;d3.geo.stream(object,projectStream(d3_geo_pathArea));return d3_geo_pathAreaSum};path.centroid=function(object){d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0;d3.geo.stream(object,projectStream(d3_geo_pathCentroid));return d3_geo_centroidZ2?[d3_geo_centroidX2/d3_geo_centroidZ2,d3_geo_centroidY2/d3_geo_centroidZ2]:d3_geo_centroidZ1?[d3_geo_centroidX1/d3_geo_centroidZ1,d3_geo_centroidY1/d3_geo_centroidZ1]:d3_geo_centroidZ0?[d3_geo_centroidX0/d3_geo_centroidZ0,d3_geo_centroidY0/d3_geo_centroidZ0]:[NaN,NaN]};path.bounds=function(object){d3_geo_pathBoundsX1=d3_geo_pathBoundsY1=-(d3_geo_pathBoundsX0=d3_geo_pathBoundsY0=Infinity);d3.geo.stream(object,projectStream(d3_geo_pathBounds));return[[d3_geo_pathBoundsX0,d3_geo_pathBoundsY0],[d3_geo_pathBoundsX1,d3_geo_pathBoundsY1]]};path.projection=function(_){if(!arguments.length)return projection;projectStream=(projection=_)?_.stream||d3_geo_pathProjectStream(_):d3_identity;return reset()};path.context=function(_){if(!arguments.length)return context;contextStream=(context=_)==null?new d3_geo_pathBuffer:new d3_geo_pathContext(_);if(typeof pointRadius!=="function")contextStream.pointRadius(pointRadius);return reset()};path.pointRadius=function(_){if(!arguments.length)return pointRadius;pointRadius=typeof _==="function"?_:(contextStream.pointRadius(+_),+_);return path};function reset(){cacheStream=null;return path}return path.projection(d3.geo.albersUsa()).context(null)};function d3_geo_pathProjectStream(project){var resample=d3_geo_resample(function(x,y){return project([x*d3_degrees,y*d3_degrees])});return function(stream){return d3_geo_projectionRadians(resample(stream))}}d3.geo.transform=function(methods){return{stream:function(stream){var transform=new d3_geo_transform(stream);for(var k in methods)transform[k]=methods[k];return transform}}};function d3_geo_transform(stream){this.stream=stream}d3_geo_transform.prototype={point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function d3_geo_transformPoint(stream,point){return{point:point,sphere:function(){stream.sphere()},lineStart:function(){stream.lineStart()},lineEnd:function(){stream.lineEnd()},polygonStart:function(){stream.polygonStart()},polygonEnd:function(){stream.polygonEnd()}}}d3.geo.projection=d3_geo_projection;d3.geo.projectionMutator=d3_geo_projectionMutator;function d3_geo_projection(project){return d3_geo_projectionMutator(function(){return project})()}function d3_geo_projectionMutator(projectAt){var project,rotate,projectRotate,projectResample=d3_geo_resample(function(x,y){x=project(x,y);return[x[0]*k+\u03b4x,\u03b4y-x[1]*k]}),k=150,x=480,y=250,\u03bb=0,\u03c6=0,\u03b4\u03bb=0,\u03b4\u03c6=0,\u03b4\u03b3=0,\u03b4x,\u03b4y,preclip=d3_geo_clipAntimeridian,postclip=d3_identity,clipAngle=null,clipExtent=null,stream;function projection(point){point=projectRotate(point[0]*d3_radians,point[1]*d3_radians);return[point[0]*k+\u03b4x,\u03b4y-point[1]*k]}function invert(point){point=projectRotate.invert((point[0]-\u03b4x)/k,(\u03b4y-point[1])/k);return point&&[point[0]*d3_degrees,point[1]*d3_degrees]}projection.stream=function(output){if(stream)stream.valid=false;stream=d3_geo_projectionRadians(preclip(rotate,projectResample(postclip(output))));stream.valid=true;return stream};projection.clipAngle=function(_){if(!arguments.length)return clipAngle;preclip=_==null?(clipAngle=_,d3_geo_clipAntimeridian):d3_geo_clipCircle((clipAngle=+_)*d3_radians);return invalidate()};projection.clipExtent=function(_){if(!arguments.length)return clipExtent;clipExtent=_;postclip=_?d3_geo_clipExtent(_[0][0],_[0][1],_[1][0],_[1][1]):d3_identity;return invalidate()};projection.scale=function(_){if(!arguments.length)return k;k=+_;return reset()};projection.translate=function(_){if(!arguments.length)return[x,y];x=+_[0];y=+_[1];return reset()};projection.center=function(_){if(!arguments.length)return[\u03bb*d3_degrees,\u03c6*d3_degrees];\u03bb=_[0]%360*d3_radians;\u03c6=_[1]%360*d3_radians;return reset()};projection.rotate=function(_){if(!arguments.length)return[\u03b4\u03bb*d3_degrees,\u03b4\u03c6*d3_degrees,\u03b4\u03b3*d3_degrees];\u03b4\u03bb=_[0]%360*d3_radians;\u03b4\u03c6=_[1]%360*d3_radians;\u03b4\u03b3=_.length>2?_[2]%360*d3_radians:0;return reset()};d3.rebind(projection,projectResample,"precision");function reset(){projectRotate=d3_geo_compose(rotate=d3_geo_rotation(\u03b4\u03bb,\u03b4\u03c6,\u03b4\u03b3),project);var center=project(\u03bb,\u03c6);\u03b4x=x-center[0]*k;\u03b4y=y+center[1]*k;return invalidate()}function invalidate(){if(stream)stream.valid=false,stream=null;return projection}return function(){project=projectAt.apply(this,arguments);projection.invert=project.invert&&invert;return reset()}}function d3_geo_projectionRadians(stream){return d3_geo_transformPoint(stream,function(x,y){stream.point(x*d3_radians,y*d3_radians)})}function d3_geo_equirectangular(\u03bb,\u03c6){return[\u03bb,\u03c6]}(d3.geo.equirectangular=function(){return d3_geo_projection(d3_geo_equirectangular)}).raw=d3_geo_equirectangular.invert=d3_geo_equirectangular;d3.geo.rotation=function(rotate){rotate=d3_geo_rotation(rotate[0]%360*d3_radians,rotate[1]*d3_radians,rotate.length>2?rotate[2]*d3_radians:0);function forward(coordinates){coordinates=rotate(coordinates[0]*d3_radians,coordinates[1]*d3_radians);return coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates}forward.invert=function(coordinates){coordinates=rotate.invert(coordinates[0]*d3_radians,coordinates[1]*d3_radians);return coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates};return forward};function d3_geo_identityRotation(\u03bb,\u03c6){return[\u03bb>\u03c0?\u03bb-\u03c4:\u03bb<-\u03c0?\u03bb+\u03c4:\u03bb,\u03c6]}d3_geo_identityRotation.invert=d3_geo_equirectangular;function d3_geo_rotation(\u03b4\u03bb,\u03b4\u03c6,\u03b4\u03b3){return \u03b4\u03bb?\u03b4\u03c6||\u03b4\u03b3?d3_geo_compose(d3_geo_rotation\u03bb(\u03b4\u03bb),d3_geo_rotation\u03c6\u03b3(\u03b4\u03c6,\u03b4\u03b3)):d3_geo_rotation\u03bb(\u03b4\u03bb):\u03b4\u03c6||\u03b4\u03b3?d3_geo_rotation\u03c6\u03b3(\u03b4\u03c6,\u03b4\u03b3):d3_geo_identityRotation}function d3_geo_forwardRotation\u03bb(\u03b4\u03bb){return function(\u03bb,\u03c6){return \u03bb+=\u03b4\u03bb,[\u03bb>\u03c0?\u03bb-\u03c4:\u03bb<-\u03c0?\u03bb+\u03c4:\u03bb,\u03c6]}}function d3_geo_rotation\u03bb(\u03b4\u03bb){var rotation=d3_geo_forwardRotation\u03bb(\u03b4\u03bb);rotation.invert=d3_geo_forwardRotation\u03bb(-\u03b4\u03bb);return rotation}function d3_geo_rotation\u03c6\u03b3(\u03b4\u03c6,\u03b4\u03b3){var cos\u03b4\u03c6=Math.cos(\u03b4\u03c6),sin\u03b4\u03c6=Math.sin(\u03b4\u03c6),cos\u03b4\u03b3=Math.cos(\u03b4\u03b3),sin\u03b4\u03b3=Math.sin(\u03b4\u03b3);function rotation(\u03bb,\u03c6){var cos\u03c6=Math.cos(\u03c6),x=Math.cos(\u03bb)*cos\u03c6,y=Math.sin(\u03bb)*cos\u03c6,z=Math.sin(\u03c6),k=z*cos\u03b4\u03c6+x*sin\u03b4\u03c6;return[Math.atan2(y*cos\u03b4\u03b3-k*sin\u03b4\u03b3,x*cos\u03b4\u03c6-z*sin\u03b4\u03c6),d3_asin(k*cos\u03b4\u03b3+y*sin\u03b4\u03b3)]}rotation.invert=function(\u03bb,\u03c6){var cos\u03c6=Math.cos(\u03c6),x=Math.cos(\u03bb)*cos\u03c6,y=Math.sin(\u03bb)*cos\u03c6,z=Math.sin(\u03c6),k=z*cos\u03b4\u03b3-y*sin\u03b4\u03b3;return[Math.atan2(y*cos\u03b4\u03b3+z*sin\u03b4\u03b3,x*cos\u03b4\u03c6+k*sin\u03b4\u03c6),d3_asin(k*cos\u03b4\u03c6-x*sin\u03b4\u03c6)]};return rotation}d3.geo.circle=function(){var origin=[0,0],angle,precision=6,interpolate;function circle(){var center=typeof origin==="function"?origin.apply(this,arguments):origin,rotate=d3_geo_rotation(-center[0]*d3_radians,-center[1]*d3_radians,0).invert,ring=[];interpolate(null,null,1,{point:function(x,y){ring.push(x=rotate(x,y));x[0]*=d3_degrees,x[1]*=d3_degrees}});return{type:"Polygon",coordinates:[ring]}}circle.origin=function(x){if(!arguments.length)return origin;origin=x;return circle};circle.angle=function(x){if(!arguments.length)return angle;interpolate=d3_geo_circleInterpolate((angle=+x)*d3_radians,precision*d3_radians);return circle};circle.precision=function(_){if(!arguments.length)return precision;interpolate=d3_geo_circleInterpolate(angle*d3_radians,(precision=+_)*d3_radians);return circle};return circle.angle(90)};function d3_geo_circleInterpolate(radius,precision){var cr=Math.cos(radius),sr=Math.sin(radius);return function(from,to,direction,listener){var step=direction*precision;if(from!=null){from=d3_geo_circleAngle(cr,from);to=d3_geo_circleAngle(cr,to);if(direction>0?from<to:from>to)from+=direction*\u03c4}else{from=radius+direction*\u03c4;to=radius-.5*step}for(var point,t=from;direction>0?t>to:t<to;t-=step){listener.point((point=d3_geo_spherical([cr,-sr*Math.cos(t),-sr*Math.sin(t)]))[0],point[1])}}}function d3_geo_circleAngle(cr,point){var a=d3_geo_cartesian(point);a[0]-=cr;d3_geo_cartesianNormalize(a);var angle=d3_acos(-a[1]);return((-a[2]<0?-angle:angle)+2*Math.PI-\u03b5)%(2*Math.PI)}d3.geo.distance=function(a,b){var \u0394\u03bb=(b[0]-a[0])*d3_radians,\u03c60=a[1]*d3_radians,\u03c61=b[1]*d3_radians,sin\u0394\u03bb=Math.sin(\u0394\u03bb),cos\u0394\u03bb=Math.cos(\u0394\u03bb),sin\u03c60=Math.sin(\u03c60),cos\u03c60=Math.cos(\u03c60),sin\u03c61=Math.sin(\u03c61),cos\u03c61=Math.cos(\u03c61),t;return Math.atan2(Math.sqrt((t=cos\u03c61*sin\u0394\u03bb)*t+(t=cos\u03c60*sin\u03c61-sin\u03c60*cos\u03c61*cos\u0394\u03bb)*t),sin\u03c60*sin\u03c61+cos\u03c60*cos\u03c61*cos\u0394\u03bb)};d3.geo.graticule=function(){var x1,x0,X1,X0,y1,y0,Y1,Y0,dx=10,dy=dx,DX=90,DY=360,x,y,X,Y,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3.range(Math.ceil(X0/DX)*DX,X1,DX).map(X).concat(d3.range(Math.ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3.range(Math.ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs(x%DX)>\u03b5}).map(x)).concat(d3.range(Math.ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs(y%DY)>\u03b5}).map(y))}graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates}})};graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}};graticule.extent=function(_){if(!arguments.length)return graticule.minorExtent();return graticule.majorExtent(_).minorExtent(_)};graticule.majorExtent=function(_){if(!arguments.length)return[[X0,Y0],[X1,Y1]];X0=+_[0][0],X1=+_[1][0];Y0=+_[0][1],Y1=+_[1][1];if(X0>X1)_=X0,X0=X1,X1=_;if(Y0>Y1)_=Y0,Y0=Y1,Y1=_;return graticule.precision(precision)};graticule.minorExtent=function(_){if(!arguments.length)return[[x0,y0],[x1,y1]];x0=+_[0][0],x1=+_[1][0];y0=+_[0][1],y1=+_[1][1];if(x0>x1)_=x0,x0=x1,x1=_;if(y0>y1)_=y0,y0=y1,y1=_;return graticule.precision(precision)};graticule.step=function(_){if(!arguments.length)return graticule.minorStep();return graticule.majorStep(_).minorStep(_)};graticule.majorStep=function(_){if(!arguments.length)return[DX,DY];DX=+_[0],DY=+_[1];return graticule};graticule.minorStep=function(_){if(!arguments.length)return[dx,dy];dx=+_[0],dy=+_[1];return graticule};graticule.precision=function(_){if(!arguments.length)return precision;precision=+_;x=d3_geo_graticuleX(y0,y1,90);y=d3_geo_graticuleY(x0,x1,precision);X=d3_geo_graticuleX(Y0,Y1,90);Y=d3_geo_graticuleY(X0,X1,precision);return graticule};return graticule.majorExtent([[-180,-90+\u03b5],[180,90-\u03b5]]).minorExtent([[-180,-80-\u03b5],[180,80+\u03b5]])};function d3_geo_graticuleX(y0,y1,dy){var y=d3.range(y0,y1-\u03b5,dy).concat(y1);return function(x){return y.map(function(y){return[x,y]})}}function d3_geo_graticuleY(x0,x1,dx){var x=d3.range(x0,x1-\u03b5,dx).concat(x1);return function(y){return x.map(function(x){return[x,y]})}}function d3_source(d){return d.source}function d3_target(d){return d.target}d3.geo.greatArc=function(){var source=d3_source,source_,target=d3_target,target_;function greatArc(){return{type:"LineString",coordinates:[source_||source.apply(this,arguments),target_||target.apply(this,arguments)]}}greatArc.distance=function(){return d3.geo.distance(source_||source.apply(this,arguments),target_||target.apply(this,arguments))};greatArc.source=function(_){if(!arguments.length)return source;source=_,source_=typeof _==="function"?null:_;return greatArc};greatArc.target=function(_){if(!arguments.length)return target;target=_,target_=typeof _==="function"?null:_;return greatArc};greatArc.precision=function(){return arguments.length?greatArc:0};return greatArc};d3.geo.interpolate=function(source,target){return d3_geo_interpolate(source[0]*d3_radians,source[1]*d3_radians,target[0]*d3_radians,target[1]*d3_radians)};function d3_geo_interpolate(x0,y0,x1,y1){var cy0=Math.cos(y0),sy0=Math.sin(y0),cy1=Math.cos(y1),sy1=Math.sin(y1),kx0=cy0*Math.cos(x0),ky0=cy0*Math.sin(x0),kx1=cy1*Math.cos(x1),ky1=cy1*Math.sin(x1),d=2*Math.asin(Math.sqrt(d3_haversin(y1-y0)+cy0*cy1*d3_haversin(x1-x0))),k=1/Math.sin(d);var interpolate=d?function(t){var B=Math.sin(t*=d)*k,A=Math.sin(d-t)*k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[Math.atan2(y,x)*d3_degrees,Math.atan2(z,Math.sqrt(x*x+y*y))*d3_degrees]}:function(){return[x0*d3_degrees,y0*d3_degrees]};interpolate.distance=d;return interpolate}d3.geo.length=function(object){d3_geo_lengthSum=0;d3.geo.stream(object,d3_geo_length);return d3_geo_lengthSum};var d3_geo_lengthSum;var d3_geo_length={sphere:d3_noop,point:d3_noop,lineStart:d3_geo_lengthLineStart,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop};function d3_geo_lengthLineStart(){var \u03bb0,sin\u03c60,cos\u03c60;d3_geo_length.point=function(\u03bb,\u03c6){\u03bb0=\u03bb*d3_radians,sin\u03c60=Math.sin(\u03c6*=d3_radians),cos\u03c60=Math.cos(\u03c6);d3_geo_length.point=nextPoint};d3_geo_length.lineEnd=function(){d3_geo_length.point=d3_geo_length.lineEnd=d3_noop};function nextPoint(\u03bb,\u03c6){var sin\u03c6=Math.sin(\u03c6*=d3_radians),cos\u03c6=Math.cos(\u03c6),t=abs((\u03bb*=d3_radians)-\u03bb0),cos\u0394\u03bb=Math.cos(t);d3_geo_lengthSum+=Math.atan2(Math.sqrt((t=cos\u03c6*Math.sin(t))*t+(t=cos\u03c60*sin\u03c6-sin\u03c60*cos\u03c6*cos\u0394\u03bb)*t),sin\u03c60*sin\u03c6+cos\u03c60*cos\u03c6*cos\u0394\u03bb);\u03bb0=\u03bb,sin\u03c60=sin\u03c6,cos\u03c60=cos\u03c6}}function d3_geo_azimuthal(scale,angle){function azimuthal(\u03bb,\u03c6){var cos\u03bb=Math.cos(\u03bb),cos\u03c6=Math.cos(\u03c6),k=scale(cos\u03bb*cos\u03c6);return[k*cos\u03c6*Math.sin(\u03bb),k*Math.sin(\u03c6)]}azimuthal.invert=function(x,y){var \u03c1=Math.sqrt(x*x+y*y),c=angle(\u03c1),sinc=Math.sin(c),cosc=Math.cos(c);return[Math.atan2(x*sinc,\u03c1*cosc),Math.asin(\u03c1&&y*sinc/\u03c1)]};return azimuthal}var d3_geo_azimuthalEqualArea=d3_geo_azimuthal(function(cos\u03bbcos\u03c6){return Math.sqrt(2/(1+cos\u03bbcos\u03c6))},function(\u03c1){return 2*Math.asin(\u03c1/2)});(d3.geo.azimuthalEqualArea=function(){return d3_geo_projection(d3_geo_azimuthalEqualArea)}).raw=d3_geo_azimuthalEqualArea;var d3_geo_azimuthalEquidistant=d3_geo_azimuthal(function(cos\u03bbcos\u03c6){var c=Math.acos(cos\u03bbcos\u03c6);return c&&c/Math.sin(c)},d3_identity);(d3.geo.azimuthalEquidistant=function(){return d3_geo_projection(d3_geo_azimuthalEquidistant)}).raw=d3_geo_azimuthalEquidistant;function d3_geo_conicConformal(\u03c60,\u03c61){var cos\u03c60=Math.cos(\u03c60),t=function(\u03c6){return Math.tan(\u03c0/4+\u03c6/2)},n=\u03c60===\u03c61?Math.sin(\u03c60):Math.log(cos\u03c60/Math.cos(\u03c61))/Math.log(t(\u03c61)/t(\u03c60)),F=cos\u03c60*Math.pow(t(\u03c60),n)/n;if(!n)return d3_geo_mercator;function forward(\u03bb,\u03c6){if(F>0){if(\u03c6<-half\u03c0+\u03b5)\u03c6=-half\u03c0+\u03b5}else{if(\u03c6>half\u03c0-\u03b5)\u03c6=half\u03c0-\u03b5}var \u03c1=F/Math.pow(t(\u03c6),n);return[\u03c1*Math.sin(n*\u03bb),F-\u03c1*Math.cos(n*\u03bb)]}forward.invert=function(x,y){var \u03c10_y=F-y,\u03c1=d3_sgn(n)*Math.sqrt(x*x+\u03c10_y*\u03c10_y);return[Math.atan2(x,\u03c10_y)/n,2*Math.atan(Math.pow(F/\u03c1,1/n))-half\u03c0]};return forward}(d3.geo.conicConformal=function(){return d3_geo_conic(d3_geo_conicConformal)}).raw=d3_geo_conicConformal;function d3_geo_conicEquidistant(\u03c60,\u03c61){var cos\u03c60=Math.cos(\u03c60),n=\u03c60===\u03c61?Math.sin(\u03c60):(cos\u03c60-Math.cos(\u03c61))/(\u03c61-\u03c60),G=cos\u03c60/n+\u03c60;if(abs(n)<\u03b5)return d3_geo_equirectangular;function forward(\u03bb,\u03c6){var \u03c1=G-\u03c6;return[\u03c1*Math.sin(n*\u03bb),G-\u03c1*Math.cos(n*\u03bb)]}forward.invert=function(x,y){var \u03c10_y=G-y;return[Math.atan2(x,\u03c10_y)/n,G-d3_sgn(n)*Math.sqrt(x*x+\u03c10_y*\u03c10_y)]};return forward}(d3.geo.conicEquidistant=function(){return d3_geo_conic(d3_geo_conicEquidistant)}).raw=d3_geo_conicEquidistant;var d3_geo_gnomonic=d3_geo_azimuthal(function(cos\u03bbcos\u03c6){return 1/cos\u03bbcos\u03c6},Math.atan);(d3.geo.gnomonic=function(){return d3_geo_projection(d3_geo_gnomonic)}).raw=d3_geo_gnomonic;function d3_geo_mercator(\u03bb,\u03c6){return[\u03bb,Math.log(Math.tan(\u03c0/4+\u03c6/2))]}d3_geo_mercator.invert=function(x,y){return[x,2*Math.atan(Math.exp(y))-half\u03c0]};function d3_geo_mercatorProjection(project){var m=d3_geo_projection(project),scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,clipAuto;m.scale=function(){var v=scale.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v};m.translate=function(){var v=translate.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v};m.clipExtent=function(_){var v=clipExtent.apply(m,arguments);if(v===m){if(clipAuto=_==null){var k=\u03c0*scale(),t=translate();clipExtent([[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]])}}else if(clipAuto){v=null}return v};return m.clipExtent(null)}(d3.geo.mercator=function(){return d3_geo_mercatorProjection(d3_geo_mercator)}).raw=d3_geo_mercator;var d3_geo_orthographic=d3_geo_azimuthal(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return d3_geo_projection(d3_geo_orthographic)}).raw=d3_geo_orthographic;var d3_geo_stereographic=d3_geo_azimuthal(function(cos\u03bbcos\u03c6){return 1/(1+cos\u03bbcos\u03c6)},function(\u03c1){return 2*Math.atan(\u03c1)});(d3.geo.stereographic=function(){return d3_geo_projection(d3_geo_stereographic)}).raw=d3_geo_stereographic;function d3_geo_transverseMercator(\u03bb,\u03c6){return[Math.log(Math.tan(\u03c0/4+\u03c6/2)),-\u03bb]}d3_geo_transverseMercator.invert=function(x,y){return[-y,2*Math.atan(Math.exp(x))-half\u03c0]};(d3.geo.transverseMercator=function(){var projection=d3_geo_mercatorProjection(d3_geo_transverseMercator),center=projection.center,rotate=projection.rotate;projection.center=function(_){return _?center([-_[1],_[0]]):(_=center(),[_[1],-_[0]])};projection.rotate=function(_){return _?rotate([_[0],_[1],_.length>2?_[2]+90:90]):(_=rotate(),[_[0],_[1],_[2]-90])};return rotate([0,0,90])}).raw=d3_geo_transverseMercator;d3.geom={};function d3_geom_pointX(d){return d[0]}function d3_geom_pointY(d){return d[1]}d3.geom.hull=function(vertices){var x=d3_geom_pointX,y=d3_geom_pointY;if(arguments.length)return hull(vertices);function hull(data){if(data.length<3)return[];var fx=d3_functor(x),fy=d3_functor(y),i,n=data.length,points=[],flippedPoints=[];for(i=0;i<n;i++){points.push([+fx.call(this,data[i],i),+fy.call(this,data[i],i),i])}points.sort(d3_geom_hullOrder);for(i=0;i<n;i++)flippedPoints.push([points[i][0],-points[i][1]]);var upper=d3_geom_hullUpper(points),lower=d3_geom_hullUpper(flippedPoints);var skipLeft=lower[0]===upper[0],skipRight=lower[lower.length-1]===upper[upper.length-1],polygon=[];for(i=upper.length-1;i>=0;--i)polygon.push(data[points[upper[i]][2]]);for(i=+skipLeft;i<lower.length-skipRight;++i)polygon.push(data[points[lower[i]][2]]);return polygon}hull.x=function(_){return arguments.length?(x=_,hull):x};hull.y=function(_){return arguments.length?(y=_,hull):y};return hull};function d3_geom_hullUpper(points){var n=points.length,hull=[0,1],hs=2;for(var i=2;i<n;i++){while(hs>1&&d3_cross2d(points[hull[hs-2]],points[hull[hs-1]],points[i])<=0)--hs;hull[hs++]=i}return hull.slice(0,hs)}function d3_geom_hullOrder(a,b){return a[0]-b[0]||a[1]-b[1]}d3.geom.polygon=function(coordinates){d3_subclass(coordinates,d3_geom_polygonPrototype);return coordinates};var d3_geom_polygonPrototype=d3.geom.polygon.prototype=[];d3_geom_polygonPrototype.area=function(){var i=-1,n=this.length,a,b=this[n-1],area=0;while(++i<n){a=b;b=this[i];area+=a[1]*b[0]-a[0]*b[1]}return area*.5};d3_geom_polygonPrototype.centroid=function(k){var i=-1,n=this.length,x=0,y=0,a,b=this[n-1],c;if(!arguments.length)k=-1/(6*this.area());while(++i<n){a=b;b=this[i];c=a[0]*b[1]-b[0]*a[1];x+=(a[0]+b[0])*c;y+=(a[1]+b[1])*c}return[x*k,y*k]};d3_geom_polygonPrototype.clip=function(subject){var input,closed=d3_geom_polygonClosed(subject),i=-1,n=this.length-d3_geom_polygonClosed(this),j,m,a=this[n-1],b,c,d;while(++i<n){input=subject.slice();subject.length=0;b=this[i];c=input[(m=input.length-closed)-1];j=-1;while(++j<m){d=input[j];if(d3_geom_polygonInside(d,a,b)){if(!d3_geom_polygonInside(c,a,b)){subject.push(d3_geom_polygonIntersect(c,d,a,b))}subject.push(d)}else if(d3_geom_polygonInside(c,a,b)){subject.push(d3_geom_polygonIntersect(c,d,a,b))}c=d}if(closed)subject.push(subject[0]);a=b}return subject};function d3_geom_polygonInside(p,a,b){return(b[0]-a[0])*(p[1]-a[1])<(b[1]-a[1])*(p[0]-a[0])}function d3_geom_polygonIntersect(c,d,a,b){var x1=c[0],x3=a[0],x21=d[0]-x1,x43=b[0]-x3,y1=c[1],y3=a[1],y21=d[1]-y1,y43=b[1]-y3,ua=(x43*(y1-y3)-y43*(x1-x3))/(y43*x21-x43*y21);return[x1+ua*x21,y1+ua*y21]}function d3_geom_polygonClosed(coordinates){var a=coordinates[0],b=coordinates[coordinates.length-1];return!(a[0]-b[0]||a[1]-b[1])}var d3_geom_voronoiEdges,d3_geom_voronoiCells,d3_geom_voronoiBeaches,d3_geom_voronoiBeachPool=[],d3_geom_voronoiFirstCircle,d3_geom_voronoiCircles,d3_geom_voronoiCirclePool=[];function d3_geom_voronoiBeach(){d3_geom_voronoiRedBlackNode(this);this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(site){var beach=d3_geom_voronoiBeachPool.pop()||new d3_geom_voronoiBeach;beach.site=site;return beach}function d3_geom_voronoiDetachBeach(beach){d3_geom_voronoiDetachCircle(beach);d3_geom_voronoiBeaches.remove(beach);d3_geom_voronoiBeachPool.push(beach);d3_geom_voronoiRedBlackNode(beach)}function d3_geom_voronoiRemoveBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex={x:x,y:y},previous=beach.P,next=beach.N,disappearing=[beach];d3_geom_voronoiDetachBeach(beach);var lArc=previous;while(lArc.circle&&abs(x-lArc.circle.x)<\u03b5&&abs(y-lArc.circle.cy)<\u03b5){previous=lArc.P;disappearing.unshift(lArc);d3_geom_voronoiDetachBeach(lArc);lArc=previous}disappearing.unshift(lArc);d3_geom_voronoiDetachCircle(lArc);var rArc=next;while(rArc.circle&&abs(x-rArc.circle.x)<\u03b5&&abs(y-rArc.circle.cy)<\u03b5){next=rArc.N;disappearing.push(rArc);d3_geom_voronoiDetachBeach(rArc);rArc=next}disappearing.push(rArc);d3_geom_voronoiDetachCircle(rArc);var nArcs=disappearing.length,iArc;for(iArc=1;iArc<nArcs;++iArc){rArc=disappearing[iArc];lArc=disappearing[iArc-1];d3_geom_voronoiSetEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex)}lArc=disappearing[0];rArc=disappearing[nArcs-1];rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,rArc.site,null,vertex);d3_geom_voronoiAttachCircle(lArc);d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiAddBeach(site){var x=site.x,directrix=site.y,lArc,rArc,dxl,dxr,node=d3_geom_voronoiBeaches._;while(node){dxl=d3_geom_voronoiLeftBreakPoint(node,directrix)-x;if(dxl>\u03b5)node=node.L;else{dxr=x-d3_geom_voronoiRightBreakPoint(node,directrix);if(dxr>\u03b5){if(!node.R){lArc=node;break}node=node.R}else{if(dxl>-\u03b5){lArc=node.P;rArc=node}else if(dxr>-\u03b5){lArc=node;rArc=node.N}else{lArc=rArc=node}break}}}var newArc=d3_geom_voronoiCreateBeach(site);d3_geom_voronoiBeaches.insert(lArc,newArc);if(!lArc&&!rArc)return;if(lArc===rArc){d3_geom_voronoiDetachCircle(lArc);rArc=d3_geom_voronoiCreateBeach(lArc.site);d3_geom_voronoiBeaches.insert(newArc,rArc);newArc.edge=rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site);d3_geom_voronoiAttachCircle(lArc);d3_geom_voronoiAttachCircle(rArc);return}if(!rArc){newArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site);return}d3_geom_voronoiDetachCircle(lArc);d3_geom_voronoiDetachCircle(rArc);var lSite=lArc.site,ax=lSite.x,ay=lSite.y,bx=site.x-ax,by=site.y-ay,rSite=rArc.site,cx=rSite.x-ax,cy=rSite.y-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex={x:(cy*hb-by*hc)/d+ax,y:(bx*hc-cx*hb)/d+ay};d3_geom_voronoiSetEdgeEnd(rArc.edge,lSite,rSite,vertex);newArc.edge=d3_geom_voronoiCreateEdge(lSite,site,null,vertex);rArc.edge=d3_geom_voronoiCreateEdge(site,rSite,null,vertex);d3_geom_voronoiAttachCircle(lArc);d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiLeftBreakPoint(arc,directrix){var site=arc.site,rfocx=site.x,rfocy=site.y,pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-Infinity;site=lArc.site;var lfocx=site.x,lfocy=site.y,plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;if(aby2)return(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx;return(rfocx+lfocx)/2}function d3_geom_voronoiRightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return d3_geom_voronoiLeftBreakPoint(rArc,directrix);var site=arc.site;return site.y===directrix?site.x:Infinity}function d3_geom_voronoiCell(site){this.site=site;this.edges=[]}d3_geom_voronoiCell.prototype.prepare=function(){var halfEdges=this.edges,iHalfEdge=halfEdges.length,edge;while(iHalfEdge--){edge=halfEdges[iHalfEdge].edge;if(!edge.b||!edge.a)halfEdges.splice(iHalfEdge,1)}halfEdges.sort(d3_geom_voronoiHalfEdgeOrder);return halfEdges.length};function d3_geom_voronoiCloseCells(extent){var x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],x2,y2,x3,y3,cells=d3_geom_voronoiCells,iCell=cells.length,cell,iHalfEdge,halfEdges,nHalfEdges,start,end;while(iCell--){cell=cells[iCell];if(!cell||!cell.prepare())continue;halfEdges=cell.edges;nHalfEdges=halfEdges.length;iHalfEdge=0;while(iHalfEdge<nHalfEdges){end=halfEdges[iHalfEdge].end(),x3=end.x,y3=end.y;start=halfEdges[++iHalfEdge%nHalfEdges].start(),x2=start.x,y2=start.y;if(abs(x3-x2)>\u03b5||abs(y3-y2)>\u03b5){halfEdges.splice(iHalfEdge,0,new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site,end,abs(x3-x0)<\u03b5&&y1-y3>\u03b5?{x:x0,y:abs(x2-x0)<\u03b5?y2:y1}:abs(y3-y1)<\u03b5&&x1-x3>\u03b5?{x:abs(y2-y1)<\u03b5?x2:x1,y:y1}:abs(x3-x1)<\u03b5&&y3-y0>\u03b5?{x:x1,y:abs(x2-x1)<\u03b5?y2:y0}:abs(y3-y0)<\u03b5&&x3-x0>\u03b5?{x:abs(y2-y0)<\u03b5?x2:x0,y:y0}:null),cell.site,null));++nHalfEdges}}}}function d3_geom_voronoiHalfEdgeOrder(a,b){return b.angle-a.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this);this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(arc){var lArc=arc.P,rArc=arc.N;if(!lArc||!rArc)return;var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite===rSite)return;var bx=cSite.x,by=cSite.y,ax=lSite.x-bx,ay=lSite.y-by,cx=rSite.x-bx,cy=rSite.y-by;var d=2*(ax*cy-ay*cx);if(d>=-\u03b52)return;var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,cy=y+by;var circle=d3_geom_voronoiCirclePool.pop()||new d3_geom_voronoiCircle;circle.arc=arc;circle.site=cSite;circle.x=x+bx;circle.y=cy+Math.sqrt(x*x+y*y);circle.cy=cy;arc.circle=circle;var before=null,node=d3_geom_voronoiCircles._;while(node){if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(node.L)node=node.L;else{before=node.P;break}}else{if(node.R)node=node.R;else{before=node;break}}}d3_geom_voronoiCircles.insert(before,circle);if(!before)d3_geom_voronoiFirstCircle=circle}function d3_geom_voronoiDetachCircle(arc){var circle=arc.circle;if(circle){if(!circle.P)d3_geom_voronoiFirstCircle=circle.N;d3_geom_voronoiCircles.remove(circle);d3_geom_voronoiCirclePool.push(circle);d3_geom_voronoiRedBlackNode(circle);arc.circle=null}}function d3_geom_voronoiClipEdges(extent){var edges=d3_geom_voronoiEdges,clip=d3_geom_clipLine(extent[0][0],extent[0][1],extent[1][0],extent[1][1]),i=edges.length,e;while(i--){e=edges[i];if(!d3_geom_voronoiConnectEdge(e,extent)||!clip(e)||abs(e.a.x-e.b.x)<\u03b5&&abs(e.a.y-e.b.y)<\u03b5){e.a=e.b=null;edges.splice(i,1)}}}function d3_geom_voronoiConnectEdge(edge,extent){var vb=edge.b;if(vb)return true;var va=edge.a,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],lSite=edge.l,rSite=edge.r,lx=lSite.x,ly=lSite.y,rx=rSite.x,ry=rSite.y,fx=(lx+rx)/2,fy=(ly+ry)/2,fm,fb;if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(!va)va={x:fx,y:y0};else if(va.y>=y1)return;vb={x:fx,y:y1}}else{if(!va)va={x:fx,y:y1};else if(va.y<y0)return;vb={x:fx,y:y0}}}else{fm=(lx-rx)/(ry-ly);fb=fy-fm*fx;if(fm<-1||fm>1){if(lx>rx){if(!va)va={x:(y0-fb)/fm,y:y0};else if(va.y>=y1)return;vb={x:(y1-fb)/fm,y:y1}}else{if(!va)va={x:(y1-fb)/fm,y:y1};else if(va.y<y0)return;vb={x:(y0-fb)/fm,y:y0}}}else{if(ly<ry){if(!va)va={x:x0,y:fm*x0+fb};else if(va.x>=x1)return;vb={x:x1,y:fm*x1+fb}}else{if(!va)va={x:x1,y:fm*x1+fb};else if(va.x<x0)return;vb={x:x0,y:fm*x0+fb}}}}edge.a=va;edge.b=vb;return true}function d3_geom_voronoiEdge(lSite,rSite){this.l=lSite;this.r=rSite;this.a=this.b=null}function d3_geom_voronoiCreateEdge(lSite,rSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,rSite);d3_geom_voronoiEdges.push(edge);if(va)d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,va);if(vb)d3_geom_voronoiSetEdgeEnd(edge,rSite,lSite,vb);d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,lSite,rSite));d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,rSite,lSite));return edge}function d3_geom_voronoiCreateBorderEdge(lSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,null);edge.a=va;edge.b=vb;d3_geom_voronoiEdges.push(edge);return edge}function d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,vertex){if(!edge.a&&!edge.b){edge.a=vertex;edge.l=lSite;edge.r=rSite}else if(edge.l===rSite){edge.b=vertex}else{edge.a=vertex}}function d3_geom_voronoiHalfEdge(edge,lSite,rSite){var va=edge.a,vb=edge.b;this.edge=edge;this.site=lSite;this.angle=rSite?Math.atan2(rSite.y-lSite.y,rSite.x-lSite.x):edge.l===lSite?Math.atan2(vb.x-va.x,va.y-vb.y):Math.atan2(va.x-vb.x,vb.y-va.y)}d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function d3_geom_voronoiRedBlackTree(){this._=null}function d3_geom_voronoiRedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}d3_geom_voronoiRedBlackTree.prototype={insert:function(after,node){var parent,grandpa,uncle;if(after){node.P=after;node.N=after.N;if(after.N)after.N.P=node;after.N=node;if(after.R){after=after.R;while(after.L)after=after.L;after.L=node}else{after.R=node}parent=after}else if(this._){after=d3_geom_voronoiRedBlackFirst(this._);node.P=null;node.N=after;after.P=after.L=node;parent=after}else{node.P=node.N=null;this._=node;parent=null}node.L=node.R=null;node.U=parent;node.C=true;after=node;while(parent&&parent.C){grandpa=parent.U;if(parent===grandpa.L){uncle=grandpa.R;if(uncle&&uncle.C){parent.C=uncle.C=false;grandpa.C=true;after=grandpa}else{if(after===parent.R){d3_geom_voronoiRedBlackRotateLeft(this,parent);after=parent;parent=after.U}parent.C=false;grandpa.C=true;d3_geom_voronoiRedBlackRotateRight(this,grandpa)}}else{uncle=grandpa.L;if(uncle&&uncle.C){parent.C=uncle.C=false;grandpa.C=true;after=grandpa}else{if(after===parent.L){d3_geom_voronoiRedBlackRotateRight(this,parent);after=parent;parent=after.U}parent.C=false;grandpa.C=true;d3_geom_voronoiRedBlackRotateLeft(this,grandpa)}}parent=after.U}this._.C=false},remove:function(node){if(node.N)node.N.P=node.P;if(node.P)node.P.N=node.N;node.N=node.P=null;var parent=node.U,sibling,left=node.L,right=node.R,next,red;if(!left)next=right;else if(!right)next=left;else next=d3_geom_voronoiRedBlackFirst(right);if(parent){if(parent.L===node)parent.L=next;else parent.R=next}else{this._=next}if(left&&right){red=next.C;next.C=node.C;next.L=left;left.U=next;if(next!==right){parent=next.U;next.U=node.U;node=next.R;parent.L=node;next.R=right;right.U=next}else{next.U=parent;parent=next;node=next.R}}else{red=node.C;node=next}if(node)node.U=parent;if(red)return;if(node&&node.C){node.C=false;return}do{if(node===this._)break;if(node===parent.L){sibling=parent.R;if(sibling.C){sibling.C=false;parent.C=true;d3_geom_voronoiRedBlackRotateLeft(this,parent);sibling=parent.R}if(sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){if(!sibling.R||!sibling.R.C){sibling.L.C=false;sibling.C=true;d3_geom_voronoiRedBlackRotateRight(this,sibling);sibling=parent.R}sibling.C=parent.C;parent.C=sibling.R.C=false;d3_geom_voronoiRedBlackRotateLeft(this,parent);node=this._;break}}else{sibling=parent.L;if(sibling.C){sibling.C=false;parent.C=true;d3_geom_voronoiRedBlackRotateRight(this,parent);sibling=parent.L}if(sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){if(!sibling.L||!sibling.L.C){sibling.R.C=false;sibling.C=true;d3_geom_voronoiRedBlackRotateLeft(this,sibling);sibling=parent.L}sibling.C=parent.C;parent.C=sibling.L.C=false;d3_geom_voronoiRedBlackRotateRight(this,parent);node=this._;break}}sibling.C=true;node=parent;parent=parent.U}while(!node.C);if(node)node.C=false}};function d3_geom_voronoiRedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;if(parent){if(parent.L===p)parent.L=q;else parent.R=q}else{tree._=q}q.U=parent;p.U=q;p.R=q.L;if(p.R)p.R.U=p;q.L=p}function d3_geom_voronoiRedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;if(parent){if(parent.L===p)parent.L=q;else parent.R=q}else{tree._=q}q.U=parent;p.U=q;p.L=q.R;if(p.L)p.L.U=p;q.R=p}function d3_geom_voronoiRedBlackFirst(node){while(node.L)node=node.L;return node}function d3_geom_voronoi(sites,bbox){var site=sites.sort(d3_geom_voronoiVertexOrder).pop(),x0,y0,circle;d3_geom_voronoiEdges=[];d3_geom_voronoiCells=new Array(sites.length);d3_geom_voronoiBeaches=new d3_geom_voronoiRedBlackTree;d3_geom_voronoiCircles=new d3_geom_voronoiRedBlackTree;while(true){circle=d3_geom_voronoiFirstCircle;if(site&&(!circle||site.y<circle.y||site.y===circle.y&&site.x<circle.x)){if(site.x!==x0||site.y!==y0){d3_geom_voronoiCells[site.i]=new d3_geom_voronoiCell(site);d3_geom_voronoiAddBeach(site);x0=site.x,y0=site.y}site=sites.pop()}else if(circle){d3_geom_voronoiRemoveBeach(circle.arc)}else{break}}if(bbox)d3_geom_voronoiClipEdges(bbox),d3_geom_voronoiCloseCells(bbox);var diagram={cells:d3_geom_voronoiCells,edges:d3_geom_voronoiEdges};d3_geom_voronoiBeaches=d3_geom_voronoiCircles=d3_geom_voronoiEdges=d3_geom_voronoiCells=null;return diagram}function d3_geom_voronoiVertexOrder(a,b){return b.y-a.y||b.x-a.x}d3.geom.voronoi=function(points){var x=d3_geom_pointX,y=d3_geom_pointY,fx=x,fy=y,clipExtent=d3_geom_voronoiClipExtent;if(points)return voronoi(points);function voronoi(data){var polygons=new Array(data.length),x0=clipExtent[0][0],y0=clipExtent[0][1],x1=clipExtent[1][0],y1=clipExtent[1][1];d3_geom_voronoi(sites(data),clipExtent).cells.forEach(function(cell,i){var edges=cell.edges,site=cell.site,polygon=polygons[i]=edges.length?edges.map(function(e){var s=e.start();return[s.x,s.y]}):site.x>=x0&&site.x<=x1&&site.y>=y0&&site.y<=y1?[[x0,y1],[x1,y1],[x1,y0],[x0,y0]]:[];polygon.point=data[i]});return polygons}function sites(data){return data.map(function(d,i){return{x:Math.round(fx(d,i)/\u03b5)*\u03b5,y:Math.round(fy(d,i)/\u03b5)*\u03b5,i:i}})}voronoi.links=function(data){return d3_geom_voronoi(sites(data)).edges.filter(function(edge){return edge.l&&edge.r}).map(function(edge){return{source:data[edge.l.i],target:data[edge.r.i]}})};voronoi.triangles=function(data){var triangles=[];d3_geom_voronoi(sites(data)).cells.forEach(function(cell,i){var site=cell.site,edges=cell.edges.sort(d3_geom_voronoiHalfEdgeOrder),j=-1,m=edges.length,e0,s0,e1=edges[m-1].edge,s1=e1.l===site?e1.r:e1.l;while(++j<m){e0=e1;s0=s1;e1=edges[j].edge;s1=e1.l===site?e1.r:e1.l;if(i<s0.i&&i<s1.i&&d3_geom_voronoiTriangleArea(site,s0,s1)<0){triangles.push([data[i],data[s0.i],data[s1.i]])}}});return triangles};voronoi.x=function(_){return arguments.length?(fx=d3_functor(x=_),voronoi):x};voronoi.y=function(_){return arguments.length?(fy=d3_functor(y=_),voronoi):y};voronoi.clipExtent=function(_){if(!arguments.length)return clipExtent===d3_geom_voronoiClipExtent?null:clipExtent;clipExtent=_==null?d3_geom_voronoiClipExtent:_;return voronoi};voronoi.size=function(_){if(!arguments.length)return clipExtent===d3_geom_voronoiClipExtent?null:clipExtent&&clipExtent[1];return voronoi.clipExtent(_&&[[0,0],_])};return voronoi};var d3_geom_voronoiClipExtent=[[-1e6,-1e6],[1e6,1e6]];function d3_geom_voronoiTriangleArea(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}d3.geom.delaunay=function(vertices){return d3.geom.voronoi().triangles(vertices)};d3.geom.quadtree=function(points,x1,y1,x2,y2){var x=d3_geom_pointX,y=d3_geom_pointY,compat;if(compat=arguments.length){x=d3_geom_quadtreeCompatX;y=d3_geom_quadtreeCompatY;if(compat===3){y2=y1;x2=x1;y1=x1=0}return quadtree(points)}function quadtree(data){var d,fx=d3_functor(x),fy=d3_functor(y),xs,ys,i,n,x1_,y1_,x2_,y2_;if(x1!=null){x1_=x1,y1_=y1,x2_=x2,y2_=y2}else{x2_=y2_=-(x1_=y1_=Infinity);xs=[],ys=[];n=data.length;if(compat)for(i=0;i<n;++i){d=data[i];if(d.x<x1_)x1_=d.x;if(d.y<y1_)y1_=d.y;if(d.x>x2_)x2_=d.x;if(d.y>y2_)y2_=d.y;xs.push(d.x);ys.push(d.y)}else for(i=0;i<n;++i){var x_=+fx(d=data[i],i),y_=+fy(d,i);if(x_<x1_)x1_=x_;if(y_<y1_)y1_=y_;if(x_>x2_)x2_=x_;if(y_>y2_)y2_=y_;xs.push(x_);ys.push(y_)}}var dx=x2_-x1_,dy=y2_-y1_;if(dx>dy)y2_=y1_+dx;else x2_=x1_+dy;function insert(n,d,x,y,x1,y1,x2,y2){if(isNaN(x)||isNaN(y))return;if(n.leaf){var nx=n.x,ny=n.y;if(nx!=null){if(abs(nx-x)+abs(ny-y)<.01){insertChild(n,d,x,y,x1,y1,x2,y2)}else{var nPoint=n.point;n.x=n.y=n.point=null;insertChild(n,nPoint,nx,ny,x1,y1,x2,y2);insertChild(n,d,x,y,x1,y1,x2,y2)}}else{n.x=x,n.y=y,n.point=d}}else{insertChild(n,d,x,y,x1,y1,x2,y2)}}function insertChild(n,d,x,y,x1,y1,x2,y2){var xm=(x1+x2)*.5,ym=(y1+y2)*.5,right=x>=xm,below=y>=ym,i=below<<1|right;n.leaf=false;n=n.nodes[i]||(n.nodes[i]=d3_geom_quadtreeNode());if(right)x1=xm;else x2=xm;if(below)y1=ym;else y2=ym;insert(n,d,x,y,x1,y1,x2,y2)}var root=d3_geom_quadtreeNode();root.add=function(d){insert(root,d,+fx(d,++i),+fy(d,i),x1_,y1_,x2_,y2_)};root.visit=function(f){d3_geom_quadtreeVisit(f,root,x1_,y1_,x2_,y2_)};root.find=function(point){return d3_geom_quadtreeFind(root,point[0],point[1],x1_,y1_,x2_,y2_)};i=-1;if(x1==null){while(++i<n){insert(root,data[i],xs[i],ys[i],x1_,y1_,x2_,y2_)}--i}else data.forEach(root.add);xs=ys=data=d=null;return root}quadtree.x=function(_){return arguments.length?(x=_,quadtree):x};quadtree.y=function(_){return arguments.length?(y=_,quadtree):y};quadtree.extent=function(_){if(!arguments.length)return x1==null?null:[[x1,y1],[x2,y2]];if(_==null)x1=y1=x2=y2=null;else x1=+_[0][0],y1=+_[0][1],x2=+_[1][0],y2=+_[1][1];return quadtree};quadtree.size=function(_){if(!arguments.length)return x1==null?null:[x2-x1,y2-y1];if(_==null)x1=y1=x2=y2=null;else x1=y1=0,x2=+_[0],y2=+_[1];return quadtree};return quadtree};function d3_geom_quadtreeCompatX(d){return d.x}function d3_geom_quadtreeCompatY(d){return d.y}function d3_geom_quadtreeNode(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function d3_geom_quadtreeVisit(f,node,x1,y1,x2,y2){if(!f(node,x1,y1,x2,y2)){var sx=(x1+x2)*.5,sy=(y1+y2)*.5,children=node.nodes;if(children[0])d3_geom_quadtreeVisit(f,children[0],x1,y1,sx,sy);if(children[1])d3_geom_quadtreeVisit(f,children[1],sx,y1,x2,sy);if(children[2])d3_geom_quadtreeVisit(f,children[2],x1,sy,sx,y2);if(children[3])d3_geom_quadtreeVisit(f,children[3],sx,sy,x2,y2)}}function d3_geom_quadtreeFind(root,x,y,x0,y0,x3,y3){var minDistance2=Infinity,closestPoint;(function find(node,x1,y1,x2,y2){if(x1>x3||y1>y3||x2<x0||y2<y0)return;if(point=node.point){var point,dx=x-node.x,dy=y-node.y,distance2=dx*dx+dy*dy;if(distance2<minDistance2){var distance=Math.sqrt(minDistance2=distance2);x0=x-distance,y0=y-distance;x3=x+distance,y3=y+distance;closestPoint=point}}var children=node.nodes,xm=(x1+x2)*.5,ym=(y1+y2)*.5,right=x>=xm,below=y>=ym;for(var i=below<<1|right,j=i+4;i<j;++i){if(node=children[i&3])switch(i&3){case 0:find(node,x1,y1,xm,ym);break;case 1:find(node,xm,y1,x2,ym);break;case 2:find(node,x1,ym,xm,y2);break;case 3:find(node,xm,ym,x2,y2);break}}})(root,x0,y0,x3,y3);return closestPoint}d3.interpolateRgb=d3_interpolateRgb;function d3_interpolateRgb(a,b){a=d3.rgb(a);b=d3.rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return"#"+d3_rgb_hex(Math.round(ar+br*t))+d3_rgb_hex(Math.round(ag+bg*t))+d3_rgb_hex(Math.round(ab+bb*t))}}d3.interpolateObject=d3_interpolateObject;function d3_interpolateObject(a,b){var i={},c={},k;for(k in a){if(k in b){i[k]=d3_interpolate(a[k],b[k])}else{c[k]=a[k]}}for(k in b){if(!(k in a)){c[k]=b[k]}}return function(t){for(k in i)c[k]=i[k](t);return c}}d3.interpolateNumber=d3_interpolateNumber;function d3_interpolateNumber(a,b){a=+a,b=+b;return function(t){return a*(1-t)+b*t}}d3.interpolateString=d3_interpolateString;function d3_interpolateString(a,b){var bi=d3_interpolate_numberA.lastIndex=d3_interpolate_numberB.lastIndex=0,am,bm,bs,i=-1,s=[],q=[];a=a+"",b=b+"";while((am=d3_interpolate_numberA.exec(a))&&(bm=d3_interpolate_numberB.exec(b))){if((bs=bm.index)>bi){bs=b.slice(bi,bs);if(s[i])s[i]+=bs;else s[++i]=bs}if((am=am[0])===(bm=bm[0])){if(s[i])s[i]+=bm;else s[++i]=bm}else{s[++i]=null;q.push({i:i,x:d3_interpolateNumber(am,bm)})}bi=d3_interpolate_numberB.lastIndex}if(bi<b.length){bs=b.slice(bi);if(s[i])s[i]+=bs;else s[++i]=bs}return s.length<2?q[0]?(b=q[0].x,function(t){return b(t)+""}):function(){return b}:(b=q.length,function(t){for(var i=0,o;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}var d3_interpolate_numberA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d3_interpolate_numberB=new RegExp(d3_interpolate_numberA.source,"g");d3.interpolate=d3_interpolate;function d3_interpolate(a,b){var i=d3.interpolators.length,f;while(--i>=0&&!(f=d3.interpolators[i](a,b)));return f}d3.interpolators=[function(a,b){var t=typeof b;return(t==="string"?d3_rgb_names.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?d3_interpolateRgb:d3_interpolateString:b instanceof d3_color?d3_interpolateRgb:Array.isArray(b)?d3_interpolateArray:t==="object"&&isNaN(b)?d3_interpolateObject:d3_interpolateNumber)(a,b)}];d3.interpolateArray=d3_interpolateArray;function d3_interpolateArray(a,b){var x=[],c=[],na=a.length,nb=b.length,n0=Math.min(a.length,b.length),i;for(i=0;i<n0;++i)x.push(d3_interpolate(a[i],b[i]));for(;i<na;++i)c[i]=a[i];for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<n0;++i)c[i]=x[i](t);return c}}var d3_ease_default=function(){return d3_identity};var d3_ease=d3.map({linear:d3_ease_default,poly:d3_ease_poly,quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:d3_ease_elastic,back:d3_ease_back,bounce:function(){return d3_ease_bounce}});var d3_ease_mode=d3.map({in:d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(f){return d3_ease_reflect(d3_ease_reverse(f))}});d3.ease=function(name){var i=name.indexOf("-"),t=i>=0?name.slice(0,i):name,m=i>=0?name.slice(i+1):"in";t=d3_ease.get(t)||d3_ease_default;m=d3_ease_mode.get(m)||d3_identity;return d3_ease_clamp(m(t.apply(null,d3_arraySlice.call(arguments,1))))};function d3_ease_clamp(f){return function(t){return t<=0?0:t>=1?1:f(t)}}function d3_ease_reverse(f){return function(t){return 1-f(1-t)}}function d3_ease_reflect(f){return function(t){return.5*(t<.5?f(2*t):2-f(2-2*t))}}function d3_ease_quad(t){return t*t}function d3_ease_cubic(t){return t*t*t}function d3_ease_cubicInOut(t){if(t<=0)return 0;if(t>=1)return 1;var t2=t*t,t3=t2*t;return 4*(t<.5?t3:3*(t-t2)+t3-.75)}function d3_ease_poly(e){return function(t){return Math.pow(t,e)}}function d3_ease_sin(t){return 1-Math.cos(t*half\u03c0)}function d3_ease_exp(t){return Math.pow(2,10*(t-1))}function d3_ease_circle(t){return 1-Math.sqrt(1-t*t)}function d3_ease_elastic(a,p){var s;if(arguments.length<2)p=.45;if(arguments.length)s=p/\u03c4*Math.asin(1/a);else a=1,s=p/4;return function(t){return 1+a*Math.pow(2,-10*t)*Math.sin((t-s)*\u03c4/p)}}function d3_ease_back(s){if(!s)s=1.70158;return function(t){return t*t*((s+1)*t-s)}}function d3_ease_bounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}d3.interpolateHcl=d3_interpolateHcl;function d3_interpolateHcl(a,b){a=d3.hcl(a);b=d3.hcl(b);var ah=a.h,ac=a.c,al=a.l,bh=b.h-ah,bc=b.c-ac,bl=b.l-al;if(isNaN(bc))bc=0,ac=isNaN(ac)?b.c:ac;if(isNaN(bh))bh=0,ah=isNaN(ah)?b.h:ah;else if(bh>180)bh-=360;else if(bh<-180)bh+=360;return function(t){return d3_hcl_lab(ah+bh*t,ac+bc*t,al+bl*t)+""}}d3.interpolateHsl=d3_interpolateHsl;function d3_interpolateHsl(a,b){a=d3.hsl(a);b=d3.hsl(b);var ah=a.h,as=a.s,al=a.l,bh=b.h-ah,bs=b.s-as,bl=b.l-al;if(isNaN(bs))bs=0,as=isNaN(as)?b.s:as;if(isNaN(bh))bh=0,ah=isNaN(ah)?b.h:ah;else if(bh>180)bh-=360;else if(bh<-180)bh+=360;return function(t){return d3_hsl_rgb(ah+bh*t,as+bs*t,al+bl*t)+""}}d3.interpolateLab=d3_interpolateLab;function d3_interpolateLab(a,b){a=d3.lab(a);b=d3.lab(b);var al=a.l,aa=a.a,ab=a.b,bl=b.l-al,ba=b.a-aa,bb=b.b-ab;return function(t){return d3_lab_rgb(al+bl*t,aa+ba*t,ab+bb*t)+""}}d3.interpolateRound=d3_interpolateRound;function d3_interpolateRound(a,b){b-=a;return function(t){return Math.round(a+b*t)}}d3.transform=function(string){var g=d3_document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(string){if(string!=null){g.setAttribute("transform",string);var t=g.transform.baseVal.consolidate()}return new d3_transform(t?t.matrix:d3_transformIdentity)})(string)};function d3_transform(m){var r0=[m.a,m.b],r1=[m.c,m.d],kx=d3_transformNormalize(r0),kz=d3_transformDot(r0,r1),ky=d3_transformNormalize(d3_transformCombine(r1,r0,-kz))||0;if(r0[0]*r1[1]<r1[0]*r0[1]){r0[0]*=-1;r0[1]*=-1;kx*=-1;kz*=-1}this.rotate=(kx?Math.atan2(r0[1],r0[0]):Math.atan2(-r1[0],r1[1]))*d3_degrees;this.translate=[m.e,m.f];this.scale=[kx,ky];this.skew=ky?Math.atan2(kz,ky)*d3_degrees:0}d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function d3_transformDot(a,b){return a[0]*b[0]+a[1]*b[1]}function d3_transformNormalize(a){var k=Math.sqrt(d3_transformDot(a,a));if(k){a[0]/=k;a[1]/=k}return k}function d3_transformCombine(a,b,k){a[0]+=k*b[0];a[1]+=k*b[1];return a}var d3_transformIdentity={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolateTransform=d3_interpolateTransform;function d3_interpolateTransformPop(s){return s.length?s.pop()+",":""}function d3_interpolateTranslate(ta,tb,s,q){if(ta[0]!==tb[0]||ta[1]!==tb[1]){var i=s.push("translate(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ta[0],tb[0])},{i:i-2,x:d3_interpolateNumber(ta[1],tb[1])})}else if(tb[0]||tb[1]){s.push("translate("+tb+")")}}function d3_interpolateRotate(ra,rb,s,q){if(ra!==rb){if(ra-rb>180)rb+=360;else if(rb-ra>180)ra+=360;q.push({i:s.push(d3_interpolateTransformPop(s)+"rotate(",null,")")-2,x:d3_interpolateNumber(ra,rb)})}else if(rb){s.push(d3_interpolateTransformPop(s)+"rotate("+rb+")")}}function d3_interpolateSkew(wa,wb,s,q){if(wa!==wb){q.push({i:s.push(d3_interpolateTransformPop(s)+"skewX(",null,")")-2,x:d3_interpolateNumber(wa,wb)})}else if(wb){s.push(d3_interpolateTransformPop(s)+"skewX("+wb+")")}}function d3_interpolateScale(ka,kb,s,q){if(ka[0]!==kb[0]||ka[1]!==kb[1]){var i=s.push(d3_interpolateTransformPop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ka[0],kb[0])},{i:i-2,x:d3_interpolateNumber(ka[1],kb[1])})}else if(kb[0]!==1||kb[1]!==1){s.push(d3_interpolateTransformPop(s)+"scale("+kb+")")}}function d3_interpolateTransform(a,b){var s=[],q=[];a=d3.transform(a),b=d3.transform(b);d3_interpolateTranslate(a.translate,b.translate,s,q);d3_interpolateRotate(a.rotate,b.rotate,s,q);d3_interpolateSkew(a.skew,b.skew,s,q);d3_interpolateScale(a.scale,b.scale,s,q);a=b=null;return function(t){var i=-1,n=q.length,o;while(++i<n)s[(o=q[i]).i]=o.x(t);return s.join("")}}function d3_uninterpolateNumber(a,b){b=(b-=a=+a)||1/b;return function(x){return(x-a)/b}}function d3_uninterpolateClamp(a,b){b=(b-=a=+a)||1/b;return function(x){return Math.max(0,Math.min(1,(x-a)/b))}}d3.layout={};d3.layout.bundle=function(){return function(links){var paths=[],i=-1,n=links.length;while(++i<n)paths.push(d3_layout_bundlePath(links[i]));return paths}};function d3_layout_bundlePath(link){var start=link.source,end=link.target,lca=d3_layout_bundleLeastCommonAncestor(start,end),points=[start];while(start!==lca){start=start.parent;points.push(start)}var k=points.length;while(end!==lca){points.splice(k,0,end);end=end.parent}return points}function d3_layout_bundleAncestors(node){var ancestors=[],parent=node.parent;while(parent!=null){ancestors.push(node);node=parent;parent=parent.parent}ancestors.push(node);return ancestors}function d3_layout_bundleLeastCommonAncestor(a,b){if(a===b)return a;var aNodes=d3_layout_bundleAncestors(a),bNodes=d3_layout_bundleAncestors(b),aNode=aNodes.pop(),bNode=bNodes.pop(),sharedNode=null;while(aNode===bNode){sharedNode=aNode;aNode=aNodes.pop();bNode=bNodes.pop()}return sharedNode}d3.layout.chord=function(){var chord={},chords,groups,matrix,n,padding=0,sortGroups,sortSubgroups,sortChords;function relayout(){var subgroups={},groupSums=[],groupIndex=d3.range(n),subgroupIndex=[],k,x,x0,i,j;chords=[];groups=[];k=0,i=-1;while(++i<n){x=0,j=-1;while(++j<n){x+=matrix[i][j]}groupSums.push(x);subgroupIndex.push(d3.range(n));k+=x}if(sortGroups){groupIndex.sort(function(a,b){return sortGroups(groupSums[a],groupSums[b])})}if(sortSubgroups){subgroupIndex.forEach(function(d,i){d.sort(function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])})})}k=(\u03c4-padding*n)/k;x=0,i=-1;while(++i<n){x0=x,j=-1;while(++j<n){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[di+"-"+dj]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]};x+=padding}i=-1;while(++i<n){j=i-1;while(++j<n){var source=subgroups[i+"-"+j],target=subgroups[j+"-"+i];if(source.value||target.value){chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}}}if(sortChords)resort()}function resort(){chords.sort(function(a,b){return sortChords((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}chord.matrix=function(x){if(!arguments.length)return matrix;n=(matrix=x)&&matrix.length;chords=groups=null;return chord};chord.padding=function(x){if(!arguments.length)return padding;padding=x;chords=groups=null;return chord};chord.sortGroups=function(x){if(!arguments.length)return sortGroups;sortGroups=x;chords=groups=null;return chord};chord.sortSubgroups=function(x){if(!arguments.length)return sortSubgroups;sortSubgroups=x;chords=null;return chord};chord.sortChords=function(x){if(!arguments.length)return sortChords;sortChords=x;if(chords)resort();return chord};chord.chords=function(){if(!chords)relayout();return chords};chord.groups=function(){if(!groups)relayout();return groups};return chord};d3.layout.force=function(){var force={},event=d3.dispatch("start","tick","end"),timer,size=[1,1],drag,alpha,friction=.9,linkDistance=d3_layout_forceLinkDistance,linkStrength=d3_layout_forceLinkStrength,charge=-30,chargeDistance2=d3_layout_forceChargeDistance2,gravity=.1,theta2=.64,nodes=[],links=[],distances,strengths,charges;function repulse(node){return function(quad,x1,_,x2){if(quad.point!==node){var dx=quad.cx-node.x,dy=quad.cy-node.y,dw=x2-x1,dn=dx*dx+dy*dy;if(dw*dw/theta2<dn){if(dn<chargeDistance2){var k=quad.charge/dn;node.px-=dx*k;node.py-=dy*k}return true}if(quad.point&&dn&&dn<chargeDistance2){var k=quad.pointCharge/dn;node.px-=dx*k;node.py-=dy*k}}return!quad.charge}}force.tick=function(){if((alpha*=.99)<.005){timer=null;event.end({type:"end",alpha:alpha=0});return true}var n=nodes.length,m=links.length,q,i,o,s,t,l,k,x,y;for(i=0;i<m;++i){o=links[i];s=o.source;t=o.target;x=t.x-s.x;y=t.y-s.y;if(l=x*x+y*y){l=alpha*strengths[i]*((l=Math.sqrt(l))-distances[i])/l;x*=l;y*=l;t.x-=x*(k=s.weight+t.weight?s.weight/(s.weight+t.weight):.5);t.y-=y*k;s.x+=x*(k=1-k);s.y+=y*k}}if(k=alpha*gravity){x=size[0]/2;y=size[1]/2;i=-1;if(k)while(++i<n){o=nodes[i];o.x+=(x-o.x)*k;o.y+=(y-o.y)*k}}if(charge){d3_layout_forceAccumulate(q=d3.geom.quadtree(nodes),alpha,charges);i=-1;while(++i<n){if(!(o=nodes[i]).fixed){q.visit(repulse(o))}}}i=-1;while(++i<n){o=nodes[i];if(o.fixed){o.x=o.px;o.y=o.py}else{o.x-=(o.px-(o.px=o.x))*friction;o.y-=(o.py-(o.py=o.y))*friction}}event.tick({type:"tick",alpha:alpha})};force.nodes=function(x){if(!arguments.length)return nodes;nodes=x;return force};force.links=function(x){if(!arguments.length)return links;links=x;return force};force.size=function(x){if(!arguments.length)return size;size=x;return force};force.linkDistance=function(x){if(!arguments.length)return linkDistance;linkDistance=typeof x==="function"?x:+x;return force};force.distance=force.linkDistance;force.linkStrength=function(x){if(!arguments.length)return linkStrength;linkStrength=typeof x==="function"?x:+x;return force};force.friction=function(x){if(!arguments.length)return friction;friction=+x;return force};force.charge=function(x){if(!arguments.length)return charge;charge=typeof x==="function"?x:+x;return force};force.chargeDistance=function(x){if(!arguments.length)return Math.sqrt(chargeDistance2);chargeDistance2=x*x;return force};force.gravity=function(x){if(!arguments.length)return gravity;gravity=+x;return force};force.theta=function(x){if(!arguments.length)return Math.sqrt(theta2);theta2=x*x;return force};force.alpha=function(x){if(!arguments.length)return alpha;x=+x;if(alpha){if(x>0){alpha=x}else{timer.c=null,timer.t=NaN,timer=null;event.end({type:"end",alpha:alpha=0})}}else if(x>0){event.start({type:"start",alpha:alpha=x});timer=d3_timer(force.tick)}return force};force.start=function(){var i,n=nodes.length,m=links.length,w=size[0],h=size[1],neighbors,o;for(i=0;i<n;++i){(o=nodes[i]).index=i;o.weight=0}for(i=0;i<m;++i){o=links[i];if(typeof o.source=="number")o.source=nodes[o.source];if(typeof o.target=="number")o.target=nodes[o.target];++o.source.weight;++o.target.weight}for(i=0;i<n;++i){o=nodes[i];if(isNaN(o.x))o.x=position("x",w);if(isNaN(o.y))o.y=position("y",h);if(isNaN(o.px))o.px=o.x;if(isNaN(o.py))o.py=o.y}distances=[];if(typeof linkDistance==="function")for(i=0;i<m;++i)distances[i]=+linkDistance.call(this,links[i],i);else for(i=0;i<m;++i)distances[i]=linkDistance;strengths=[];if(typeof linkStrength==="function")for(i=0;i<m;++i)strengths[i]=+linkStrength.call(this,links[i],i);else for(i=0;i<m;++i)strengths[i]=linkStrength;charges=[];if(typeof charge==="function")for(i=0;i<n;++i)charges[i]=+charge.call(this,nodes[i],i);else for(i=0;i<n;++i)charges[i]=charge;function position(dimension,size){if(!neighbors){neighbors=new Array(n);for(j=0;j<n;++j){neighbors[j]=[]}for(j=0;j<m;++j){var o=links[j];neighbors[o.source.index].push(o.target);neighbors[o.target.index].push(o.source)}}var candidates=neighbors[i],j=-1,l=candidates.length,x;while(++j<l)if(!isNaN(x=candidates[j][dimension]))return x;return Math.random()*size}return force.resume()};force.resume=function(){return force.alpha(.1)};force.stop=function(){return force.alpha(0)};force.drag=function(){if(!drag)drag=d3.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend);if(!arguments.length)return drag;this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(drag)};function dragmove(d){d.px=d3.event.x,d.py=d3.event.y;force.resume()}return d3.rebind(force,event,"on")};function d3_layout_forceDragstart(d){d.fixed|=2}function d3_layout_forceDragend(d){d.fixed&=~6}function d3_layout_forceMouseover(d){d.fixed|=4;d.px=d.x,d.py=d.y}function d3_layout_forceMouseout(d){d.fixed&=~4}function d3_layout_forceAccumulate(quad,alpha,charges){var cx=0,cy=0;quad.charge=0;if(!quad.leaf){var nodes=quad.nodes,n=nodes.length,i=-1,c;while(++i<n){c=nodes[i];if(c==null)continue;d3_layout_forceAccumulate(c,alpha,charges);quad.charge+=c.charge;cx+=c.charge*c.cx;cy+=c.charge*c.cy}}if(quad.point){if(!quad.leaf){quad.point.x+=Math.random()-.5;quad.point.y+=Math.random()-.5}var k=alpha*charges[quad.point.index];quad.charge+=quad.pointCharge=k;cx+=k*quad.point.x;cy+=k*quad.point.y}quad.cx=cx/quad.charge;quad.cy=cy/quad.charge}var d3_layout_forceLinkDistance=20,d3_layout_forceLinkStrength=1,d3_layout_forceChargeDistance2=Infinity;d3.layout.hierarchy=function(){var sort=d3_layout_hierarchySort,children=d3_layout_hierarchyChildren,value=d3_layout_hierarchyValue;function hierarchy(root){var stack=[root],nodes=[],node;root.depth=0;while((node=stack.pop())!=null){nodes.push(node);if((childs=children.call(hierarchy,node,node.depth))&&(n=childs.length)){var n,childs,child;while(--n>=0){stack.push(child=childs[n]);child.parent=node;child.depth=node.depth+1}if(value)node.value=0;node.children=childs}else{if(value)node.value=+value.call(hierarchy,node,node.depth)||0;delete node.children}}d3_layout_hierarchyVisitAfter(root,function(node){var childs,parent;if(sort&&(childs=node.children))childs.sort(sort);if(value&&(parent=node.parent))parent.value+=node.value});return nodes}hierarchy.sort=function(x){if(!arguments.length)return sort;sort=x;return hierarchy};hierarchy.children=function(x){if(!arguments.length)return children;children=x;return hierarchy};hierarchy.value=function(x){if(!arguments.length)return value;value=x;return hierarchy};hierarchy.revalue=function(root){if(value){d3_layout_hierarchyVisitBefore(root,function(node){if(node.children)node.value=0});d3_layout_hierarchyVisitAfter(root,function(node){var parent;if(!node.children)node.value=+value.call(hierarchy,node,node.depth)||0;if(parent=node.parent)parent.value+=node.value})}return root};return hierarchy};function d3_layout_hierarchyRebind(object,hierarchy){d3.rebind(object,hierarchy,"sort","children","value");object.nodes=object;object.links=d3_layout_hierarchyLinks;return object}function d3_layout_hierarchyVisitBefore(node,callback){var nodes=[node];while((node=nodes.pop())!=null){callback(node);if((children=node.children)&&(n=children.length)){var n,children;while(--n>=0)nodes.push(children[n])}}}function d3_layout_hierarchyVisitAfter(node,callback){var nodes=[node],nodes2=[];while((node=nodes.pop())!=null){nodes2.push(node);if((children=node.children)&&(n=children.length)){var i=-1,n,children;while(++i<n)nodes.push(children[i])}}while((node=nodes2.pop())!=null){callback(node)}}function d3_layout_hierarchyChildren(d){return d.children}function d3_layout_hierarchyValue(d){return d.value}function d3_layout_hierarchySort(a,b){return b.value-a.value}function d3_layout_hierarchyLinks(nodes){return d3.merge(nodes.map(function(parent){return(parent.children||[]).map(function(child){return{source:parent,target:child}})}))}d3.layout.partition=function(){var hierarchy=d3.layout.hierarchy(),size=[1,1];function position(node,x,dx,dy){var children=node.children;node.x=x;node.y=node.depth*dy;node.dx=dx;node.dy=dy;if(children&&(n=children.length)){var i=-1,n,c,d;dx=node.value?dx/node.value:0;while(++i<n){position(c=children[i],x,d=c.value*dx,dy);x+=d}}}function depth(node){var children=node.children,d=0;if(children&&(n=children.length)){var i=-1,n;while(++i<n)d=Math.max(d,depth(children[i]))}return 1+d}function partition(d,i){var nodes=hierarchy.call(this,d,i);position(nodes[0],0,size[0],size[1]/depth(nodes[0]));return nodes}partition.size=function(x){if(!arguments.length)return size;size=x;return partition};return d3_layout_hierarchyRebind(partition,hierarchy)};d3.layout.pie=function(){var value=Number,sort=d3_layout_pieSortByValue,startAngle=0,endAngle=\u03c4,padAngle=0;function pie(data){var n=data.length,values=data.map(function(d,i){return+value.call(pie,d,i)}),a=+(typeof startAngle==="function"?startAngle.apply(this,arguments):startAngle),da=(typeof endAngle==="function"?endAngle.apply(this,arguments):endAngle)-a,p=Math.min(Math.abs(da)/n,+(typeof padAngle==="function"?padAngle.apply(this,arguments):padAngle)),pa=p*(da<0?-1:1),sum=d3.sum(values),k=sum?(da-n*pa)/sum:0,index=d3.range(n),arcs=[],v;if(sort!=null)index.sort(sort===d3_layout_pieSortByValue?function(i,j){return values[j]-values[i]}:function(i,j){return sort(data[i],data[j])});index.forEach(function(i){arcs[i]={data:data[i],value:v=values[i],startAngle:a,endAngle:a+=v*k+pa,padAngle:p}});return arcs}pie.value=function(_){if(!arguments.length)return value;value=_;return pie};pie.sort=function(_){if(!arguments.length)return sort;sort=_;return pie};pie.startAngle=function(_){if(!arguments.length)return startAngle;startAngle=_;return pie};pie.endAngle=function(_){if(!arguments.length)return endAngle;endAngle=_;return pie};pie.padAngle=function(_){if(!arguments.length)return padAngle;padAngle=_;return pie};return pie};var d3_layout_pieSortByValue={};d3.layout.stack=function(){var values=d3_identity,order=d3_layout_stackOrderDefault,offset=d3_layout_stackOffsetZero,out=d3_layout_stackOut,x=d3_layout_stackX,y=d3_layout_stackY;function stack(data,index){if(!(n=data.length))return data;var series=data.map(function(d,i){return values.call(stack,d,i)});var points=series.map(function(d){return d.map(function(v,i){return[x.call(stack,v,i),y.call(stack,v,i)]})});var orders=order.call(stack,points,index);series=d3.permute(series,orders);points=d3.permute(points,orders);var offsets=offset.call(stack,points,index);var m=series[0].length,n,i,j,o;for(j=0;j<m;++j){out.call(stack,series[0][j],o=offsets[j],points[0][j][1]);for(i=1;i<n;++i){out.call(stack,series[i][j],o+=points[i-1][j][1],points[i][j][1])}}return data}stack.values=function(x){if(!arguments.length)return values;values=x;return stack};stack.order=function(x){if(!arguments.length)return order;order=typeof x==="function"?x:d3_layout_stackOrders.get(x)||d3_layout_stackOrderDefault;return stack};stack.offset=function(x){if(!arguments.length)return offset;offset=typeof x==="function"?x:d3_layout_stackOffsets.get(x)||d3_layout_stackOffsetZero;return stack};stack.x=function(z){if(!arguments.length)return x;x=z;return stack};stack.y=function(z){if(!arguments.length)return y;y=z;return stack};stack.out=function(z){if(!arguments.length)return out;out=z;return stack};return stack};function d3_layout_stackX(d){return d.x}function d3_layout_stackY(d){return d.y}function d3_layout_stackOut(d,y0,y){d.y0=y0;d.y=y}var d3_layout_stackOrders=d3.map({"inside-out":function(data){var n=data.length,i,j,max=data.map(d3_layout_stackMaxIndex),sums=data.map(d3_layout_stackReduceSum),index=d3.range(n).sort(function(a,b){return max[a]-max[b]}),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i){j=index[i];if(top<bottom){top+=sums[j];tops.push(j)}else{bottom+=sums[j];bottoms.push(j)}}return bottoms.reverse().concat(tops)},reverse:function(data){return d3.range(data.length).reverse()},default:d3_layout_stackOrderDefault});var d3_layout_stackOffsets=d3.map({silhouette:function(data){var n=data.length,m=data[0].length,sums=[],max=0,i,j,o,y0=[];for(j=0;j<m;++j){for(i=0,o=0;i<n;i++)o+=data[i][j][1];if(o>max)max=o;sums.push(o)}for(j=0;j<m;++j){y0[j]=(max-sums[j])/2}return y0},wiggle:function(data){var n=data.length,x=data[0],m=x.length,i,j,k,s1,s2,s3,dx,o,o0,y0=[];y0[0]=o=o0=0;for(j=1;j<m;++j){for(i=0,s1=0;i<n;++i)s1+=data[i][j][1];for(i=0,s2=0,dx=x[j][0]-x[j-1][0];i<n;++i){for(k=0,s3=(data[i][j][1]-data[i][j-1][1])/(2*dx);k<i;++k){s3+=(data[k][j][1]-data[k][j-1][1])/dx}s2+=s3*data[i][j][1]}y0[j]=o-=s1?s2/s1*dx:0;if(o<o0)o0=o}for(j=0;j<m;++j)y0[j]-=o0;return y0},expand:function(data){var n=data.length,m=data[0].length,k=1/n,i,j,o,y0=[];for(j=0;j<m;++j){for(i=0,o=0;i<n;i++)o+=data[i][j][1];if(o)for(i=0;i<n;i++)data[i][j][1]/=o;else for(i=0;i<n;i++)data[i][j][1]=k}for(j=0;j<m;++j)y0[j]=0;return y0},zero:d3_layout_stackOffsetZero});function d3_layout_stackOrderDefault(data){return d3.range(data.length)}function d3_layout_stackOffsetZero(data){var j=-1,m=data[0].length,y0=[];while(++j<m)y0[j]=0;return y0}function d3_layout_stackMaxIndex(array){var i=1,j=0,v=array[0][1],k,n=array.length;for(;i<n;++i){if((k=array[i][1])>v){j=i;v=k}}return j}function d3_layout_stackReduceSum(d){return d.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(p,d){return p+d[1]}d3.layout.histogram=function(){var frequency=true,valuer=Number,ranger=d3_layout_histogramRange,binner=d3_layout_histogramBinSturges;function histogram(data,i){var bins=[],values=data.map(valuer,this),range=ranger.call(this,values,i),thresholds=binner.call(this,range,values,i),bin,i=-1,n=values.length,m=thresholds.length-1,k=frequency?1:1/n,x;while(++i<m){bin=bins[i]=[];bin.dx=thresholds[i+1]-(bin.x=thresholds[i]);bin.y=0}if(m>0){i=-1;while(++i<n){x=values[i];if(x>=range[0]&&x<=range[1]){bin=bins[d3.bisect(thresholds,x,1,m)-1];bin.y+=k;bin.push(data[i])}}}return bins}histogram.value=function(x){if(!arguments.length)return valuer;valuer=x;return histogram};histogram.range=function(x){if(!arguments.length)return ranger;ranger=d3_functor(x);return histogram};histogram.bins=function(x){if(!arguments.length)return binner;binner=typeof x==="number"?function(range){return d3_layout_histogramBinFixed(range,x)}:d3_functor(x);return histogram};histogram.frequency=function(x){if(!arguments.length)return frequency;frequency=!!x;return histogram};return histogram};function d3_layout_histogramBinSturges(range,values){return d3_layout_histogramBinFixed(range,Math.ceil(Math.log(values.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(range,n){var x=-1,b=+range[0],m=(range[1]-b)/n,f=[];while(++x<=n)f[x]=m*x+b;return f}function d3_layout_histogramRange(values){return[d3.min(values),d3.max(values)]}d3.layout.pack=function(){var hierarchy=d3.layout.hierarchy().sort(d3_layout_packSort),padding=0,size=[1,1],radius;function pack(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],w=size[0],h=size[1],r=radius==null?Math.sqrt:typeof radius==="function"?radius:function(){return radius};root.x=root.y=0;d3_layout_hierarchyVisitAfter(root,function(d){d.r=+r(d.value)});d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings);if(padding){var dr=padding*(radius?1:Math.max(2*root.r/w,2*root.r/h))/2;d3_layout_hierarchyVisitAfter(root,function(d){d.r+=dr});d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings);d3_layout_hierarchyVisitAfter(root,function(d){d.r-=dr})}d3_layout_packTransform(root,w/2,h/2,radius?1:1/Math.max(2*root.r/w,2*root.r/h));return nodes}pack.size=function(_){if(!arguments.length)return size;size=_;return pack};pack.radius=function(_){if(!arguments.length)return radius;radius=_==null||typeof _==="function"?_:+_;return pack};pack.padding=function(_){if(!arguments.length)return padding;padding=+_;return pack};return d3_layout_hierarchyRebind(pack,hierarchy)};function d3_layout_packSort(a,b){return a.value-b.value}function d3_layout_packInsert(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function d3_layout_packSplice(a,b){a._pack_next=b;b._pack_prev=a}function d3_layout_packIntersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return.999*dr*dr>dx*dx+dy*dy}function d3_layout_packSiblings(node){if(!(nodes=node.children)||!(n=nodes.length))return;var nodes,xMin=Infinity,xMax=-Infinity,yMin=Infinity,yMax=-Infinity,a,b,c,i,j,k,n;function bound(node){xMin=Math.min(node.x-node.r,xMin);xMax=Math.max(node.x+node.r,xMax);yMin=Math.min(node.y-node.r,yMin);yMax=Math.max(node.y+node.r,yMax)}nodes.forEach(d3_layout_packLink);a=nodes[0];a.x=-a.r;a.y=0;bound(a);if(n>1){b=nodes[1];b.x=b.r;b.y=0;bound(b);if(n>2){c=nodes[2];d3_layout_packPlace(a,b,c);bound(c);d3_layout_packInsert(a,c);a._pack_prev=c;d3_layout_packInsert(c,b);b=a._pack_next;for(i=3;i<n;i++){d3_layout_packPlace(a,b,c=nodes[i]);var isect=0,s1=1,s2=1;for(j=b._pack_next;j!==b;j=j._pack_next,s1++){if(d3_layout_packIntersects(j,c)){isect=1;break}}if(isect==1){for(k=a._pack_prev;k!==j._pack_prev;k=k._pack_prev,s2++){if(d3_layout_packIntersects(k,c)){break}}}if(isect){if(s1<s2||s1==s2&&b.r<a.r)d3_layout_packSplice(a,b=j);else d3_layout_packSplice(a=k,b);i--}else{d3_layout_packInsert(a,c);b=c;bound(c)}}}}var cx=(xMin+xMax)/2,cy=(yMin+yMax)/2,cr=0;for(i=0;i<n;i++){c=nodes[i];c.x-=cx;c.y-=cy;cr=Math.max(cr,c.r+Math.sqrt(c.x*c.x+c.y*c.y))}node.r=cr;nodes.forEach(d3_layout_packUnlink)}function d3_layout_packLink(node){node._pack_next=node._pack_prev=node}function d3_layout_packUnlink(node){delete node._pack_next;delete node._pack_prev}function d3_layout_packTransform(node,x,y,k){var children=node.children;node.x=x+=k*node.x;node.y=y+=k*node.y;node.r*=k;if(children){var i=-1,n=children.length;while(++i<n)d3_layout_packTransform(children[i],x,y,k)}}function d3_layout_packPlace(a,b,c){var db=a.r+c.r,dx=b.x-a.x,dy=b.y-a.y;if(db&&(dx||dy)){var da=b.r+c.r,dc=dx*dx+dy*dy;da*=da;db*=db;var x=.5+(db-da)/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=a.x+x*dx+y*dy;c.y=a.y+x*dy-y*dx}else{c.x=a.x+db;c.y=a.y}}d3.layout.tree=function(){var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=null;function tree(d,i){var nodes=hierarchy.call(this,d,i),root0=nodes[0],root1=wrapTree(root0);d3_layout_hierarchyVisitAfter(root1,firstWalk),root1.parent.m=-root1.z;d3_layout_hierarchyVisitBefore(root1,secondWalk);if(nodeSize)d3_layout_hierarchyVisitBefore(root0,sizeNode);else{var left=root0,right=root0,bottom=root0;d3_layout_hierarchyVisitBefore(root0,function(node){if(node.x<left.x)left=node;if(node.x>right.x)right=node;if(node.depth>bottom.depth)bottom=node});var tx=separation(left,right)/2-left.x,kx=size[0]/(right.x+separation(right,left)/2+tx),ky=size[1]/(bottom.depth||1);d3_layout_hierarchyVisitBefore(root0,function(node){node.x=(node.x+tx)*kx;node.y=node.depth*ky})}return nodes}function wrapTree(root0){var root1={A:null,children:[root0]},queue=[root1],node1;while((node1=queue.pop())!=null){for(var children=node1.children,child,i=0,n=children.length;i<n;++i){queue.push((children[i]=child={_:children[i],parent:node1,children:(child=children[i].children)&&child.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=child)}}return root1.children[0]}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children.length){d3_layout_treeShift(v);var midpoint=(children[0].z+children[children.length-1].z)/2;if(w){v.z=w.z+separation(v._,w._);v.m=v.z-midpoint}else{v.z=midpoint}}else if(w){v.z=w.z+separation(v._,w._)}v.parent.A=apportion(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m;v.m+=v.parent.m}function apportion(v,w,ancestor){if(w){var vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m,shift;while(vim=d3_layout_treeRight(vim),vip=d3_layout_treeLeft(vip),vim&&vip){vom=d3_layout_treeLeft(vom);vop=d3_layout_treeRight(vop);vop.a=v;shift=vim.z+sim-vip.z-sip+separation(vim._,vip._);if(shift>0){d3_layout_treeMove(d3_layout_treeAncestor(vim,v,ancestor),v,shift);sip+=shift;sop+=shift}sim+=vim.m;sip+=vip.m;som+=vom.m;sop+=vop.m}if(vim&&!d3_layout_treeRight(vop)){vop.t=vim;vop.m+=sim-sop}if(vip&&!d3_layout_treeLeft(vom)){vom.t=vip;vom.m+=sip-som;ancestor=v}}return ancestor}function sizeNode(node){node.x*=size[0];node.y=node.depth*size[1]}tree.separation=function(x){if(!arguments.length)return separation;separation=x;return tree};tree.size=function(x){if(!arguments.length)return nodeSize?null:size;nodeSize=(size=x)==null?sizeNode:null;return tree};tree.nodeSize=function(x){if(!arguments.length)return nodeSize?size:null;nodeSize=(size=x)==null?null:sizeNode;return tree};return d3_layout_hierarchyRebind(tree,hierarchy)};function d3_layout_treeSeparation(a,b){return a.parent==b.parent?1:2}function d3_layout_treeLeft(v){var children=v.children;return children.length?children[0]:v.t}function d3_layout_treeRight(v){var children=v.children,n;return(n=children.length)?children[n-1]:v.t}function d3_layout_treeMove(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change;wp.s+=shift;wm.c+=change;wp.z+=shift;wp.m+=shift}function d3_layout_treeShift(v){var shift=0,change=0,children=v.children,i=children.length,w;while(--i>=0){w=children[i];w.z+=shift;w.m+=shift;shift+=w.s+(change+=w.c)}}function d3_layout_treeAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}d3.layout.cluster=function(){var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=false;function cluster(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],previousNode,x=0;d3_layout_hierarchyVisitAfter(root,function(node){var children=node.children;if(children&&children.length){node.x=d3_layout_clusterX(children);node.y=d3_layout_clusterY(children)}else{node.x=previousNode?x+=separation(node,previousNode):0;node.y=0;previousNode=node}});var left=d3_layout_clusterLeft(root),right=d3_layout_clusterRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;d3_layout_hierarchyVisitAfter(root,nodeSize?function(node){node.x=(node.x-root.x)*size[0];node.y=(root.y-node.y)*size[1]}:function(node){node.x=(node.x-x0)/(x1-x0)*size[0];node.y=(1-(root.y?node.y/root.y:1))*size[1]});return nodes}cluster.separation=function(x){if(!arguments.length)return separation;separation=x;return cluster};cluster.size=function(x){if(!arguments.length)return nodeSize?null:size;nodeSize=(size=x)==null;return cluster};cluster.nodeSize=function(x){if(!arguments.length)return nodeSize?size:null;nodeSize=(size=x)!=null;return cluster};return d3_layout_hierarchyRebind(cluster,hierarchy)};function d3_layout_clusterY(children){return 1+d3.max(children,function(child){return child.y})}function d3_layout_clusterX(children){return children.reduce(function(x,child){return x+child.x},0)/children.length}function d3_layout_clusterLeft(node){var children=node.children;return children&&children.length?d3_layout_clusterLeft(children[0]):node}function d3_layout_clusterRight(node){var children=node.children,n;return children&&(n=children.length)?d3_layout_clusterRight(children[n-1]):node}d3.layout.treemap=function(){var hierarchy=d3.layout.hierarchy(),round=Math.round,size=[1,1],padding=null,pad=d3_layout_treemapPadNull,sticky=false,stickies,mode="squarify",ratio=.5*(1+Math.sqrt(5));function scale(children,k){var i=-1,n=children.length,child,area;while(++i<n){area=(child=children[i]).value*(k<0?0:k);child.area=isNaN(area)||area<=0?0:area}}function squarify(node){var children=node.children;if(children&&children.length){var rect=pad(node),row=[],remaining=children.slice(),child,best=Infinity,score,u=mode==="slice"?rect.dx:mode==="dice"?rect.dy:mode==="slice-dice"?node.depth&1?rect.dy:rect.dx:Math.min(rect.dx,rect.dy),n;scale(remaining,rect.dx*rect.dy/node.value);row.area=0;while((n=remaining.length)>0){row.push(child=remaining[n-1]);row.area+=child.area;if(mode!=="squarify"||(score=worst(row,u))<=best){remaining.pop();best=score}else{row.area-=row.pop().area;position(row,u,rect,false);u=Math.min(rect.dx,rect.dy);row.length=row.area=0;best=Infinity}}if(row.length){position(row,u,rect,true);row.length=row.area=0}children.forEach(squarify)}}function stickify(node){var children=node.children;if(children&&children.length){var rect=pad(node),remaining=children.slice(),child,row=[];scale(remaining,rect.dx*rect.dy/node.value);row.area=0;while(child=remaining.pop()){row.push(child);row.area+=child.area;if(child.z!=null){position(row,child.z?rect.dx:rect.dy,rect,!remaining.length);row.length=row.area=0}}children.forEach(stickify)}}function worst(row,u){var s=row.area,r,rmax=0,rmin=Infinity,i=-1,n=row.length;while(++i<n){if(!(r=row[i].area))continue;if(r<rmin)rmin=r;if(r>rmax)rmax=r}s*=s;u*=u;return s?Math.max(u*rmax*ratio/s,s/(u*rmin*ratio)):Infinity}function position(row,u,rect,flush){var i=-1,n=row.length,x=rect.x,y=rect.y,v=u?round(row.area/u):0,o;if(u==rect.dx){if(flush||v>rect.dy)v=rect.dy;while(++i<n){o=row[i];o.x=x;o.y=y;o.dy=v;x+=o.dx=Math.min(rect.x+rect.dx-x,v?round(o.area/v):0)}o.z=true;o.dx+=rect.x+rect.dx-x;rect.y+=v;rect.dy-=v}else{if(flush||v>rect.dx)v=rect.dx;while(++i<n){o=row[i];o.x=x;o.y=y;o.dx=v;y+=o.dy=Math.min(rect.y+rect.dy-y,v?round(o.area/v):0)}o.z=false;o.dy+=rect.y+rect.dy-y;rect.x+=v;rect.dx-=v}}function treemap(d){var nodes=stickies||hierarchy(d),root=nodes[0];root.x=root.y=0;if(root.value)root.dx=size[0],root.dy=size[1];else root.dx=root.dy=0;if(stickies)hierarchy.revalue(root);scale([root],root.dx*root.dy/root.value);(stickies?stickify:squarify)(root);if(sticky)stickies=nodes;return nodes}treemap.size=function(x){if(!arguments.length)return size;size=x;return treemap};treemap.padding=function(x){if(!arguments.length)return padding;function padFunction(node){var p=x.call(treemap,node,node.depth);return p==null?d3_layout_treemapPadNull(node):d3_layout_treemapPad(node,typeof p==="number"?[p,p,p,p]:p)}function padConstant(node){return d3_layout_treemapPad(node,x)}var type;pad=(padding=x)==null?d3_layout_treemapPadNull:(type=typeof x)==="function"?padFunction:type==="number"?(x=[x,x,x,x],padConstant):padConstant;return treemap};treemap.round=function(x){if(!arguments.length)return round!=Number;round=x?Math.round:Number;return treemap};treemap.sticky=function(x){if(!arguments.length)return sticky;sticky=x;stickies=null;return treemap};treemap.ratio=function(x){if(!arguments.length)return ratio;ratio=x;return treemap};treemap.mode=function(x){if(!arguments.length)return mode;mode=x+"";return treemap};return d3_layout_hierarchyRebind(treemap,hierarchy)};function d3_layout_treemapPadNull(node){return{x:node.x,y:node.y,dx:node.dx,dy:node.dy}}function d3_layout_treemapPad(node,padding){var x=node.x+padding[3],y=node.y+padding[0],dx=node.dx-padding[1]-padding[3],dy=node.dy-padding[0]-padding[2];if(dx<0){x+=dx/2;dx=0}if(dy<0){y+=dy/2;dy=0}return{x:x,y:y,dx:dx,dy:dy}}d3.random={normal:function(\u00b5,\u03c3){var n=arguments.length;if(n<2)\u03c3=1;if(n<1)\u00b5=0;return function(){var x,y,r;do{x=Math.random()*2-1;y=Math.random()*2-1;r=x*x+y*y}while(!r||r>1);return \u00b5+\u03c3*x*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var random=d3.random.normal.apply(d3,arguments);return function(){return Math.exp(random())}},bates:function(m){var random=d3.random.irwinHall(m);return function(){return random()/m}},irwinHall:function(m){return function(){for(var s=0,j=0;j<m;j++)s+=Math.random();return s}}};d3.scale={};function d3_scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function d3_scaleRange(scale){return scale.rangeExtent?scale.rangeExtent():d3_scaleExtent(scale.range())}function d3_scale_bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function d3_scale_nice(domain,nice){var i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1],dx;if(x1<x0){dx=i0,i0=i1,i1=dx;dx=x0,x0=x1,x1=dx}domain[i0]=nice.floor(x0);domain[i1]=nice.ceil(x1);return domain}function d3_scale_niceStep(step){return step?{floor:function(x){return Math.floor(x/step)*step},ceil:function(x){return Math.ceil(x/step)*step}}:d3_scale_niceIdentity}var d3_scale_niceIdentity={floor:d3_identity,ceil:d3_identity};function d3_scale_polylinear(domain,range,uninterpolate,interpolate){var u=[],i=[],j=0,k=Math.min(domain.length,range.length)-1;if(domain[k]<domain[0]){domain=domain.slice().reverse();range=range.slice().reverse()}while(++j<=k){u.push(uninterpolate(domain[j-1],domain[j]));i.push(interpolate(range[j-1],range[j]))}return function(x){var j=d3.bisect(domain,x,1,k)-1;return i[j](u[j](x))}}d3.scale.linear=function(){return d3_scale_linear([0,1],[0,1],d3_interpolate,false)};function d3_scale_linear(domain,range,interpolate,clamp){var output,input;function rescale(){var linear=Math.min(domain.length,range.length)>2?d3_scale_polylinear:d3_scale_bilinear,uninterpolate=clamp?d3_uninterpolateClamp:d3_uninterpolateNumber;output=linear(domain,range,uninterpolate,interpolate);input=linear(range,domain,uninterpolate,d3_interpolate);return scale}function scale(x){return output(x)}scale.invert=function(y){return input(y)};scale.domain=function(x){if(!arguments.length)return domain;domain=x.map(Number);return rescale()};scale.range=function(x){if(!arguments.length)return range;range=x;return rescale()};scale.rangeRound=function(x){return scale.range(x).interpolate(d3_interpolateRound)};scale.clamp=function(x){if(!arguments.length)return clamp;clamp=x;return rescale()};scale.interpolate=function(x){if(!arguments.length)return interpolate;interpolate=x;return rescale()};scale.ticks=function(m){return d3_scale_linearTicks(domain,m)};scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};scale.nice=function(m){d3_scale_linearNice(domain,m);return rescale()};scale.copy=function(){return d3_scale_linear(domain,range,interpolate,clamp)};return rescale()}function d3_scale_linearRebind(scale,linear){return d3.rebind(scale,linear,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(domain,m){d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2]));d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2]));return domain}function d3_scale_linearTickRange(domain,m){if(m==null)m=10;var extent=d3_scaleExtent(domain),span=extent[1]-extent[0],step=Math.pow(10,Math.floor(Math.log(span/m)/Math.LN10)),err=m/span*step;if(err<=.15)step*=10;else if(err<=.35)step*=5;else if(err<=.75)step*=2;extent[0]=Math.ceil(extent[0]/step)*step;extent[1]=Math.floor(extent[1]/step)*step+step*.5;extent[2]=step;return extent}function d3_scale_linearTicks(domain,m){return d3.range.apply(d3,d3_scale_linearTickRange(domain,m))}function d3_scale_linearTickFormat(domain,m,format){var range=d3_scale_linearTickRange(domain,m);if(format){var match=d3_format_re.exec(format);match.shift();if(match[8]==="s"){var prefix=d3.formatPrefix(Math.max(abs(range[0]),abs(range[1])));if(!match[7])match[7]="."+d3_scale_linearPrecision(prefix.scale(range[2]));match[8]="f";format=d3.format(match.join(""));return function(d){return format(prefix.scale(d))+prefix.symbol}}if(!match[7])match[7]="."+d3_scale_linearFormatPrecision(match[8],range);format=match.join("")}else{format=",."+d3_scale_linearPrecision(range[2])+"f"}return d3.format(format)}var d3_scale_linearFormatSignificant={s:1,g:1,p:1,r:1,e:1};function d3_scale_linearPrecision(value){return-Math.floor(Math.log(value)/Math.LN10+.01)}function d3_scale_linearFormatPrecision(type,range){var p=d3_scale_linearPrecision(range[2]);return type in d3_scale_linearFormatSignificant?Math.abs(p-d3_scale_linearPrecision(Math.max(abs(range[0]),abs(range[1]))))+ +(type!=="e"):p-(type==="%")*2}d3.scale.log=function(){return d3_scale_log(d3.scale.linear().domain([0,1]),10,true,[1,10])};function d3_scale_log(linear,base,positive,domain){function log(x){return(positive?Math.log(x<0?0:x):-Math.log(x>0?0:-x))/Math.log(base)}function pow(x){return positive?Math.pow(base,x):-Math.pow(base,-x)}function scale(x){return linear(log(x))}scale.invert=function(x){return pow(linear.invert(x))};scale.domain=function(x){if(!arguments.length)return domain;positive=x[0]>=0;linear.domain((domain=x.map(Number)).map(log));return scale};scale.base=function(_){if(!arguments.length)return base;base=+_;linear.domain(domain.map(log));return scale};scale.nice=function(){var niced=d3_scale_nice(domain.map(log),positive?Math:d3_scale_logNiceNegative);linear.domain(niced);domain=niced.map(pow);return scale};scale.ticks=function(){var extent=d3_scaleExtent(domain),ticks=[],u=extent[0],v=extent[1],i=Math.floor(log(u)),j=Math.ceil(log(v)),n=base%1?2:base;if(isFinite(j-i)){if(positive){for(;i<j;i++)for(var k=1;k<n;k++)ticks.push(pow(i)*k);ticks.push(pow(i))}else{ticks.push(pow(i));for(;i++<j;)for(var k=n-1;k>0;k--)ticks.push(pow(i)*k)}for(i=0;ticks[i]<u;i++){}for(j=ticks.length;ticks[j-1]>v;j--){}ticks=ticks.slice(i,j)}return ticks};scale.tickFormat=function(n,format){if(!arguments.length)return d3_scale_logFormat;if(arguments.length<2)format=d3_scale_logFormat;else if(typeof format!=="function")format=d3.format(format);var k=Math.max(1,base*n/scale.ticks().length);return function(d){var i=d/pow(Math.round(log(d)));if(i*base<base-.5)i*=base;return i<=k?format(d):""}};scale.copy=function(){return d3_scale_log(linear.copy(),base,positive,domain)};return d3_scale_linearRebind(scale,linear)}var d3_scale_logFormat=d3.format(".0e"),d3_scale_logNiceNegative={floor:function(x){return-Math.ceil(-x)},ceil:function(x){return-Math.floor(-x)}};d3.scale.pow=function(){return d3_scale_pow(d3.scale.linear(),1,[0,1])};function d3_scale_pow(linear,exponent,domain){var powp=d3_scale_powPow(exponent),powb=d3_scale_powPow(1/exponent);function scale(x){return linear(powp(x))}scale.invert=function(x){return powb(linear.invert(x))};scale.domain=function(x){if(!arguments.length)return domain;linear.domain((domain=x.map(Number)).map(powp));return scale};scale.ticks=function(m){return d3_scale_linearTicks(domain,m)};scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};scale.nice=function(m){return scale.domain(d3_scale_linearNice(domain,m))};scale.exponent=function(x){if(!arguments.length)return exponent;powp=d3_scale_powPow(exponent=x);powb=d3_scale_powPow(1/exponent);linear.domain(domain.map(powp));return scale};scale.copy=function(){return d3_scale_pow(linear.copy(),exponent,domain)};return d3_scale_linearRebind(scale,linear)}function d3_scale_powPow(e){return function(x){return x<0?-Math.pow(-x,e):Math.pow(x,e)}}d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)};d3.scale.ordinal=function(){return d3_scale_ordinal([],{t:"range",a:[[]]})};function d3_scale_ordinal(domain,ranger){var index,range,rangeBand;function scale(x){return range[((index.get(x)||(ranger.t==="range"?index.set(x,domain.push(x)):NaN))-1)%range.length]}function steps(start,step){return d3.range(domain.length).map(function(i){return start+step*i})}scale.domain=function(x){if(!arguments.length)return domain;domain=[];index=new d3_Map;var i=-1,n=x.length,xi;while(++i<n)if(!index.has(xi=x[i]))index.set(xi,domain.push(xi));return scale[ranger.t].apply(scale,ranger.a)};scale.range=function(x){if(!arguments.length)return range;range=x;rangeBand=0;ranger={t:"range",a:arguments};return scale};scale.rangePoints=function(x,padding){if(arguments.length<2)padding=0;var start=x[0],stop=x[1],step=domain.length<2?(start=(start+stop)/2,0):(stop-start)/(domain.length-1+padding);range=steps(start+step*padding/2,step);rangeBand=0;ranger={t:"rangePoints",a:arguments};return scale};scale.rangeRoundPoints=function(x,padding){if(arguments.length<2)padding=0;var start=x[0],stop=x[1],step=domain.length<2?(start=stop=Math.round((start+stop)/2),0):(stop-start)/(domain.length-1+padding)|0;range=steps(start+Math.round(step*padding/2+(stop-start-(domain.length-1+padding)*step)/2),step);rangeBand=0;ranger={t:"rangeRoundPoints",a:arguments};return scale};scale.rangeBands=function(x,padding,outerPadding){if(arguments.length<2)padding=0;if(arguments.length<3)outerPadding=padding;var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=(stop-start)/(domain.length-padding+2*outerPadding);range=steps(start+step*outerPadding,step);if(reverse)range.reverse();rangeBand=step*(1-padding);ranger={t:"rangeBands",a:arguments};return scale};scale.rangeRoundBands=function(x,padding,outerPadding){if(arguments.length<2)padding=0;if(arguments.length<3)outerPadding=padding;var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=Math.floor((stop-start)/(domain.length-padding+2*outerPadding));range=steps(start+Math.round((stop-start-(domain.length-padding)*step)/2),step);if(reverse)range.reverse();rangeBand=Math.round(step*(1-padding));ranger={t:"rangeRoundBands",a:arguments};return scale};scale.rangeBand=function(){return rangeBand};scale.rangeExtent=function(){return d3_scaleExtent(ranger.a[0])};scale.copy=function(){return d3_scale_ordinal(domain,ranger)};return scale.domain(domain)}d3.scale.category10=function(){return d3.scale.ordinal().range(d3_category10)};d3.scale.category20=function(){return d3.scale.ordinal().range(d3_category20)};d3.scale.category20b=function(){return d3.scale.ordinal().range(d3_category20b)};d3.scale.category20c=function(){return d3.scale.ordinal().range(d3_category20c)};var d3_category10=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString);var d3_category20=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString);var d3_category20b=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString);var d3_category20c=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);d3.scale.quantile=function(){return d3_scale_quantile([],[])};function d3_scale_quantile(domain,range){var thresholds;function rescale(){var k=0,q=range.length;thresholds=[];while(++k<q)thresholds[k-1]=d3.quantile(domain,k/q);return scale}function scale(x){if(!isNaN(x=+x))return range[d3.bisect(thresholds,x)]}scale.domain=function(x){if(!arguments.length)return domain;domain=x.map(d3_number).filter(d3_numeric).sort(d3_ascending);return rescale()};scale.range=function(x){if(!arguments.length)return range;range=x;return rescale()};scale.quantiles=function(){return thresholds};scale.invertExtent=function(y){y=range.indexOf(y);return y<0?[NaN,NaN]:[y>0?thresholds[y-1]:domain[0],y<thresholds.length?thresholds[y]:domain[domain.length-1]]};scale.copy=function(){return d3_scale_quantile(domain,range)};return rescale()}d3.scale.quantize=function(){return d3_scale_quantize(0,1,[0,1])};function d3_scale_quantize(x0,x1,range){var kx,i;function scale(x){return range[Math.max(0,Math.min(i,Math.floor(kx*(x-x0))))]}function rescale(){kx=range.length/(x1-x0);i=range.length-1;return scale}scale.domain=function(x){if(!arguments.length)return[x0,x1];x0=+x[0];x1=+x[x.length-1];return rescale()};scale.range=function(x){if(!arguments.length)return range;range=x;return rescale()};scale.invertExtent=function(y){y=range.indexOf(y);y=y<0?NaN:y/kx+x0;return[y,y+1/kx]};scale.copy=function(){return d3_scale_quantize(x0,x1,range)};return rescale()}d3.scale.threshold=function(){return d3_scale_threshold([.5],[0,1])};function d3_scale_threshold(domain,range){function scale(x){if(x<=x)return range[d3.bisect(domain,x)]}scale.domain=function(_){if(!arguments.length)return domain;domain=_;return scale};scale.range=function(_){if(!arguments.length)return range;range=_;return scale};scale.invertExtent=function(y){y=range.indexOf(y);return[domain[y-1],domain[y]]};scale.copy=function(){return d3_scale_threshold(domain,range)};return scale}d3.scale.identity=function(){return d3_scale_identity([0,1])};function d3_scale_identity(domain){function identity(x){return+x}identity.invert=identity;identity.domain=identity.range=function(x){if(!arguments.length)return domain;domain=x.map(identity);return identity};identity.ticks=function(m){return d3_scale_linearTicks(domain,m)};identity.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};identity.copy=function(){return d3_scale_identity(domain)};return identity}d3.svg={};function d3_zero(){return 0}d3.svg.arc=function(){var innerRadius=d3_svg_arcInnerRadius,outerRadius=d3_svg_arcOuterRadius,cornerRadius=d3_zero,padRadius=d3_svg_arcAuto,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle,padAngle=d3_svg_arcPadAngle;function arc(){var r0=Math.max(0,+innerRadius.apply(this,arguments)),r1=Math.max(0,+outerRadius.apply(this,arguments)),a0=startAngle.apply(this,arguments)-half\u03c0,a1=endAngle.apply(this,arguments)-half\u03c0,da=Math.abs(a1-a0),cw=a0>a1?0:1;if(r1<r0)rc=r1,r1=r0,r0=rc;if(da>=\u03c4\u03b5)return circleSegment(r1,cw)+(r0?circleSegment(r0,1-cw):"")+"Z";var rc,cr,rp,ap,p0=0,p1=0,x0,y0,x1,y1,x2,y2,x3,y3,path=[];if(ap=(+padAngle.apply(this,arguments)||0)/2){rp=padRadius===d3_svg_arcAuto?Math.sqrt(r0*r0+r1*r1):+padRadius.apply(this,arguments);if(!cw)p1*=-1;if(r1)p1=d3_asin(rp/r1*Math.sin(ap));if(r0)p0=d3_asin(rp/r0*Math.sin(ap))}if(r1){x0=r1*Math.cos(a0+p1);y0=r1*Math.sin(a0+p1);x1=r1*Math.cos(a1-p1);y1=r1*Math.sin(a1-p1);var l1=Math.abs(a1-a0-2*p1)<=\u03c0?0:1;if(p1&&d3_svg_arcSweep(x0,y0,x1,y1)===cw^l1){var h1=(a0+a1)/2;x0=r1*Math.cos(h1);y0=r1*Math.sin(h1);x1=y1=null}}else{x0=y0=0}if(r0){x2=r0*Math.cos(a1-p0);y2=r0*Math.sin(a1-p0);x3=r0*Math.cos(a0+p0);y3=r0*Math.sin(a0+p0);var l0=Math.abs(a0-a1+2*p0)<=\u03c0?0:1;if(p0&&d3_svg_arcSweep(x2,y2,x3,y3)===1-cw^l0){var h0=(a0+a1)/2;x2=r0*Math.cos(h0);y2=r0*Math.sin(h0);x3=y3=null}}else{x2=y2=0}if(da>\u03b5&&(rc=Math.min(Math.abs(r1-r0)/2,+cornerRadius.apply(this,arguments)))>.001){cr=r0<r1^cw?0:1;var rc1=rc,rc0=rc;if(da<\u03c0){var oc=x3==null?[x2,y2]:x1==null?[x0,y0]:d3_geom_polygonIntersect([x0,y0],[x3,y3],[x1,y1],[x2,y2]),ax=x0-oc[0],ay=y0-oc[1],bx=x1-oc[0],by=y1-oc[1],kc=1/Math.sin(Math.acos((ax*bx+ay*by)/(Math.sqrt(ax*ax+ay*ay)*Math.sqrt(bx*bx+by*by)))/2),lc=Math.sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=Math.min(rc,(r0-lc)/(kc-1));rc1=Math.min(rc,(r1-lc)/(kc+1))}if(x1!=null){var t30=d3_svg_arcCornerTangents(x3==null?[x2,y2]:[x3,y3],[x0,y0],r1,rc1,cw),t12=d3_svg_arcCornerTangents([x1,y1],[x2,y2],r1,rc1,cw);if(rc===rc1){path.push("M",t30[0],"A",rc1,",",rc1," 0 0,",cr," ",t30[1],"A",r1,",",r1," 0 ",1-cw^d3_svg_arcSweep(t30[1][0],t30[1][1],t12[1][0],t12[1][1]),",",cw," ",t12[1],"A",rc1,",",rc1," 0 0,",cr," ",t12[0])}else{path.push("M",t30[0],"A",rc1,",",rc1," 0 1,",cr," ",t12[0])}}else{path.push("M",x0,",",y0)}if(x3!=null){var t03=d3_svg_arcCornerTangents([x0,y0],[x3,y3],r0,-rc0,cw),t21=d3_svg_arcCornerTangents([x2,y2],x1==null?[x0,y0]:[x1,y1],r0,-rc0,cw);if(rc===rc0){path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t21[1],"A",r0,",",r0," 0 ",cw^d3_svg_arcSweep(t21[1][0],t21[1][1],t03[1][0],t03[1][1]),",",1-cw," ",t03[1],"A",rc0,",",rc0," 0 0,",cr," ",t03[0])}else{path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t03[0])}}else{path.push("L",x2,",",y2)}}else{path.push("M",x0,",",y0);if(x1!=null)path.push("A",r1,",",r1," 0 ",l1,",",cw," ",x1,",",y1);path.push("L",x2,",",y2);if(x3!=null)path.push("A",r0,",",r0," 0 ",l0,",",1-cw," ",x3,",",y3)}path.push("Z");return path.join("")}function circleSegment(r1,cw){return"M0,"+r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+-r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+r1}arc.innerRadius=function(v){if(!arguments.length)return innerRadius;innerRadius=d3_functor(v);return arc};arc.outerRadius=function(v){if(!arguments.length)return outerRadius;outerRadius=d3_functor(v);return arc};arc.cornerRadius=function(v){if(!arguments.length)return cornerRadius;cornerRadius=d3_functor(v);return arc};arc.padRadius=function(v){if(!arguments.length)return padRadius;padRadius=v==d3_svg_arcAuto?d3_svg_arcAuto:d3_functor(v);return arc};arc.startAngle=function(v){if(!arguments.length)return startAngle;startAngle=d3_functor(v);return arc};arc.endAngle=function(v){if(!arguments.length)return endAngle;endAngle=d3_functor(v);return arc};arc.padAngle=function(v){if(!arguments.length)return padAngle;padAngle=d3_functor(v);return arc};arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-half\u03c0;return[Math.cos(a)*r,Math.sin(a)*r]};return arc};var d3_svg_arcAuto="auto";function d3_svg_arcInnerRadius(d){return d.innerRadius}function d3_svg_arcOuterRadius(d){return d.outerRadius}function d3_svg_arcStartAngle(d){return d.startAngle}function d3_svg_arcEndAngle(d){return d.endAngle}function d3_svg_arcPadAngle(d){return d&&d.padAngle}function d3_svg_arcSweep(x0,y0,x1,y1){return(x0-x1)*y0-(y0-y1)*x0>0?0:1}function d3_svg_arcCornerTangents(p0,p1,r1,rc,cw){var x01=p0[0]-p1[0],y01=p0[1]-p1[1],lo=(cw?rc:-rc)/Math.sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x1=p0[0]+ox,y1=p0[1]+oy,x2=p1[0]+ox,y2=p1[1]+oy,x3=(x1+x2)/2,y3=(y1+y2)/2,dx=x2-x1,dy=y2-y1,d2=dx*dx+dy*dy,r=r1-rc,D=x1*y2-x2*y1,d=(dy<0?-1:1)*Math.sqrt(Math.max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x3,dy0=cy0-y3,dx1=cx1-x3,dy1=cy1-y3;if(dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1)cx0=cx1,cy0=cy1;return[[cx0-ox,cy0-oy],[cx0*r1/r,cy0*r1/r]]}function d3_svg_line(projection){var x=d3_geom_pointX,y=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,tension=.7;function line(data){var segments=[],points=[],i=-1,n=data.length,d,fx=d3_functor(x),fy=d3_functor(y);function segment(){segments.push("M",interpolate(projection(points),tension))}while(++i<n){if(defined.call(this,d=data[i],i)){points.push([+fx.call(this,d,i),+fy.call(this,d,i)])}else if(points.length){segment();points=[]}}if(points.length)segment();return segments.length?segments.join(""):null}line.x=function(_){if(!arguments.length)return x;x=_;return line};line.y=function(_){if(!arguments.length)return y;y=_;return line};line.defined=function(_){if(!arguments.length)return defined;defined=_;return line};line.interpolate=function(_){if(!arguments.length)return interpolateKey;if(typeof _==="function")interpolateKey=interpolate=_;else interpolateKey=(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key;return line};line.tension=function(_){if(!arguments.length)return tension;tension=_;return line};return line}d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:d3_svg_lineStep,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone});d3_svg_lineInterpolators.forEach(function(key,value){value.key=key;value.closed=/-closed$/.test(key)});function d3_svg_lineLinear(points){return points.length>1?points.join("L"):points+"Z"}function d3_svg_lineLinearClosed(points){return points.join("L")+"Z"}function d3_svg_lineStep(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("H",(p[0]+(p=points[i])[0])/2,"V",p[1]);if(n>1)path.push("H",p[0]);return path.join("")}function d3_svg_lineStepBefore(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("V",(p=points[i])[1],"H",p[0]);return path.join("")}function d3_svg_lineStepAfter(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("H",(p=points[i])[0],"V",p[1]);return path.join("")}function d3_svg_lineCardinalOpen(points,tension){return points.length<4?d3_svg_lineLinear(points):points[1]+d3_svg_lineHermite(points.slice(1,-1),d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineCardinalClosed(points,tension){return points.length<3?d3_svg_lineLinearClosed(points):points[0]+d3_svg_lineHermite((points.push(points[0]),points),d3_svg_lineCardinalTangents([points[points.length-2]].concat(points,[points[1]]),tension))}function d3_svg_lineCardinal(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineHermite(points,tangents){if(tangents.length<1||points.length!=tangents.length&&points.length!=tangents.length+2){return d3_svg_lineLinear(points)}var quad=points.length!=tangents.length,path="",p0=points[0],p=points[1],t0=tangents[0],t=t0,pi=1;if(quad){path+="Q"+(p[0]-t0[0]*2/3)+","+(p[1]-t0[1]*2/3)+","+p[0]+","+p[1];p0=points[1];pi=2}if(tangents.length>1){t=tangents[1];p=points[pi];pi++;path+="C"+(p0[0]+t0[0])+","+(p0[1]+t0[1])+","+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1];for(var i=2;i<tangents.length;i++,pi++){p=points[pi];t=tangents[i];path+="S"+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1]}}if(quad){var lp=points[pi];path+="Q"+(p[0]+t[0]*2/3)+","+(p[1]+t[1]*2/3)+","+lp[0]+","+lp[1]}return path}function d3_svg_lineCardinalTangents(points,tension){var tangents=[],a=(1-tension)/2,p0,p1=points[0],p2=points[1],i=1,n=points.length;while(++i<n){p0=p1;p1=p2;p2=points[i];tangents.push([a*(p2[0]-p0[0]),a*(p2[1]-p0[1])])}return tangents}function d3_svg_lineBasis(points){if(points.length<3)return d3_svg_lineLinear(points);var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];points.push(points[n-1]);while(++i<=n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}points.pop();path.push("L",pi);return path.join("")}function d3_svg_lineBasisOpen(points){if(points.length<4)return d3_svg_lineLinear(points);var path=[],i=-1,n=points.length,pi,px=[0],py=[0];while(++i<3){pi=points[i];px.push(pi[0]);py.push(pi[1])}path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,px)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,py));--i;while(++i<n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}return path.join("")}function d3_svg_lineBasisClosed(points){var path,i=-1,n=points.length,m=n+4,pi,px=[],py=[];while(++i<4){pi=points[i%n];px.push(pi[0]);py.push(pi[1])}path=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];--i;while(++i<m){pi=points[i%n];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}return path.join("")}function d3_svg_lineBundle(points,tension){var n=points.length-1;if(n){var x0=points[0][0],y0=points[0][1],dx=points[n][0]-x0,dy=points[n][1]-y0,i=-1,p,t;while(++i<=n){p=points[i];t=i/n;p[0]=tension*p[0]+(1-tension)*(x0+t*dx);p[1]=tension*p[1]+(1-tension)*(y0+t*dy)}}return d3_svg_lineBasis(points)}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y))}function d3_svg_lineSlope(p0,p1){return(p1[1]-p0[1])/(p1[0]-p0[0])}function d3_svg_lineFiniteDifferences(points){var i=0,j=points.length-1,m=[],p0=points[0],p1=points[1],d=m[0]=d3_svg_lineSlope(p0,p1);while(++i<j){m[i]=(d+(d=d3_svg_lineSlope(p0=p1,p1=points[i+1])))/2}m[i]=d;return m}function d3_svg_lineMonotoneTangents(points){var tangents=[],d,a,b,s,m=d3_svg_lineFiniteDifferences(points),i=-1,j=points.length-1;while(++i<j){d=d3_svg_lineSlope(points[i],points[i+1]);if(abs(d)<\u03b5){m[i]=m[i+1]=0}else{a=m[i]/d;b=m[i+1]/d;s=a*a+b*b;if(s>9){s=d*3/Math.sqrt(s);m[i]=s*a;m[i+1]=s*b}}}i=-1;while(++i<=j){s=(points[Math.min(j,i+1)][0]-points[Math.max(0,i-1)][0])/(6*(1+m[i]*m[i]));tangents.push([s||0,m[i]*s||0])}return tangents}function d3_svg_lineMonotone(points){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineMonotoneTangents(points))}d3.svg.line.radial=function(){var line=d3_svg_line(d3_svg_lineRadial);line.radius=line.x,delete line.x;line.angle=line.y,delete line.y;return line};function d3_svg_lineRadial(points){var point,i=-1,n=points.length,r,a;while(++i<n){point=points[i];r=point[0];a=point[1]-half\u03c0;point[0]=r*Math.cos(a);point[1]=r*Math.sin(a)}return points}function d3_svg_area(projection){var x0=d3_geom_pointX,x1=d3_geom_pointX,y0=0,y1=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,interpolateReverse=interpolate,L="L",tension=.7;function area(data){var segments=[],points0=[],points1=[],i=-1,n=data.length,d,fx0=d3_functor(x0),fy0=d3_functor(y0),fx1=x0===x1?function(){return x}:d3_functor(x1),fy1=y0===y1?function(){return y}:d3_functor(y1),x,y;function segment(){segments.push("M",interpolate(projection(points1),tension),L,interpolateReverse(projection(points0.reverse()),tension),"Z")}while(++i<n){if(defined.call(this,d=data[i],i)){points0.push([x=+fx0.call(this,d,i),y=+fy0.call(this,d,i)]);points1.push([+fx1.call(this,d,i),+fy1.call(this,d,i)])}else if(points0.length){segment();points0=[];points1=[]}}if(points0.length)segment();return segments.length?segments.join(""):null}area.x=function(_){if(!arguments.length)return x1;x0=x1=_;return area};area.x0=function(_){if(!arguments.length)return x0;x0=_;return area};area.x1=function(_){if(!arguments.length)return x1;x1=_;return area};area.y=function(_){if(!arguments.length)return y1;y0=y1=_;return area};area.y0=function(_){if(!arguments.length)return y0;y0=_;return area};area.y1=function(_){if(!arguments.length)return y1;y1=_;return area};area.defined=function(_){if(!arguments.length)return defined;defined=_;return area};area.interpolate=function(_){if(!arguments.length)return interpolateKey;if(typeof _==="function")interpolateKey=interpolate=_;else interpolateKey=(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key;interpolateReverse=interpolate.reverse||interpolate;L=interpolate.closed?"M":"L";return area};area.tension=function(_){if(!arguments.length)return tension;tension=_;return area};return area}d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter;d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore;d3.svg.area=function(){return d3_svg_area(d3_identity)};d3.svg.area.radial=function(){var area=d3_svg_area(d3_svg_lineRadial);area.radius=area.x,delete area.x;area.innerRadius=area.x0,delete area.x0;area.outerRadius=area.x1,delete area.x1;area.angle=area.y,delete area.y;area.startAngle=area.y0,delete area.y0;area.endAngle=area.y1,delete area.y1;return area};d3.svg.chord=function(){var source=d3_source,target=d3_target,radius=d3_svg_chordRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;function chord(d,i){var s=subgroup(this,source,d,i),t=subgroup(this,target,d,i);return"M"+s.p0+arc(s.r,s.p1,s.a1-s.a0)+(equals(s,t)?curve(s.r,s.p1,s.r,s.p0):curve(s.r,s.p1,t.r,t.p0)+arc(t.r,t.p1,t.a1-t.a0)+curve(t.r,t.p1,s.r,s.p0))+"Z"}function subgroup(self,f,d,i){var subgroup=f.call(self,d,i),r=radius.call(self,subgroup,i),a0=startAngle.call(self,subgroup,i)-half\u03c0,a1=endAngle.call(self,subgroup,i)-half\u03c0;return{r:r,a0:a0,a1:a1,p0:[r*Math.cos(a0),r*Math.sin(a0)],p1:[r*Math.cos(a1),r*Math.sin(a1)]}}function equals(a,b){return a.a0==b.a0&&a.a1==b.a1}function arc(r,p,a){return"A"+r+","+r+" 0 "+ +(a>\u03c0)+",1 "+p}function curve(r0,p0,r1,p1){return"Q 0,0 "+p1}chord.radius=function(v){if(!arguments.length)return radius;radius=d3_functor(v);return chord};chord.source=function(v){if(!arguments.length)return source;source=d3_functor(v);return chord};chord.target=function(v){if(!arguments.length)return target;target=d3_functor(v);return chord};chord.startAngle=function(v){if(!arguments.length)return startAngle;startAngle=d3_functor(v);return chord};chord.endAngle=function(v){if(!arguments.length)return endAngle;endAngle=d3_functor(v);return chord};return chord};function d3_svg_chordRadius(d){return d.radius}d3.svg.diagonal=function(){var source=d3_source,target=d3_target,projection=d3_svg_diagonalProjection;function diagonal(d,i){var p0=source.call(this,d,i),p3=target.call(this,d,i),m=(p0.y+p3.y)/2,p=[p0,{x:p0.x,y:m},{x:p3.x,y:m},p3];p=p.map(projection);return"M"+p[0]+"C"+p[1]+" "+p[2]+" "+p[3]}diagonal.source=function(x){if(!arguments.length)return source;source=d3_functor(x);return diagonal};diagonal.target=function(x){if(!arguments.length)return target;target=d3_functor(x);return diagonal};diagonal.projection=function(x){if(!arguments.length)return projection;projection=x;return diagonal};return diagonal};function d3_svg_diagonalProjection(d){return[d.x,d.y]}d3.svg.diagonal.radial=function(){var diagonal=d3.svg.diagonal(),projection=d3_svg_diagonalProjection,projection_=diagonal.projection;diagonal.projection=function(x){return arguments.length?projection_(d3_svg_diagonalRadialProjection(projection=x)):projection};return diagonal};function d3_svg_diagonalRadialProjection(projection){return function(){var d=projection.apply(this,arguments),r=d[0],a=d[1]-half\u03c0;return[r*Math.cos(a),r*Math.sin(a)]}}d3.svg.symbol=function(){var type=d3_svg_symbolType,size=d3_svg_symbolSize;function symbol(d,i){return(d3_svg_symbols.get(type.call(this,d,i))||d3_svg_symbolCircle)(size.call(this,d,i))}symbol.type=function(x){if(!arguments.length)return type;type=d3_functor(x);return symbol};symbol.size=function(x){if(!arguments.length)return size;size=d3_functor(x);return symbol};return symbol};function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(size){var r=Math.sqrt(size/\u03c0);return"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z"}var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(size){var r=Math.sqrt(size/5)/2;return"M"+-3*r+","+-r+"H"+-r+"V"+-3*r+"H"+r+"V"+-r+"H"+3*r+"V"+r+"H"+r+"V"+3*r+"H"+-r+"V"+r+"H"+-3*r+"Z"},diamond:function(size){var ry=Math.sqrt(size/(2*d3_svg_symbolTan30)),rx=ry*d3_svg_symbolTan30;return"M0,"+-ry+"L"+rx+",0"+" 0,"+ry+" "+-rx+",0"+"Z"},square:function(size){var r=Math.sqrt(size)/2;return"M"+-r+","+-r+"L"+r+","+-r+" "+r+","+r+" "+-r+","+r+"Z"},"triangle-down":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+ry+"L"+rx+","+-ry+" "+-rx+","+-ry+"Z"},"triangle-up":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+-ry+"L"+rx+","+ry+" "+-rx+","+ry+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*d3_radians);d3_selectionPrototype.transition=function(name){var id=d3_transitionInheritId||++d3_transitionId,ns=d3_transitionNamespace(name),subgroups=[],subgroup,node,transition=d3_transitionInherit||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250};for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i])d3_transitionNode(node,i,ns,id,transition);subgroup.push(node)}}return d3_transition(subgroups,ns,id)};d3_selectionPrototype.interrupt=function(name){return this.each(name==null?d3_selection_interrupt:d3_selection_interruptNS(d3_transitionNamespace(name)))};var d3_selection_interrupt=d3_selection_interruptNS(d3_transitionNamespace());function d3_selection_interruptNS(ns){return function(){var lock,activeId,active;if((lock=this[ns])&&(active=lock[activeId=lock.active])){active.timer.c=null;active.timer.t=NaN;if(--lock.count)delete lock[activeId];else delete this[ns];lock.active+=.5;active.event&&active.event.interrupt.call(this,this.__data__,active.index)}}}function d3_transition(groups,ns,id){d3_subclass(groups,d3_transitionPrototype);groups.namespace=ns;groups.id=id;return groups}var d3_transitionPrototype=[],d3_transitionId=0,d3_transitionInheritId,d3_transitionInherit;d3_transitionPrototype.call=d3_selectionPrototype.call;d3_transitionPrototype.empty=d3_selectionPrototype.empty;d3_transitionPrototype.node=d3_selectionPrototype.node;d3_transitionPrototype.size=d3_selectionPrototype.size;d3.transition=function(selection,name){return selection&&selection.transition?d3_transitionInheritId?selection.transition(name):selection:d3.selection().transition(selection)};d3.transition.prototype=d3_transitionPrototype;d3_transitionPrototype.select=function(selector){var id=this.id,ns=this.namespace,subgroups=[],subgroup,subnode,node;selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;){if((node=group[i])&&(subnode=selector.call(node,node.__data__,i,j))){if("__data__"in node)subnode.__data__=node.__data__;d3_transitionNode(subnode,i,ns,id,node[ns][id]);subgroup.push(subnode)}else{subgroup.push(null)}}}return d3_transition(subgroups,ns,id)};d3_transitionPrototype.selectAll=function(selector){var id=this.id,ns=this.namespace,subgroups=[],subgroup,subnodes,node,subnode,transition;selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i]){transition=node[ns][id];subnodes=selector.call(node,node.__data__,i,j);subgroups.push(subgroup=[]);for(var k=-1,o=subnodes.length;++k<o;){if(subnode=subnodes[k])d3_transitionNode(subnode,k,ns,id,transition);subgroup.push(subnode)}}}}return d3_transition(subgroups,ns,id)};d3_transitionPrototype.filter=function(filter){var subgroups=[],subgroup,group,node;if(typeof filter!=="function")filter=d3_selection_filter(filter);for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;i<n;i++){if((node=group[i])&&filter.call(node,node.__data__,i,j)){subgroup.push(node)}}}return d3_transition(subgroups,this.namespace,this.id)};d3_transitionPrototype.tween=function(name,tween){var id=this.id,ns=this.namespace;if(arguments.length<2)return this.node()[ns][id].tween.get(name);return d3_selection_each(this,tween==null?function(node){node[ns][id].tween.remove(name)}:function(node){node[ns][id].tween.set(name,tween)})};function d3_transition_tween(groups,name,value,tween){var id=groups.id,ns=groups.namespace;return d3_selection_each(groups,typeof value==="function"?function(node,i,j){node[ns][id].tween.set(name,tween(value.call(node,node.__data__,i,j)))}:(value=tween(value),function(node){node[ns][id].tween.set(name,value)}))}d3_transitionPrototype.attr=function(nameNS,value){if(arguments.length<2){for(value in nameNS)this.attr(value,nameNS[value]);return this}var interpolate=nameNS=="transform"?d3_interpolateTransform:d3_interpolate,name=d3.ns.qualify(nameNS);function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrTween(b){return b==null?attrNull:(b+="",function(){var a=this.getAttribute(name),i;return a!==b&&(i=interpolate(a,b),function(t){this.setAttribute(name,i(t))})})}function attrTweenNS(b){return b==null?attrNullNS:(b+="",function(){var a=this.getAttributeNS(name.space,name.local),i;return a!==b&&(i=interpolate(a,b),function(t){this.setAttributeNS(name.space,name.local,i(t))})})}return d3_transition_tween(this,"attr."+nameNS,value,name.local?attrTweenNS:attrTween)};d3_transitionPrototype.attrTween=function(nameNS,tween){var name=d3.ns.qualify(nameNS);function attrTween(d,i){var f=tween.call(this,d,i,this.getAttribute(name));return f&&function(t){this.setAttribute(name,f(t))}}function attrTweenNS(d,i){var f=tween.call(this,d,i,this.getAttributeNS(name.space,name.local));return f&&function(t){this.setAttributeNS(name.space,name.local,f(t))}}return this.tween("attr."+nameNS,name.local?attrTweenNS:attrTween)};d3_transitionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if(typeof name!=="string"){if(n<2)value="";for(priority in name)this.style(priority,name[priority],value);return this}priority=""}function styleNull(){this.style.removeProperty(name)}function styleString(b){return b==null?styleNull:(b+="",function(){var a=d3_window(this).getComputedStyle(this,null).getPropertyValue(name),i;return a!==b&&(i=d3_interpolate(a,b),function(t){this.style.setProperty(name,i(t),priority)})})}return d3_transition_tween(this,"style."+name,value,styleString)};d3_transitionPrototype.styleTween=function(name,tween,priority){if(arguments.length<3)priority="";function styleTween(d,i){var f=tween.call(this,d,i,d3_window(this).getComputedStyle(this,null).getPropertyValue(name));return f&&function(t){this.style.setProperty(name,f(t),priority)}}return this.tween("style."+name,styleTween)};d3_transitionPrototype.text=function(value){return d3_transition_tween(this,"text",value,d3_transition_text)};function d3_transition_text(b){if(b==null)b="";return function(){this.textContent=b}}d3_transitionPrototype.remove=function(){var ns=this.namespace;return this.each("end.transition",function(){var p;if(this[ns].count<2&&(p=this.parentNode))p.removeChild(this)})};d3_transitionPrototype.ease=function(value){var id=this.id,ns=this.namespace;if(arguments.length<1)return this.node()[ns][id].ease;if(typeof value!=="function")value=d3.ease.apply(d3,arguments);return d3_selection_each(this,function(node){node[ns][id].ease=value})};d3_transitionPrototype.delay=function(value){var id=this.id,ns=this.namespace;if(arguments.length<1)return this.node()[ns][id].delay;return d3_selection_each(this,typeof value==="function"?function(node,i,j){node[ns][id].delay=+value.call(node,node.__data__,i,j)}:(value=+value,function(node){node[ns][id].delay=value}))};d3_transitionPrototype.duration=function(value){var id=this.id,ns=this.namespace;if(arguments.length<1)return this.node()[ns][id].duration;return d3_selection_each(this,typeof value==="function"?function(node,i,j){node[ns][id].duration=Math.max(1,value.call(node,node.__data__,i,j))}:(value=Math.max(1,value),function(node){node[ns][id].duration=value}))};d3_transitionPrototype.each=function(type,listener){var id=this.id,ns=this.namespace;if(arguments.length<2){var inherit=d3_transitionInherit,inheritId=d3_transitionInheritId;try{d3_transitionInheritId=id;d3_selection_each(this,function(node,i,j){d3_transitionInherit=node[ns][id];type.call(node,node.__data__,i,j)})}finally{d3_transitionInherit=inherit;d3_transitionInheritId=inheritId}}else{d3_selection_each(this,function(node){var transition=node[ns][id];(transition.event||(transition.event=d3.dispatch("start","end","interrupt"))).on(type,listener)})}return this};d3_transitionPrototype.transition=function(){var id0=this.id,id1=++d3_transitionId,ns=this.namespace,subgroups=[],subgroup,group,node,transition;for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;i<n;i++){if(node=group[i]){transition=node[ns][id0];d3_transitionNode(node,i,ns,id1,{time:transition.time,ease:transition.ease,delay:transition.delay+transition.duration,duration:transition.duration})}subgroup.push(node)}}return d3_transition(subgroups,ns,id1)};function d3_transitionNamespace(name){return name==null?"__transition__":"__transition_"+name+"__"}function d3_transitionNode(node,i,ns,id,inherit){var lock=node[ns]||(node[ns]={active:0,count:0}),transition=lock[id],time,timer,duration,ease,tweens;function schedule(elapsed){var delay=transition.delay;timer.t=delay+time;if(delay<=elapsed)return start(elapsed-delay);timer.c=start}function start(elapsed){var activeId=lock.active,active=lock[activeId];if(active){active.timer.c=null;active.timer.t=NaN;--lock.count;delete lock[activeId];active.event&&active.event.interrupt.call(node,node.__data__,active.index)}for(var cancelId in lock){if(+cancelId<id){var cancel=lock[cancelId];cancel.timer.c=null;cancel.timer.t=NaN;--lock.count;delete lock[cancelId]}}timer.c=tick;d3_timer(function(){if(timer.c&&tick(elapsed||1)){timer.c=null;timer.t=NaN}return 1},0,time);lock.active=id;transition.event&&transition.event.start.call(node,node.__data__,i);tweens=[];transition.tween.forEach(function(key,value){if(value=value.call(node,node.__data__,i)){tweens.push(value)}});ease=transition.ease;duration=transition.duration}function tick(elapsed){var t=elapsed/duration,e=ease(t),n=tweens.length;while(n>0){tweens[--n].call(node,e)}if(t>=1){transition.event&&transition.event.end.call(node,node.__data__,i);if(--lock.count)delete lock[id];else delete node[ns];return 1}}if(!transition){time=inherit.time;timer=d3_timer(schedule,0,time);transition=lock[id]={tween:new d3_Map,time:time,timer:timer,delay:inherit.delay,duration:inherit.duration,ease:inherit.ease,index:i};inherit=null;++lock.count}}d3.svg.axis=function(){var scale=d3.scale.linear(),orient=d3_svg_axisDefaultOrient,innerTickSize=6,outerTickSize=6,tickPadding=3,tickArguments_=[10],tickValues=null,tickFormat_;function axis(g){g.each(function(){var g=d3.select(this);var scale0=this.__chart__||scale,scale1=this.__chart__=scale.copy();var ticks=tickValues==null?scale1.ticks?scale1.ticks.apply(scale1,tickArguments_):scale1.domain():tickValues,tickFormat=tickFormat_==null?scale1.tickFormat?scale1.tickFormat.apply(scale1,tickArguments_):d3_identity:tickFormat_,tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",\u03b5),tickExit=d3.transition(tick.exit()).style("opacity",\u03b5).remove(),tickUpdate=d3.transition(tick.order()).style("opacity",1),tickSpacing=Math.max(innerTickSize,0)+tickPadding,tickTransform;var range=d3_scaleRange(scale1),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),d3.transition(path));tickEnter.append("line");tickEnter.append("text");var lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),text=tick.select("text").text(tickFormat),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text"),sign=orient==="top"||orient==="left"?-1:1,x1,x2,y1,y2;if(orient==="bottom"||orient==="top"){tickTransform=d3_svg_axisX,x1="x",y1="y",x2="x2",y2="y2";text.attr("dy",sign<0?"0em":".71em").style("text-anchor","middle");pathUpdate.attr("d","M"+range[0]+","+sign*outerTickSize+"V0H"+range[1]+"V"+sign*outerTickSize)}else{tickTransform=d3_svg_axisY,x1="y",y1="x",x2="y2",y2="x2";text.attr("dy",".32em").style("text-anchor",sign<0?"end":"start");pathUpdate.attr("d","M"+sign*outerTickSize+","+range[0]+"H0V"+range[1]+"H"+sign*outerTickSize)}lineEnter.attr(y2,sign*innerTickSize);textEnter.attr(y1,sign*tickSpacing);lineUpdate.attr(x2,0).attr(y2,sign*innerTickSize);textUpdate.attr(x1,0).attr(y1,sign*tickSpacing);if(scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else if(scale0.rangeBand){scale0=scale1}else{tickExit.call(tickTransform,scale1,scale0)}tickEnter.call(tickTransform,scale0,scale1);tickUpdate.call(tickTransform,scale1,scale1)})}axis.scale=function(x){if(!arguments.length)return scale;scale=x;return axis};axis.orient=function(x){if(!arguments.length)return orient;orient=x in d3_svg_axisOrients?x+"":d3_svg_axisDefaultOrient;return axis};axis.ticks=function(){if(!arguments.length)return tickArguments_;tickArguments_=d3_array(arguments);return axis};axis.tickValues=function(x){if(!arguments.length)return tickValues;tickValues=x;return axis};axis.tickFormat=function(x){if(!arguments.length)return tickFormat_;tickFormat_=x;return axis};axis.tickSize=function(x){var n=arguments.length;if(!n)return innerTickSize;innerTickSize=+x;outerTickSize=+arguments[n-1];return axis};axis.innerTickSize=function(x){if(!arguments.length)return innerTickSize;innerTickSize=+x;return axis};axis.outerTickSize=function(x){if(!arguments.length)return outerTickSize;outerTickSize=+x;return axis};axis.tickPadding=function(x){if(!arguments.length)return tickPadding;tickPadding=+x;return axis};axis.tickSubdivide=function(){return arguments.length&&axis};return axis};var d3_svg_axisDefaultOrient="bottom",d3_svg_axisOrients={top:1,right:1,bottom:1,left:1};function d3_svg_axisX(selection,x0,x1){selection.attr("transform",function(d){var v0=x0(d);return"translate("+(isFinite(v0)?v0:x1(d))+",0)"})}function d3_svg_axisY(selection,y0,y1){selection.attr("transform",function(d){var v0=y0(d);return"translate(0,"+(isFinite(v0)?v0:y1(d))+")"})}d3.svg.brush=function(){var event=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,y=null,xExtent=[0,0],yExtent=[0,0],xExtentDomain,yExtentDomain,xClamp=true,yClamp=true,resizes=d3_svg_brushResizes[0];function brush(g){g.each(function(){var g=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart);var background=g.selectAll(".background").data([0]);background.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var resize=g.selectAll(".resize").data(resizes,d3_identity);resize.exit().remove();resize.enter().append("g").attr("class",function(d){return"resize "+d}).style("cursor",function(d){return d3_svg_brushCursor[d]}).append("rect").attr("x",function(d){return/[ew]$/.test(d)?-3:null}).attr("y",function(d){return/^[ns]/.test(d)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");resize.style("display",brush.empty()?"none":null);var gUpdate=d3.transition(g),backgroundUpdate=d3.transition(background),range;if(x){range=d3_scaleRange(x);backgroundUpdate.attr("x",range[0]).attr("width",range[1]-range[0]);redrawX(gUpdate)}if(y){range=d3_scaleRange(y);backgroundUpdate.attr("y",range[0]).attr("height",range[1]-range[0]);redrawY(gUpdate)}redraw(gUpdate)})}brush.event=function(g){g.each(function(){var event_=event.of(this,arguments),extent1={x:xExtent,y:yExtent,i:xExtentDomain,j:yExtentDomain},extent0=this.__chart__||extent1;this.__chart__=extent1;if(d3_transitionInheritId){d3.select(this).transition().each("start.brush",function(){xExtentDomain=extent0.i;yExtentDomain=extent0.j;xExtent=extent0.x;yExtent=extent0.y;event_({type:"brushstart"})}).tween("brush:brush",function(){var xi=d3_interpolateArray(xExtent,extent1.x),yi=d3_interpolateArray(yExtent,extent1.y);xExtentDomain=yExtentDomain=null;return function(t){xExtent=extent1.x=xi(t);yExtent=extent1.y=yi(t);event_({type:"brush",mode:"resize"})}}).each("end.brush",function(){xExtentDomain=extent1.i;yExtentDomain=extent1.j;event_({type:"brush",mode:"resize"});event_({type:"brushend"})})}else{event_({type:"brushstart"});event_({type:"brush",mode:"resize"});event_({type:"brushend"})}})};function redraw(g){g.selectAll(".resize").attr("transform",function(d){return"translate("+xExtent[+/e$/.test(d)]+","+yExtent[+/^s/.test(d)]+")"})}function redrawX(g){g.select(".extent").attr("x",xExtent[0]);g.selectAll(".extent,.n>rect,.s>rect").attr("width",xExtent[1]-xExtent[0])}function redrawY(g){g.select(".extent").attr("y",yExtent[0]);g.selectAll(".extent,.e>rect,.w>rect").attr("height",yExtent[1]-yExtent[0])}function brushstart(){var target=this,eventTarget=d3.select(d3.event.target),event_=event.of(target,arguments),g=d3.select(target),resizing=eventTarget.datum(),resizingX=!/^(n|s)$/.test(resizing)&&x,resizingY=!/^(e|w)$/.test(resizing)&&y,dragging=eventTarget.classed("extent"),dragRestore=d3_event_dragSuppress(target),center,origin=d3.mouse(target),offset;var w=d3.select(d3_window(target)).on("keydown.brush",keydown).on("keyup.brush",keyup);if(d3.event.changedTouches){w.on("touchmove.brush",brushmove).on("touchend.brush",brushend)}else{w.on("mousemove.brush",brushmove).on("mouseup.brush",brushend)}g.interrupt().selectAll("*").interrupt();if(dragging){origin[0]=xExtent[0]-origin[0];origin[1]=yExtent[0]-origin[1]}else if(resizing){var ex=+/w$/.test(resizing),ey=+/^n/.test(resizing);offset=[xExtent[1-ex]-origin[0],yExtent[1-ey]-origin[1]];origin[0]=xExtent[ex];origin[1]=yExtent[ey]}else if(d3.event.altKey)center=origin.slice();g.style("pointer-events","none").selectAll(".resize").style("display",null);d3.select("body").style("cursor",eventTarget.style("cursor"));event_({type:"brushstart"});brushmove();function keydown(){if(d3.event.keyCode==32){if(!dragging){center=null;origin[0]-=xExtent[1];origin[1]-=yExtent[1];dragging=2}d3_eventPreventDefault()}}function keyup(){if(d3.event.keyCode==32&&dragging==2){origin[0]+=xExtent[1];origin[1]+=yExtent[1];dragging=0;d3_eventPreventDefault()}}function brushmove(){var point=d3.mouse(target),moved=false;if(offset){point[0]+=offset[0];point[1]+=offset[1]}if(!dragging){if(d3.event.altKey){if(!center)center=[(xExtent[0]+xExtent[1])/2,(yExtent[0]+yExtent[1])/2];origin[0]=xExtent[+(point[0]<center[0])];origin[1]=yExtent[+(point[1]<center[1])]}else center=null}if(resizingX&&move1(point,x,0)){redrawX(g);moved=true}if(resizingY&&move1(point,y,1)){redrawY(g);moved=true}if(moved){redraw(g);event_({type:"brush",mode:dragging?"move":"resize"})}}function move1(point,scale,i){var range=d3_scaleRange(scale),r0=range[0],r1=range[1],position=origin[i],extent=i?yExtent:xExtent,size=extent[1]-extent[0],min,max;if(dragging){r0-=position;r1-=size+position}min=(i?yClamp:xClamp)?Math.max(r0,Math.min(r1,point[i])):point[i];if(dragging){max=(min+=position)+size}else{if(center)position=Math.max(r0,Math.min(r1,2*center[i]-min));if(position<min){max=min;min=position}else{max=position}}if(extent[0]!=min||extent[1]!=max){if(i)yExtentDomain=null;else xExtentDomain=null;extent[0]=min;extent[1]=max;return true}}function brushend(){brushmove();g.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null);d3.select("body").style("cursor",null);w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);dragRestore();event_({type:"brushend"})}}brush.x=function(z){if(!arguments.length)return x;x=z;resizes=d3_svg_brushResizes[!x<<1|!y];return brush};brush.y=function(z){if(!arguments.length)return y;y=z;resizes=d3_svg_brushResizes[!x<<1|!y];return brush};brush.clamp=function(z){if(!arguments.length)return x&&y?[xClamp,yClamp]:x?xClamp:y?yClamp:null;if(x&&y)xClamp=!!z[0],yClamp=!!z[1];else if(x)xClamp=!!z;else if(y)yClamp=!!z;return brush};brush.extent=function(z){var x0,x1,y0,y1,t;if(!arguments.length){if(x){if(xExtentDomain){x0=xExtentDomain[0],x1=xExtentDomain[1]}else{x0=xExtent[0],x1=xExtent[1];if(x.invert)x0=x.invert(x0),x1=x.invert(x1);if(x1<x0)t=x0,x0=x1,x1=t}}if(y){if(yExtentDomain){y0=yExtentDomain[0],y1=yExtentDomain[1]}else{y0=yExtent[0],y1=yExtent[1];if(y.invert)y0=y.invert(y0),y1=y.invert(y1);if(y1<y0)t=y0,y0=y1,y1=t}}return x&&y?[[x0,y0],[x1,y1]]:x?[x0,x1]:y&&[y0,y1]}if(x){x0=z[0],x1=z[1];if(y)x0=x0[0],x1=x1[0];xExtentDomain=[x0,x1];if(x.invert)x0=x(x0),x1=x(x1);if(x1<x0)t=x0,x0=x1,x1=t;if(x0!=xExtent[0]||x1!=xExtent[1])xExtent=[x0,x1]}if(y){y0=z[0],y1=z[1];if(x)y0=y0[1],y1=y1[1];yExtentDomain=[y0,y1];if(y.invert)y0=y(y0),y1=y(y1);if(y1<y0)t=y0,y0=y1,y1=t;if(y0!=yExtent[0]||y1!=yExtent[1])yExtent=[y0,y1]}return brush};brush.clear=function(){if(!brush.empty()){xExtent=[0,0],yExtent=[0,0];xExtentDomain=yExtentDomain=null}return brush};brush.empty=function(){return!!x&&xExtent[0]==xExtent[1]||!!y&&yExtent[0]==yExtent[1]};return d3.rebind(brush,event,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var d3_time_format=d3_time.format=d3_locale_enUS.timeFormat;var d3_time_formatUtc=d3_time_format.utc;var d3_time_formatIso=d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");d3_time_format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?d3_time_formatIsoNative:d3_time_formatIso;function d3_time_formatIsoNative(date){return date.toISOString()}d3_time_formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date};d3_time_formatIsoNative.toString=d3_time_formatIso.toString;d3_time.second=d3_time_interval(function(date){return new d3_date(Math.floor(date/1e3)*1e3)},function(date,offset){date.setTime(date.getTime()+Math.floor(offset)*1e3)},function(date){return date.getSeconds()});d3_time.seconds=d3_time.second.range;d3_time.seconds.utc=d3_time.second.utc.range;d3_time.minute=d3_time_interval(function(date){return new d3_date(Math.floor(date/6e4)*6e4)},function(date,offset){date.setTime(date.getTime()+Math.floor(offset)*6e4)},function(date){return date.getMinutes()});d3_time.minutes=d3_time.minute.range;d3_time.minutes.utc=d3_time.minute.utc.range;d3_time.hour=d3_time_interval(function(date){var timezone=date.getTimezoneOffset()/60;return new d3_date((Math.floor(date/36e5-timezone)+timezone)*36e5)},function(date,offset){date.setTime(date.getTime()+Math.floor(offset)*36e5)},function(date){return date.getHours()});d3_time.hours=d3_time.hour.range;d3_time.hours.utc=d3_time.hour.utc.range;d3_time.month=d3_time_interval(function(date){date=d3_time.day(date);date.setDate(1);return date},function(date,offset){date.setMonth(date.getMonth()+offset)},function(date){return date.getMonth()});d3_time.months=d3_time.month.range;d3_time.months.utc=d3_time.month.utc.range;function d3_time_scale(linear,methods,format){function scale(x){return linear(x)}scale.invert=function(x){return d3_time_scaleDate(linear.invert(x))};scale.domain=function(x){if(!arguments.length)return linear.domain().map(d3_time_scaleDate);linear.domain(x);return scale};function tickMethod(extent,count){var span=extent[1]-extent[0],target=span/count,i=d3.bisect(d3_time_scaleSteps,target);return i==d3_time_scaleSteps.length?[methods.year,d3_scale_linearTickRange(extent.map(function(d){return d/31536e6}),count)[2]]:!i?[d3_time_scaleMilliseconds,d3_scale_linearTickRange(extent,count)[2]]:methods[target/d3_time_scaleSteps[i-1]<d3_time_scaleSteps[i]/target?i-1:i]}scale.nice=function(interval,skip){var domain=scale.domain(),extent=d3_scaleExtent(domain),method=interval==null?tickMethod(extent,10):typeof interval==="number"&&tickMethod(extent,interval);if(method)interval=method[0],skip=method[1];function skipped(date){return!isNaN(date)&&!interval.range(date,d3_time_scaleDate(+date+1),skip).length}return scale.domain(d3_scale_nice(domain,skip>1?{floor:function(date){while(skipped(date=interval.floor(date)))date=d3_time_scaleDate(date-1);return date},ceil:function(date){while(skipped(date=interval.ceil(date)))date=d3_time_scaleDate(+date+1);return date}}:interval))};scale.ticks=function(interval,skip){var extent=d3_scaleExtent(scale.domain()),method=interval==null?tickMethod(extent,10):typeof interval==="number"?tickMethod(extent,interval):!interval.range&&[{range:interval},skip];if(method)interval=method[0],skip=method[1];return interval.range(extent[0],d3_time_scaleDate(+extent[1]+1),skip<1?1:skip)};scale.tickFormat=function(){return format};scale.copy=function(){return d3_time_scale(linear.copy(),methods,format)};return d3_scale_linearRebind(scale,linear)}function d3_time_scaleDate(t){return new Date(t)}var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var d3_time_scaleLocalMethods=[[d3_time.second,1],[d3_time.second,5],[d3_time.second,15],[d3_time.second,30],[d3_time.minute,1],[d3_time.minute,5],[d3_time.minute,15],[d3_time.minute,30],[d3_time.hour,1],[d3_time.hour,3],[d3_time.hour,6],[d3_time.hour,12],[d3_time.day,1],[d3_time.day,2],[d3_time.week,1],[d3_time.month,1],[d3_time.month,3],[d3_time.year,1]];var d3_time_scaleLocalFormat=d3_time_format.multi([[".%L",function(d){return d.getMilliseconds()}],[":%S",function(d){return d.getSeconds()}],["%I:%M",function(d){return d.getMinutes()}],["%I %p",function(d){return d.getHours()}],["%a %d",function(d){return d.getDay()&&d.getDate()!=1}],["%b %d",function(d){return d.getDate()!=1}],["%B",function(d){return d.getMonth()}],["%Y",d3_true]]);var d3_time_scaleMilliseconds={range:function(start,stop,step){return d3.range(Math.ceil(start/step)*step,+stop,step).map(d3_time_scaleDate)},floor:d3_identity,ceil:d3_identity};d3_time_scaleLocalMethods.year=d3_time.year;d3_time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)};var d3_time_scaleUtcMethods=d3_time_scaleLocalMethods.map(function(m){return[m[0].utc,m[1]]});var d3_time_scaleUtcFormat=d3_time_formatUtc.multi([[".%L",function(d){return d.getUTCMilliseconds()}],[":%S",function(d){return d.getUTCSeconds()}],["%I:%M",function(d){return d.getUTCMinutes()}],["%I %p",function(d){return d.getUTCHours()}],["%a %d",function(d){return d.getUTCDay()&&d.getUTCDate()!=1}],["%b %d",function(d){return d.getUTCDate()!=1}],["%B",function(d){return d.getUTCMonth()}],["%Y",d3_true]]);d3_time_scaleUtcMethods.year=d3_time.year.utc;d3_time.scale.utc=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleUtcMethods,d3_time_scaleUtcFormat)};d3.text=d3_xhrType(function(request){return request.responseText});d3.json=function(url,callback){return d3_xhr(url,"application/json",d3_json,callback)};function d3_json(request){return JSON.parse(request.responseText)}d3.html=function(url,callback){return d3_xhr(url,"text/html",d3_html,callback)};function d3_html(request){var range=d3_document.createRange();range.selectNode(d3_document.body);return range.createContextualFragment(request.responseText)}d3.xml=d3_xhrType(function(request){return request.responseXML});if(typeof define==="function"&&define.amd)this.d3=d3,define(d3);else if(typeof module==="object"&&module.exports)module.exports=d3;else this.d3=d3}()},{}],9:[function(require,module,exports){module.exports={_from:"datalib@^1.7.1",_id:"datalib@1.8.0",_inBundle:false,_integrity:"sha512-5ytWXzDzLdd1FYhUHjwRVdgtak7wLvzijSBrECo8jw1eski5IIINPng+lunLZ5HT14pFEjTY9FgxlWm7w8SZ2A==",_location:"/datalib",_phantomChildren:{},_requested:{type:"range",registry:true,raw:"datalib@^1.7.1",name:"datalib",escapedName:"datalib",rawSpec:"^1.7.1",saveSpec:null,fetchSpec:"^1.7.1"},_requiredBy:["/vega","/vega-dataflow","/vega-scenegraph"],_resolved:"https://registry.npmjs.org/datalib/-/datalib-1.8.0.tgz",_shasum:"1fa56888b13be51b344898f7a8d0191e2221fbbf",_spec:"datalib@^1.7.1",_where:"/Users/jkhartshorne/Documents/Teaching/probmods2/node_modules/webppl-viz/node_modules/vega",author:{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},browser:{buffer:false,fs:false,http:false,request:false,"sync-request":false,url:false},bugs:{url:"https://github.com/vega/datalib/issues"},bundleDependencies:false,contributors:[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],dependencies:{"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",request:"^2.67.0","sync-request":"^2.1.0",topojson:"^1.6.19"},deprecated:false,description:"JavaScript utilites for loading, summarizing and working with data.",devDependencies:{browserify:"^12.0.1",chai:"^3.4.1",istanbul:"latest",jshint:"^2.9.1-rc1",mocha:"^2.3.4","uglify-js":"^2.6.1"},homepage:"https://github.com/vega/datalib#readme",keywords:["data","table","statistics","parse","csv","tsv","json","utility"],license:"BSD-3-Clause",main:"src/index.js",name:"datalib",repository:{type:"git",url:"git+ssh://git@github.com/vega/datalib.git"},scripts:{build:"browserify src/index.js -d -s dl -o datalib.js",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/"},version:"1.8.0"}},{}],10:[function(require,module,exports){var util=require("./util"),time=require("./time"),utc=time.utc;var u=module.exports;u.$year=util.$func("year",time.year.unit);u.$month=util.$func("month",time.months.unit);u.$date=util.$func("date",time.dates.unit);u.$day=util.$func("day",time.weekdays.unit);u.$hour=util.$func("hour",time.hours.unit);u.$minute=util.$func("minute",time.minutes.unit);u.$second=util.$func("second",time.seconds.unit);u.$utcYear=util.$func("utcYear",utc.year.unit);u.$utcMonth=util.$func("utcMonth",utc.months.unit);u.$utcDate=util.$func("utcDate",utc.dates.unit);u.$utcDay=util.$func("utcDay",utc.weekdays.unit);u.$utcHour=util.$func("utcHour",utc.hours.unit);u.$utcMinute=util.$func("utcMinute",utc.minutes.unit);u.$utcSecond=util.$func("utcSecond",utc.seconds.unit)},{"./time":32,"./util":33}],11:[function(require,module,exports){var util=require("../util"),Measures=require("./measures"),Collector=require("./collector");function Aggregator(){this._cells={};this._aggr=[];this._stream=false}var Flags=Aggregator.Flags={ADD_CELL:1,MOD_CELL:2};var proto=Aggregator.prototype;proto.stream=function(v){if(v==null)return this._stream;this._stream=!!v;this._aggr=[];return this};proto.key=function(key){if(key==null)return this._key;this._key=util.$(key);return this};proto.groupby=function(dims){this._dims=util.array(dims).map(function(d,i){d=util.isString(d)?{name:d,get:util.$(d)}:util.isFunction(d)?{name:util.name(d)||d.name||"_"+i,get:d}:d.name&&util.isFunction(d.get)?d:null;if(d==null)throw"Invalid groupby argument: "+d;return d});return this.clear()};proto.summarize=function(fields){fields=summarize_args(fields);this._count=true;var aggr=this._aggr=[],m,f,i,j,op,as,get;for(i=0;i<fields.length;++i){for(j=0,m=[],f=fields[i];j<f.ops.length;++j){op=f.ops[j];if(op!=="count")this._count=false;as=f.as&&f.as[j]||op+(f.name==="*"?"":"_"+f.name);m.push(Measures[op](as))}get=f.get&&util.$(f.get)||(f.name==="*"?util.identity:util.$(f.name));aggr.push({name:f.name,measures:Measures.create(m,this._stream,get,this._assign)})}return this.clear()};proto.count=function(){return this.summarize({"*":"count"})};proto._assign=function(object,name,value){object[name]=value};function summarize_args(fields){if(util.isArray(fields)){return fields}if(fields==null){return[]}var a=[],name,ops;for(name in fields){ops=util.array(fields[name]);a.push({name:name,ops:ops})}return a}proto.clear=function(){return this._cells={},this};proto._cellkey=function(x){var d=this._dims,n=d.length,i,k=String(d[0].get(x));for(i=1;i<n;++i){k+="|"+d[i].get(x)}return k};proto._cell=function(x){var key=this._dims.length?this._cellkey(x):"";return this._cells[key]||(this._cells[key]=this._newcell(x,key))};proto._newcell=function(x,key){var cell={num:0,tuple:this._newtuple(x,key),flag:Flags.ADD_CELL,aggs:{}};var aggr=this._aggr,i;for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name]=new aggr[i].measures(cell,cell.tuple)}if(cell.collect){cell.data=new Collector(this._key)}return cell};proto._newtuple=function(x){var dims=this._dims,t={},i,n;for(i=0,n=dims.length;i<n;++i){t[dims[i].name]=dims[i].get(x)}return this._ingest(t)};proto._ingest=util.identity;proto._add=function(x){var cell=this._cell(x),aggr=this._aggr,i;cell.num+=1;if(!this._count){if(cell.collect)cell.data.add(x);for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name].add(x)}}cell.flag|=Flags.MOD_CELL;if(this._on_add)this._on_add(x,cell)};proto._rem=function(x){var cell=this._cell(x),aggr=this._aggr,i;cell.num-=1;if(!this._count){if(cell.collect)cell.data.rem(x);for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name].rem(x)}}cell.flag|=Flags.MOD_CELL;if(this._on_rem)this._on_rem(x,cell)};proto._mod=function(curr,prev){var cell0=this._cell(prev),cell1=this._cell(curr),aggr=this._aggr,i;if(cell0!==cell1){cell0.num-=1;cell1.num+=1;if(cell0.collect)cell0.data.rem(prev);if(cell1.collect)cell1.data.add(curr)}else if(cell0.collect&&!util.isObject(curr)){cell0.data.rem(prev);cell0.data.add(curr)}for(i=0;i<aggr.length;++i){cell0.aggs[aggr[i].name].rem(prev);cell1.aggs[aggr[i].name].add(curr)}cell0.flag|=Flags.MOD_CELL;cell1.flag|=Flags.MOD_CELL;if(this._on_mod)this._on_mod(curr,prev,cell0,cell1)};proto._markMod=function(x){var cell0=this._cell(x);cell0.flag|=Flags.MOD_CELL};proto.result=function(){var result=[],aggr=this._aggr,cell,i,k;for(k in this._cells){cell=this._cells[k];if(cell.num>0){if(cell.collect){cell.data.values()}for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name].set()}result.push(cell.tuple)}else{delete this._cells[k]}cell.flag=0}this._rems=false;return result};proto.changes=function(output){var changes=output||{add:[],rem:[],mod:[]},aggr=this._aggr,cell,flag,i,k;for(k in this._cells){cell=this._cells[k];flag=cell.flag;if(cell.collect){cell.data.values()}for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name].set()}if(cell.num<=0){changes.rem.push(cell.tuple);delete this._cells[k];if(this._on_drop)this._on_drop(cell)}else{if(this._on_keep)this._on_keep(cell);if(flag&Flags.ADD_CELL){changes.add.push(cell.tuple)}else if(flag&Flags.MOD_CELL){changes.mod.push(cell.tuple)}}cell.flag=0}this._rems=false;return changes};proto.execute=function(input){return this.clear().insert(input).result()};proto.insert=function(input){this._consolidate();for(var i=0;i<input.length;++i){this._add(input[i])}return this};proto.remove=function(input){if(!this._stream){throw"Aggregator not configured for streaming removes."+" Call stream(true) prior to calling summarize."}for(var i=0;i<input.length;++i){this._rem(input[i])}this._rems=true;return this};proto._consolidate=function(){if(!this._rems)return;for(var k in this._cells){if(this._cells[k].collect){this._cells[k].data.values()}}this._rems=false};module.exports=Aggregator},{"../util":33,"./collector":12,"./measures":14}],12:[function(require,module,exports){var util=require("../util");var stats=require("../stats");var REM="__dl_rem__";function Collector(key){this._add=[];this._rem=[];this._key=key||null;this._last=null}var proto=Collector.prototype;proto.add=function(v){this._add.push(v)};proto.rem=function(v){this._rem.push(v)};proto.values=function(){this._get=null;if(this._rem.length===0)return this._add;var a=this._add,r=this._rem,k=this._key,x=Array(a.length-r.length),i,j,n,m;if(!util.isObject(r[0])){m=stats.count.map(r);for(i=0,j=0,n=a.length;i<n;++i){if(m[a[i]]>0){m[a[i]]-=1}else{x[j++]=a[i]}}}else if(k){m=util.toMap(r,k);for(i=0,j=0,n=a.length;i<n;++i){if(!m.hasOwnProperty(k(a[i]))){x[j++]=a[i]}}}else{for(i=0,n=r.length;i<n;++i){r[i][REM]=1}for(i=0,j=0,n=a.length;i<n;++i){if(!a[i][REM]){x[j++]=a[i]}}for(i=0,n=r.length;i<n;++i){delete r[i][REM]}}this._rem=[];return this._add=x};proto.extent=function(get){if(this._get!==get||!this._ext){var v=this.values(),i=stats.extent.index(v,get);this._ext=[v[i[0]],v[i[1]]];this._get=get}return this._ext};proto.argmin=function(get){return this.extent(get)[0]};proto.argmax=function(get){return this.extent(get)[1]};proto.min=function(get){var m=this.extent(get)[0];return m!=null?get(m):+Infinity};proto.max=function(get){var m=this.extent(get)[1];return m!=null?get(m):-Infinity};proto.quartile=function(get){if(this._get!==get||!this._q){this._q=stats.quartile(this.values(),get);this._get=get}return this._q};proto.q1=function(get){return this.quartile(get)[0]};proto.q2=function(get){return this.quartile(get)[1]};proto.q3=function(get){return this.quartile(get)[2]};module.exports=Collector},{"../stats":30,"../util":33}],13:[function(require,module,exports){var util=require("../util");var Aggregator=require("./aggregator");module.exports=function(){var args=[].reduce.call(arguments,function(a,x){return a.concat(util.array(x))},[]);return(new Aggregator).groupby(args).summarize({"*":"values"})}},{"../util":33,"./aggregator":11}],14:[function(require,module,exports){var util=require("../util");var types={values:measure({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:measure({name:"count",set:"cell.num"}),missing:measure({name:"missing",set:"this.missing"}),valid:measure({name:"valid",set:"this.valid"}),sum:measure({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:measure({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:measure({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:measure({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:measure({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:measure({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:measure({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:measure({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:measure({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:measure({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:measure({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:measure({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:measure({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:measure({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:measure({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:measure({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:measure({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};function measure(base){return function(out){var m=util.extend({init:"",add:"",rem:"",idx:0},base);m.out=out||base.name;return m}}function resolve(agg,stream){function collect(m,a){function helper(r){if(!m[r])collect(m,m[r]=types[r]())}if(a.req)a.req.forEach(helper);if(stream&&a.str)a.str.forEach(helper);return m}var map=agg.reduce(collect,agg.reduce(function(m,a){return m[a.name]=a,m},{}));return util.vals(map).sort(function(a,b){return a.idx-b.idx})}function create(agg,stream,accessor,mutator){var all=resolve(agg,stream),ctr="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",add="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",rem="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",set="var t = this.tuple; var cell = this.cell;";all.forEach(function(a){if(a.idx<0){ctr=a.init+ctr;add=a.add+add;rem=a.rem+rem}else{ctr+=a.init;add+=a.add;rem+=a.rem}});agg.slice().sort(function(a,b){return a.idx-b.idx}).forEach(function(a){set+="this.assign(t,'"+a.out+"',"+a.set+");"});set+="return t;";ctr=Function("cell","t",ctr);ctr.prototype.assign=mutator;ctr.prototype.add=Function("t","var v = this.get(t);"+add);ctr.prototype.rem=Function("t","var v = this.get(t);"+rem);ctr.prototype.set=Function(set);ctr.prototype.get=accessor;ctr.prototype.distinct=require("../stats").count.distinct;ctr.prototype.isValid=util.isValid;ctr.fields=agg.map(util.$("out"));return ctr}types.create=create;module.exports=types},{"../stats":30,"../util":33}],15:[function(require,module,exports){var util=require("../util"),time=require("../time"),EPSILON=1e-15;function bins(opt){if(!opt){throw Error("Missing binning options.")}var maxb=opt.maxbins||15,base=opt.base||10,logb=Math.log(base),div=opt.div||[5,2],min=opt.min,max=opt.max,span=max-min,step,level,minstep,precision,v,i,eps;if(opt.step){step=opt.step}else if(opt.steps){step=opt.steps[Math.min(opt.steps.length-1,bisect(opt.steps,span/maxb,0,opt.steps.length))]}else{level=Math.ceil(Math.log(maxb)/logb);minstep=opt.minstep||0;step=Math.max(minstep,Math.pow(base,Math.round(Math.log(span)/logb)-level));while(Math.ceil(span/step)>maxb){step*=base}for(i=0;i<div.length;++i){v=step/div[i];if(v>=minstep&&span/v<=maxb)step=v}}v=Math.log(step);precision=v>=0?0:~~(-v/logb)+1;eps=Math.pow(base,-precision-1);min=Math.min(min,Math.floor(min/step+eps)*step);max=Math.ceil(max/step)*step;return{start:min,stop:max,step:step,unit:{precision:precision},value:value,index:index}}function bisect(a,x,lo,hi){while(lo<hi){var mid=lo+hi>>>1;if(util.cmp(a[mid],x)<0){lo=mid+1}else{hi=mid}}return lo}function value(v){return this.step*Math.floor(v/this.step+EPSILON)}function index(v){return Math.floor((v-this.start)/this.step+EPSILON)}function date_value(v){return this.unit.date(value.call(this,v))}function date_index(v){return index.call(this,this.unit.unit(v))}bins.date=function(opt){if(!opt){throw Error("Missing date binning options.")}var units=opt.utc?time.utc:time,dmin=opt.min,dmax=opt.max,maxb=opt.maxbins||20,minb=opt.minbins||4,span=+dmax-+dmin,unit=opt.unit?units[opt.unit]:units.find(span,minb,maxb),spec=bins({min:unit.min!=null?unit.min:unit.unit(dmin),max:unit.max!=null?unit.max:unit.unit(dmax),maxbins:maxb,minstep:unit.minstep,steps:unit.step});spec.unit=unit;spec.index=date_index;if(!opt.raw)spec.value=date_value;return spec};module.exports=bins},{"../time":32,"../util":33}],16:[function(require,module,exports){var bins=require("./bins"),gen=require("../generate"),type=require("../import/type"),util=require("../util"),stats=require("../stats");var qtype={integer:1,number:1,date:1};function $bin(values,f,opt){opt=options(values,f,opt);var b=spec(opt);return!b?opt.accessor||util.identity:util.$func("bin",b.unit.unit?function(x){return b.value(b.unit.unit(x))}:function(x){return b.value(x)})(opt.accessor)}function histogram(values,f,opt){opt=options(values,f,opt);var b=spec(opt);return b?numerical(values,opt.accessor,b):categorical(values,opt.accessor,opt&&opt.sort)}function spec(opt){var t=opt.type,b=null;if(t==null||qtype[t]){if(t==="integer"&&opt.minstep==null)opt.minstep=1;b=t==="date"?bins.date(opt):bins(opt)}return b}function options(){var a=arguments,i=0,values=util.isArray(a[i])?a[i++]:null,f=util.isFunction(a[i])||util.isString(a[i])?util.$(a[i++]):null,opt=util.extend({},a[i]);if(values){opt.type=opt.type||type(values,f);if(qtype[opt.type]){var ext=stats.extent(values,f);opt=util.extend({min:ext[0],max:ext[1]},opt)}}if(f){opt.accessor=f}return opt}function numerical(values,f,b){var h=gen.range(b.start,b.stop+b.step/2,b.step).map(function(v){return{value:b.value(v),count:0}});for(var i=0,v,j;i<values.length;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){j=b.index(v);if(j<0||j>=h.length||!isFinite(j))continue;h[j].count+=1}}h.bins=b;return h}function categorical(values,f,sort){var u=stats.unique(values,f),c=stats.count.map(values,f);return u.map(function(k){return{value:k,count:c[k]}}).sort(util.comparator(sort?"-count":"+value"))}module.exports={$bin:$bin,histogram:histogram}},{"../generate":19,"../import/type":28,"../stats":30,"../util":33,"./bins":15}],17:[function(require,module,exports){var util=require("./util"),type=require("./import/type"),stats=require("./stats"),template=require("./template");module.exports={table:formatTable,summary:formatSummary};var FMT={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'};var POS={number:"left",integer:"left"};function formatTable(data,opt){opt=util.extend({separator:" ",minwidth:8,maxwidth:15},opt);var fields=opt.fields||util.keys(data[0]),types=type.all(data);if(opt.start||opt.limit){var a=opt.start||0,b=opt.limit?a+opt.limit:data.length;data=data.slice(a,b)}var lens=fields.map(function(name){var format=FMT[types[name]]||"",t=template("{{"+name+format+"}}"),l=stats.max(data,function(x){return t(x).length});l=Math.max(Math.min(name.length,opt.minwidth),l);return opt.maxwidth>0?Math.min(l,opt.maxwidth):l});var head=fields.map(function(name,i){return util.truncate(util.pad(name,lens[i],"center"),lens[i])}).join(opt.separator);var tmpl=template(fields.map(function(name,i){return"{{"+name+(FMT[types[name]]||"")+("|pad:"+lens[i]+","+(POS[types[name]]||"right"))+("|truncate:"+lens[i])+"}}"}).join(opt.separator));return head+"\n"+data.map(tmpl).join("\n")}function formatSummary(s){s=s?s.__summary__?s:stats.summary(s):this;var str=[],i,n;for(i=0,n=s.length;i<n;++i){str.push("-- "+s[i].field+" --");if(s[i].type==="string"||s[i].distinct<10){str.push(printCategoricalProfile(s[i]))}else{str.push(printQuantitativeProfile(s[i]))}str.push("")}return str.join("\n")}function printQuantitativeProfile(p){return["valid:    "+p.valid,"missing:  "+p.missing,"distinct: "+p.distinct,"min:      "+p.min,"max:      "+p.max,"median:   "+p.median,"mean:     "+p.mean,"stdev:    "+p.stdev,"modeskew: "+p.modeskew].join("\n")}function printCategoricalProfile(p){var list=["valid:    "+p.valid,"missing:  "+p.missing,"distinct: "+p.distinct,"top values: "];var u=p.unique;var top=util.keys(u).sort(function(a,b){return u[b]-u[a]}).slice(0,6).map(function(v){return" '"+v+"' ("+u[v]+")"});return list.concat(top).join("\n")}},{"./import/type":28,"./stats":30,"./template":31,"./util":33}],18:[function(require,module,exports){var util=require("./util"),d3_time=require("d3-time"),d3_timeF=require("d3-time-format"),d3_numberF=require("d3-format"),numberF=d3_numberF,timeF=d3_timeF,tmpDate=new Date(2e3,0,1),monthFull,monthAbbr,dayFull,dayAbbr;module.exports={numberLocale:numberLocale,number:function(f){return numberF.format(f)},numberPrefix:function(f,v){return numberF.formatPrefix(f,v)},timeLocale:timeLocale,time:function(f){return timeF.format(f)},utc:function(f){return timeF.utcFormat(f)},locale:function(l){numberLocale(l);timeLocale(l)},auto:{number:autoNumberFormat,linear:linearNumberFormat,time:function(){return timeAutoFormat()},utc:function(){return utcAutoFormat()}},month:monthFormat,day:dayFormat,quarter:quarterFormat,utcQuarter:utcQuarterFormat};function localeRef(l){return l.length>4&&"locale"+(l[0].toUpperCase()+l[1].toLowerCase()+l[3].toUpperCase()+l[4].toLowerCase())}function numberLocale(l){var f=util.isString(l)?d3_numberF[localeRef(l)]:d3_numberF.locale(l);if(f==null)throw Error("Unrecognized locale: "+l);numberF=f}function timeLocale(l){var f=util.isString(l)?d3_timeF[localeRef(l)]:d3_timeF.locale(l);if(f==null)throw Error("Unrecognized locale: "+l);timeF=f;monthFull=monthAbbr=dayFull=dayAbbr=null}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function linearRange(domain,count){if(!domain.length)domain=[0];if(count==null)count=10;var start=domain[0],stop=domain[domain.length-1];if(stop<start){error=stop;stop=start;start=error}var span=stop-start||(count=1,start||stop||1),step=Math.pow(10,Math.floor(Math.log(span/count)/Math.LN10)),error=span/count/step;if(error>=e10)step*=10;else if(error>=e5)step*=5;else if(error>=e2)step*=2;return[Math.ceil(start/step)*step,Math.floor(stop/step)*step+step/2,step]}function trimZero(f,decimal){return function(x){var s=f(x),n=s.indexOf(decimal);if(n<0)return s;var idx=rightmostDigit(s,n),end=idx<s.length?s.slice(idx):"";while(--idx>n){if(s[idx]!=="0"){++idx;break}}return s.slice(0,idx)+end}}function rightmostDigit(s,n){var i=s.lastIndexOf("e"),c;if(i>0)return i;for(i=s.length;--i>n;){c=s.charCodeAt(i);if(c>=48&&c<=57)return i+1}}function autoNumberFormat(f){var decimal=numberF.format(".1f")(1)[1];if(f==null)f=",";f=d3_numberF.formatSpecifier(f);if(f.precision==null)f.precision=12;switch(f.type){case"%":f.precision-=2;break;case"e":f.precision-=1;break}return trimZero(numberF.format(f),decimal)}function linearNumberFormat(domain,count,f){var range=linearRange(domain,count);if(f==null)f=",f";switch(f=d3_numberF.formatSpecifier(f),f.type){case"s":{var value=Math.max(Math.abs(range[0]),Math.abs(range[1]));if(f.precision==null)f.precision=d3_numberF.precisionPrefix(range[2],value);return numberF.formatPrefix(f,value)}case"":case"e":case"g":case"p":case"r":{if(f.precision==null)f.precision=d3_numberF.precisionRound(range[2],Math.max(Math.abs(range[0]),Math.abs(range[1])))-(f.type==="e");break}case"f":case"%":{if(f.precision==null)f.precision=d3_numberF.precisionFixed(range[2])-2*(f.type==="%");break}}return numberF.format(f)}function timeAutoFormat(){var f=timeF.format,formatMillisecond=f(".%L"),formatSecond=f(":%S"),formatMinute=f("%I:%M"),formatHour=f("%I %p"),formatDay=f("%a %d"),formatWeek=f("%b %d"),formatMonth=f("%B"),formatYear=f("%Y");return function(date){var d=+date;return(d3_time.second(date)<d?formatMillisecond:d3_time.minute(date)<d?formatSecond:d3_time.hour(date)<d?formatMinute:d3_time.day(date)<d?formatHour:d3_time.month(date)<d?d3_time.week(date)<d?formatDay:formatWeek:d3_time.year(date)<d?formatMonth:formatYear)(date)}}function utcAutoFormat(){var f=timeF.utcFormat,formatMillisecond=f(".%L"),formatSecond=f(":%S"),formatMinute=f("%I:%M"),formatHour=f("%I %p"),formatDay=f("%a %d"),formatWeek=f("%b %d"),formatMonth=f("%B"),formatYear=f("%Y");return function(date){var d=+date;return(d3_time.utcSecond(date)<d?formatMillisecond:d3_time.utcMinute(date)<d?formatSecond:d3_time.utcHour(date)<d?formatMinute:d3_time.utcDay(date)<d?formatHour:d3_time.utcMonth(date)<d?d3_time.utcWeek(date)<d?formatDay:formatWeek:d3_time.utcYear(date)<d?formatMonth:formatYear)(date)}}function monthFormat(month,abbreviate){var f=abbreviate?monthAbbr||(monthAbbr=timeF.format("%b")):monthFull||(monthFull=timeF.format("%B"));return tmpDate.setMonth(month),f(tmpDate)}function dayFormat(day,abbreviate){var f=abbreviate?dayAbbr||(dayAbbr=timeF.format("%a")):dayFull||(dayFull=timeF.format("%A"));return tmpDate.setMonth(0),tmpDate.setDate(2+day),f(tmpDate)}function quarterFormat(date){return Math.floor(date.getMonth()/3)+1}function utcQuarterFormat(date){return Math.floor(date.getUTCMonth()/3)+1}},{"./util":33,"d3-format":5,"d3-time":7,"d3-time-format":6}],19:[function(require,module,exports){var util=require("./util"),gen=module.exports;gen.repeat=function(val,n){var a=Array(n),i;for(i=0;i<n;++i)a[i]=val;return a};gen.zeros=function(n){return gen.repeat(0,n)};gen.range=function(start,stop,step){if(arguments.length<3){step=1;if(arguments.length<2){stop=start;start=0}}if((stop-start)/step==Infinity)throw new Error("Infinite range");var range=[],i=-1,j;if(step<0)while((j=start+step*++i)>stop)range.push(j);else while((j=start+step*++i)<stop)range.push(j);return range};gen.random={};gen.random.uniform=function(min,max){if(max===undefined){max=min===undefined?1:min;min=0}var d=max-min;var f=function(){return min+d*Math.random()};f.samples=function(n){return gen.zeros(n).map(f)};f.pdf=function(x){return x>=min&&x<=max?1/d:0};f.cdf=function(x){return x<min?0:x>max?1:(x-min)/d};f.icdf=function(p){return p>=0&&p<=1?min+p*d:NaN};return f};gen.random.integer=function(a,b){if(b===undefined){b=a;a=0}var d=b-a;var f=function(){return a+Math.floor(d*Math.random())};f.samples=function(n){return gen.zeros(n).map(f)};f.pdf=function(x){return x===Math.floor(x)&&x>=a&&x<b?1/d:0};f.cdf=function(x){var v=Math.floor(x);return v<a?0:v>=b?1:(v-a+1)/d};f.icdf=function(p){return p>=0&&p<=1?a-1+Math.floor(p*d):NaN};return f};gen.random.normal=function(mean,stdev){mean=mean||0;stdev=stdev||1;var next;var f=function(){var x=0,y=0,rds,c;if(next!==undefined){x=next;next=undefined;return x}do{x=Math.random()*2-1;y=Math.random()*2-1;rds=x*x+y*y}while(rds===0||rds>1);c=Math.sqrt(-2*Math.log(rds)/rds);next=mean+y*c*stdev;return mean+x*c*stdev};f.samples=function(n){return gen.zeros(n).map(f)};f.pdf=function(x){var exp=Math.exp(Math.pow(x-mean,2)/(-2*Math.pow(stdev,2)));return 1/(stdev*Math.sqrt(2*Math.PI))*exp};f.cdf=function(x){var cd,z=(x-mean)/stdev,Z=Math.abs(z);if(Z>37){cd=0}else{var sum,exp=Math.exp(-Z*Z/2);if(Z<7.07106781186547){sum=.0352624965998911*Z+.700383064443688;sum=sum*Z+6.37396220353165;sum=sum*Z+33.912866078383;sum=sum*Z+112.079291497871;sum=sum*Z+221.213596169931;sum=sum*Z+220.206867912376;cd=exp*sum;sum=.0883883476483184*Z+1.75566716318264;sum=sum*Z+16.064177579207;sum=sum*Z+86.7807322029461;sum=sum*Z+296.564248779674;sum=sum*Z+637.333633378831;sum=sum*Z+793.826512519948;sum=sum*Z+440.413735824752;cd=cd/sum}else{sum=Z+.65;sum=Z+4/sum;sum=Z+3/sum;sum=Z+2/sum;sum=Z+1/sum;cd=exp/sum/2.506628274631}}return z>0?1-cd:cd};f.icdf=function(p){if(p<=0||p>=1)return NaN;var x=2*p-1,v=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*v)+Math.log(1-Math.pow(x,2))/2,b=Math.log(1-x*x)/v,s=(x>0?1:-1)*Math.sqrt(Math.sqrt(a*a-b)-a);return mean+stdev*Math.SQRT2*s};return f};gen.random.bootstrap=function(domain,smooth){var val=domain.filter(util.isValid),len=val.length,err=smooth?gen.random.normal(0,smooth):null;var f=function(){return val[~~(Math.random()*len)]+(err?err():0)};f.samples=function(n){return gen.zeros(n).map(f)};return f}},{"./util":33}],20:[function(require,module,exports){var util=require("../../util");var d3_dsv=require("d3-dsv");function dsv(data,format){if(data){var h=format.header;data=(h?h.join(format.delimiter)+"\n":"")+data}return d3_dsv.dsv(format.delimiter).parse(data)}dsv.delimiter=function(delim){var fmt={delimiter:delim};return function(data,format){return dsv(data,format?util.extend(format,fmt):fmt)}};module.exports=dsv},{"../../util":33,"d3-dsv":4}],21:[function(require,module,exports){var dsv=require("./dsv");module.exports={json:require("./json"),topojson:require("./topojson"),treejson:require("./treejson"),dsv:dsv,csv:dsv.delimiter(","),tsv:dsv.delimiter("\t")}},{"./dsv":20,"./json":22,"./topojson":23,"./treejson":24}],22:[function(require,module,exports){var util=require("../../util");module.exports=function(data,format){var d=util.isObject(data)&&!util.isBuffer(data)?data:JSON.parse(data);if(format&&format.property){d=util.accessor(format.property)(d)}return d}},{"../../util":33}],23:[function(require,module,exports){var json=require("./json");var reader=function(data,format){var topojson=reader.topojson;if(topojson==null){throw Error("TopoJSON library not loaded.")}var t=json(data,format),obj;if(format&&format.feature){if(obj=t.objects[format.feature]){return topojson.feature(t,obj).features}else{throw Error("Invalid TopoJSON object: "+format.feature)}}else if(format&&format.mesh){if(obj=t.objects[format.mesh]){return[topojson.mesh(t,t.objects[format.mesh])]}else{throw Error("Invalid TopoJSON object: "+format.mesh)}}else{throw Error("Missing TopoJSON feature or mesh parameter.")}};reader.topojson=require("topojson");module.exports=reader},{"./json":22,topojson:221}],24:[function(require,module,exports){var json=require("./json");module.exports=function(tree,format){return toTable(json(tree,format),format)};function toTable(root,fields){var childrenField=fields&&fields.children||"children",parentField=fields&&fields.parent||"parent",table=[];function visit(node,parent){node[parentField]=parent;table.push(node);var children=node[childrenField];if(children){for(var i=0;i<children.length;++i){visit(children[i],node)}}}visit(root,null);return table.root=root,table}},{"./json":22}],25:[function(require,module,exports){var util=require("../util");var protocol_re=/^([A-Za-z]+:)?\/\//;var fileProtocol="file://";function sanitizeUrl(opt){var url=opt.url;if(!url&&opt.file){return fileProtocol+opt.file}if(opt.baseURL&&!protocol_re.test(url)){if(!startsWith(url,"/")&&opt.baseURL[opt.baseURL.length-1]!=="/"){url="/"+url}url=opt.baseURL+url}if(!load.useXHR&&startsWith(url,"//")){url=(opt.defaultProtocol||"http")+":"+url}if(opt.domainWhiteList){var domain,origin;if(load.useXHR){var a=document.createElement("a");a.href=url;if(a.host===""){a.href=a.href}domain=a.hostname.toLowerCase();origin=window.location.hostname}else{var parts=require("url").parse(url);domain=parts.hostname;origin=null}if(origin!==domain){var whiteListed=opt.domainWhiteList.some(function(d){var idx=domain.length-d.length;return d===domain||idx>1&&domain[idx-1]==="."&&domain.lastIndexOf(d)===idx});if(!whiteListed){throw"URL is not whitelisted: "+url}}}return url}function load(opt,callback){return load.loader(opt,callback)}function loader(opt,callback){var error=callback||function(e){throw e},url;try{url=load.sanitizeUrl(opt)}catch(err){error(err);return}if(!url){error("Invalid URL: "+opt.url)}else if(load.useXHR){return load.xhr(url,opt,callback)}else if(startsWith(url,fileProtocol)){return load.file(url.slice(fileProtocol.length),opt,callback)}else if(url.indexOf("://")<0){return load.file(url,opt,callback)}else{return load.http(url,opt,callback)}}function xhrHasResponse(request){var type=request.responseType;return type&&type!=="text"?request.response:request.responseText}function xhr(url,opt,callback){var async=!!callback;var request=new XMLHttpRequest;if(typeof XDomainRequest!=="undefined"&&!("withCredentials"in request)&&/^(http(s)?:)?\/\//.test(url))request=new XDomainRequest;function respond(){var status=request.status;if(!status&&xhrHasResponse(request)||status>=200&&status<300||status===304){callback(null,request.responseText)}else{callback(request,null)}}if(async){if("onload"in request){request.onload=request.onerror=respond}else{request.onreadystatechange=function(){if(request.readyState>3)respond()}}}request.open("GET",url,async);if(request.setRequestHeader){var headers=util.extend({},load.headers,opt.headers);for(var name in headers){request.setRequestHeader(name,headers[name])}}request.send();if(!async&&xhrHasResponse(request)){return request.responseText}}function file(filename,opt,callback){var fs=require("fs");if(!callback){return fs.readFileSync(filename,"utf8")}fs.readFile(filename,callback)}function http(url,opt,callback){var headers=util.extend({},load.headers,opt.headers);var options={url:url,encoding:null,gzip:true,headers:headers};if(!callback){return require("sync-request")("GET",url,options).getBody()}require("request")(options,function(error,response,body){if(!error&&response.statusCode===200){callback(null,body)}else{error=error||"Load failed with response code "+response.statusCode+".";callback(error,null)}})}function startsWith(string,searchString){return string==null?false:string.lastIndexOf(searchString,0)===0}load.loader=loader;load.sanitizeUrl=sanitizeUrl;load.xhr=xhr;load.file=file;load.http=http;load.useXHR=typeof XMLHttpRequest!=="undefined";load.headers={};module.exports=load},{"../util":33,fs:406,request:406,"sync-request":406,url:406}],26:[function(require,module,exports){var util=require("../util"),type=require("./type"),formats=require("./formats"),timeF=require("../format").time;function read(data,format){var type=format&&format.type||"json";data=formats[type](data,format);if(format&&format.parse)parse(data,format.parse);return data}function parse(data,types){var cols,parsers,d,i,j,clen,len=data.length;types=types==="auto"?type.inferAll(data):util.duplicate(types);cols=util.keys(types);parsers=cols.map(function(c){var t=types[c];if(t&&t.indexOf("date:")===0){var parts=t.split(/:(.+)?/,2),pattern=parts[1];if(pattern[0]==="'"&&pattern[pattern.length-1]==="'"||pattern[0]==='"'&&pattern[pattern.length-1]==='"'){pattern=pattern.slice(1,-1)}else{throw Error("Format pattern must be quoted: "+pattern)}pattern=timeF(pattern);return function(v){return pattern.parse(v)}}if(!type.parsers[t]){throw Error("Illegal format pattern: "+c+":"+t)}return type.parsers[t]});for(i=0,clen=cols.length;i<len;++i){d=data[i];for(j=0;j<clen;++j){d[cols[j]]=parsers[j](d[cols[j]])}}type.annotation(data,types)}read.formats=formats;module.exports=read},{"../format":18,"../util":33,"./formats":21,"./type":28}],27:[function(require,module,exports){var util=require("../util");var load=require("./load");var read=require("./read");module.exports=util.keys(read.formats).reduce(function(out,type){out[type]=function(opt,format,callback){if(util.isString(opt)){opt={url:opt}}if(arguments.length===2&&util.isFunction(format)){callback=format;format=undefined}format=util.extend({parse:"auto"},format);format.type=type;var data=load(opt,callback?function(error,data){if(error){callback(error,null);return}try{data=read(data,format);callback(null,data)}catch(e){callback(e,null)}}:undefined);if(!callback)return read(data,format)};return out},{})},{"../util":33,"./load":25,"./read":26}],28:[function(require,module,exports){var util=require("../util");var TYPES="__types__";var PARSERS={boolean:util.boolean,integer:util.number,number:util.number,date:util.date,string:function(x){return x==null||x===""?null:x+""}};var TESTS={boolean:function(x){return x==="true"||x==="false"||util.isBoolean(x)},integer:function(x){return TESTS.number(x)&&(x=+x)===~~x},number:function(x){return!isNaN(+x)&&!util.isDate(x)},date:function(x){return!isNaN(Date.parse(x))}};function annotation(data,types){if(!types)return data&&data[TYPES]||null;data[TYPES]=types}function fieldNames(datum){return util.keys(datum)}function bracket(fieldName){return"["+fieldName+"]"}function type(values,f){values=util.array(values);f=util.$(f);var v,i,n;if(values[TYPES]){v=f(values[TYPES]);if(util.isString(v))return v}for(i=0,n=values.length;!util.isValid(v)&&i<n;++i){v=f?f(values[i]):values[i]}return util.isDate(v)?"date":util.isNumber(v)?"number":util.isBoolean(v)?"boolean":util.isString(v)?"string":null}function typeAll(data,fields){if(!data.length)return;var get=fields?util.identity:(fields=fieldNames(data[0]),bracket);return fields.reduce(function(types,f){return types[f]=type(data,get(f)),types},{})}function infer(values,f,ignore){values=util.array(values);f=util.$(f);var i,j,v;var types=["boolean","integer","number","date"];for(i=0;i<values.length;++i){v=f?f(values[i]):values[i];for(j=0;j<types.length;++j){if((!ignore||!ignore.test(v))&&util.isValid(v)&&!TESTS[types[j]](v)){types.splice(j,1);j-=1}}if(types.length===0)return"string"}return types[0]}function inferAll(data,fields,ignore){var get=fields?util.identity:(fields=fieldNames(data[0]),bracket);return fields.reduce(function(types,f){types[f]=infer(data,get(f),ignore);return types},{})}type.annotation=annotation;type.all=typeAll;type.infer=infer;type.inferAll=inferAll;type.parsers=PARSERS;module.exports=type},{"../util":33}],29:[function(require,module,exports){var util=require("./util");var dl={version:require("../package.json").version,load:require("./import/load"),read:require("./import/read"),type:require("./import/type"),Aggregator:require("./aggregate/aggregator"),groupby:require("./aggregate/groupby"),bins:require("./bins/bins"),$bin:require("./bins/histogram").$bin,histogram:require("./bins/histogram").histogram,format:require("./format"),template:require("./template"),time:require("./time")};util.extend(dl,util);util.extend(dl,require("./accessor"));util.extend(dl,require("./generate"));util.extend(dl,require("./stats"));util.extend(dl,require("./import/readers"));util.extend(dl.format,require("./format-tables"));dl.print={table:dl.format.table,summary:dl.format.summary};module.exports=dl},{"../package.json":9,"./accessor":10,"./aggregate/aggregator":11,"./aggregate/groupby":13,"./bins/bins":15,"./bins/histogram":16,"./format":18,"./format-tables":17,"./generate":19,"./import/load":25,"./import/read":26,"./import/readers":27,"./import/type":28,"./stats":30,"./template":31,"./time":32,"./util":33}],30:[function(require,module,exports){var util=require("./util");var type=require("./import/type");var gen=require("./generate");var stats=module.exports;stats.unique=function(values,f,results){f=util.$(f);results=results||[];var u={},v,i,n;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(v in u)continue;u[v]=1;results.push(v)}return results};stats.count=function(values){return values&&values.length||0};stats.count.valid=function(values,f){f=util.$(f);var v,i,n,valid=0;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v))valid+=1}return valid};stats.count.missing=function(values,f){f=util.$(f);var v,i,n,count=0;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(v==null)count+=1}return count};stats.count.distinct=function(values,f){f=util.$(f);var u={},v,i,n,count=0;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(v in u)continue;u[v]=1;count+=1}return count};stats.count.map=function(values,f){f=util.$(f);var map={},v,i,n;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];map[v]=v in map?map[v]+1:1}return map};stats.median=function(values,f){if(f)values=values.map(util.$(f));values=values.filter(util.isValid).sort(util.cmp);return stats.quantile(values,.5)};stats.quartile=function(values,f){if(f)values=values.map(util.$(f));values=values.filter(util.isValid).sort(util.cmp);var q=stats.quantile;return[q(values,.25),q(values,.5),q(values,.75)]};stats.quantile=function(values,f,p){if(p===undefined){p=f;f=util.identity}f=util.$(f);var H=(values.length-1)*p+1,h=Math.floor(H),v=+f(values[h-1]),e=H-h;return e?v+e*(f(values[h])-v):v};stats.sum=function(values,f){f=util.$(f);for(var sum=0,i=0,n=values.length,v;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v))sum+=v}return sum};stats.mean=function(values,f){f=util.$(f);var mean=0,delta,i,n,c,v;for(i=0,c=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){delta=v-mean;mean=mean+delta/++c}}return mean};stats.mean.geometric=function(values,f){f=util.$(f);var mean=1,c,n,v,i;for(i=0,c=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){if(v<=0){throw Error("Geometric mean only defined for positive values.")}mean*=v;++c}}mean=c>0?Math.pow(mean,1/c):0;return mean};stats.mean.harmonic=function(values,f){f=util.$(f);var mean=0,c,n,v,i;for(i=0,c=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){mean+=1/v;++c}}return c/mean};stats.variance=function(values,f){f=util.$(f);if(!util.isArray(values)||values.length<2)return 0;var mean=0,M2=0,delta,i,c,v;for(i=0,c=0;i<values.length;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){delta=v-mean;mean=mean+delta/++c;M2=M2+delta*(v-mean)}}M2=M2/(c-1);return M2};stats.stdev=function(values,f){return Math.sqrt(stats.variance(values,f))};stats.modeskew=function(values,f){var avg=stats.mean(values,f),med=stats.median(values,f),std=stats.stdev(values,f);return std===0?0:(avg-med)/std};stats.min=function(values,f){return stats.extent(values,f)[0]};stats.max=function(values,f){return stats.extent(values,f)[1]};stats.extent=function(values,f){f=util.$(f);var a,b,v,i,n=values.length;for(i=0;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){a=b=v;break}}for(;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){if(v<a)a=v;if(v>b)b=v}}return[a,b]};stats.extent.index=function(values,f){f=util.$(f);var x=-1,y=-1,a,b,v,i,n=values.length;for(i=0;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){a=b=v;x=y=i;break}}for(;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){if(v<a){a=v;x=i}if(v>b){b=v;y=i}}}return[x,y]};stats.dot=function(values,a,b){var sum=0,i,v;if(!b){if(values.length!==a.length){throw Error("Array lengths must match.")}for(i=0;i<values.length;++i){v=values[i]*a[i];if(v===v)sum+=v}}else{a=util.$(a);b=util.$(b);for(i=0;i<values.length;++i){v=a(values[i])*b(values[i]);if(v===v)sum+=v}}return sum};stats.dist=function(values,a,b,exp){var f=util.isFunction(b)||util.isString(b),X=values,Y=f?values:a,e=f?exp:b,L2=e===2||e==null,n=values.length,s=0,d,i;if(f){a=util.$(a);b=util.$(b)}for(i=0;i<n;++i){d=f?a(X[i])-b(Y[i]):X[i]-Y[i];s+=L2?d*d:Math.pow(Math.abs(d),e)}return L2?Math.sqrt(s):Math.pow(s,1/e)};stats.cohensd=function(values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,x1=stats.mean(X),x2=stats.mean(Y),n1=stats.count.valid(X),n2=stats.count.valid(Y);if(n1+n2-2<=0){return 0}var s1=stats.variance(X),s2=stats.variance(Y),s=Math.sqrt(((n1-1)*s1+(n2-1)*s2)/(n1+n2-2));return s===0?0:(x1-x2)/s};stats.covariance=function(values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,n=X.length,xm=stats.mean(X),ym=stats.mean(Y),sum=0,c=0,i,x,y,vx,vy;if(n!==Y.length){throw Error("Input lengths must match.")}for(i=0;i<n;++i){x=X[i];vx=util.isValid(x);y=Y[i];vy=util.isValid(y);if(vx&&vy){sum+=(x-xm)*(y-ym);++c}else if(vx||vy){throw Error("Valid values must align.")}}return sum/(c-1)};stats.rank=function(values,f){f=util.$(f)||util.identity;var a=values.map(function(v,i){return{idx:i,val:f(v)}}).sort(util.comparator("val"));var n=values.length,r=Array(n),tie=-1,p={},i,v,mu;for(i=0;i<n;++i){v=a[i].val;if(tie<0&&p===v){tie=i-1}else if(tie>-1&&p!==v){mu=1+(i-1+tie)/2;for(;tie<i;++tie)r[a[tie].idx]=mu;tie=-1}r[a[i].idx]=i+1;p=v}if(tie>-1){mu=1+(n-1+tie)/2;for(;tie<n;++tie)r[a[tie].idx]=mu}return r};stats.cor=function(values,a,b){var fn=b;b=fn?values.map(util.$(b)):a;a=fn?values.map(util.$(a)):values;var dot=stats.dot(a,b),mua=stats.mean(a),mub=stats.mean(b),sda=stats.stdev(a),sdb=stats.stdev(b),n=values.length;return(dot-n*mua*mub)/((n-1)*sda*sdb)};stats.cor.rank=function(values,a,b){var ra=b?stats.rank(values,a):stats.rank(values),rb=b?stats.rank(values,b):stats.rank(a),n=values.length,i,s,d;for(i=0,s=0;i<n;++i){d=ra[i]-rb[i];s+=d*d}return 1-6*s/(n*(n*n-1))};stats.cor.dist=function(values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a;var A=stats.dist.mat(X),B=stats.dist.mat(Y),n=A.length,i,aa,bb,ab;for(i=0,aa=0,bb=0,ab=0;i<n;++i){aa+=A[i]*A[i];bb+=B[i]*B[i];ab+=A[i]*B[i]}return Math.sqrt(ab/Math.sqrt(aa*bb))};stats.linearRegression=function(values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,n=X.length,xy=stats.covariance(X,Y),sx=stats.stdev(X),sy=stats.stdev(Y),slope=xy/(sx*sx),icept=stats.mean(Y)-slope*stats.mean(X),fit={slope:slope,intercept:icept,R:xy/(sx*sy),rss:0},res,i;for(i=0;i<n;++i){if(util.isValid(X[i])&&util.isValid(Y[i])){res=slope*X[i]+icept-Y[i];fit.rss+=res*res}}return fit};stats.bootstrap={};stats.bootstrap.ci=function(values,a,b,c,d){var X,N,alpha,smooth,bs,means,i;if(util.isFunction(a)||util.isString(a)){X=values.map(util.$(a));N=b;alpha=c;smooth=d}else{X=values;N=a;alpha=b;smooth=c}N=N?+N:1e3;alpha=alpha||.05;bs=gen.random.bootstrap(X,smooth);for(i=0,means=Array(N);i<N;++i){means[i]=stats.mean(bs.samples(X.length))}means.sort(util.numcmp);return[stats.quantile(means,alpha/2),stats.quantile(means,1-alpha/2)]};stats.z={};stats.z.ci=function(values,a,b){var X=values,alpha=a;if(util.isFunction(a)||util.isString(a)){X=values.map(util.$(a));alpha=b}alpha=alpha||.05;var z=alpha===.05?1.96:gen.random.normal(0,1).icdf(1-alpha/2),mu=stats.mean(X),SE=stats.stdev(X)/Math.sqrt(stats.count.valid(X));return[mu-z*SE,mu+z*SE]};stats.z.test=function(values,a,b,opt){if(util.isFunction(b)||util.isString(b)){return(opt&&opt.paired?ztestP:ztest2)(opt,values,a,b)}else if(util.isArray(a)){return(b&&b.paired?ztestP:ztest2)(b,values,a)}else if(util.isFunction(a)||util.isString(a)){return ztest1(b,values,a)}else{return ztest1(a,values)}};function ztest1(opt,X,f){var nullH=opt&&opt.nullh||0,gaussian=gen.random.normal(0,1),mu=stats.mean(X,f),SE=stats.stdev(X,f)/Math.sqrt(stats.count.valid(X,f));if(SE===0){return mu-nullH===0?1:0}var z=(mu-nullH)/SE;return 2*gaussian.cdf(-Math.abs(z))}function ztestP(opt,values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,n1=stats.count(X),n2=stats.count(Y),diffs=Array(),i;if(n1!==n2){throw Error("Array lengths must match.")}for(i=0;i<n1;++i){if(util.isValid(X[i])&&util.isValid(Y[i])){diffs.push(X[i]-Y[i])}}return stats.z.test(diffs,opt&&opt.nullh||0)}function ztest2(opt,values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,n1=stats.count.valid(X),n2=stats.count.valid(Y),gaussian=gen.random.normal(0,1),meanDiff=stats.mean(X)-stats.mean(Y)-(opt&&opt.nullh||0),SE=Math.sqrt(stats.variance(X)/n1+stats.variance(Y)/n2);if(SE===0){return meanDiff===0?1:0}var z=meanDiff/SE;return 2*gaussian.cdf(-Math.abs(z))}stats.dist.mat=function(X){var n=X.length,m=n*n,A=Array(m),R=gen.zeros(n),M=0,v,i,j;for(i=0;i<n;++i){A[i*n+i]=0;for(j=i+1;j<n;++j){A[i*n+j]=v=Math.abs(X[i]-X[j]);A[j*n+i]=v;R[i]+=v;R[j]+=v}}for(i=0;i<n;++i){M+=R[i];R[i]/=n}M/=m;for(i=0;i<n;++i){for(j=i;j<n;++j){A[i*n+j]+=M-R[i]-R[j];A[j*n+i]=A[i*n+j]}}return A};stats.entropy=function(counts,f){f=util.$(f);var i,p,s=0,H=0,n=counts.length;for(i=0;i<n;++i){s+=f?f(counts[i]):counts[i]}if(s===0)return 0;for(i=0;i<n;++i){p=(f?f(counts[i]):counts[i])/s;if(p)H+=p*Math.log(p)}return-H/Math.LN2};stats.mutual=function(values,a,b,counts){var x=counts?values.map(util.$(a)):values,y=counts?values.map(util.$(b)):a,z=counts?values.map(util.$(counts)):b;var px={},py={},n=z.length,s=0,I=0,H=0,p,t,i;for(i=0;i<n;++i){px[x[i]]=0;py[y[i]]=0}for(i=0;i<n;++i){px[x[i]]+=z[i];py[y[i]]+=z[i];s+=z[i]}t=1/(s*Math.LN2);for(i=0;i<n;++i){if(z[i]===0)continue;p=s*z[i]/(px[x[i]]*py[y[i]]);I+=z[i]*t*Math.log(p);H+=z[i]*t*Math.log(z[i]/s)}return[I,1+I/H]};stats.mutual.info=function(values,a,b,counts){return stats.mutual(values,a,b,counts)[0]};stats.mutual.dist=function(values,a,b,counts){return stats.mutual(values,a,b,counts)[1]};stats.profile=function(values,f){var mean=0,valid=0,missing=0,distinct=0,min=null,max=null,M2=0,vals=[],u={},delta,sd,i,v,x;for(i=0;i<values.length;++i){v=f?f(values[i]):values[i];u[v]=v in u?u[v]+1:(distinct+=1,1);if(v==null){++missing}else if(util.isValid(v)){x=typeof v==="string"?v.length:v;if(min===null||x<min)min=x;if(max===null||x>max)max=x;delta=x-mean;mean=mean+delta/++valid;M2=M2+delta*(x-mean);vals.push(x)}}M2=M2/(valid-1);sd=Math.sqrt(M2);vals.sort(util.cmp);return{type:type(values,f),unique:u,count:values.length,valid:valid,missing:missing,distinct:distinct,min:min,max:max,mean:mean,stdev:sd,median:v=stats.quantile(vals,.5),q1:stats.quantile(vals,.25),q3:stats.quantile(vals,.75),modeskew:sd===0?0:(mean-v)/sd}};stats.summary=function(data,fields){fields=fields||util.keys(data[0]);var s=fields.map(function(f){var p=stats.profile(data,util.$(f));return p.field=f,p});return s.__summary__=true,s}},{"./generate":19,"./import/type":28,"./util":33}],31:[function(require,module,exports){var util=require("./util"),format=require("./format");var context={formats:[],format_map:{},truncate:util.truncate,pad:util.pad,day:format.day,month:format.month,quarter:format.quarter,utcQuarter:format.utcQuarter};function template(text){var src=source(text,"d");src="var __t; return "+src+";";return new Function("d",src).bind(context)}template.source=source;template.context=context;template.format=get_format;module.exports=template;template.clearFormatCache=function(){context.formats=[];context.format_map={}};template.property=function(object,property){var src=util.field(property).map(util.str).join("][");return object+"["+src+"]"};function source(text,variable,properties){variable=variable||"obj";var index=0;var src="'";var regex=template_re;text.replace(regex,function(match,interpolate,offset){src+=text.slice(index,offset).replace(template_escaper,template_escapeChar);index=offset+match.length;if(interpolate){src+="'\n+((__t=("+template_var(interpolate,variable,properties)+"))==null?'':__t)+\n'"}return match});return src+"'"}function template_var(text,variable,properties){var filters=text.match(filter_re);var prop=filters.shift().trim();var stringCast=true;function strcall(fn){fn=fn||"";if(stringCast){stringCast=false;src="String("+src+")"+fn}else{src+=fn}return src}function date(){return"(typeof "+src+'==="number"?new Date('+src+"):"+src+")"}function formatter(type){var pattern=args[0];if(pattern[0]==="'"&&pattern[pattern.length-1]==="'"||pattern[0]==='"'&&pattern[pattern.length-1]==='"'){pattern=pattern.slice(1,-1)}else{throw Error("Format pattern must be quoted: "+pattern)}a=template_format(pattern,type);stringCast=false;var arg=type==="number"?src:date();src="this.formats["+a+"]("+arg+")"}if(properties)properties[prop]=1;var src=template.property(variable,prop);for(var i=0;i<filters.length;++i){var f=filters[i],args=null,pidx,a,b;if((pidx=f.indexOf(":"))>0){f=f.slice(0,pidx);args=filters[i].slice(pidx+1).match(args_re).map(function(s){return s.trim()})}f=f.trim();switch(f){case"length":strcall(".length");break;case"lower":strcall(".toLowerCase()");break;case"upper":strcall(".toUpperCase()");break;case"lower-locale":strcall(".toLocaleLowerCase()");break;case"upper-locale":strcall(".toLocaleUpperCase()");break;case"trim":strcall(".trim()");break;case"left":a=util.number(args[0]);strcall(".slice(0,"+a+")");break;case"right":a=util.number(args[0]);strcall(".slice(-"+a+")");break;case"mid":a=util.number(args[0]);b=a+util.number(args[1]);strcall(".slice(+"+a+","+b+")");break;case"slice":a=util.number(args[0]);strcall(".slice("+a+(args.length>1?","+util.number(args[1]):"")+")");break;case"truncate":a=util.number(args[0]);b=args[1];b=b!=="left"&&b!=="middle"&&b!=="center"?"right":b;src="this.truncate("+strcall()+","+a+",'"+b+"')";break;case"pad":a=util.number(args[0]);b=args[1];b=b!=="left"&&b!=="middle"&&b!=="center"?"right":b;src="this.pad("+strcall()+","+a+",'"+b+"')";break;case"number":formatter("number");break;case"time":formatter("time");break;case"time-utc":formatter("utc");break;case"month":src="this.month("+src+")";break;case"month-abbrev":src="this.month("+src+",true)";break;case"day":src="this.day("+src+")";break;case"day-abbrev":src="this.day("+src+",true)";break;case"quarter":src="this.quarter("+src+")";break;case"quarter-utc":src="this.utcQuarter("+src+")";break;default:throw Error("Unrecognized template filter: "+f)}}return src}var template_re=/\{\{(.+?)\}\}|$/g,filter_re=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,args_re=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g;var template_escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var template_escaper=/\\|'|\r|\n|\u2028|\u2029/g;function template_escapeChar(match){return"\\"+template_escapes[match]}function template_format(pattern,type){var key=type+":"+pattern;if(context.format_map[key]==null){var f=format[type](pattern);var i=context.formats.length;context.formats.push(f);context.format_map[key]=i;return i}return context.format_map[key]}function get_format(pattern,type){return context.formats[template_format(pattern,type)]}},{"./format":18,"./util":33}],32:[function(require,module,exports){var d3_time=require("d3-time");var tempDate=new Date,baseDate=new Date(0,0,1).setFullYear(0),utcBaseDate=new Date(Date.UTC(0,0,1)).setUTCFullYear(0);function date(d){return tempDate.setTime(+d),tempDate}function entry(type,date,unit,step,min,max){var e={type:type,date:date,unit:unit};if(step){e.step=step}else{e.minstep=1}if(min!=null)e.min=min;if(max!=null)e.max=max;return e}function create(type,unit,base,step,min,max){return entry(type,function(d){return unit.offset(base,d)},function(d){return unit.count(base,d)},step,min,max)}var locale=[create("second",d3_time.second,baseDate),create("minute",d3_time.minute,baseDate),create("hour",d3_time.hour,baseDate),create("day",d3_time.day,baseDate,[1,7]),create("month",d3_time.month,baseDate,[1,3,6]),create("year",d3_time.year,baseDate),entry("seconds",function(d){return new Date(1970,0,1,0,0,d)},function(d){return date(d).getSeconds()},null,0,59),entry("minutes",function(d){return new Date(1970,0,1,0,d)},function(d){return date(d).getMinutes()},null,0,59),entry("hours",function(d){return new Date(1970,0,1,d)},function(d){return date(d).getHours()},null,0,23),entry("weekdays",function(d){return new Date(1970,0,4+d)},function(d){return date(d).getDay()},[1],0,6),entry("dates",function(d){return new Date(1970,0,d)},function(d){return date(d).getDate()},[1],1,31),entry("months",function(d){return new Date(1970,d%12,1)},function(d){return date(d).getMonth()},[1],0,11)];var utc=[create("second",d3_time.utcSecond,utcBaseDate),create("minute",d3_time.utcMinute,utcBaseDate),create("hour",d3_time.utcHour,utcBaseDate),create("day",d3_time.utcDay,utcBaseDate,[1,7]),create("month",d3_time.utcMonth,utcBaseDate,[1,3,6]),create("year",d3_time.utcYear,utcBaseDate),entry("seconds",function(d){return new Date(Date.UTC(1970,0,1,0,0,d))},function(d){return date(d).getUTCSeconds()},null,0,59),entry("minutes",function(d){return new Date(Date.UTC(1970,0,1,0,d))},function(d){return date(d).getUTCMinutes()},null,0,59),entry("hours",function(d){return new Date(Date.UTC(1970,0,1,d))},function(d){return date(d).getUTCHours()},null,0,23),entry("weekdays",function(d){return new Date(Date.UTC(1970,0,4+d))},function(d){return date(d).getUTCDay()},[1],0,6),entry("dates",function(d){return new Date(Date.UTC(1970,0,d))},function(d){return date(d).getUTCDate()},[1],1,31),entry("months",function(d){return new Date(Date.UTC(1970,d%12,1))},function(d){return date(d).getUTCMonth()},[1],0,11)];var STEPS=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];function find(units,span,minb,maxb){var step=STEPS[0],i,n,bins;for(i=1,n=STEPS.length;i<n;++i){step=STEPS[i];if(span>step[0]){bins=span/step[0];if(bins>maxb){return units[STEPS[i-1][1]]}if(bins>=minb){return units[step[1]]}}}return units[STEPS[n-1][1]]}function toUnitMap(units){var map={},i,n;for(i=0,n=units.length;i<n;++i){map[units[i].type]=units[i]}map.find=function(span,minb,maxb){return find(units,span,minb,maxb)};return map}module.exports=toUnitMap(locale);module.exports.utc=toUnitMap(utc)},{"d3-time":7}],33:[function(require,module,exports){(function(Buffer){var u=module.exports;var FNAME="__name__";u.namedfunc=function(name,f){return f[FNAME]=name,f};u.name=function(f){return f==null?null:f[FNAME]};u.identity=function(x){return x};u.true=u.namedfunc("true",function(){return true});u.false=u.namedfunc("false",function(){return false});u.duplicate=function(obj){return JSON.parse(JSON.stringify(obj))};u.equal=function(a,b){return JSON.stringify(a)===JSON.stringify(b)};u.extend=function(obj){for(var x,name,i=1,len=arguments.length;i<len;++i){x=arguments[i];for(name in x){obj[name]=x[name]}}return obj};u.length=function(x){return x!=null&&x.length!=null?x.length:null};u.keys=function(x){var keys=[],k;for(k in x)keys.push(k);return keys};u.vals=function(x){var vals=[],k;for(k in x)vals.push(x[k]);return vals};u.toMap=function(list,f){return(f=u.$(f))?list.reduce(function(obj,x){return obj[f(x)]=1,obj},{}):list.reduce(function(obj,x){return obj[x]=1,obj},{})};u.keystr=function(values){var n=values.length;if(!n)return"";for(var s=String(values[0]),i=1;i<n;++i){s+="|"+String(values[i])}return s};var toString=Object.prototype.toString;u.isObject=function(obj){return obj===Object(obj)};u.isFunction=function(obj){return toString.call(obj)==="[object Function]"};u.isString=function(obj){return typeof value==="string"||toString.call(obj)==="[object String]"};u.isArray=Array.isArray||function(obj){return toString.call(obj)==="[object Array]"};u.isNumber=function(obj){return typeof obj==="number"||toString.call(obj)==="[object Number]"};u.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};u.isDate=function(obj){return toString.call(obj)==="[object Date]"};u.isValid=function(obj){return obj!=null&&obj===obj};u.isBuffer=typeof Buffer==="function"&&Buffer.isBuffer||u.false;u.number=function(s){return s==null||s===""?null:+s};u.boolean=function(s){return s==null||s===""?null:s==="false"?false:!!s};u.date=function(s,format){var d=format?format:Date;return s==null||s===""?null:d.parse(s)};u.array=function(x){return x!=null?u.isArray(x)?x:[x]:[]};u.str=function(x){return u.isArray(x)?"["+x.map(u.str)+"]":u.isObject(x)||u.isString(x)?JSON.stringify(x).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):x};var field_re=/\[(.*?)\]|[^.\[]+/g;u.field=function(f){return String(f).match(field_re).map(function(d){return d[0]!=="["?d:d[1]!=="'"&&d[1]!=='"'?d.slice(1,-1):d.slice(2,-2).replace(/\\(["'])/g,"$1")})};u.accessor=function(f){return f==null||u.isFunction(f)?f:u.namedfunc(f,Function("x","return x["+u.field(f).map(u.str).join("][")+"];"))};u.$=u.accessor;u.mutator=function(f){var s;return u.isString(f)&&(s=u.field(f)).length>1?function(x,v){for(var i=0;i<s.length-1;++i)x=x[s[i]];x[s[i]]=v}:function(x,v){x[f]=v}};u.$func=function(name,op){return function(f){f=u.$(f)||u.identity;var n=name+(u.name(f)?"_"+u.name(f):"");return u.namedfunc(n,function(d){return op(f(d))})}};u.$valid=u.$func("valid",u.isValid);u.$length=u.$func("length",u.length);u.$in=function(f,values){f=u.$(f);var map=u.isArray(values)?u.toMap(values):values;return function(d){return!!map[f(d)]}};u.comparator=function(sort){var sign=[];if(sort===undefined)sort=[];sort=u.array(sort).map(function(f){var s=1;if(f[0]==="-"){s=-1;f=f.slice(1)}else if(f[0]==="+"){s=+1;f=f.slice(1)}sign.push(s);return u.accessor(f)});return function(a,b){var i,n,f,c;for(i=0,n=sort.length;i<n;++i){f=sort[i];c=u.cmp(f(a),f(b));if(c)return c*sign[i]}return 0}};u.cmp=function(a,b){return(a<b||a==null)&&b!=null?-1:(a>b||b==null)&&a!=null?1:(b=b instanceof Date?+b:b,a=a instanceof Date?+a:a)!==a&&b===b?-1:b!==b&&a===a?1:0};u.numcmp=function(a,b){return a-b};u.stablesort=function(array,sortBy,keyFn){var indices=array.reduce(function(idx,v,i){return idx[keyFn(v)]=i,idx},{});array.sort(function(a,b){var sa=sortBy(a),sb=sortBy(b);return sa<sb?-1:sa>sb?1:indices[keyFn(a)]-indices[keyFn(b)]});return array};u.permute=function(a){var m=a.length,swap,i;while(m){i=Math.floor(Math.random()*m--);swap=a[m];a[m]=a[i];a[i]=swap}};u.pad=function(s,length,pos,padchar){padchar=padchar||" ";var d=length-s.length;if(d<=0)return s;switch(pos){case"left":return strrep(d,padchar)+s;case"middle":case"center":return strrep(Math.floor(d/2),padchar)+s+strrep(Math.ceil(d/2),padchar);default:return s+strrep(d,padchar)}};function strrep(n,str){var s="",i;for(i=0;i<n;++i)s+=str;return s}u.truncate=function(s,length,pos,word,ellipsis){var len=s.length;if(len<=length)return s;ellipsis=ellipsis!==undefined?String(ellipsis):"\u2026";var l=Math.max(0,length-ellipsis.length);switch(pos){case"left":return ellipsis+(word?truncateOnWord(s,l,1):s.slice(len-l));case"middle":case"center":var l1=Math.ceil(l/2),l2=Math.floor(l/2);return(word?truncateOnWord(s,l1):s.slice(0,l1))+ellipsis+(word?truncateOnWord(s,l2,1):s.slice(len-l2));default:return(word?truncateOnWord(s,l):s.slice(0,l))+ellipsis}};function truncateOnWord(s,len,rev){var cnt=0,tok=s.split(truncate_word_re);if(rev){s=(tok=tok.reverse()).filter(function(w){cnt+=w.length;return cnt<=len}).reverse()}else{s=tok.filter(function(w){cnt+=w.length;return cnt<=len})}return s.length?s.join("").trim():tok[0].slice(0,len)}var truncate_word_re=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,require("buffer").Buffer)},{buffer:406}],34:[function(require,module,exports){(function(process){"use strict";var emptyFunction=require("./emptyFunction");var EventListener={listen:function listen(target,eventType,callback){if(target.addEventListener){target.addEventListener(eventType,callback,false);return{remove:function remove(){target.removeEventListener(eventType,callback,false)}}}else if(target.attachEvent){target.attachEvent("on"+eventType,callback);return{remove:function remove(){target.detachEvent("on"+eventType,callback)}}}},capture:function capture(target,eventType,callback){if(target.addEventListener){target.addEventListener(eventType,callback,true);return{remove:function remove(){target.removeEventListener(eventType,callback,true)}}}else{if(process.env.NODE_ENV!=="production"){console.error("Attempted to listen to events during the capture phase on a "+"browser that does not support the capture phase. Your application "+"will not receive some events.")}return{remove:emptyFunction}}},registerDefault:function registerDefault(){}};module.exports=EventListener}).call(this,require("_process"))},{"./emptyFunction":41,_process:407}],35:[function(require,module,exports){"use strict";var canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:typeof Worker!=="undefined",canUseEventListeners:canUseDOM&&!!(window.addEventListener||window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment},{}],36:[function(require,module,exports){"use strict";var _hyphenPattern=/-(.)/g;function camelize(string){return string.replace(_hyphenPattern,function(_,character){return character.toUpperCase()})}module.exports=camelize},{}],37:[function(require,module,exports){"use strict";var camelize=require("./camelize");var msPattern=/^-ms-/;function camelizeStyleName(string){return camelize(string.replace(msPattern,"ms-"))}module.exports=camelizeStyleName},{"./camelize":36}],38:[function(require,module,exports){"use strict";var isTextNode=require("./isTextNode");function containsNode(outerNode,innerNode){if(!outerNode||!innerNode){return false}else if(outerNode===innerNode){return true}else if(isTextNode(outerNode)){return false}else if(isTextNode(innerNode)){return containsNode(outerNode,innerNode.parentNode)}else if("contains"in outerNode){return outerNode.contains(innerNode)}else if(outerNode.compareDocumentPosition){return!!(outerNode.compareDocumentPosition(innerNode)&16)}else{return false}}module.exports=containsNode},{"./isTextNode":51}],39:[function(require,module,exports){(function(process){"use strict";var invariant=require("./invariant");function toArray(obj){var length=obj.length;!(!Array.isArray(obj)&&(typeof obj==="object"||typeof obj==="function"))?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Array-like object expected"):invariant(false):void 0;!(typeof length==="number")?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object needs a length property"):invariant(false):void 0;!(length===0||length-1 in obj)?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object should have keys for indices"):invariant(false):void 0;!(typeof obj.callee!=="function")?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object can't be `arguments`. Use rest params "+"(function(...args) {}) or Array.from() instead."):invariant(false):void 0;if(obj.hasOwnProperty){try{return Array.prototype.slice.call(obj)}catch(e){}}var ret=Array(length);for(var ii=0;ii<length;ii++){ret[ii]=obj[ii]}return ret}function hasArrayNature(obj){return!!obj&&(typeof obj=="object"||typeof obj=="function")&&"length"in obj&&!("setInterval"in obj)&&typeof obj.nodeType!="number"&&(Array.isArray(obj)||"callee"in obj||"item"in obj)}function createArrayFromMixed(obj){if(!hasArrayNature(obj)){return[obj]}else if(Array.isArray(obj)){return obj.slice()}else{return toArray(obj)}}module.exports=createArrayFromMixed}).call(this,require("_process"))},{"./invariant":49,_process:407}],40:[function(require,module,exports){(function(process){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var createArrayFromMixed=require("./createArrayFromMixed");var getMarkupWrap=require("./getMarkupWrap");var invariant=require("./invariant");var dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null;var nodeNamePattern=/^\s*<(\w+)/;function getNodeName(markup){var nodeNameMatch=markup.match(nodeNamePattern);return nodeNameMatch&&nodeNameMatch[1].toLowerCase()}function createNodesFromMarkup(markup,handleScript){var node=dummyNode;!!!dummyNode?process.env.NODE_ENV!=="production"?invariant(false,"createNodesFromMarkup dummy not initialized"):invariant(false):void 0;var nodeName=getNodeName(markup);var wrap=nodeName&&getMarkupWrap(nodeName);if(wrap){node.innerHTML=wrap[1]+markup+wrap[2];var wrapDepth=wrap[0];while(wrapDepth--){node=node.lastChild}}else{node.innerHTML=markup}var scripts=node.getElementsByTagName("script");if(scripts.length){!handleScript?process.env.NODE_ENV!=="production"?invariant(false,"createNodesFromMarkup(...): Unexpected <script> element rendered."):invariant(false):void 0;createArrayFromMixed(scripts).forEach(handleScript)}var nodes=Array.from(node.childNodes);while(node.lastChild){node.removeChild(node.lastChild)}return nodes}module.exports=createNodesFromMarkup}).call(this,require("_process"))},{"./ExecutionEnvironment":35,"./createArrayFromMixed":39,"./getMarkupWrap":45,"./invariant":49,_process:407}],41:[function(require,module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function emptyFunction(){};emptyFunction.thatReturns=makeEmptyFunction;emptyFunction.thatReturnsFalse=makeEmptyFunction(false);emptyFunction.thatReturnsTrue=makeEmptyFunction(true);emptyFunction.thatReturnsNull=makeEmptyFunction(null);emptyFunction.thatReturnsThis=function(){return this};emptyFunction.thatReturnsArgument=function(arg){return arg};module.exports=emptyFunction},{}],42:[function(require,module,exports){(function(process){"use strict";var emptyObject={};if(process.env.NODE_ENV!=="production"){Object.freeze(emptyObject)}module.exports=emptyObject}).call(this,require("_process"))},{_process:407}],43:[function(require,module,exports){"use strict";function focusNode(node){try{node.focus()}catch(e){}}module.exports=focusNode},{}],44:[function(require,module,exports){"use strict";function getActiveElement(doc){doc=doc||(typeof document!=="undefined"?document:undefined);if(typeof doc==="undefined"){return null}try{return doc.activeElement||doc.body}catch(e){return doc.body}}module.exports=getActiveElement},{}],45:[function(require,module,exports){(function(process){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var invariant=require("./invariant");var dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null;var shouldWrap={};var selectWrap=[1,'<select multiple="true">',"</select>"];var tableWrap=[1,"<table>","</table>"];var trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"];var svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"];var markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap};var svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(nodeName){markupWrap[nodeName]=svgWrap;shouldWrap[nodeName]=true});function getMarkupWrap(nodeName){!!!dummyNode?process.env.NODE_ENV!=="production"?invariant(false,"Markup wrapping node not initialized"):invariant(false):void 0;if(!markupWrap.hasOwnProperty(nodeName)){nodeName="*"}if(!shouldWrap.hasOwnProperty(nodeName)){if(nodeName==="*"){dummyNode.innerHTML="<link />"}else{dummyNode.innerHTML="<"+nodeName+"></"+nodeName+">"}shouldWrap[nodeName]=!dummyNode.firstChild}return shouldWrap[nodeName]?markupWrap[nodeName]:null}module.exports=getMarkupWrap}).call(this,require("_process"))},{"./ExecutionEnvironment":35,"./invariant":49,_process:407}],46:[function(require,module,exports){"use strict";function getUnboundedScrollPosition(scrollable){if(scrollable.Window&&scrollable instanceof scrollable.Window){return{x:scrollable.pageXOffset||scrollable.document.documentElement.scrollLeft,y:scrollable.pageYOffset||scrollable.document.documentElement.scrollTop}}return{x:scrollable.scrollLeft,y:scrollable.scrollTop}}module.exports=getUnboundedScrollPosition},{}],47:[function(require,module,exports){"use strict";var _uppercasePattern=/([A-Z])/g;function hyphenate(string){return string.replace(_uppercasePattern,"-$1").toLowerCase()}module.exports=hyphenate},{}],48:[function(require,module,exports){"use strict";var hyphenate=require("./hyphenate");var msPattern=/^ms-/;function hyphenateStyleName(string){return hyphenate(string).replace(msPattern,"-ms-")}module.exports=hyphenateStyleName},{"./hyphenate":47}],49:[function(require,module,exports){(function(process){"use strict";var validateFormat=function validateFormat(format){};if(process.env.NODE_ENV!=="production"){validateFormat=function validateFormat(format){if(format===undefined){throw new Error("invariant requires an error message argument")}}}function invariant(condition,format,a,b,c,d,e,f){validateFormat(format);if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}));error.name="Invariant Violation"}error.framesToPop=1;throw error}}module.exports=invariant}).call(this,require("_process"))},{_process:407}],50:[function(require,module,exports){"use strict";function isNode(object){var doc=object?object.ownerDocument||object:document;var defaultView=doc.defaultView||window;return!!(object&&(typeof defaultView.Node==="function"?object instanceof defaultView.Node:typeof object==="object"&&typeof object.nodeType==="number"&&typeof object.nodeName==="string"))}module.exports=isNode},{}],51:[function(require,module,exports){"use strict";var isNode=require("./isNode");function isTextNode(object){return isNode(object)&&object.nodeType==3}module.exports=isTextNode},{"./isNode":50}],52:[function(require,module,exports){"use strict";function memoizeStringOnly(callback){var cache={};return function(string){if(!cache.hasOwnProperty(string)){cache[string]=callback.call(this,string)}return cache[string]}}module.exports=memoizeStringOnly},{}],53:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var performance;if(ExecutionEnvironment.canUseDOM){performance=window.performance||window.msPerformance||window.webkitPerformance}module.exports=performance||{}},{"./ExecutionEnvironment":35}],54:[function(require,module,exports){"use strict";var performance=require("./performance");var performanceNow;if(performance.now){performanceNow=function performanceNow(){return performance.now()}}else{performanceNow=function performanceNow(){return Date.now()}}module.exports=performanceNow},{"./performance":53}],55:[function(require,module,exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;function is(x,y){if(x===y){return x!==0||y!==0||1/x===1/y}else{return x!==x&&y!==y}}function shallowEqual(objA,objB){if(is(objA,objB)){return true}if(typeof objA!=="object"||objA===null||typeof objB!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length){return false}for(var i=0;i<keysA.length;i++){if(!hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]])){return false}}return true}module.exports=shallowEqual},{}],56:[function(require,module,exports){(function(process){"use strict";var emptyFunction=require("./emptyFunction");var warning=emptyFunction;if(process.env.NODE_ENV!=="production"){var printWarning=function printWarning(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}};warning=function warning(condition,format){if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(format.indexOf("Failed Composite propType: ")===0){return}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}printWarning.apply(undefined,[format].concat(args))}}}module.exports=warning}).call(this,require("_process"))},{"./emptyFunction":41,_process:407}],57:[function(require,module,exports){module.exports=function(obj){return obj!=null&&(isBuffer(obj)||isSlowBuffer(obj)||!!obj._isBuffer)};function isBuffer(obj){return!!obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return typeof obj.readFloatLE==="function"&&typeof obj.slice==="function"&&isBuffer(obj.slice(0,0))}},{}],58:[function(require,module,exports){(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var document=window.document;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var version="2.2.4",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&realStringObj-parseFloat(realStringObj)+1>=0},isPlainObject:function(obj){var key;if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype||{},"isPrototypeOf")){return false}for(key in obj){}return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break}}}return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i}}return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,nidselect,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results}if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if(m=match[1]){if(nodeType===9){if(elem=context.getElementById(m)){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector}else if(context.nodeName.toLowerCase()!=="object"){if(nid=context.getAttribute("id")){nid=nid.replace(rescape,"\\$&")}else{context.setAttribute("id",nid=expando)}groups=tokenize(selector);i=groups.length;nidselect=ridentifier.test(nid)?"#"+nid:"[id='"+nid+"']";while(i--){groups[i]=nidselect+" "+toSelector(groups[i])}newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id")}}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode){div.parentNode.removeChild(div)}div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if((parent=document.defaultView)&&parent.top!==parent){if(parent.addEventListener){parent.addEventListener("unload",unloadHandler,false)}else if(parent.attachEvent){parent.attachEvent("onunload",unloadHandler)}}support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)}else if(support.qsa){return context.querySelectorAll(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(document.querySelectorAll)){assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(div.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!div.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}if(!div.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")}});assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1}if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}else if(aup===bup){return siblingCheck(a,b)}cur=a;while(cur=cur.parentNode){ap.unshift(cur)}cur=b;while(cur=cur.parentNode){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node)}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex}if(diff===false){while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff]}if(node===elem){break}}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return!Expr.pseudos["empty"](elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if((oldCache=uniqueCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{uniqueCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost){outermostContext=context===document||context||outermost}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML}while(matcher=elementMatchers[j++]){if(matcher(elem,context||document,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else if(compiled){context=context.parentNode}selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(div){return div.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this}root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||root).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnotwhite=/\S+/g;function createOptions(options){var object={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false}}}if(!options.memory){memory=false}firing=false;if(locked){if(memory){list=[]}else{list=""}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory)}(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&jQuery.type(arg)!=="string"){add(arg)}})})(arguments);if(memory&&!firing){fire()}}return this},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){if(list){list=[]}return this},disable:function(){locked=queue=[];list=memory="";return this},disabled:function(){return!list},lock:function(){locked=queue=[];if(!memory){list=memory=""}return this},locked:function(){return!!locked},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire()}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject)}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().progress(updateFunc(i,progressContexts,progressValues)).done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject)}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready")}}});function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll){window.setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed)}}return readyList.promise(obj)};jQuery.ready.promise();var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1;Data.prototype={register:function(owner,initial){var value=initial||{};if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,writable:true,configurable:true})}return owner[this.expando]},cache:function(owner){if(!acceptData(owner)){return{}}var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true})}}}return value},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[data]=value}else{for(prop in data){cache[prop]=data[prop]}}return cache},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][key]},access:function(owner,key,value){var stored;if(key===undefined||key&&typeof key==="string"&&value===undefined){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,name,camel,cache=owner[this.expando];if(cache===undefined){return}if(key===undefined){this.register(owner)}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel]}else{name=camel;name=name in cache?[name]:name.match(rnotwhite)||[]}}i=name.length;while(i--){delete cache[name[i]]}}if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined}else{delete owner[this.expando]}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache)}};var dataPriv=new Data;var dataUser=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}dataUser.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function(elem,name,data){return dataUser.access(elem,name,data)},removeData:function(elem,name){dataUser.remove(elem,name)},_data:function(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function(elem,name){dataPriv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}dataPriv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){dataUser.set(this,key)})}return access(this,function(value){var data,camelKey;if(elem&&value===undefined){data=dataUser.get(elem,key)||dataUser.get(elem,key.replace(rmultiDash,"-$&").toLowerCase());if(data!==undefined){return data}camelKey=jQuery.camelCase(key);data=dataUser.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}camelKey=jQuery.camelCase(key);this.each(function(){var data=dataUser.get(this,camelKey);dataUser.set(this,camelKey,value);if(key.indexOf("-")>-1&&data!==undefined){dataUser.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){dataUser.remove(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit/scale;jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&scale!==1&&--maxIterations)}if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted}}return adjusted}var rcheckableType=/^(?:checkbox|radio)$/i;var rtagName=/<([\w:-]+)/;var rscriptType=/^$|\/(?:java|ecma)script/i;var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!=="undefined"?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"))}}var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem)}continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment}(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){on(elem,type,selector,data,types[type],one)}return elem}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return elem}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events")}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(event.type!=="click"||isNaN(event.button)||event.button<1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})}return handlerQueue},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:("button buttons clientX clientY offsetX offsetY pageX pageY "+"screenX screenY toElement").split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=document}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur)}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return collection.each(function(index){var self=collection.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}domManip(self,args,callback,ignored)})}if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(collection[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return collection}function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node))}if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"))}node.parentNode.removeChild(node)}}return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}elem[dataPriv.expando]=undefined}if(elem[dataUser.expando]){elem[dataUser.expando]=undefined}}}}});jQuery.fn.extend({domManip:domManip,detach:function(selector){return remove(this,selector,true)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this)}}},ignored)}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={HTML:"block",BODY:"block"};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window}return view.getComputedStyle(elem)};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var documentElement=document.documentElement;(function(){var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";container.appendChild(div);function computeStyleTests(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";div.innerHTML="";documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=divStyle.marginLeft==="2px";boxSizingReliableVal=divStyle.width==="4px";div.style.marginRight="50%";pixelMarginRightVal=divStyle.marginRight==="4px";documentElement.removeChild(container)}jQuery.extend(support,{pixelPosition:function(){computeStyleTests();return pixelPositionVal},boxSizingReliable:function(){if(boxSizingReliableVal==null){computeStyleTests()}return boxSizingReliableVal},pixelMarginRight:function(){if(boxSizingReliableVal==null){computeStyleTests()}return pixelMarginRightVal},reliableMarginLeft:function(){if(boxSizingReliableVal==null){computeStyleTests()}return reliableMarginLeftVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+"display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";documentElement.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv).marginRight);documentElement.removeChild(container);div.removeChild(marginDiv);return ret}})})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed.getPropertyValue(name)||computed[name]:undefined;if((ret===""||ret===undefined)&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(computed){if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name}var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name}}}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=dataPriv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=dataPriv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){dataPriv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number"}if(value==null||value!==value){return}if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles);if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[name]=value;value=jQuery.css(elem,name)}return setPositiveNumber(elem,value,subtract)}}});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}))+"px"}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function createFxNow(){window.setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?dataPriv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block"}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else{display=undefined}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=dataPriv.access(elem,"fxshow",{})}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}else if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)}return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.match(rnotwhite)}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback)}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback)}else{Animation.prefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){window.clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:undefined)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return}if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}elem.setAttribute(name,value+"");return value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false}elem.removeAttribute(name)}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}return elem[name]=value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}return elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))})}if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ")}}finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)})}return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnotwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className)}if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"")}}})},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while(elem=this[i++]){if(elem.nodeType===1&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1){return true}}return false}});var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ")}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem)}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});support.focusin="onfocusin"in window;if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}dataPriv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix)}else{dataPriv.access(doc,fix,attaches)}}}})}var location=window.location;var nonce=jQuery.now();var rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")};jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null}try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s.throws){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]}}else{jqXHR.always(map[jqXHR.status])}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||location.href)+"").replace(rhash,"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host}catch(e){s.crossDomain=true}}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(state===2){return jqXHR}if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){window.clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,throws:true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});jQuery.expr.filters.hidden=function(elem){return!jQuery.expr.filters.visible(elem)};jQuery.expr.filters.visible=function(elem){return elem.offsetWidth>0||elem.offsetHeight>0||elem.getClientRects().length>0};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort()}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error")}else{complete(xhr.status,xhr.statusText)}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders())}}}};xhr.onload=callback();errorCallback=xhr.onerror=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback()}})}}}callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback){throw e}}},abort:function(){if(callback){callback()}}}}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName)}else{window[callbackName]=overwritten}if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=jQuery.trim(url.slice(off));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset))}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}box=elem.getBoundingClientRect();win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||documentElement})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset)}else{elem[method]=val}},method,val,arguments.length)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)},size:function(){return this.length}});jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(!noGlobal){window.jQuery=window.$=jQuery}return jQuery})},{}],59:[function(require,module,exports){exports.parse=require("./lib/parse");exports.stringify=require("./lib/stringify")},{"./lib/parse":60,"./lib/stringify":61}],60:[function(require,module,exports){var at,ch,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},text,error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'")}ch=text.charAt(at);at+=1;return ch},number=function(){var number,string="";if(ch==="-"){string="-";next("-")}while(ch>="0"&&ch<="9"){string+=ch;next()}if(ch==="."){string+=".";while(next()&&ch>="0"&&ch<="9"){string+=ch}}if(ch==="e"||ch==="E"){string+=ch;next();if(ch==="-"||ch==="+"){string+=ch;next()}while(ch>="0"&&ch<="9"){string+=ch;next()}}number=+string;if(!isFinite(number)){error("Bad number")}else{return number}},string=function(){var hex,i,string="",uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string}else if(ch==="\\"){next();if(ch==="u"){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break}uffff=uffff*16+hex}string+=String.fromCharCode(uffff)}else if(typeof escapee[ch]==="string"){string+=escapee[ch]}else{break}}else{string+=ch}}}error("Bad string")},white=function(){while(ch&&ch<=" "){next()}},word=function(){switch(ch){case"t":next("t");next("r");next("u");next("e");return true;case"f":next("f");next("a");next("l");next("s");next("e");return false;case"n":next("n");next("u");next("l");next("l");return null}error("Unexpected '"+ch+"'")},value,array=function(){var array=[];if(ch==="["){next("[");white();if(ch==="]"){next("]");return array}while(ch){array.push(value());white();if(ch==="]"){next("]");return array}next(",");white()}}error("Bad array")},object=function(){var key,object={};if(ch==="{"){next("{");white();if(ch==="}"){next("}");return object}while(ch){key=string();white();next(":");if(Object.hasOwnProperty.call(object,key)){error('Duplicate key "'+key+'"')}object[key]=value();white();if(ch==="}"){next("}");return object}next(",");white()}}error("Bad object")};value=function(){white();switch(ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&ch<="9"?number():word()}};module.exports=function(source,reviver){var result;text=source;at=0;ch=" ";result=value();white();if(ch){error("Syntax error")}return typeof reviver==="function"?function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}({"":result},""):result}},{}],61:[function(require,module,exports){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}module.exports=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}},{}],62:[function(require,module,exports){(function(){var crypt=require("crypt"),utf8=require("charenc").utf8,isBuffer=require("is-buffer"),bin=require("charenc").bin,md5=function(message,options){if(message.constructor==String)if(options&&options.encoding==="binary")message=bin.stringToBytes(message);else message=utf8.stringToBytes(message);else if(isBuffer(message))message=Array.prototype.slice.call(message,0);else if(!Array.isArray(message))message=message.toString();var m=crypt.bytesToWords(message),l=message.length*8,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(var i=0;i<m.length;i++){m[i]=(m[i]<<8|m[i]>>>24)&16711935|(m[i]<<24|m[i]>>>8)&4278255360}m[l>>>5]|=128<<l%32;m[(l+64>>>9<<4)+14]=l;var FF=md5._ff,GG=md5._gg,HH=md5._hh,II=md5._ii;for(var i=0;i<m.length;i+=16){var aa=a,bb=b,cc=c,dd=d;a=FF(a,b,c,d,m[i+0],7,-680876936);d=FF(d,a,b,c,m[i+1],12,-389564586);c=FF(c,d,a,b,m[i+2],17,606105819);b=FF(b,c,d,a,m[i+3],22,-1044525330);a=FF(a,b,c,d,m[i+4],7,-176418897);d=FF(d,a,b,c,m[i+5],12,1200080426);c=FF(c,d,a,b,m[i+6],17,-1473231341);b=FF(b,c,d,a,m[i+7],22,-45705983);a=FF(a,b,c,d,m[i+8],7,1770035416);d=FF(d,a,b,c,m[i+9],12,-1958414417);c=FF(c,d,a,b,m[i+10],17,-42063);b=FF(b,c,d,a,m[i+11],22,-1990404162);a=FF(a,b,c,d,m[i+12],7,1804603682);d=FF(d,a,b,c,m[i+13],12,-40341101);c=FF(c,d,a,b,m[i+14],17,-1502002290);b=FF(b,c,d,a,m[i+15],22,1236535329);a=GG(a,b,c,d,m[i+1],5,-165796510);d=GG(d,a,b,c,m[i+6],9,-1069501632);c=GG(c,d,a,b,m[i+11],14,643717713);b=GG(b,c,d,a,m[i+0],20,-373897302);a=GG(a,b,c,d,m[i+5],5,-701558691);d=GG(d,a,b,c,m[i+10],9,38016083);c=GG(c,d,a,b,m[i+15],14,-660478335);b=GG(b,c,d,a,m[i+4],20,-405537848);a=GG(a,b,c,d,m[i+9],5,568446438);d=GG(d,a,b,c,m[i+14],9,-1019803690);c=GG(c,d,a,b,m[i+3],14,-187363961);b=GG(b,c,d,a,m[i+8],20,1163531501);a=GG(a,b,c,d,m[i+13],5,-1444681467);d=GG(d,a,b,c,m[i+2],9,-51403784);c=GG(c,d,a,b,m[i+7],14,1735328473);b=GG(b,c,d,a,m[i+12],20,-1926607734);a=HH(a,b,c,d,m[i+5],4,-378558);d=HH(d,a,b,c,m[i+8],11,-2022574463);c=HH(c,d,a,b,m[i+11],16,1839030562);b=HH(b,c,d,a,m[i+14],23,-35309556);a=HH(a,b,c,d,m[i+1],4,-1530992060);d=HH(d,a,b,c,m[i+4],11,1272893353);c=HH(c,d,a,b,m[i+7],16,-155497632);b=HH(b,c,d,a,m[i+10],23,-1094730640);a=HH(a,b,c,d,m[i+13],4,681279174);d=HH(d,a,b,c,m[i+0],11,-358537222);c=HH(c,d,a,b,m[i+3],16,-722521979);b=HH(b,c,d,a,m[i+6],23,76029189);a=HH(a,b,c,d,m[i+9],4,-640364487);d=HH(d,a,b,c,m[i+12],11,-421815835);c=HH(c,d,a,b,m[i+15],16,530742520);b=HH(b,c,d,a,m[i+2],23,-995338651);a=II(a,b,c,d,m[i+0],6,-198630844);d=II(d,a,b,c,m[i+7],10,1126891415);c=II(c,d,a,b,m[i+14],15,-1416354905);b=II(b,c,d,a,m[i+5],21,-57434055);a=II(a,b,c,d,m[i+12],6,1700485571);d=II(d,a,b,c,m[i+3],10,-1894986606);c=II(c,d,a,b,m[i+10],15,-1051523);b=II(b,c,d,a,m[i+1],21,-2054922799);a=II(a,b,c,d,m[i+8],6,1873313359);d=II(d,a,b,c,m[i+15],10,-30611744);c=II(c,d,a,b,m[i+6],15,-1560198380);b=II(b,c,d,a,m[i+13],21,1309151649);a=II(a,b,c,d,m[i+4],6,-145523070);d=II(d,a,b,c,m[i+11],10,-1120210379);c=II(c,d,a,b,m[i+2],15,718787259);b=II(b,c,d,a,m[i+9],21,-343485551);a=a+aa>>>0;b=b+bb>>>0;c=c+cc>>>0;d=d+dd>>>0}return crypt.endian([a,b,c,d])};md5._ff=function(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._gg=function(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._hh=function(a,b,c,d,x,s,t){var n=a+(b^c^d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._ii=function(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._blocksize=16;md5._digestsize=16;module.exports=function(message,options){if(message===undefined||message===null)throw new Error("Illegal argument "+message);var digestbytes=crypt.wordsToBytes(md5(message,options));return options&&options.asBytes?digestbytes:options&&options.asString?bin.bytesToString(digestbytes):crypt.bytesToHex(digestbytes)}})()},{charenc:1,crypt:3,"is-buffer":57}],63:[function(require,module,exports){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String("abc");test1[5]="de";if(Object.getOwnPropertyNames(test1)[0]==="5"){return false}var test2={};for(var i=0;i<10;i++){test2["_"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789"){return false}var test3={};"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(err){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},{}],64:[function(require,module,exports){(function(process){"use strict";if(process.env.NODE_ENV!=="production"){var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var loggedTypeFailures={}}function checkPropTypes(typeSpecs,values,location,componentName,getStack){if(process.env.NODE_ENV!=="production"){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{invariant(typeof typeSpecs[typeSpecName]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"the `prop-types` package, but received `%s`.",componentName||"React class",location,typeSpecName,typeof typeSpecs[typeSpecName]);error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",location,typeSpecName,typeof error);if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var stack=getStack?getStack():"";warning(false,"Failed %s type: %s%s",location,error.message,stack!=null?stack:"")}}}}}module.exports=checkPropTypes}).call(this,require("_process"))},{"./lib/ReactPropTypesSecret":67,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56}],65:[function(require,module,exports){"use strict";var factory=require("./factoryWithTypeCheckers");module.exports=function(isValidElement){var throwOnDirectAccess=false;return factory(isValidElement,throwOnDirectAccess)}},{"./factoryWithTypeCheckers":66}],66:[function(require,module,exports){(function(process){"use strict";var emptyFunction=require("fbjs/lib/emptyFunction");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var assign=require("object-assign");var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var checkPropTypes=require("./checkPropTypes");module.exports=function(isValidElement,throwOnDirectAccess){var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}var ANONYMOUS="<<anonymous>>";var ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,exact:createStrictShapeTypeChecker};function is(x,y){if(x===y){return x!==0||1/x===1/y}else{return x!==x&&y!==y}}function PropTypeError(message){this.message=message;this.stack=""}PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if(process.env.NODE_ENV!=="production"){var manualPropTypeCallCache={};var manualPropTypeWarningCount=0}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(secret!==ReactPropTypesSecret){if(throwOnDirectAccess){invariant(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use `PropTypes.checkPropTypes()` to call them. "+"Read more at http://fb.me/use-check-prop-types")}else if(process.env.NODE_ENV!=="production"&&typeof console!=="undefined"){var cacheKey=componentName+":"+propName;if(!manualPropTypeCallCache[cacheKey]&&manualPropTypeWarningCount<3){warning(false,"You are manually calling a React.PropTypes validation "+"function for the `%s` prop on `%s`. This is deprecated "+"and will throw in the standalone `prop-types` package. "+"You may be seeing this warning due to a third-party PropTypes "+"library. See https://fb.me/react-warning-dont-call-proptypes "+"for details.",propFullName,componentName);manualPropTypeCallCache[cacheKey]=true;manualPropTypeWarningCount++}}}if(props[propName]==null){if(isRequired){if(props[propName]===null){return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required "+("in `"+componentName+"`, but its value is `null`."))}return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required in "+("`"+componentName+"`, but its value is `undefined`."))}return null}else{return validate(props,propName,componentName,location,propFullName)}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){var preciseType=getPreciseType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturnsNull)}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.")}var propValue=props[propName];if(!Array.isArray(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error){return error}}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){process.env.NODE_ENV!=="production"?warning(false,"Invalid argument supplied to oneOf, expected an instance of array."):void 0;return emptyFunction.thatReturnsNull}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null}}var valuesString=JSON.stringify(expectedValues);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.")}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue){if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error){return error}}}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){process.env.NODE_ENV!=="production"?warning(false,"Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return emptyFunction.thatReturnsNull}for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(typeof checker!=="function"){warning(false,"Invalid argument supplied to oneOfType. Expected an array of check functions, but "+"received %s at index %s.",getPostfixForTypeWarning(checker),i);return emptyFunction.thatReturnsNull}}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null}}return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker){return new PropTypeError("Invalid "+location+" `"+propFullName+"` key `"+key+"` supplied to `"+componentName+"`."+"\nBad object: "+JSON.stringify(props[propName],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(shapeTypes),null,"  "))}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return true;case"boolean":return!propValue;case"object":if(Array.isArray(propValue)){return propValue.every(isNode)}if(propValue===null||isValidElement(propValue)){return true}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false}}}else{while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false}}}}}else{return false}return true;default:return false}}function isSymbol(propType,propValue){if(propType==="symbol"){return true}if(propValue["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&propValue instanceof Symbol){return true}return false}function getPropType(propValue){var propType=typeof propValue;if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}if(isSymbol(propType,propValue)){return"symbol"}return propType}function getPreciseType(propValue){if(typeof propValue==="undefined"||propValue===null){return""+propValue}var propType=getPropType(propValue);if(propType==="object"){if(propValue instanceof Date){return"date"}else if(propValue instanceof RegExp){return"regexp"}}return propType}function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case"array":case"object":return"an "+type;case"boolean":case"date":case"regexp":return"a "+type;default:return type}}function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS}return propValue.constructor.name}ReactPropTypes.checkPropTypes=checkPropTypes;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}}).call(this,require("_process"))},{"./checkPropTypes":64,"./lib/ReactPropTypesSecret":67,_process:407,"fbjs/lib/emptyFunction":41,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"object-assign":63}],67:[function(require,module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],68:[function(require,module,exports){"use strict";module.exports=require("./lib/ReactDOM")},{"./lib/ReactDOM":98}],69:[function(require,module,exports){"use strict";var ARIADOMPropertyConfig={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};module.exports=ARIADOMPropertyConfig},{}],70:[function(require,module,exports){"use strict";var ReactDOMComponentTree=require("./ReactDOMComponentTree");var focusNode=require("fbjs/lib/focusNode");var AutoFocusUtils={focusDOMComponent:function(){focusNode(ReactDOMComponentTree.getNodeFromInstance(this))}};module.exports=AutoFocusUtils},{"./ReactDOMComponentTree":101,"fbjs/lib/focusNode":43}],71:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var FallbackCompositionState=require("./FallbackCompositionState");var SyntheticCompositionEvent=require("./SyntheticCompositionEvent");var SyntheticInputEvent=require("./SyntheticInputEvent");var END_KEYCODES=[9,13,27,32];var START_KEYCODE=229;var canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window;var documentMode=null;if(ExecutionEnvironment.canUseDOM&&"documentMode"in document){documentMode=document.documentMode}var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto();var useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11);function isPresto(){var opera=window.opera;return typeof opera==="object"&&typeof opera.version==="function"&&parseInt(opera.version(),10)<=12}var SPACEBAR_CODE=32;var SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE);var eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}};var hasSpaceKeypress=false;function isKeypressCommand(nativeEvent){return(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)&&!(nativeEvent.ctrlKey&&nativeEvent.altKey)}function getCompositionEventType(topLevelType){switch(topLevelType){case"topCompositionStart":return eventTypes.compositionStart;case"topCompositionEnd":return eventTypes.compositionEnd;case"topCompositionUpdate":return eventTypes.compositionUpdate}}function isFallbackCompositionStart(topLevelType,nativeEvent){return topLevelType==="topKeyDown"&&nativeEvent.keyCode===START_KEYCODE}function isFallbackCompositionEnd(topLevelType,nativeEvent){switch(topLevelType){case"topKeyUp":return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case"topKeyDown":return nativeEvent.keyCode!==START_KEYCODE;case"topKeyPress":case"topMouseDown":case"topBlur":return true;default:return false}}function getDataFromCustomEvent(nativeEvent){var detail=nativeEvent.detail;if(typeof detail==="object"&&"data"in detail){return detail.data}return null}var currentComposition=null;function extractCompositionEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget){var eventType;var fallbackData;if(canUseCompositionEvent){eventType=getCompositionEventType(topLevelType)}else if(!currentComposition){if(isFallbackCompositionStart(topLevelType,nativeEvent)){eventType=eventTypes.compositionStart}}else if(isFallbackCompositionEnd(topLevelType,nativeEvent)){eventType=eventTypes.compositionEnd}if(!eventType){return null}if(useFallbackCompositionData){if(!currentComposition&&eventType===eventTypes.compositionStart){currentComposition=FallbackCompositionState.getPooled(nativeEventTarget)}else if(eventType===eventTypes.compositionEnd){if(currentComposition){fallbackData=currentComposition.getData()}}}var event=SyntheticCompositionEvent.getPooled(eventType,targetInst,nativeEvent,nativeEventTarget);if(fallbackData){event.data=fallbackData}else{var customData=getDataFromCustomEvent(nativeEvent);if(customData!==null){event.data=customData}}EventPropagators.accumulateTwoPhaseDispatches(event);return event}function getNativeBeforeInputChars(topLevelType,nativeEvent){switch(topLevelType){case"topCompositionEnd":return getDataFromCustomEvent(nativeEvent);case"topKeyPress":var which=nativeEvent.which;if(which!==SPACEBAR_CODE){return null}hasSpaceKeypress=true;return SPACEBAR_CHAR;case"topTextInput":var chars=nativeEvent.data;if(chars===SPACEBAR_CHAR&&hasSpaceKeypress){return null}return chars;default:return null}}function getFallbackBeforeInputChars(topLevelType,nativeEvent){if(currentComposition){if(topLevelType==="topCompositionEnd"||!canUseCompositionEvent&&isFallbackCompositionEnd(topLevelType,nativeEvent)){var chars=currentComposition.getData();FallbackCompositionState.release(currentComposition);currentComposition=null;return chars}return null}switch(topLevelType){case"topPaste":return null;case"topKeyPress":if(nativeEvent.which&&!isKeypressCommand(nativeEvent)){return String.fromCharCode(nativeEvent.which)}return null;case"topCompositionEnd":return useFallbackCompositionData?null:nativeEvent.data;default:return null}}function extractBeforeInputEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget){var chars;if(canUseTextInputEvent){chars=getNativeBeforeInputChars(topLevelType,nativeEvent)}else{chars=getFallbackBeforeInputChars(topLevelType,nativeEvent)}if(!chars){return null}var event=SyntheticInputEvent.getPooled(eventTypes.beforeInput,targetInst,nativeEvent,nativeEventTarget);event.data=chars;EventPropagators.accumulateTwoPhaseDispatches(event);return event}var BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){return[extractCompositionEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget),extractBeforeInputEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget)]}};module.exports=BeforeInputEventPlugin},{"./EventPropagators":87,"./FallbackCompositionState":88,"./SyntheticCompositionEvent":152,"./SyntheticInputEvent":156,"fbjs/lib/ExecutionEnvironment":35}],72:[function(require,module,exports){"use strict";var isUnitlessNumber={animationIterationCount:true,borderImageOutset:true,borderImageSlice:true,borderImageWidth:true,boxFlex:true,boxFlexGroup:true,boxOrdinalGroup:true,columnCount:true,columns:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,flexOrder:true,gridRow:true,gridRowEnd:true,gridRowSpan:true,gridRowStart:true,gridColumn:true,gridColumnEnd:true,gridColumnSpan:true,gridColumnStart:true,fontWeight:true,lineClamp:true,lineHeight:true,opacity:true,order:true,orphans:true,tabSize:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeDasharray:true,strokeDashoffset:true,strokeMiterlimit:true,strokeOpacity:true,strokeWidth:true};function prefixKey(prefix,key){return prefix+key.charAt(0).toUpperCase()+key.substring(1)}var prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(prop){prefixes.forEach(function(prefix){isUnitlessNumber[prefixKey(prefix,prop)]=isUnitlessNumber[prop]})});var shorthandPropertyExpansions={background:{backgroundAttachment:true,backgroundColor:true,backgroundImage:true,backgroundPositionX:true,backgroundPositionY:true,backgroundRepeat:true},backgroundPosition:{backgroundPositionX:true,backgroundPositionY:true},border:{borderWidth:true,borderStyle:true,borderColor:true},borderBottom:{borderBottomWidth:true,borderBottomStyle:true,borderBottomColor:true},borderLeft:{borderLeftWidth:true,borderLeftStyle:true,borderLeftColor:true},borderRight:{borderRightWidth:true,borderRightStyle:true,borderRightColor:true},borderTop:{borderTopWidth:true,borderTopStyle:true,borderTopColor:true},font:{fontStyle:true,fontVariant:true,fontWeight:true,fontSize:true,lineHeight:true,fontFamily:true},outline:{outlineWidth:true,outlineStyle:true,outlineColor:true}};var CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty},{}],73:[function(require,module,exports){(function(process){"use strict";var CSSProperty=require("./CSSProperty");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactInstrumentation=require("./ReactInstrumentation");var camelizeStyleName=require("fbjs/lib/camelizeStyleName");var dangerousStyleValue=require("./dangerousStyleValue");var hyphenateStyleName=require("fbjs/lib/hyphenateStyleName");var memoizeStringOnly=require("fbjs/lib/memoizeStringOnly");var warning=require("fbjs/lib/warning");var processStyleName=memoizeStringOnly(function(styleName){return hyphenateStyleName(styleName)});var hasShorthandPropertyBug=false;var styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=true}if(document.documentElement.style.cssFloat===undefined){styleFloatAccessor="styleFloat"}}if(process.env.NODE_ENV!=="production"){var badVendoredStyleNamePattern=/^(?:webkit|moz|o)[A-Z]/;var badStyleValueWithSemicolonPattern=/;\s*$/;var warnedStyleNames={};var warnedStyleValues={};var warnedForNaNValue=false;var warnHyphenatedStyleName=function(name,owner){if(warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]){return}warnedStyleNames[name]=true;process.env.NODE_ENV!=="production"?warning(false,"Unsupported style property %s. Did you mean %s?%s",name,camelizeStyleName(name),checkRenderMessage(owner)):void 0};var warnBadVendoredStyleName=function(name,owner){if(warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]){return}warnedStyleNames[name]=true;process.env.NODE_ENV!=="production"?warning(false,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",name,name.charAt(0).toUpperCase()+name.slice(1),checkRenderMessage(owner)):void 0};var warnStyleValueWithSemicolon=function(name,value,owner){if(warnedStyleValues.hasOwnProperty(value)&&warnedStyleValues[value]){return}warnedStyleValues[value]=true;process.env.NODE_ENV!=="production"?warning(false,"Style property values shouldn't contain a semicolon.%s "+'Try "%s: %s" instead.',checkRenderMessage(owner),name,value.replace(badStyleValueWithSemicolonPattern,"")):void 0};var warnStyleValueIsNaN=function(name,value,owner){if(warnedForNaNValue){return}warnedForNaNValue=true;process.env.NODE_ENV!=="production"?warning(false,"`NaN` is an invalid value for the `%s` css style property.%s",name,checkRenderMessage(owner)):void 0};var checkRenderMessage=function(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""};var warnValidStyle=function(name,value,component){var owner;if(component){owner=component._currentElement._owner}if(name.indexOf("-")>-1){warnHyphenatedStyleName(name,owner)}else if(badVendoredStyleNamePattern.test(name)){warnBadVendoredStyleName(name,owner)}else if(badStyleValueWithSemicolonPattern.test(value)){warnStyleValueWithSemicolon(name,value,owner)}if(typeof value==="number"&&isNaN(value)){warnStyleValueIsNaN(name,value,owner)}}}var CSSPropertyOperations={createMarkupForStyles:function(styles,component){var serialized="";for(var styleName in styles){if(!styles.hasOwnProperty(styleName)){continue}var isCustomProperty=styleName.indexOf("--")===0;var styleValue=styles[styleName];if(process.env.NODE_ENV!=="production"){if(!isCustomProperty){warnValidStyle(styleName,styleValue,component)}}if(styleValue!=null){serialized+=processStyleName(styleName)+":";serialized+=dangerousStyleValue(styleName,styleValue,component,isCustomProperty)+";"}}return serialized||null},setValueForStyles:function(node,styles,component){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:component._debugID,type:"update styles",payload:styles})}var style=node.style;for(var styleName in styles){if(!styles.hasOwnProperty(styleName)){continue}var isCustomProperty=styleName.indexOf("--")===0;if(process.env.NODE_ENV!=="production"){if(!isCustomProperty){warnValidStyle(styleName,styles[styleName],component)}}var styleValue=dangerousStyleValue(styleName,styles[styleName],component,isCustomProperty);if(styleName==="float"||styleName==="cssFloat"){styleName=styleFloatAccessor}if(isCustomProperty){style.setProperty(styleName,styleValue)}else if(styleValue){style[styleName]=styleValue}else{var expansion=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[styleName];if(expansion){for(var individualStyleName in expansion){style[individualStyleName]=""}}else{style[styleName]=""}}}}};module.exports=CSSPropertyOperations}).call(this,require("_process"))},{"./CSSProperty":72,"./ReactInstrumentation":130,"./dangerousStyleValue":169,_process:407,"fbjs/lib/ExecutionEnvironment":35,"fbjs/lib/camelizeStyleName":37,"fbjs/lib/hyphenateStyleName":48,"fbjs/lib/memoizeStringOnly":52,"fbjs/lib/warning":56}],74:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PooledClass=require("./PooledClass");var invariant=require("fbjs/lib/invariant");var CallbackQueue=function(){function CallbackQueue(arg){_classCallCheck(this,CallbackQueue);this._callbacks=null;this._contexts=null;this._arg=arg}CallbackQueue.prototype.enqueue=function enqueue(callback,context){this._callbacks=this._callbacks||[];this._callbacks.push(callback);this._contexts=this._contexts||[];this._contexts.push(context)};CallbackQueue.prototype.notifyAll=function notifyAll(){var callbacks=this._callbacks;var contexts=this._contexts;var arg=this._arg;if(callbacks&&contexts){!(callbacks.length===contexts.length)?process.env.NODE_ENV!=="production"?invariant(false,"Mismatched list of contexts in callback queue"):_prodInvariant("24"):void 0;this._callbacks=null;this._contexts=null;for(var i=0;i<callbacks.length;i++){callbacks[i].call(contexts[i],arg)}callbacks.length=0;contexts.length=0}};CallbackQueue.prototype.checkpoint=function checkpoint(){return this._callbacks?this._callbacks.length:0};CallbackQueue.prototype.rollback=function rollback(len){if(this._callbacks&&this._contexts){this._callbacks.length=len;this._contexts.length=len}};CallbackQueue.prototype.reset=function reset(){this._callbacks=null;this._contexts=null};CallbackQueue.prototype.destructor=function destructor(){this.reset()};return CallbackQueue}();module.exports=PooledClass.addPoolingTo(CallbackQueue)}).call(this,require("_process"))},{"./PooledClass":92,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],75:[function(require,module,exports){"use strict";var EventPluginHub=require("./EventPluginHub");var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var SyntheticEvent=require("./SyntheticEvent");var inputValueTracking=require("./inputValueTracking");var getEventTarget=require("./getEventTarget");var isEventSupported=require("./isEventSupported");var isTextInputElement=require("./isTextInputElement");var eventTypes={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}};function createAndAccumulateChangeEvent(inst,nativeEvent,target){var event=SyntheticEvent.getPooled(eventTypes.change,inst,nativeEvent,target);event.type="change";EventPropagators.accumulateTwoPhaseDispatches(event);return event}var activeElement=null;var activeElementInst=null;function shouldUseChangeEvent(elem){var nodeName=elem.nodeName&&elem.nodeName.toLowerCase();return nodeName==="select"||nodeName==="input"&&elem.type==="file"}var doesChangeEventBubble=false;if(ExecutionEnvironment.canUseDOM){doesChangeEventBubble=isEventSupported("change")&&(!document.documentMode||document.documentMode>8)}function manualDispatchChangeEvent(nativeEvent){var event=createAndAccumulateChangeEvent(activeElementInst,nativeEvent,getEventTarget(nativeEvent));ReactUpdates.batchedUpdates(runEventInBatch,event)}function runEventInBatch(event){EventPluginHub.enqueueEvents(event);EventPluginHub.processEventQueue(false)}function startWatchingForChangeEventIE8(target,targetInst){activeElement=target;activeElementInst=targetInst;activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){if(!activeElement){return}activeElement.detachEvent("onchange",manualDispatchChangeEvent);activeElement=null;activeElementInst=null}function getInstIfValueChanged(targetInst,nativeEvent){var updated=inputValueTracking.updateValueIfChanged(targetInst);var simulated=nativeEvent.simulated===true&&ChangeEventPlugin._allowSimulatedPassThrough;if(updated||simulated){return targetInst}}function getTargetInstForChangeEvent(topLevelType,targetInst){if(topLevelType==="topChange"){return targetInst}}function handleEventsForChangeEventIE8(topLevelType,target,targetInst){if(topLevelType==="topFocus"){stopWatchingForChangeEventIE8();startWatchingForChangeEventIE8(target,targetInst)}else if(topLevelType==="topBlur"){stopWatchingForChangeEventIE8()}}var isInputEventSupported=false;if(ExecutionEnvironment.canUseDOM){isInputEventSupported=isEventSupported("input")&&(!document.documentMode||document.documentMode>9)}function startWatchingForValueChange(target,targetInst){activeElement=target;activeElementInst=targetInst;activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){if(!activeElement){return}activeElement.detachEvent("onpropertychange",handlePropertyChange);activeElement=null;activeElementInst=null}function handlePropertyChange(nativeEvent){if(nativeEvent.propertyName!=="value"){return}if(getInstIfValueChanged(activeElementInst,nativeEvent)){manualDispatchChangeEvent(nativeEvent)}}function handleEventsForInputEventPolyfill(topLevelType,target,targetInst){if(topLevelType==="topFocus"){stopWatchingForValueChange();startWatchingForValueChange(target,targetInst)}else if(topLevelType==="topBlur"){stopWatchingForValueChange()}}function getTargetInstForInputEventPolyfill(topLevelType,targetInst,nativeEvent){if(topLevelType==="topSelectionChange"||topLevelType==="topKeyUp"||topLevelType==="topKeyDown"){return getInstIfValueChanged(activeElementInst,nativeEvent)}}function shouldUseClickEvent(elem){var nodeName=elem.nodeName;return nodeName&&nodeName.toLowerCase()==="input"&&(elem.type==="checkbox"||elem.type==="radio")}function getTargetInstForClickEvent(topLevelType,targetInst,nativeEvent){if(topLevelType==="topClick"){return getInstIfValueChanged(targetInst,nativeEvent)}}function getTargetInstForInputOrChangeEvent(topLevelType,targetInst,nativeEvent){if(topLevelType==="topInput"||topLevelType==="topChange"){return getInstIfValueChanged(targetInst,nativeEvent)}}function handleControlledInputBlur(inst,node){if(inst==null){return}var state=inst._wrapperState||node._wrapperState;if(!state||!state.controlled||node.type!=="number"){return}var value=""+node.value;if(node.getAttribute("value")!==value){node.setAttribute("value",value)}}var ChangeEventPlugin={eventTypes:eventTypes,_allowSimulatedPassThrough:true,_isInputEventSupported:isInputEventSupported,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var targetNode=targetInst?ReactDOMComponentTree.getNodeFromInstance(targetInst):window;var getTargetInstFunc,handleEventFunc;if(shouldUseChangeEvent(targetNode)){if(doesChangeEventBubble){getTargetInstFunc=getTargetInstForChangeEvent}else{handleEventFunc=handleEventsForChangeEventIE8}}else if(isTextInputElement(targetNode)){if(isInputEventSupported){getTargetInstFunc=getTargetInstForInputOrChangeEvent}else{getTargetInstFunc=getTargetInstForInputEventPolyfill;handleEventFunc=handleEventsForInputEventPolyfill}}else if(shouldUseClickEvent(targetNode)){getTargetInstFunc=getTargetInstForClickEvent}if(getTargetInstFunc){var inst=getTargetInstFunc(topLevelType,targetInst,nativeEvent);if(inst){var event=createAndAccumulateChangeEvent(inst,nativeEvent,nativeEventTarget);return event}}if(handleEventFunc){handleEventFunc(topLevelType,targetNode,targetInst)}if(topLevelType==="topBlur"){handleControlledInputBlur(targetInst,targetNode)}}};module.exports=ChangeEventPlugin},{"./EventPluginHub":84,"./EventPropagators":87,"./ReactDOMComponentTree":101,"./ReactUpdates":145,"./SyntheticEvent":154,"./getEventTarget":177,"./inputValueTracking":183,"./isEventSupported":185,"./isTextInputElement":186,"fbjs/lib/ExecutionEnvironment":35}],76:[function(require,module,exports){(function(process){"use strict";var DOMLazyTree=require("./DOMLazyTree");var Danger=require("./Danger");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstrumentation=require("./ReactInstrumentation");var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var setInnerHTML=require("./setInnerHTML");var setTextContent=require("./setTextContent");function getNodeAfter(parentNode,node){if(Array.isArray(node)){node=node[1]}return node?node.nextSibling:parentNode.firstChild}var insertChildAt=createMicrosoftUnsafeLocalFunction(function(parentNode,childNode,referenceNode){parentNode.insertBefore(childNode,referenceNode)});function insertLazyTreeChildAt(parentNode,childTree,referenceNode){DOMLazyTree.insertTreeBefore(parentNode,childTree,referenceNode)}function moveChild(parentNode,childNode,referenceNode){if(Array.isArray(childNode)){moveDelimitedText(parentNode,childNode[0],childNode[1],referenceNode)}else{insertChildAt(parentNode,childNode,referenceNode)}}function removeChild(parentNode,childNode){if(Array.isArray(childNode)){var closingComment=childNode[1];childNode=childNode[0];removeDelimitedText(parentNode,childNode,closingComment);parentNode.removeChild(closingComment)}parentNode.removeChild(childNode)}function moveDelimitedText(parentNode,openingComment,closingComment,referenceNode){var node=openingComment;while(true){var nextNode=node.nextSibling;insertChildAt(parentNode,node,referenceNode);if(node===closingComment){break}node=nextNode}}function removeDelimitedText(parentNode,startNode,closingComment){while(true){var node=startNode.nextSibling;if(node===closingComment){break}else{parentNode.removeChild(node)}}}function replaceDelimitedText(openingComment,closingComment,stringText){var parentNode=openingComment.parentNode;var nodeAfterComment=openingComment.nextSibling;if(nodeAfterComment===closingComment){if(stringText){insertChildAt(parentNode,document.createTextNode(stringText),nodeAfterComment)}}else{if(stringText){setTextContent(nodeAfterComment,stringText);removeDelimitedText(parentNode,nodeAfterComment,closingComment)}else{removeDelimitedText(parentNode,openingComment,closingComment)}}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(openingComment)._debugID,type:"replace text",payload:stringText})}}var dangerouslyReplaceNodeWithMarkup=Danger.dangerouslyReplaceNodeWithMarkup;if(process.env.NODE_ENV!=="production"){dangerouslyReplaceNodeWithMarkup=function(oldChild,markup,prevInstance){Danger.dangerouslyReplaceNodeWithMarkup(oldChild,markup);if(prevInstance._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:prevInstance._debugID,type:"replace with",payload:markup.toString()})}else{var nextInstance=ReactDOMComponentTree.getInstanceFromNode(markup.node);if(nextInstance._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:nextInstance._debugID,type:"mount",payload:markup.toString()})}}}}var DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:replaceDelimitedText,processUpdates:function(parentNode,updates){if(process.env.NODE_ENV!=="production"){var parentNodeDebugID=ReactDOMComponentTree.getInstanceFromNode(parentNode)._debugID}for(var k=0;k<updates.length;k++){var update=updates[k];switch(update.type){case"INSERT_MARKUP":insertLazyTreeChildAt(parentNode,update.content,getNodeAfter(parentNode,update.afterNode));if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"insert child",payload:{toIndex:update.toIndex,content:update.content.toString()}})}break;case"MOVE_EXISTING":moveChild(parentNode,update.fromNode,getNodeAfter(parentNode,update.afterNode));if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"move child",payload:{fromIndex:update.fromIndex,toIndex:update.toIndex}})}break;case"SET_MARKUP":setInnerHTML(parentNode,update.content);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"replace children",payload:update.content.toString()})}break;case"TEXT_CONTENT":setTextContent(parentNode,update.content);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"replace text",payload:update.content.toString()})}break;case"REMOVE_NODE":removeChild(parentNode,update.fromNode);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"remove child",payload:{fromIndex:update.fromIndex}})}break}}}};module.exports=DOMChildrenOperations}).call(this,require("_process"))},{"./DOMLazyTree":77,"./Danger":81,"./ReactDOMComponentTree":101,"./ReactInstrumentation":130,"./createMicrosoftUnsafeLocalFunction":168,"./setInnerHTML":190,"./setTextContent":191,_process:407}],77:[function(require,module,exports){"use strict";var DOMNamespaces=require("./DOMNamespaces");var setInnerHTML=require("./setInnerHTML");var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var setTextContent=require("./setTextContent");var ELEMENT_NODE_TYPE=1;var DOCUMENT_FRAGMENT_NODE_TYPE=11;var enableLazy=typeof document!=="undefined"&&typeof document.documentMode==="number"||typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"&&/\bEdge\/\d/.test(navigator.userAgent);function insertTreeChildren(tree){if(!enableLazy){return}var node=tree.node;var children=tree.children;if(children.length){for(var i=0;i<children.length;i++){insertTreeBefore(node,children[i],null)}}else if(tree.html!=null){setInnerHTML(node,tree.html)}else if(tree.text!=null){setTextContent(node,tree.text)}}var insertTreeBefore=createMicrosoftUnsafeLocalFunction(function(parentNode,tree,referenceNode){if(tree.node.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE||tree.node.nodeType===ELEMENT_NODE_TYPE&&tree.node.nodeName.toLowerCase()==="object"&&(tree.node.namespaceURI==null||tree.node.namespaceURI===DOMNamespaces.html)){insertTreeChildren(tree);parentNode.insertBefore(tree.node,referenceNode)}else{parentNode.insertBefore(tree.node,referenceNode);insertTreeChildren(tree)}});function replaceChildWithTree(oldNode,newTree){oldNode.parentNode.replaceChild(newTree.node,oldNode);insertTreeChildren(newTree)}function queueChild(parentTree,childTree){if(enableLazy){parentTree.children.push(childTree)}else{parentTree.node.appendChild(childTree.node)}}function queueHTML(tree,html){if(enableLazy){tree.html=html}else{setInnerHTML(tree.node,html)}}function queueText(tree,text){if(enableLazy){tree.text=text}else{setTextContent(tree.node,text)}}function toString(){return this.node.nodeName}function DOMLazyTree(node){return{node:node,children:[],html:null,text:null,toString:toString}}DOMLazyTree.insertTreeBefore=insertTreeBefore;DOMLazyTree.replaceChildWithTree=replaceChildWithTree;DOMLazyTree.queueChild=queueChild;DOMLazyTree.queueHTML=queueHTML;DOMLazyTree.queueText=queueText;module.exports=DOMLazyTree},{"./DOMNamespaces":78,"./createMicrosoftUnsafeLocalFunction":168,"./setInnerHTML":190,"./setTextContent":191}],78:[function(require,module,exports){"use strict";var DOMNamespaces={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};module.exports=DOMNamespaces},{}],79:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function checkMask(value,bitmask){return(value&bitmask)===bitmask}var DOMPropertyInjection={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:16|8,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(domPropertyConfig){var Injection=DOMPropertyInjection;var Properties=domPropertyConfig.Properties||{};var DOMAttributeNamespaces=domPropertyConfig.DOMAttributeNamespaces||{};var DOMAttributeNames=domPropertyConfig.DOMAttributeNames||{};var DOMPropertyNames=domPropertyConfig.DOMPropertyNames||{};var DOMMutationMethods=domPropertyConfig.DOMMutationMethods||{};if(domPropertyConfig.isCustomAttribute){DOMProperty._isCustomAttributeFunctions.push(domPropertyConfig.isCustomAttribute)}for(var propName in Properties){!!DOMProperty.properties.hasOwnProperty(propName)?process.env.NODE_ENV!=="production"?invariant(false,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",propName):_prodInvariant("48",propName):void 0;var lowerCased=propName.toLowerCase();var propConfig=Properties[propName];var propertyInfo={attributeName:lowerCased,attributeNamespace:null,propertyName:propName,mutationMethod:null,mustUseProperty:checkMask(propConfig,Injection.MUST_USE_PROPERTY),hasBooleanValue:checkMask(propConfig,Injection.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(propConfig,Injection.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(propConfig,Injection.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(propConfig,Injection.HAS_OVERLOADED_BOOLEAN_VALUE)};!(propertyInfo.hasBooleanValue+propertyInfo.hasNumericValue+propertyInfo.hasOverloadedBooleanValue<=1)?process.env.NODE_ENV!=="production"?invariant(false,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",propName):_prodInvariant("50",propName):void 0;if(process.env.NODE_ENV!=="production"){DOMProperty.getPossibleStandardName[lowerCased]=propName}if(DOMAttributeNames.hasOwnProperty(propName)){var attributeName=DOMAttributeNames[propName];propertyInfo.attributeName=attributeName;if(process.env.NODE_ENV!=="production"){DOMProperty.getPossibleStandardName[attributeName]=propName}}if(DOMAttributeNamespaces.hasOwnProperty(propName)){propertyInfo.attributeNamespace=DOMAttributeNamespaces[propName]}if(DOMPropertyNames.hasOwnProperty(propName)){propertyInfo.propertyName=DOMPropertyNames[propName]}if(DOMMutationMethods.hasOwnProperty(propName)){propertyInfo.mutationMethod=DOMMutationMethods[propName]}DOMProperty.properties[propName]=propertyInfo}}};var ATTRIBUTE_NAME_START_CHAR=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:ATTRIBUTE_NAME_START_CHAR,ATTRIBUTE_NAME_CHAR:ATTRIBUTE_NAME_START_CHAR+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:process.env.NODE_ENV!=="production"?{autofocus:"autoFocus"}:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(attributeName){for(var i=0;i<DOMProperty._isCustomAttributeFunctions.length;i++){var isCustomAttributeFn=DOMProperty._isCustomAttributeFunctions[i];if(isCustomAttributeFn(attributeName)){return true}}return false},injection:DOMPropertyInjection};module.exports=DOMProperty}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],80:[function(require,module,exports){(function(process){"use strict";var DOMProperty=require("./DOMProperty");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstrumentation=require("./ReactInstrumentation");var quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser");var warning=require("fbjs/lib/warning");var VALID_ATTRIBUTE_NAME_REGEX=new RegExp("^["+DOMProperty.ATTRIBUTE_NAME_START_CHAR+"]["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$");var illegalAttributeNameCache={};var validatedAttributeNameCache={};function isAttributeNameSafe(attributeName){if(validatedAttributeNameCache.hasOwnProperty(attributeName)){return true}if(illegalAttributeNameCache.hasOwnProperty(attributeName)){return false}if(VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)){validatedAttributeNameCache[attributeName]=true;return true}illegalAttributeNameCache[attributeName]=true;process.env.NODE_ENV!=="production"?warning(false,"Invalid attribute name: `%s`",attributeName):void 0;return false}function shouldIgnoreValue(propertyInfo,value){return value==null||propertyInfo.hasBooleanValue&&!value||propertyInfo.hasNumericValue&&isNaN(value)||propertyInfo.hasPositiveNumericValue&&value<1||propertyInfo.hasOverloadedBooleanValue&&value===false}var DOMPropertyOperations={createMarkupForID:function(id){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(id)},setAttributeForID:function(node,id){node.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,id)},createMarkupForRoot:function(){return DOMProperty.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(node){node.setAttribute(DOMProperty.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){if(shouldIgnoreValue(propertyInfo,value)){return""}var attributeName=propertyInfo.attributeName;if(propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===true){return attributeName+'=""'}return attributeName+"="+quoteAttributeValueForBrowser(value)}else if(DOMProperty.isCustomAttribute(name)){if(value==null){return""}return name+"="+quoteAttributeValueForBrowser(value)}return null},createMarkupForCustomAttribute:function(name,value){if(!isAttributeNameSafe(name)||value==null){return""}return name+"="+quoteAttributeValueForBrowser(value)},setValueForProperty:function(node,name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod){mutationMethod(node,value)}else if(shouldIgnoreValue(propertyInfo,value)){this.deleteValueForProperty(node,name);return}else if(propertyInfo.mustUseProperty){node[propertyInfo.propertyName]=value}else{var attributeName=propertyInfo.attributeName;var namespace=propertyInfo.attributeNamespace;if(namespace){node.setAttributeNS(namespace,attributeName,""+value)}else if(propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===true){node.setAttribute(attributeName,"")}else{node.setAttribute(attributeName,""+value)}}}else if(DOMProperty.isCustomAttribute(name)){DOMPropertyOperations.setValueForAttribute(node,name,value);return}if(process.env.NODE_ENV!=="production"){var payload={};payload[name]=value;ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"update attribute",payload:payload})}},setValueForAttribute:function(node,name,value){if(!isAttributeNameSafe(name)){return}if(value==null){node.removeAttribute(name)}else{node.setAttribute(name,""+value)}if(process.env.NODE_ENV!=="production"){var payload={};payload[name]=value;ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"update attribute",payload:payload})}},deleteValueForAttribute:function(node,name){node.removeAttribute(name);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"remove attribute",payload:name})}},deleteValueForProperty:function(node,name){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod){mutationMethod(node,undefined)}else if(propertyInfo.mustUseProperty){var propName=propertyInfo.propertyName;if(propertyInfo.hasBooleanValue){node[propName]=false}else{node[propName]=""}}else{node.removeAttribute(propertyInfo.attributeName)}}else if(DOMProperty.isCustomAttribute(name)){node.removeAttribute(name)}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"remove attribute",payload:name})}}};module.exports=DOMPropertyOperations}).call(this,require("_process"))},{"./DOMProperty":79,"./ReactDOMComponentTree":101,"./ReactInstrumentation":130,"./quoteAttributeValueForBrowser":187,_process:407,"fbjs/lib/warning":56}],81:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMLazyTree=require("./DOMLazyTree");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var createNodesFromMarkup=require("fbjs/lib/createNodesFromMarkup");var emptyFunction=require("fbjs/lib/emptyFunction");var invariant=require("fbjs/lib/invariant");var Danger={dangerouslyReplaceNodeWithMarkup:function(oldChild,markup){!ExecutionEnvironment.canUseDOM?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."):_prodInvariant("56"):void 0;!markup?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):_prodInvariant("57"):void 0;!(oldChild.nodeName!=="HTML")?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):_prodInvariant("58"):void 0;if(typeof markup==="string"){var newChild=createNodesFromMarkup(markup,emptyFunction)[0];oldChild.parentNode.replaceChild(newChild,oldChild)}else{DOMLazyTree.replaceChildWithTree(oldChild,markup)}}};module.exports=Danger}).call(this,require("_process"))},{"./DOMLazyTree":77,"./reactProdInvariant":188,_process:407,"fbjs/lib/ExecutionEnvironment":35,"fbjs/lib/createNodesFromMarkup":40,"fbjs/lib/emptyFunction":41,"fbjs/lib/invariant":49}],82:[function(require,module,exports){"use strict";var DefaultEventPluginOrder=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];module.exports=DefaultEventPluginOrder},{}],83:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var SyntheticMouseEvent=require("./SyntheticMouseEvent");var eventTypes={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}};var EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){if(topLevelType==="topMouseOver"&&(nativeEvent.relatedTarget||nativeEvent.fromElement)){return null}if(topLevelType!=="topMouseOut"&&topLevelType!=="topMouseOver"){return null}var win;if(nativeEventTarget.window===nativeEventTarget){win=nativeEventTarget}else{var doc=nativeEventTarget.ownerDocument;if(doc){win=doc.defaultView||doc.parentWindow}else{win=window}}var from;var to;if(topLevelType==="topMouseOut"){from=targetInst;var related=nativeEvent.relatedTarget||nativeEvent.toElement;to=related?ReactDOMComponentTree.getClosestInstanceFromNode(related):null}else{from=null;to=targetInst}if(from===to){return null}var fromNode=from==null?win:ReactDOMComponentTree.getNodeFromInstance(from);var toNode=to==null?win:ReactDOMComponentTree.getNodeFromInstance(to);var leave=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,from,nativeEvent,nativeEventTarget);leave.type="mouseleave";leave.target=fromNode;leave.relatedTarget=toNode;var enter=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,to,nativeEvent,nativeEventTarget);enter.type="mouseenter";enter.target=toNode;enter.relatedTarget=fromNode;EventPropagators.accumulateEnterLeaveDispatches(leave,enter,from,to);return[leave,enter]}};module.exports=EnterLeaveEventPlugin},{"./EventPropagators":87,"./ReactDOMComponentTree":101,"./SyntheticMouseEvent":158}],84:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var EventPluginRegistry=require("./EventPluginRegistry");var EventPluginUtils=require("./EventPluginUtils");var ReactErrorUtils=require("./ReactErrorUtils");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var invariant=require("fbjs/lib/invariant");var listenerBank={};var eventQueue=null;var executeDispatchesAndRelease=function(event,simulated){if(event){EventPluginUtils.executeDispatchesInOrder(event,simulated);if(!event.isPersistent()){event.constructor.release(event)}}};var executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,true)};var executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,false)};var getDictionaryKey=function(inst){return"."+inst._rootNodeID};function isInteractive(tag){return tag==="button"||tag==="input"||tag==="select"||tag==="textarea"}function shouldPreventMouseEvent(name,type,props){switch(name){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!!(props.disabled&&isInteractive(type));default:return false}}var EventPluginHub={injection:{injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},putListener:function(inst,registrationName,listener){!(typeof listener==="function")?process.env.NODE_ENV!=="production"?invariant(false,"Expected %s listener to be a function, instead got type %s",registrationName,typeof listener):_prodInvariant("94",registrationName,typeof listener):void 0;var key=getDictionaryKey(inst);var bankForRegistrationName=listenerBank[registrationName]||(listenerBank[registrationName]={});bankForRegistrationName[key]=listener;var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.didPutListener){PluginModule.didPutListener(inst,registrationName,listener)}},getListener:function(inst,registrationName){var bankForRegistrationName=listenerBank[registrationName];if(shouldPreventMouseEvent(registrationName,inst._currentElement.type,inst._currentElement.props)){return null}var key=getDictionaryKey(inst);return bankForRegistrationName&&bankForRegistrationName[key]},deleteListener:function(inst,registrationName){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.willDeleteListener){PluginModule.willDeleteListener(inst,registrationName)}var bankForRegistrationName=listenerBank[registrationName];if(bankForRegistrationName){var key=getDictionaryKey(inst);delete bankForRegistrationName[key]}},deleteAllListeners:function(inst){var key=getDictionaryKey(inst);for(var registrationName in listenerBank){if(!listenerBank.hasOwnProperty(registrationName)){continue}if(!listenerBank[registrationName][key]){continue}var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.willDeleteListener){PluginModule.willDeleteListener(inst,registrationName)}delete listenerBank[registrationName][key]}},extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var events;var plugins=EventPluginRegistry.plugins;for(var i=0;i<plugins.length;i++){var possiblePlugin=plugins[i];if(possiblePlugin){var extractedEvents=possiblePlugin.extractEvents(topLevelType,targetInst,nativeEvent,nativeEventTarget);if(extractedEvents){events=accumulateInto(events,extractedEvents)}}}return events},enqueueEvents:function(events){if(events){eventQueue=accumulateInto(eventQueue,events)}},processEventQueue:function(simulated){var processingEventQueue=eventQueue;eventQueue=null;if(simulated){forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseSimulated)}else{forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseTopLevel)}!!eventQueue?process.env.NODE_ENV!=="production"?invariant(false,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):_prodInvariant("95"):void 0;ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub}).call(this,require("_process"))},{"./EventPluginRegistry":85,"./EventPluginUtils":86,"./ReactErrorUtils":121,"./accumulateInto":165,"./forEachAccumulated":173,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],85:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var eventPluginOrder=null;var namesToPlugins={};function recomputePluginOrdering(){if(!eventPluginOrder){return}for(var pluginName in namesToPlugins){var pluginModule=namesToPlugins[pluginName];var pluginIndex=eventPluginOrder.indexOf(pluginName);!(pluginIndex>-1)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",pluginName):_prodInvariant("96",pluginName):void 0;if(EventPluginRegistry.plugins[pluginIndex]){continue}!pluginModule.extractEvents?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",pluginName):_prodInvariant("97",pluginName):void 0;EventPluginRegistry.plugins[pluginIndex]=pluginModule;var publishedEvents=pluginModule.eventTypes;for(var eventName in publishedEvents){!publishEventForPlugin(publishedEvents[eventName],pluginModule,eventName)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",eventName,pluginName):_prodInvariant("98",eventName,pluginName):void 0}}}function publishEventForPlugin(dispatchConfig,pluginModule,eventName){!!EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(eventName)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",eventName):_prodInvariant("99",eventName):void 0;EventPluginRegistry.eventNameDispatchConfigs[eventName]=dispatchConfig;var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;if(phasedRegistrationNames){for(var phaseName in phasedRegistrationNames){if(phasedRegistrationNames.hasOwnProperty(phaseName)){var phasedRegistrationName=phasedRegistrationNames[phaseName];publishRegistrationName(phasedRegistrationName,pluginModule,eventName)}}return true}else if(dispatchConfig.registrationName){publishRegistrationName(dispatchConfig.registrationName,pluginModule,eventName);return true}return false}function publishRegistrationName(registrationName,pluginModule,eventName){!!EventPluginRegistry.registrationNameModules[registrationName]?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",registrationName):_prodInvariant("100",registrationName):void 0;EventPluginRegistry.registrationNameModules[registrationName]=pluginModule;EventPluginRegistry.registrationNameDependencies[registrationName]=pluginModule.eventTypes[eventName].dependencies;if(process.env.NODE_ENV!=="production"){var lowerCasedName=registrationName.toLowerCase();EventPluginRegistry.possibleRegistrationNames[lowerCasedName]=registrationName;if(registrationName==="onDoubleClick"){EventPluginRegistry.possibleRegistrationNames.ondblclick=registrationName}}}var EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:process.env.NODE_ENV!=="production"?{}:null,injectEventPluginOrder:function(injectedEventPluginOrder){!!eventPluginOrder?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):_prodInvariant("101"):void 0;eventPluginOrder=Array.prototype.slice.call(injectedEventPluginOrder);recomputePluginOrdering()},injectEventPluginsByName:function(injectedNamesToPlugins){var isOrderingDirty=false;for(var pluginName in injectedNamesToPlugins){if(!injectedNamesToPlugins.hasOwnProperty(pluginName)){continue}var pluginModule=injectedNamesToPlugins[pluginName];if(!namesToPlugins.hasOwnProperty(pluginName)||namesToPlugins[pluginName]!==pluginModule){!!namesToPlugins[pluginName]?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",pluginName):_prodInvariant("102",pluginName):void 0;namesToPlugins[pluginName]=pluginModule;isOrderingDirty=true}}if(isOrderingDirty){recomputePluginOrdering()}},getPluginModuleForEvent:function(event){var dispatchConfig=event.dispatchConfig;if(dispatchConfig.registrationName){return EventPluginRegistry.registrationNameModules[dispatchConfig.registrationName]||null}if(dispatchConfig.phasedRegistrationNames!==undefined){var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;for(var phase in phasedRegistrationNames){if(!phasedRegistrationNames.hasOwnProperty(phase)){continue}var pluginModule=EventPluginRegistry.registrationNameModules[phasedRegistrationNames[phase]];if(pluginModule){return pluginModule}}}return null},_resetEventPlugins:function(){eventPluginOrder=null;for(var pluginName in namesToPlugins){if(namesToPlugins.hasOwnProperty(pluginName)){delete namesToPlugins[pluginName]}}EventPluginRegistry.plugins.length=0;var eventNameDispatchConfigs=EventPluginRegistry.eventNameDispatchConfigs;for(var eventName in eventNameDispatchConfigs){if(eventNameDispatchConfigs.hasOwnProperty(eventName)){delete eventNameDispatchConfigs[eventName]}}var registrationNameModules=EventPluginRegistry.registrationNameModules;for(var registrationName in registrationNameModules){if(registrationNameModules.hasOwnProperty(registrationName)){delete registrationNameModules[registrationName]}}if(process.env.NODE_ENV!=="production"){var possibleRegistrationNames=EventPluginRegistry.possibleRegistrationNames;for(var lowerCasedName in possibleRegistrationNames){if(possibleRegistrationNames.hasOwnProperty(lowerCasedName)){delete possibleRegistrationNames[lowerCasedName]}}}}};module.exports=EventPluginRegistry}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],86:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactErrorUtils=require("./ReactErrorUtils");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ComponentTree;var TreeTraversal;var injection={injectComponentTree:function(Injected){ComponentTree=Injected;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(Injected&&Injected.getNodeFromInstance&&Injected.getInstanceFromNode,"EventPluginUtils.injection.injectComponentTree(...): Injected "+"module is missing getNodeFromInstance or getInstanceFromNode."):void 0}},injectTreeTraversal:function(Injected){TreeTraversal=Injected;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(Injected&&Injected.isAncestor&&Injected.getLowestCommonAncestor,"EventPluginUtils.injection.injectTreeTraversal(...): Injected "+"module is missing isAncestor or getLowestCommonAncestor."):void 0}}};function isEndish(topLevelType){return topLevelType==="topMouseUp"||topLevelType==="topTouchEnd"||topLevelType==="topTouchCancel"}function isMoveish(topLevelType){return topLevelType==="topMouseMove"||topLevelType==="topTouchMove"}function isStartish(topLevelType){return topLevelType==="topMouseDown"||topLevelType==="topTouchStart"}var validateEventDispatches;if(process.env.NODE_ENV!=="production"){validateEventDispatches=function(event){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;var listenersIsArr=Array.isArray(dispatchListeners);var listenersLen=listenersIsArr?dispatchListeners.length:dispatchListeners?1:0;var instancesIsArr=Array.isArray(dispatchInstances);var instancesLen=instancesIsArr?dispatchInstances.length:dispatchInstances?1:0;process.env.NODE_ENV!=="production"?warning(instancesIsArr===listenersIsArr&&instancesLen===listenersLen,"EventPluginUtils: Invalid `event`."):void 0}}function executeDispatch(event,simulated,listener,inst){var type=event.type||"unknown-event";event.currentTarget=EventPluginUtils.getNodeFromInstance(inst);if(simulated){ReactErrorUtils.invokeGuardedCallbackWithCatch(type,listener,event)}else{ReactErrorUtils.invokeGuardedCallback(type,listener,event)}event.currentTarget=null}function executeDispatchesInOrder(event,simulated){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length;i++){if(event.isPropagationStopped()){break}executeDispatch(event,simulated,dispatchListeners[i],dispatchInstances[i])}}else if(dispatchListeners){executeDispatch(event,simulated,dispatchListeners,dispatchInstances)}event._dispatchListeners=null;event._dispatchInstances=null}function executeDispatchesInOrderStopAtTrueImpl(event){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length;i++){if(event.isPropagationStopped()){break}if(dispatchListeners[i](event,dispatchInstances[i])){return dispatchInstances[i]}}}else if(dispatchListeners){if(dispatchListeners(event,dispatchInstances)){return dispatchInstances}}return null}function executeDispatchesInOrderStopAtTrue(event){var ret=executeDispatchesInOrderStopAtTrueImpl(event);event._dispatchInstances=null;event._dispatchListeners=null;return ret}function executeDirectDispatch(event){if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}var dispatchListener=event._dispatchListeners;var dispatchInstance=event._dispatchInstances;!!Array.isArray(dispatchListener)?process.env.NODE_ENV!=="production"?invariant(false,"executeDirectDispatch(...): Invalid `event`."):_prodInvariant("103"):void 0;event.currentTarget=dispatchListener?EventPluginUtils.getNodeFromInstance(dispatchInstance):null;var res=dispatchListener?dispatchListener(event):null;event.currentTarget=null;event._dispatchListeners=null;event._dispatchInstances=null;return res}function hasDispatches(event){return!!event._dispatchListeners}var EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getInstanceFromNode:function(node){return ComponentTree.getInstanceFromNode(node)},getNodeFromInstance:function(node){return ComponentTree.getNodeFromInstance(node)},isAncestor:function(a,b){return TreeTraversal.isAncestor(a,b)},getLowestCommonAncestor:function(a,b){return TreeTraversal.getLowestCommonAncestor(a,b)},getParentInstance:function(inst){return TreeTraversal.getParentInstance(inst)},traverseTwoPhase:function(target,fn,arg){return TreeTraversal.traverseTwoPhase(target,fn,arg)},traverseEnterLeave:function(from,to,fn,argFrom,argTo){return TreeTraversal.traverseEnterLeave(from,to,fn,argFrom,argTo)},injection:injection};module.exports=EventPluginUtils}).call(this,require("_process"))},{"./ReactErrorUtils":121,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56}],87:[function(require,module,exports){(function(process){"use strict";var EventPluginHub=require("./EventPluginHub");var EventPluginUtils=require("./EventPluginUtils");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var warning=require("fbjs/lib/warning");var getListener=EventPluginHub.getListener;function listenerAtPhase(inst,event,propagationPhase){var registrationName=event.dispatchConfig.phasedRegistrationNames[propagationPhase];return getListener(inst,registrationName)}function accumulateDirectionalDispatches(inst,phase,event){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(inst,"Dispatching inst must not be null"):void 0}var listener=listenerAtPhase(inst,event,phase);if(listener){event._dispatchListeners=accumulateInto(event._dispatchListeners,listener);event._dispatchInstances=accumulateInto(event._dispatchInstances,inst)}}function accumulateTwoPhaseDispatchesSingle(event){if(event&&event.dispatchConfig.phasedRegistrationNames){EventPluginUtils.traverseTwoPhase(event._targetInst,accumulateDirectionalDispatches,event)}}function accumulateTwoPhaseDispatchesSingleSkipTarget(event){if(event&&event.dispatchConfig.phasedRegistrationNames){var targetInst=event._targetInst;var parentInst=targetInst?EventPluginUtils.getParentInstance(targetInst):null;EventPluginUtils.traverseTwoPhase(parentInst,accumulateDirectionalDispatches,event)}}function accumulateDispatches(inst,ignoredDirection,event){if(event&&event.dispatchConfig.registrationName){var registrationName=event.dispatchConfig.registrationName;var listener=getListener(inst,registrationName);if(listener){event._dispatchListeners=accumulateInto(event._dispatchListeners,listener);event._dispatchInstances=accumulateInto(event._dispatchInstances,inst)}}}function accumulateDirectDispatchesSingle(event){if(event&&event.dispatchConfig.registrationName){accumulateDispatches(event._targetInst,null,event)}}function accumulateTwoPhaseDispatches(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(leave,enter,from,to){EventPluginUtils.traverseEnterLeave(from,to,accumulateDispatches,leave,enter)}function accumulateDirectDispatches(events){forEachAccumulated(events,accumulateDirectDispatchesSingle)}var EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators}).call(this,require("_process"))},{"./EventPluginHub":84,"./EventPluginUtils":86,"./accumulateInto":165,"./forEachAccumulated":173,_process:407,"fbjs/lib/warning":56}],88:[function(require,module,exports){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var getTextContentAccessor=require("./getTextContentAccessor");function FallbackCompositionState(root){this._root=root;this._startText=this.getText();this._fallbackText=null}_assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null;this._startText=null;this._fallbackText=null},getText:function(){if("value"in this._root){return this._root.value}return this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText){return this._fallbackText}var start;var startValue=this._startText;var startLength=startValue.length;var end;var endValue=this.getText();var endLength=endValue.length;for(start=0;start<startLength;start++){if(startValue[start]!==endValue[start]){break}}var minEnd=startLength-start;for(end=1;end<=minEnd;end++){if(startValue[startLength-end]!==endValue[endLength-end]){break}}var sliceTail=end>1?1-end:undefined;this._fallbackText=endValue.slice(start,sliceTail);return this._fallbackText}});PooledClass.addPoolingTo(FallbackCompositionState);module.exports=FallbackCompositionState},{"./PooledClass":92,"./getTextContentAccessor":181,"object-assign":63}],89:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY;var HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE;var HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE;var HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE;var HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE;var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:HAS_BOOLEAN_VALUE,allowTransparency:0,alt:0,as:0,async:HAS_BOOLEAN_VALUE,autoComplete:0,autoPlay:HAS_BOOLEAN_VALUE,capture:HAS_BOOLEAN_VALUE,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,cite:0,classID:0,className:0,cols:HAS_POSITIVE_NUMERIC_VALUE,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:HAS_BOOLEAN_VALUE,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:0,disabled:HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:0,frameBorder:0,headers:0,height:0,hidden:HAS_BOOLEAN_VALUE,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:HAS_BOOLEAN_VALUE,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:0,nonce:0,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:0,pattern:0,placeholder:0,playsInline:HAS_BOOLEAN_VALUE,poster:0,preload:0,profile:0,radioGroup:0,readOnly:HAS_BOOLEAN_VALUE,referrerPolicy:0,rel:0,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:0,rows:HAS_POSITIVE_NUMERIC_VALUE,rowSpan:HAS_NUMERIC_VALUE,sandbox:0,scope:0,scoped:HAS_BOOLEAN_VALUE,scrolling:0,seamless:HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:0,size:HAS_POSITIVE_NUMERIC_VALUE,sizes:0,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:HAS_NUMERIC_VALUE,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:HAS_BOOLEAN_VALUE,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(node,value){if(value==null){return node.removeAttribute("value")}if(node.type!=="number"||node.hasAttribute("value")===false){node.setAttribute("value",""+value)}else if(node.validity&&!node.validity.badInput&&node.ownerDocument.activeElement!==node){node.setAttribute("value",""+value)}}}};module.exports=HTMLDOMPropertyConfig},{"./DOMProperty":79}],90:[function(require,module,exports){"use strict";function escape(key){var escapeRegex=/[=:]/g;var escaperLookup={"=":"=0",":":"=2"};var escapedString=(""+key).replace(escapeRegex,function(match){return escaperLookup[match]});return"$"+escapedString}function unescape(key){var unescapeRegex=/(=0|=2)/g;var unescaperLookup={"=0":"=","=2":":"};var keySubstring=key[0]==="."&&key[1]==="$"?key.substring(2):key.substring(1);return(""+keySubstring).replace(unescapeRegex,function(match){return unescaperLookup[match]})}var KeyEscapeUtils={escape:escape,unescape:unescape};module.exports=KeyEscapeUtils},{}],91:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var propTypesFactory=require("prop-types/factory");var React=require("react/lib/React");var PropTypes=propTypesFactory(React.isValidElement);var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var hasReadOnlyValue={button:true,checkbox:true,image:true,hidden:true,radio:true,reset:true,submit:true};function _assertSingleLink(inputProps){!(inputProps.checkedLink==null||inputProps.valueLink==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):_prodInvariant("87"):void 0}function _assertValueLink(inputProps){_assertSingleLink(inputProps);!(inputProps.value==null&&inputProps.onChange==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):_prodInvariant("88"):void 0}function _assertCheckedLink(inputProps){_assertSingleLink(inputProps);!(inputProps.checked==null&&inputProps.onChange==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):_prodInvariant("89"):void 0}var propTypes={value:function(props,propName,componentName){if(!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled){return null}return new Error("You provided a `value` prop to a form field without an "+"`onChange` handler. This will render a read-only field. If "+"the field should be mutable use `defaultValue`. Otherwise, "+"set either `onChange` or `readOnly`.")},checked:function(props,propName,componentName){if(!props[propName]||props.onChange||props.readOnly||props.disabled){return null}return new Error("You provided a `checked` prop to a form field without an "+"`onChange` handler. This will render a read-only field. If "+"the field should be mutable use `defaultChecked`. Otherwise, "+"set either `onChange` or `readOnly`.")},onChange:PropTypes.func};var loggedTypeFailures={};function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var LinkedValueUtils={checkPropTypes:function(tagName,props,owner){for(var propName in propTypes){if(propTypes.hasOwnProperty(propName)){var error=propTypes[propName](props,propName,tagName,"prop",null,ReactPropTypesSecret)}if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var addendum=getDeclarationErrorAddendum(owner);process.env.NODE_ENV!=="production"?warning(false,"Failed form propType: %s%s",error.message,addendum):void 0}}},getValue:function(inputProps){if(inputProps.valueLink){_assertValueLink(inputProps);return inputProps.valueLink.value}return inputProps.value},getChecked:function(inputProps){if(inputProps.checkedLink){_assertCheckedLink(inputProps);return inputProps.checkedLink.value}return inputProps.checked},executeOnChange:function(inputProps,event){if(inputProps.valueLink){_assertValueLink(inputProps);return inputProps.valueLink.requestChange(event.target.value)}else if(inputProps.checkedLink){_assertCheckedLink(inputProps);return inputProps.checkedLink.requestChange(event.target.checked)}else if(inputProps.onChange){return inputProps.onChange.call(undefined,event)}}};module.exports=LinkedValueUtils}).call(this,require("_process"))},{"./ReactPropTypesSecret":138,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"prop-types/factory":65,"react/lib/React":197}],92:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var oneArgumentPooler=function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,copyFieldsFrom);return instance}else{return new Klass(copyFieldsFrom)}};var twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2);return instance}else{return new Klass(a1,a2)}};var threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2,a3);return instance}else{return new Klass(a1,a2,a3)}};var fourArgumentPooler=function(a1,a2,a3,a4){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2,a3,a4);return instance}else{return new Klass(a1,a2,a3,a4)}};var standardReleaser=function(instance){var Klass=this;!(instance instanceof Klass)?process.env.NODE_ENV!=="production"?invariant(false,"Trying to release an instance into a pool of a different type."):_prodInvariant("25"):void 0;instance.destructor();if(Klass.instancePool.length<Klass.poolSize){Klass.instancePool.push(instance)}};var DEFAULT_POOL_SIZE=10;var DEFAULT_POOLER=oneArgumentPooler;var addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;NewKlass.instancePool=[];NewKlass.getPooled=pooler||DEFAULT_POOLER;if(!NewKlass.poolSize){NewKlass.poolSize=DEFAULT_POOL_SIZE}NewKlass.release=standardReleaser;return NewKlass};var PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler};module.exports=PooledClass}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],93:[function(require,module,exports){"use strict";var _assign=require("object-assign");var EventPluginRegistry=require("./EventPluginRegistry");var ReactEventEmitterMixin=require("./ReactEventEmitterMixin");var ViewportMetrics=require("./ViewportMetrics");var getVendorPrefixedEventName=require("./getVendorPrefixedEventName");var isEventSupported=require("./isEventSupported");var hasEventPageXY;var alreadyListeningTo={};var isMonitoringScrollValue=false;var reactTopListenersCounter=0;var topEventMapping={topAbort:"abort",topAnimationEnd:getVendorPrefixedEventName("animationend")||"animationend",topAnimationIteration:getVendorPrefixedEventName("animationiteration")||"animationiteration",topAnimationStart:getVendorPrefixedEventName("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:getVendorPrefixedEventName("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"};var topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2);function getListeningForDocument(mountAt){if(!Object.prototype.hasOwnProperty.call(mountAt,topListenersIDKey)){mountAt[topListenersIDKey]=reactTopListenersCounter++;alreadyListeningTo[mountAt[topListenersIDKey]]={}}return alreadyListeningTo[mountAt[topListenersIDKey]]}var ReactBrowserEventEmitter=_assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(ReactEventListener){ReactEventListener.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel);ReactBrowserEventEmitter.ReactEventListener=ReactEventListener}},setEnabled:function(enabled){if(ReactBrowserEventEmitter.ReactEventListener){ReactBrowserEventEmitter.ReactEventListener.setEnabled(enabled)}},isEnabled:function(){return!!(ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(registrationName,contentDocumentHandle){var mountAt=contentDocumentHandle;var isListening=getListeningForDocument(mountAt);var dependencies=EventPluginRegistry.registrationNameDependencies[registrationName];for(var i=0;i<dependencies.length;i++){var dependency=dependencies[i];if(!(isListening.hasOwnProperty(dependency)&&isListening[dependency])){if(dependency==="topWheel"){if(isEventSupported("wheel")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","wheel",mountAt)}else if(isEventSupported("mousewheel")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",mountAt)}else{ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",mountAt)}}else if(dependency==="topScroll"){if(isEventSupported("scroll",true)){ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topScroll","scroll",mountAt)}else{ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topScroll","scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE)}}else if(dependency==="topFocus"||dependency==="topBlur"){if(isEventSupported("focus",true)){ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topFocus","focus",mountAt);ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topBlur","blur",mountAt)}else if(isEventSupported("focusin")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topFocus","focusin",mountAt);ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topBlur","focusout",mountAt)}isListening.topBlur=true;isListening.topFocus=true}else if(topEventMapping.hasOwnProperty(dependency)){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency,topEventMapping[dependency],mountAt)}isListening[dependency]=true}}},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelType,handlerBaseName,handle)},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelType,handlerBaseName,handle)},supportsEventPageXY:function(){if(!document.createEvent){return false}var ev=document.createEvent("MouseEvent");return ev!=null&&"pageX"in ev},ensureScrollValueMonitoring:function(){if(hasEventPageXY===undefined){hasEventPageXY=ReactBrowserEventEmitter.supportsEventPageXY()}if(!hasEventPageXY&&!isMonitoringScrollValue){var refresh=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(refresh);isMonitoringScrollValue=true}}});module.exports=ReactBrowserEventEmitter},{"./EventPluginRegistry":85,"./ReactEventEmitterMixin":122,"./ViewportMetrics":164,"./getVendorPrefixedEventName":182,"./isEventSupported":185,"object-assign":63}],94:[function(require,module,exports){(function(process){"use strict";var ReactReconciler=require("./ReactReconciler");var instantiateReactComponent=require("./instantiateReactComponent");var KeyEscapeUtils=require("./KeyEscapeUtils");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var traverseAllChildren=require("./traverseAllChildren");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}function instantiateChild(childInstances,child,name,selfDebugID){var keyUnique=childInstances[name]===undefined;if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(!keyUnique){process.env.NODE_ENV!=="production"?warning(false,"flattenChildren(...): Encountered two children with the same key, "+"`%s`. Child keys must be unique; when two children share a key, only "+"the first child will be used.%s",KeyEscapeUtils.unescape(name),ReactComponentTreeHook.getStackAddendumByID(selfDebugID)):void 0}}if(child!=null&&keyUnique){childInstances[name]=instantiateReactComponent(child,true)}}var ReactChildReconciler={instantiateChildren:function(nestedChildNodes,transaction,context,selfDebugID){if(nestedChildNodes==null){return null}var childInstances={};if(process.env.NODE_ENV!=="production"){traverseAllChildren(nestedChildNodes,function(childInsts,child,name){return instantiateChild(childInsts,child,name,selfDebugID)},childInstances)}else{traverseAllChildren(nestedChildNodes,instantiateChild,childInstances)}return childInstances},updateChildren:function(prevChildren,nextChildren,mountImages,removedNodes,transaction,hostParent,hostContainerInfo,context,selfDebugID){if(!nextChildren&&!prevChildren){return}var name;var prevChild;for(name in nextChildren){if(!nextChildren.hasOwnProperty(name)){continue}prevChild=prevChildren&&prevChildren[name];var prevElement=prevChild&&prevChild._currentElement;var nextElement=nextChildren[name];if(prevChild!=null&&shouldUpdateReactComponent(prevElement,nextElement)){ReactReconciler.receiveComponent(prevChild,nextElement,transaction,context);nextChildren[name]=prevChild}else{if(prevChild){removedNodes[name]=ReactReconciler.getHostNode(prevChild);ReactReconciler.unmountComponent(prevChild,false)}var nextChildInstance=instantiateReactComponent(nextElement,true);nextChildren[name]=nextChildInstance;var nextChildMountImage=ReactReconciler.mountComponent(nextChildInstance,transaction,hostParent,hostContainerInfo,context,selfDebugID);mountImages.push(nextChildMountImage)}}for(name in prevChildren){if(prevChildren.hasOwnProperty(name)&&!(nextChildren&&nextChildren.hasOwnProperty(name))){prevChild=prevChildren[name];removedNodes[name]=ReactReconciler.getHostNode(prevChild);ReactReconciler.unmountComponent(prevChild,false)}}},unmountChildren:function(renderedChildren,safely){for(var name in renderedChildren){if(renderedChildren.hasOwnProperty(name)){var renderedChild=renderedChildren[name];ReactReconciler.unmountComponent(renderedChild,safely)}}}};module.exports=ReactChildReconciler}).call(this,require("_process"))},{"./KeyEscapeUtils":90,"./ReactReconciler":140,"./instantiateReactComponent":184,"./shouldUpdateReactComponent":192,"./traverseAllChildren":193,_process:407,"fbjs/lib/warning":56,"react/lib/ReactComponentTreeHook":200}],95:[function(require,module,exports){"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations");var ReactDOMIDOperations=require("./ReactDOMIDOperations");var ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup};module.exports=ReactComponentBrowserEnvironment},{"./DOMChildrenOperations":76,"./ReactDOMIDOperations":105}],96:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var injected=false;var ReactComponentEnvironment={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(environment){!!injected?process.env.NODE_ENV!=="production"?invariant(false,"ReactCompositeComponent: injectEnvironment() can only be called once."):_prodInvariant("104"):void 0;ReactComponentEnvironment.replaceNodeWithMarkup=environment.replaceNodeWithMarkup;ReactComponentEnvironment.processChildrenUpdates=environment.processChildrenUpdates;injected=true}}};module.exports=ReactComponentEnvironment}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],97:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var React=require("react/lib/React");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactErrorUtils=require("./ReactErrorUtils");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactNodeTypes=require("./ReactNodeTypes");var ReactReconciler=require("./ReactReconciler");if(process.env.NODE_ENV!=="production"){var checkReactTypeSpec=require("./checkReactTypeSpec")}var emptyObject=require("fbjs/lib/emptyObject");var invariant=require("fbjs/lib/invariant");var shallowEqual=require("fbjs/lib/shallowEqual");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var warning=require("fbjs/lib/warning");var CompositeTypes={ImpureClass:0,PureClass:1,StatelessFunctional:2};function StatelessComponent(Component){}StatelessComponent.prototype.render=function(){var Component=ReactInstanceMap.get(this)._currentElement.type;var element=Component(this.props,this.context,this.updater);warnIfInvalidElement(Component,element);return element};function warnIfInvalidElement(Component,element){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(element===null||element===false||React.isValidElement(element),"%s(...): A valid React element (or null) must be returned. You may have "+"returned undefined, an array or some other invalid object.",Component.displayName||Component.name||"Component"):void 0;process.env.NODE_ENV!=="production"?warning(!Component.childContextTypes,"%s(...): childContextTypes cannot be defined on a functional component.",Component.displayName||Component.name||"Component"):void 0}}function shouldConstruct(Component){return!!(Component.prototype&&Component.prototype.isReactComponent)}function isPureComponent(Component){return!!(Component.prototype&&Component.prototype.isPureReactComponent)}function measureLifeCyclePerf(fn,debugID,timerType){if(debugID===0){return fn()}ReactInstrumentation.debugTool.onBeginLifeCycleTimer(debugID,timerType);try{return fn()}finally{ReactInstrumentation.debugTool.onEndLifeCycleTimer(debugID,timerType)}}var nextMountID=1;var ReactCompositeComponent={construct:function(element){this._currentElement=element;this._rootNodeID=0;this._compositeType=null;this._instance=null;this._hostParent=null;this._hostContainerInfo=null;this._updateBatchNumber=null;this._pendingElement=null;this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;this._renderedNodeType=null;this._renderedComponent=null;this._context=null;this._mountOrder=0;this._topLevelWrapper=null;this._pendingCallbacks=null;this._calledComponentWillUnmount=false;if(process.env.NODE_ENV!=="production"){this._warnedAboutRefsInRender=false}},mountComponent:function(transaction,hostParent,hostContainerInfo,context){var _this=this;this._context=context;this._mountOrder=nextMountID++;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var publicProps=this._currentElement.props;var publicContext=this._processContext(context);var Component=this._currentElement.type;var updateQueue=transaction.getUpdateQueue();var doConstruct=shouldConstruct(Component);var inst=this._constructComponent(doConstruct,publicProps,publicContext,updateQueue);var renderedElement;if(!doConstruct&&(inst==null||inst.render==null)){renderedElement=inst;warnIfInvalidElement(Component,renderedElement);!(inst===null||inst===false||React.isValidElement(inst))?process.env.NODE_ENV!=="production"?invariant(false,"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",Component.displayName||Component.name||"Component"):_prodInvariant("105",Component.displayName||Component.name||"Component"):void 0;inst=new StatelessComponent(Component);this._compositeType=CompositeTypes.StatelessFunctional}else{if(isPureComponent(Component)){this._compositeType=CompositeTypes.PureClass}else{this._compositeType=CompositeTypes.ImpureClass}}if(process.env.NODE_ENV!=="production"){if(inst.render==null){process.env.NODE_ENV!=="production"?warning(false,"%s(...): No `render` method found on the returned component "+"instance: you may have forgotten to define `render`.",Component.displayName||Component.name||"Component"):void 0}var propsMutated=inst.props!==publicProps;var componentName=Component.displayName||Component.name||"Component";process.env.NODE_ENV!=="production"?warning(inst.props===undefined||!propsMutated,"%s(...): When calling super() in `%s`, make sure to pass "+"up the same props that your component's constructor was passed.",componentName,componentName):void 0}inst.props=publicProps;inst.context=publicContext;inst.refs=emptyObject;inst.updater=updateQueue;this._instance=inst;ReactInstanceMap.set(inst,this);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!inst.getInitialState||inst.getInitialState.isReactClassApproved||inst.state,"getInitialState was defined on %s, a plain JavaScript class. "+"This is only supported for classes created using React.createClass. "+"Did you mean to define a state property instead?",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.getDefaultProps||inst.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. "+"This is only supported for classes created using React.createClass. "+"Use a static property to define defaultProps instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.propTypes,"propTypes was defined as an instance property on %s. Use a static "+"property to define propTypes instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.contextTypes,"contextTypes was defined as an instance property on %s. Use a "+"static property to define contextTypes instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentShouldUpdate!=="function","%s has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value.",this.getName()||"A component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentDidUnmount!=="function","%s has a method called "+"componentDidUnmount(). But there is no such lifecycle method. "+"Did you mean componentWillUnmount()?",this.getName()||"A component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentWillRecieveProps!=="function","%s has a method called "+"componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component"):void 0}var initialState=inst.state;if(initialState===undefined){inst.state=initialState=null}!(typeof initialState==="object"&&!Array.isArray(initialState))?process.env.NODE_ENV!=="production"?invariant(false,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):_prodInvariant("106",this.getName()||"ReactCompositeComponent"):void 0;this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;var markup;if(inst.unstable_handleError){markup=this.performInitialMountWithErrorHandling(renderedElement,hostParent,hostContainerInfo,transaction,context)}else{markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}if(inst.componentDidMount){if(process.env.NODE_ENV!=="production"){transaction.getReactMountReady().enqueue(function(){measureLifeCyclePerf(function(){return inst.componentDidMount()},_this._debugID,"componentDidMount")})}else{transaction.getReactMountReady().enqueue(inst.componentDidMount,inst)}}return markup},_constructComponent:function(doConstruct,publicProps,publicContext,updateQueue){if(process.env.NODE_ENV!=="production"&&!doConstruct){ReactCurrentOwner.current=this;try{return this._constructComponentWithoutOwner(doConstruct,publicProps,publicContext,updateQueue)}finally{ReactCurrentOwner.current=null}}else{return this._constructComponentWithoutOwner(doConstruct,publicProps,publicContext,updateQueue)}},_constructComponentWithoutOwner:function(doConstruct,publicProps,publicContext,updateQueue){var Component=this._currentElement.type;if(doConstruct){if(process.env.NODE_ENV!=="production"){return measureLifeCyclePerf(function(){return new Component(publicProps,publicContext,updateQueue)},this._debugID,"ctor")}else{return new Component(publicProps,publicContext,updateQueue)}}if(process.env.NODE_ENV!=="production"){return measureLifeCyclePerf(function(){return Component(publicProps,publicContext,updateQueue)},this._debugID,"render")}else{return Component(publicProps,publicContext,updateQueue)}},performInitialMountWithErrorHandling:function(renderedElement,hostParent,hostContainerInfo,transaction,context){var markup;var checkpoint=transaction.checkpoint();try{markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}catch(e){transaction.rollback(checkpoint);this._instance.unstable_handleError(e);if(this._pendingStateQueue){this._instance.state=this._processPendingState(this._instance.props,this._instance.context)}checkpoint=transaction.checkpoint();this._renderedComponent.unmountComponent(true);transaction.rollback(checkpoint);markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}return markup},performInitialMount:function(renderedElement,hostParent,hostContainerInfo,transaction,context){var inst=this._instance;var debugID=0;if(process.env.NODE_ENV!=="production"){debugID=this._debugID}if(inst.componentWillMount){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillMount()},debugID,"componentWillMount")}else{inst.componentWillMount()}if(this._pendingStateQueue){inst.state=this._processPendingState(inst.props,inst.context)}}if(renderedElement===undefined){renderedElement=this._renderValidatedComponent()}var nodeType=ReactNodeTypes.getType(renderedElement);this._renderedNodeType=nodeType;var child=this._instantiateReactComponent(renderedElement,nodeType!==ReactNodeTypes.EMPTY);this._renderedComponent=child;var markup=ReactReconciler.mountComponent(child,transaction,hostParent,hostContainerInfo,this._processChildContext(context),debugID);if(process.env.NODE_ENV!=="production"){if(debugID!==0){var childDebugIDs=child._debugID!==0?[child._debugID]:[];ReactInstrumentation.debugTool.onSetChildren(debugID,childDebugIDs)}}return markup},getHostNode:function(){return ReactReconciler.getHostNode(this._renderedComponent)},unmountComponent:function(safely){if(!this._renderedComponent){return}var inst=this._instance;if(inst.componentWillUnmount&&!inst._calledComponentWillUnmount){inst._calledComponentWillUnmount=true;if(safely){var name=this.getName()+".componentWillUnmount()";ReactErrorUtils.invokeGuardedCallback(name,inst.componentWillUnmount.bind(inst))}else{if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillUnmount()},this._debugID,"componentWillUnmount")}else{inst.componentWillUnmount()}}}if(this._renderedComponent){ReactReconciler.unmountComponent(this._renderedComponent,safely);this._renderedNodeType=null;this._renderedComponent=null;this._instance=null}this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;this._pendingCallbacks=null;this._pendingElement=null;this._context=null;this._rootNodeID=0;this._topLevelWrapper=null;ReactInstanceMap.remove(inst)},_maskContext:function(context){var Component=this._currentElement.type;var contextTypes=Component.contextTypes;if(!contextTypes){return emptyObject}var maskedContext={};for(var contextName in contextTypes){maskedContext[contextName]=context[contextName]}return maskedContext},_processContext:function(context){var maskedContext=this._maskContext(context);if(process.env.NODE_ENV!=="production"){var Component=this._currentElement.type;if(Component.contextTypes){this._checkContextTypes(Component.contextTypes,maskedContext,"context")}}return maskedContext},_processChildContext:function(currentContext){var Component=this._currentElement.type;var inst=this._instance;var childContext;if(inst.getChildContext){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onBeginProcessingChildContext();try{childContext=inst.getChildContext()}finally{ReactInstrumentation.debugTool.onEndProcessingChildContext()}}else{childContext=inst.getChildContext()}}if(childContext){!(typeof Component.childContextTypes==="object")?process.env.NODE_ENV!=="production"?invariant(false,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):_prodInvariant("107",this.getName()||"ReactCompositeComponent"):void 0;if(process.env.NODE_ENV!=="production"){this._checkContextTypes(Component.childContextTypes,childContext,"child context")}for(var name in childContext){!(name in Component.childContextTypes)?process.env.NODE_ENV!=="production"?invariant(false,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",name):_prodInvariant("108",this.getName()||"ReactCompositeComponent",name):void 0}return _assign({},currentContext,childContext)}return currentContext},_checkContextTypes:function(typeSpecs,values,location){if(process.env.NODE_ENV!=="production"){checkReactTypeSpec(typeSpecs,values,location,this.getName(),null,this._debugID)}},receiveComponent:function(nextElement,transaction,nextContext){var prevElement=this._currentElement;var prevContext=this._context;this._pendingElement=null;this.updateComponent(transaction,prevElement,nextElement,prevContext,nextContext)},performUpdateIfNecessary:function(transaction){if(this._pendingElement!=null){ReactReconciler.receiveComponent(this,this._pendingElement,transaction,this._context)}else if(this._pendingStateQueue!==null||this._pendingForceUpdate){this.updateComponent(transaction,this._currentElement,this._currentElement,this._context,this._context)}else{this._updateBatchNumber=null}},updateComponent:function(transaction,prevParentElement,nextParentElement,prevUnmaskedContext,nextUnmaskedContext){var inst=this._instance;!(inst!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Attempted to update component `%s` that has already been unmounted (or failed to mount).",this.getName()||"ReactCompositeComponent"):_prodInvariant("136",this.getName()||"ReactCompositeComponent"):void 0;var willReceive=false;var nextContext;if(this._context===nextUnmaskedContext){nextContext=inst.context}else{nextContext=this._processContext(nextUnmaskedContext);willReceive=true}var prevProps=prevParentElement.props;var nextProps=nextParentElement.props;if(prevParentElement!==nextParentElement){willReceive=true}if(willReceive&&inst.componentWillReceiveProps){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillReceiveProps(nextProps,nextContext)},this._debugID,"componentWillReceiveProps")}else{inst.componentWillReceiveProps(nextProps,nextContext)}}var nextState=this._processPendingState(nextProps,nextContext);var shouldUpdate=true;if(!this._pendingForceUpdate){if(inst.shouldComponentUpdate){if(process.env.NODE_ENV!=="production"){shouldUpdate=measureLifeCyclePerf(function(){return inst.shouldComponentUpdate(nextProps,nextState,nextContext)},this._debugID,"shouldComponentUpdate")}else{shouldUpdate=inst.shouldComponentUpdate(nextProps,nextState,nextContext)}}else{if(this._compositeType===CompositeTypes.PureClass){shouldUpdate=!shallowEqual(prevProps,nextProps)||!shallowEqual(inst.state,nextState)}}}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(shouldUpdate!==undefined,"%s.shouldComponentUpdate(): Returned undefined instead of a "+"boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):void 0}this._updateBatchNumber=null;if(shouldUpdate){this._pendingForceUpdate=false;this._performComponentUpdate(nextParentElement,nextProps,nextState,nextContext,transaction,nextUnmaskedContext)}else{this._currentElement=nextParentElement;this._context=nextUnmaskedContext;inst.props=nextProps;inst.state=nextState;inst.context=nextContext}},_processPendingState:function(props,context){var inst=this._instance;var queue=this._pendingStateQueue;var replace=this._pendingReplaceState;this._pendingReplaceState=false;this._pendingStateQueue=null;if(!queue){return inst.state}if(replace&&queue.length===1){return queue[0]}var nextState=_assign({},replace?queue[0]:inst.state);for(var i=replace?1:0;i<queue.length;i++){var partial=queue[i];_assign(nextState,typeof partial==="function"?partial.call(inst,nextState,props,context):partial)}return nextState},_performComponentUpdate:function(nextElement,nextProps,nextState,nextContext,transaction,unmaskedContext){var _this2=this;var inst=this._instance;var hasComponentDidUpdate=Boolean(inst.componentDidUpdate);var prevProps;var prevState;var prevContext;if(hasComponentDidUpdate){prevProps=inst.props;prevState=inst.state;prevContext=inst.context}if(inst.componentWillUpdate){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillUpdate(nextProps,nextState,nextContext)},this._debugID,"componentWillUpdate")}else{inst.componentWillUpdate(nextProps,nextState,nextContext)}}this._currentElement=nextElement;this._context=unmaskedContext;inst.props=nextProps;inst.state=nextState;inst.context=nextContext;this._updateRenderedComponent(transaction,unmaskedContext);if(hasComponentDidUpdate){if(process.env.NODE_ENV!=="production"){transaction.getReactMountReady().enqueue(function(){measureLifeCyclePerf(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),_this2._debugID,"componentDidUpdate")})}else{transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),inst)}}},_updateRenderedComponent:function(transaction,context){var prevComponentInstance=this._renderedComponent;var prevRenderedElement=prevComponentInstance._currentElement;var nextRenderedElement=this._renderValidatedComponent();var debugID=0;if(process.env.NODE_ENV!=="production"){debugID=this._debugID}if(shouldUpdateReactComponent(prevRenderedElement,nextRenderedElement)){ReactReconciler.receiveComponent(prevComponentInstance,nextRenderedElement,transaction,this._processChildContext(context))}else{var oldHostNode=ReactReconciler.getHostNode(prevComponentInstance);ReactReconciler.unmountComponent(prevComponentInstance,false);var nodeType=ReactNodeTypes.getType(nextRenderedElement);this._renderedNodeType=nodeType;var child=this._instantiateReactComponent(nextRenderedElement,nodeType!==ReactNodeTypes.EMPTY);this._renderedComponent=child;var nextMarkup=ReactReconciler.mountComponent(child,transaction,this._hostParent,this._hostContainerInfo,this._processChildContext(context),debugID);if(process.env.NODE_ENV!=="production"){if(debugID!==0){var childDebugIDs=child._debugID!==0?[child._debugID]:[];ReactInstrumentation.debugTool.onSetChildren(debugID,childDebugIDs)}}this._replaceNodeWithMarkup(oldHostNode,nextMarkup,prevComponentInstance)}},_replaceNodeWithMarkup:function(oldHostNode,nextMarkup,prevInstance){ReactComponentEnvironment.replaceNodeWithMarkup(oldHostNode,nextMarkup,prevInstance)},_renderValidatedComponentWithoutOwnerOrContext:function(){var inst=this._instance;var renderedElement;if(process.env.NODE_ENV!=="production"){renderedElement=measureLifeCyclePerf(function(){return inst.render()},this._debugID,"render")}else{renderedElement=inst.render()}if(process.env.NODE_ENV!=="production"){if(renderedElement===undefined&&inst.render._isMockFunction){renderedElement=null}}return renderedElement},_renderValidatedComponent:function(){var renderedElement;if(process.env.NODE_ENV!=="production"||this._compositeType!==CompositeTypes.StatelessFunctional){ReactCurrentOwner.current=this;try{renderedElement=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}}else{renderedElement=this._renderValidatedComponentWithoutOwnerOrContext()}!(renderedElement===null||renderedElement===false||React.isValidElement(renderedElement))?process.env.NODE_ENV!=="production"?invariant(false,"%s.render(): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):_prodInvariant("109",this.getName()||"ReactCompositeComponent"):void 0;return renderedElement},attachRef:function(ref,component){var inst=this.getPublicInstance();!(inst!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Stateless function components cannot have refs."):_prodInvariant("110"):void 0;var publicComponentInstance=component.getPublicInstance();if(process.env.NODE_ENV!=="production"){var componentName=component&&component.getName?component.getName():"a component";process.env.NODE_ENV!=="production"?warning(publicComponentInstance!=null||component._compositeType!==CompositeTypes.StatelessFunctional,"Stateless function components cannot be given refs "+'(See ref "%s" in %s created by %s). '+"Attempts to access this ref will fail.",ref,componentName,this.getName()):void 0}var refs=inst.refs===emptyObject?inst.refs={}:inst.refs;refs[ref]=publicComponentInstance},detachRef:function(ref){var refs=this.getPublicInstance().refs;delete refs[ref]},getName:function(){var type=this._currentElement.type;var constructor=this._instance&&this._instance.constructor;return type.displayName||constructor&&constructor.displayName||type.name||constructor&&constructor.name||null},getPublicInstance:function(){var inst=this._instance;if(this._compositeType===CompositeTypes.StatelessFunctional){return null}return inst},_instantiateReactComponent:null};module.exports=ReactCompositeComponent}).call(this,require("_process"))},{"./ReactComponentEnvironment":96,"./ReactErrorUtils":121,"./ReactInstanceMap":129,"./ReactInstrumentation":130,"./ReactNodeTypes":135,"./ReactReconciler":140,"./checkReactTypeSpec":167,"./reactProdInvariant":188,"./shouldUpdateReactComponent":192,_process:407,"fbjs/lib/emptyObject":42,"fbjs/lib/invariant":49,"fbjs/lib/shallowEqual":55,"fbjs/lib/warning":56,"object-assign":63,"react/lib/React":197,"react/lib/ReactCurrentOwner":201}],98:[function(require,module,exports){(function(process){"use strict";var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDefaultInjection=require("./ReactDefaultInjection");var ReactMount=require("./ReactMount");var ReactReconciler=require("./ReactReconciler");var ReactUpdates=require("./ReactUpdates");var ReactVersion=require("./ReactVersion");var findDOMNode=require("./findDOMNode");var getHostComponentFromComposite=require("./getHostComponentFromComposite");var renderSubtreeIntoContainer=require("./renderSubtreeIntoContainer");var warning=require("fbjs/lib/warning");ReactDefaultInjection.inject();var ReactDOM={findDOMNode:findDOMNode,render:ReactMount.render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject==="function"){__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:ReactDOMComponentTree.getClosestInstanceFromNode,getNodeFromInstance:function(inst){if(inst._renderedComponent){inst=getHostComponentFromComposite(inst)}if(inst){return ReactDOMComponentTree.getNodeFromInstance(inst)}else{return null}}},Mount:ReactMount,Reconciler:ReactReconciler})}if(process.env.NODE_ENV!=="production"){var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");if(ExecutionEnvironment.canUseDOM&&window.top===window.self){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__==="undefined"){if(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1){var showFileUrlMessage=window.location.protocol.indexOf("http")===-1&&navigator.userAgent.indexOf("Firefox")===-1;console.debug("Download the React DevTools "+(showFileUrlMessage?"and use an HTTP server (instead of a file: URL) ":"")+"for a better development experience: "+"https://fb.me/react-devtools")}}var testFunc=function testFn(){};process.env.NODE_ENV!=="production"?warning((testFunc.name||testFunc.toString()).indexOf("testFn")!==-1,"It looks like you're using a minified copy of the development build "+"of React. When deploying React apps to production, make sure to use "+"the production build which skips development warnings and is faster. "+"See https://fb.me/react-minification for more details."):void 0;var ieCompatibilityMode=document.documentMode&&document.documentMode<8;process.env.NODE_ENV!=="production"?warning(!ieCompatibilityMode,"Internet Explorer is running in compatibility mode; please add the "+"following tag to your HTML to prevent this from happening: "+'<meta http-equiv="X-UA-Compatible" content="IE=edge" />'):void 0;var expectedFeatures=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.trim];for(var i=0;i<expectedFeatures.length;i++){if(!expectedFeatures[i]){process.env.NODE_ENV!=="production"?warning(false,"One or more ES5 shims expected by React are not available: "+"https://fb.me/react-warning-polyfills"):void 0;break}}}}if(process.env.NODE_ENV!=="production"){var ReactInstrumentation=require("./ReactInstrumentation");var ReactDOMUnknownPropertyHook=require("./ReactDOMUnknownPropertyHook");var ReactDOMNullInputValuePropHook=require("./ReactDOMNullInputValuePropHook");var ReactDOMInvalidARIAHook=require("./ReactDOMInvalidARIAHook");ReactInstrumentation.debugTool.addHook(ReactDOMUnknownPropertyHook);ReactInstrumentation.debugTool.addHook(ReactDOMNullInputValuePropHook);ReactInstrumentation.debugTool.addHook(ReactDOMInvalidARIAHook)}module.exports=ReactDOM}).call(this,require("_process"))},{"./ReactDOMComponentTree":101,"./ReactDOMInvalidARIAHook":107,"./ReactDOMNullInputValuePropHook":108,"./ReactDOMUnknownPropertyHook":115,"./ReactDefaultInjection":118,"./ReactInstrumentation":130,"./ReactMount":133,"./ReactReconciler":140,"./ReactUpdates":145,"./ReactVersion":146,"./findDOMNode":171,"./getHostComponentFromComposite":178,"./renderSubtreeIntoContainer":189,_process:407,"fbjs/lib/ExecutionEnvironment":35,"fbjs/lib/warning":56}],99:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var AutoFocusUtils=require("./AutoFocusUtils");var CSSPropertyOperations=require("./CSSPropertyOperations");var DOMLazyTree=require("./DOMLazyTree");var DOMNamespaces=require("./DOMNamespaces");var DOMProperty=require("./DOMProperty");var DOMPropertyOperations=require("./DOMPropertyOperations");var EventPluginHub=require("./EventPluginHub");var EventPluginRegistry=require("./EventPluginRegistry");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactDOMComponentFlags=require("./ReactDOMComponentFlags");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMInput=require("./ReactDOMInput");var ReactDOMOption=require("./ReactDOMOption");var ReactDOMSelect=require("./ReactDOMSelect");var ReactDOMTextarea=require("./ReactDOMTextarea");var ReactInstrumentation=require("./ReactInstrumentation");var ReactMultiChild=require("./ReactMultiChild");var ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction");var emptyFunction=require("fbjs/lib/emptyFunction");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var invariant=require("fbjs/lib/invariant");var isEventSupported=require("./isEventSupported");var shallowEqual=require("fbjs/lib/shallowEqual");var inputValueTracking=require("./inputValueTracking");var validateDOMNesting=require("./validateDOMNesting");var warning=require("fbjs/lib/warning");var Flags=ReactDOMComponentFlags;var deleteListener=EventPluginHub.deleteListener;var getNode=ReactDOMComponentTree.getNodeFromInstance;var listenTo=ReactBrowserEventEmitter.listenTo;var registrationNameModules=EventPluginRegistry.registrationNameModules;var CONTENT_TYPES={string:true,number:true};var STYLE="style";var HTML="__html";var RESERVED_PROPS={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null};var DOC_FRAGMENT_TYPE=11;function getDeclarationErrorAddendum(internalInstance){if(internalInstance){var owner=internalInstance._currentElement._owner||null;if(owner){var name=owner.getName();if(name){return" This DOM node was rendered by `"+name+"`."}}}return""}function friendlyStringify(obj){if(typeof obj==="object"){if(Array.isArray(obj)){return"["+obj.map(friendlyStringify).join(", ")+"]"}else{var pairs=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var keyEscaped=/^[a-z$_][\w$_]*$/i.test(key)?key:JSON.stringify(key);pairs.push(keyEscaped+": "+friendlyStringify(obj[key]))}}return"{"+pairs.join(", ")+"}"}}else if(typeof obj==="string"){return JSON.stringify(obj)}else if(typeof obj==="function"){return"[function object]"}return String(obj)}var styleMutationWarning={};function checkAndWarnForMutatedStyle(style1,style2,component){if(style1==null||style2==null){return}if(shallowEqual(style1,style2)){return}var componentName=component._tag;var owner=component._currentElement._owner;var ownerName;if(owner){ownerName=owner.getName()}var hash=ownerName+"|"+componentName;if(styleMutationWarning.hasOwnProperty(hash)){return}styleMutationWarning[hash]=true;process.env.NODE_ENV!=="production"?warning(false,"`%s` was passed a style object that has previously been mutated. "+"Mutating `style` is deprecated. Consider cloning it beforehand. Check "+"the `render` %s. Previous style: %s. Mutated style: %s.",componentName,owner?"of `"+ownerName+"`":"using <"+componentName+">",friendlyStringify(style1),friendlyStringify(style2)):void 0}function assertValidProps(component,props){if(!props){return}if(voidElementTags[component._tag]){!(props.children==null&&props.dangerouslySetInnerHTML==null)?process.env.NODE_ENV!=="production"?invariant(false,"%s is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.%s",component._tag,component._currentElement._owner?" Check the render method of "+component._currentElement._owner.getName()+".":""):_prodInvariant("137",component._tag,component._currentElement._owner?" Check the render method of "+component._currentElement._owner.getName()+".":""):void 0}if(props.dangerouslySetInnerHTML!=null){!(props.children==null)?process.env.NODE_ENV!=="production"?invariant(false,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):_prodInvariant("60"):void 0;!(typeof props.dangerouslySetInnerHTML==="object"&&HTML in props.dangerouslySetInnerHTML)?process.env.NODE_ENV!=="production"?invariant(false,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information."):_prodInvariant("61"):void 0}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(props.innerHTML==null,"Directly setting property `innerHTML` is not permitted. "+"For more information, lookup documentation on `dangerouslySetInnerHTML`."):void 0;process.env.NODE_ENV!=="production"?warning(props.suppressContentEditableWarning||!props.contentEditable||props.children==null,"A component is `contentEditable` and contains `children` managed by "+"React. It is now your responsibility to guarantee that none of "+"those nodes are unexpectedly modified or duplicated. This is "+"probably not intentional."):void 0;process.env.NODE_ENV!=="production"?warning(props.onFocusIn==null&&props.onFocusOut==null,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. "+"All React events are normalized to bubble, so onFocusIn and onFocusOut "+"are not needed/supported by React."):void 0}!(props.style==null||typeof props.style==="object")?process.env.NODE_ENV!=="production"?invariant(false,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",getDeclarationErrorAddendum(component)):_prodInvariant("62",getDeclarationErrorAddendum(component)):void 0}function enqueuePutListener(inst,registrationName,listener,transaction){if(transaction instanceof ReactServerRenderingTransaction){return}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(registrationName!=="onScroll"||isEventSupported("scroll",true),"This browser doesn't support the `onScroll` event"):void 0}var containerInfo=inst._hostContainerInfo;var isDocumentFragment=containerInfo._node&&containerInfo._node.nodeType===DOC_FRAGMENT_TYPE;var doc=isDocumentFragment?containerInfo._node:containerInfo._ownerDocument;listenTo(registrationName,doc);transaction.getReactMountReady().enqueue(putListener,{inst:inst,registrationName:registrationName,listener:listener})}function putListener(){var listenerToPut=this;EventPluginHub.putListener(listenerToPut.inst,listenerToPut.registrationName,listenerToPut.listener)}function inputPostMount(){var inst=this;ReactDOMInput.postMountWrapper(inst)}function textareaPostMount(){var inst=this;ReactDOMTextarea.postMountWrapper(inst)}function optionPostMount(){var inst=this;ReactDOMOption.postMountWrapper(inst)}var setAndValidateContentChildDev=emptyFunction;if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev=function(content){var hasExistingContent=this._contentDebugID!=null;var debugID=this._debugID;var contentDebugID=-debugID;if(content==null){if(hasExistingContent){ReactInstrumentation.debugTool.onUnmountComponent(this._contentDebugID)}this._contentDebugID=null;return}validateDOMNesting(null,String(content),this,this._ancestorInfo);this._contentDebugID=contentDebugID;if(hasExistingContent){ReactInstrumentation.debugTool.onBeforeUpdateComponent(contentDebugID,content);ReactInstrumentation.debugTool.onUpdateComponent(contentDebugID)}else{ReactInstrumentation.debugTool.onBeforeMountComponent(contentDebugID,content,debugID);ReactInstrumentation.debugTool.onMountComponent(contentDebugID);ReactInstrumentation.debugTool.onSetChildren(debugID,[contentDebugID])}}}var mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function trackInputValue(){inputValueTracking.track(this)}function trapBubbledEventsLocal(){var inst=this;!inst._rootNodeID?process.env.NODE_ENV!=="production"?invariant(false,"Must be mounted to trap events"):_prodInvariant("63"):void 0;var node=getNode(inst);!node?process.env.NODE_ENV!=="production"?invariant(false,"trapBubbledEvent(...): Requires node to be rendered."):_prodInvariant("64"):void 0;switch(inst._tag){case"iframe":case"object":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topLoad","load",node)];break;case"video":case"audio":inst._wrapperState.listeners=[];for(var event in mediaEvents){if(mediaEvents.hasOwnProperty(event)){inst._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(event,mediaEvents[event],node))}}break;case"source":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topError","error",node)];break;case"img":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topError","error",node),ReactBrowserEventEmitter.trapBubbledEvent("topLoad","load",node)];break;case"form":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topReset","reset",node),ReactBrowserEventEmitter.trapBubbledEvent("topSubmit","submit",node)];break;case"input":case"select":case"textarea":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topInvalid","invalid",node)];break}}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}var omittedCloseTags={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true};var newlineEatingTags={listing:true,pre:true,textarea:true};var voidElementTags=_assign({menuitem:true},omittedCloseTags);var VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/;var validatedTagCache={};var hasOwnProperty={}.hasOwnProperty;function validateDangerousTag(tag){if(!hasOwnProperty.call(validatedTagCache,tag)){!VALID_TAG_REGEX.test(tag)?process.env.NODE_ENV!=="production"?invariant(false,"Invalid tag: %s",tag):_prodInvariant("65",tag):void 0;validatedTagCache[tag]=true}}function isCustomComponent(tagName,props){return tagName.indexOf("-")>=0||props.is!=null}var globalIdCounter=1;function ReactDOMComponent(element){var tag=element.type;validateDangerousTag(tag);this._currentElement=element;this._tag=tag.toLowerCase();this._namespaceURI=null;this._renderedChildren=null;this._previousStyle=null;this._previousStyleCopy=null;this._hostNode=null;this._hostParent=null;this._rootNodeID=0;this._domID=0;this._hostContainerInfo=null;this._wrapperState=null;this._topLevelWrapper=null;this._flags=0;if(process.env.NODE_ENV!=="production"){this._ancestorInfo=null;setAndValidateContentChildDev.call(this,null)}}ReactDOMComponent.displayName="ReactDOMComponent";ReactDOMComponent.Mixin={mountComponent:function(transaction,hostParent,hostContainerInfo,context){this._rootNodeID=globalIdCounter++;this._domID=hostContainerInfo._idCounter++;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var props=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null};transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"input":ReactDOMInput.mountWrapper(this,props,hostParent);props=ReactDOMInput.getHostProps(this,props);transaction.getReactMountReady().enqueue(trackInputValue,this);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"option":ReactDOMOption.mountWrapper(this,props,hostParent);props=ReactDOMOption.getHostProps(this,props);break;case"select":ReactDOMSelect.mountWrapper(this,props,hostParent);props=ReactDOMSelect.getHostProps(this,props);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"textarea":ReactDOMTextarea.mountWrapper(this,props,hostParent);props=ReactDOMTextarea.getHostProps(this,props);transaction.getReactMountReady().enqueue(trackInputValue,this);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break}assertValidProps(this,props);var namespaceURI;var parentTag;if(hostParent!=null){namespaceURI=hostParent._namespaceURI;parentTag=hostParent._tag}else if(hostContainerInfo._tag){namespaceURI=hostContainerInfo._namespaceURI;parentTag=hostContainerInfo._tag}if(namespaceURI==null||namespaceURI===DOMNamespaces.svg&&parentTag==="foreignobject"){namespaceURI=DOMNamespaces.html}if(namespaceURI===DOMNamespaces.html){if(this._tag==="svg"){namespaceURI=DOMNamespaces.svg}else if(this._tag==="math"){namespaceURI=DOMNamespaces.mathml}}this._namespaceURI=namespaceURI;if(process.env.NODE_ENV!=="production"){var parentInfo;if(hostParent!=null){parentInfo=hostParent._ancestorInfo}else if(hostContainerInfo._tag){parentInfo=hostContainerInfo._ancestorInfo}if(parentInfo){validateDOMNesting(this._tag,null,this,parentInfo)}this._ancestorInfo=validateDOMNesting.updatedAncestorInfo(parentInfo,this._tag,this)}var mountImage;if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var el;if(namespaceURI===DOMNamespaces.html){if(this._tag==="script"){var div=ownerDocument.createElement("div");var type=this._currentElement.type;div.innerHTML="<"+type+"></"+type+">";el=div.removeChild(div.firstChild)}else if(props.is){el=ownerDocument.createElement(this._currentElement.type,props.is)}else{el=ownerDocument.createElement(this._currentElement.type)}}else{el=ownerDocument.createElementNS(namespaceURI,this._currentElement.type)}ReactDOMComponentTree.precacheNode(this,el);this._flags|=Flags.hasCachedChildNodes;if(!this._hostParent){DOMPropertyOperations.setAttributeForRoot(el)}this._updateDOMProperties(null,props,transaction);var lazyTree=DOMLazyTree(el);this._createInitialChildren(transaction,props,context,lazyTree);mountImage=lazyTree}else{var tagOpen=this._createOpenTagMarkupAndPutListeners(transaction,props);var tagContent=this._createContentMarkup(transaction,props,context);if(!tagContent&&omittedCloseTags[this._tag]){mountImage=tagOpen+"/>"}else{mountImage=tagOpen+">"+tagContent+"</"+this._currentElement.type+">"}}switch(this._tag){case"input":transaction.getReactMountReady().enqueue(inputPostMount,this);if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"textarea":transaction.getReactMountReady().enqueue(textareaPostMount,this);if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"select":if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"button":if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"option":transaction.getReactMountReady().enqueue(optionPostMount,this);break}return mountImage},_createOpenTagMarkupAndPutListeners:function(transaction,props){var ret="<"+this._currentElement.type;for(var propKey in props){if(!props.hasOwnProperty(propKey)){continue}var propValue=props[propKey];if(propValue==null){continue}if(registrationNameModules.hasOwnProperty(propKey)){if(propValue){enqueuePutListener(this,propKey,propValue,transaction)}}else{if(propKey===STYLE){if(propValue){if(process.env.NODE_ENV!=="production"){this._previousStyle=propValue}propValue=this._previousStyleCopy=_assign({},props.style)}propValue=CSSPropertyOperations.createMarkupForStyles(propValue,this)}var markup=null;if(this._tag!=null&&isCustomComponent(this._tag,props)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){markup=DOMPropertyOperations.createMarkupForCustomAttribute(propKey,propValue)}}else{markup=DOMPropertyOperations.createMarkupForProperty(propKey,propValue)}if(markup){ret+=" "+markup}}}if(transaction.renderToStaticMarkup){return ret}if(!this._hostParent){ret+=" "+DOMPropertyOperations.createMarkupForRoot()}ret+=" "+DOMPropertyOperations.createMarkupForID(this._domID);return ret},_createContentMarkup:function(transaction,props,context){var ret="";var innerHTML=props.dangerouslySetInnerHTML;if(innerHTML!=null){if(innerHTML.__html!=null){ret=innerHTML.__html}}else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null;var childrenToUse=contentToUse!=null?null:props.children;if(contentToUse!=null){ret=escapeTextContentForBrowser(contentToUse);if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,contentToUse)}}else if(childrenToUse!=null){var mountImages=this.mountChildren(childrenToUse,transaction,context);ret=mountImages.join("")}}if(newlineEatingTags[this._tag]&&ret.charAt(0)==="\n"){return"\n"+ret}else{return ret}},_createInitialChildren:function(transaction,props,context,lazyTree){var innerHTML=props.dangerouslySetInnerHTML;if(innerHTML!=null){if(innerHTML.__html!=null){DOMLazyTree.queueHTML(lazyTree,innerHTML.__html)}}else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null;var childrenToUse=contentToUse!=null?null:props.children;if(contentToUse!=null){if(contentToUse!==""){if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,contentToUse)}DOMLazyTree.queueText(lazyTree,contentToUse)}}else if(childrenToUse!=null){var mountImages=this.mountChildren(childrenToUse,transaction,context);for(var i=0;i<mountImages.length;i++){DOMLazyTree.queueChild(lazyTree,mountImages[i])}}}},receiveComponent:function(nextElement,transaction,context){var prevElement=this._currentElement;this._currentElement=nextElement;this.updateComponent(transaction,prevElement,nextElement,context)},updateComponent:function(transaction,prevElement,nextElement,context){var lastProps=prevElement.props;var nextProps=this._currentElement.props;switch(this._tag){case"input":lastProps=ReactDOMInput.getHostProps(this,lastProps);nextProps=ReactDOMInput.getHostProps(this,nextProps);break;case"option":lastProps=ReactDOMOption.getHostProps(this,lastProps);nextProps=ReactDOMOption.getHostProps(this,nextProps);break;case"select":lastProps=ReactDOMSelect.getHostProps(this,lastProps);nextProps=ReactDOMSelect.getHostProps(this,nextProps);break;case"textarea":lastProps=ReactDOMTextarea.getHostProps(this,lastProps);nextProps=ReactDOMTextarea.getHostProps(this,nextProps);break}assertValidProps(this,nextProps);this._updateDOMProperties(lastProps,nextProps,transaction);this._updateDOMChildren(lastProps,nextProps,transaction,context);switch(this._tag){case"input":ReactDOMInput.updateWrapper(this);inputValueTracking.updateValueIfChanged(this);break;case"textarea":ReactDOMTextarea.updateWrapper(this);break;case"select":transaction.getReactMountReady().enqueue(postUpdateSelectWrapper,this);break}},_updateDOMProperties:function(lastProps,nextProps,transaction){var propKey;var styleName;var styleUpdates;for(propKey in lastProps){if(nextProps.hasOwnProperty(propKey)||!lastProps.hasOwnProperty(propKey)||lastProps[propKey]==null){continue}if(propKey===STYLE){var lastStyle=this._previousStyleCopy;for(styleName in lastStyle){if(lastStyle.hasOwnProperty(styleName)){styleUpdates=styleUpdates||{};styleUpdates[styleName]=""}}this._previousStyleCopy=null}else if(registrationNameModules.hasOwnProperty(propKey)){if(lastProps[propKey]){deleteListener(this,propKey)}}else if(isCustomComponent(this._tag,lastProps)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){DOMPropertyOperations.deleteValueForAttribute(getNode(this),propKey)}}else if(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey)){DOMPropertyOperations.deleteValueForProperty(getNode(this),propKey)}}for(propKey in nextProps){var nextProp=nextProps[propKey];var lastProp=propKey===STYLE?this._previousStyleCopy:lastProps!=null?lastProps[propKey]:undefined;if(!nextProps.hasOwnProperty(propKey)||nextProp===lastProp||nextProp==null&&lastProp==null){continue}if(propKey===STYLE){if(nextProp){if(process.env.NODE_ENV!=="production"){checkAndWarnForMutatedStyle(this._previousStyleCopy,this._previousStyle,this);this._previousStyle=nextProp}nextProp=this._previousStyleCopy=_assign({},nextProp)}else{this._previousStyleCopy=null}if(lastProp){for(styleName in lastProp){if(lastProp.hasOwnProperty(styleName)&&(!nextProp||!nextProp.hasOwnProperty(styleName))){styleUpdates=styleUpdates||{};styleUpdates[styleName]=""}}for(styleName in nextProp){if(nextProp.hasOwnProperty(styleName)&&lastProp[styleName]!==nextProp[styleName]){styleUpdates=styleUpdates||{};styleUpdates[styleName]=nextProp[styleName]}}}else{styleUpdates=nextProp}}else if(registrationNameModules.hasOwnProperty(propKey)){if(nextProp){enqueuePutListener(this,propKey,nextProp,transaction)}else if(lastProp){deleteListener(this,propKey)}}else if(isCustomComponent(this._tag,nextProps)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){DOMPropertyOperations.setValueForAttribute(getNode(this),propKey,nextProp)}}else if(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey)){var node=getNode(this);if(nextProp!=null){DOMPropertyOperations.setValueForProperty(node,propKey,nextProp)}else{DOMPropertyOperations.deleteValueForProperty(node,propKey)}}}if(styleUpdates){CSSPropertyOperations.setValueForStyles(getNode(this),styleUpdates,this)}},_updateDOMChildren:function(lastProps,nextProps,transaction,context){var lastContent=CONTENT_TYPES[typeof lastProps.children]?lastProps.children:null;var nextContent=CONTENT_TYPES[typeof nextProps.children]?nextProps.children:null;var lastHtml=lastProps.dangerouslySetInnerHTML&&lastProps.dangerouslySetInnerHTML.__html;var nextHtml=nextProps.dangerouslySetInnerHTML&&nextProps.dangerouslySetInnerHTML.__html;var lastChildren=lastContent!=null?null:lastProps.children;var nextChildren=nextContent!=null?null:nextProps.children;var lastHasContentOrHtml=lastContent!=null||lastHtml!=null;var nextHasContentOrHtml=nextContent!=null||nextHtml!=null;if(lastChildren!=null&&nextChildren==null){this.updateChildren(null,transaction,context)}else if(lastHasContentOrHtml&&!nextHasContentOrHtml){this.updateTextContent("");if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetChildren(this._debugID,[])}}if(nextContent!=null){if(lastContent!==nextContent){this.updateTextContent(""+nextContent);if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,nextContent)}}}else if(nextHtml!=null){if(lastHtml!==nextHtml){this.updateMarkup(""+nextHtml)}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetChildren(this._debugID,[])}}else if(nextChildren!=null){if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,null)}this.updateChildren(nextChildren,transaction,context)}},getHostNode:function(){return getNode(this)},unmountComponent:function(safely){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var listeners=this._wrapperState.listeners;if(listeners){for(var i=0;i<listeners.length;i++){listeners[i].remove()}}break;case"input":case"textarea":inputValueTracking.stopTracking(this);break;case"html":case"head":case"body":!false?process.env.NODE_ENV!=="production"?invariant(false,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag):_prodInvariant("66",this._tag):void 0;break}this.unmountChildren(safely);ReactDOMComponentTree.uncacheNode(this);EventPluginHub.deleteAllListeners(this);this._rootNodeID=0;this._domID=0;this._wrapperState=null;if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,null)}},getPublicInstance:function(){return getNode(this)}};_assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin);module.exports=ReactDOMComponent}).call(this,require("_process"))},{"./AutoFocusUtils":70,"./CSSPropertyOperations":73,"./DOMLazyTree":77,"./DOMNamespaces":78,"./DOMProperty":79,"./DOMPropertyOperations":80,"./EventPluginHub":84,"./EventPluginRegistry":85,"./ReactBrowserEventEmitter":93,"./ReactDOMComponentFlags":100,"./ReactDOMComponentTree":101,"./ReactDOMInput":106,"./ReactDOMOption":109,"./ReactDOMSelect":110,"./ReactDOMTextarea":113,"./ReactInstrumentation":130,"./ReactMultiChild":134,"./ReactServerRenderingTransaction":142,"./escapeTextContentForBrowser":170,"./inputValueTracking":183,"./isEventSupported":185,"./reactProdInvariant":188,"./validateDOMNesting":194,_process:407,"fbjs/lib/emptyFunction":41,"fbjs/lib/invariant":49,"fbjs/lib/shallowEqual":55,"fbjs/lib/warning":56,"object-assign":63}],100:[function(require,module,exports){"use strict";var ReactDOMComponentFlags={hasCachedChildNodes:1<<0};module.exports=ReactDOMComponentFlags},{}],101:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMProperty=require("./DOMProperty");var ReactDOMComponentFlags=require("./ReactDOMComponentFlags");var invariant=require("fbjs/lib/invariant");var ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME;var Flags=ReactDOMComponentFlags;var internalInstanceKey="__reactInternalInstance$"+Math.random().toString(36).slice(2);function shouldPrecacheNode(node,nodeID){return node.nodeType===1&&node.getAttribute(ATTR_NAME)===String(nodeID)||node.nodeType===8&&node.nodeValue===" react-text: "+nodeID+" "||node.nodeType===8&&node.nodeValue===" react-empty: "+nodeID+" "}function getRenderedHostOrTextFromComponent(component){var rendered;while(rendered=component._renderedComponent){component=rendered}return component}function precacheNode(inst,node){var hostInst=getRenderedHostOrTextFromComponent(inst);hostInst._hostNode=node;node[internalInstanceKey]=hostInst}function uncacheNode(inst){var node=inst._hostNode;if(node){delete node[internalInstanceKey];inst._hostNode=null}}function precacheChildNodes(inst,node){if(inst._flags&Flags.hasCachedChildNodes){return}var children=inst._renderedChildren;var childNode=node.firstChild;outer:for(var name in children){if(!children.hasOwnProperty(name)){continue}var childInst=children[name];var childID=getRenderedHostOrTextFromComponent(childInst)._domID;if(childID===0){continue}for(;childNode!==null;childNode=childNode.nextSibling){if(shouldPrecacheNode(childNode,childID)){precacheNode(childInst,childNode);continue outer}}!false?process.env.NODE_ENV!=="production"?invariant(false,"Unable to find element with ID %s.",childID):_prodInvariant("32",childID):void 0}inst._flags|=Flags.hasCachedChildNodes}function getClosestInstanceFromNode(node){if(node[internalInstanceKey]){return node[internalInstanceKey]}var parents=[];while(!node[internalInstanceKey]){parents.push(node);if(node.parentNode){node=node.parentNode}else{return null}}var closest;var inst;for(;node&&(inst=node[internalInstanceKey]);node=parents.pop()){closest=inst;if(parents.length){precacheChildNodes(inst,node)}}return closest}function getInstanceFromNode(node){var inst=getClosestInstanceFromNode(node);if(inst!=null&&inst._hostNode===node){return inst}else{return null}}function getNodeFromInstance(inst){!(inst._hostNode!==undefined)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;if(inst._hostNode){return inst._hostNode}var parents=[];while(!inst._hostNode){parents.push(inst);!inst._hostParent?process.env.NODE_ENV!=="production"?invariant(false,"React DOM tree root should always have a node reference."):_prodInvariant("34"):void 0;inst=inst._hostParent}for(;parents.length;inst=parents.pop()){precacheChildNodes(inst,inst._hostNode)}return inst._hostNode}var ReactDOMComponentTree={getClosestInstanceFromNode:getClosestInstanceFromNode,getInstanceFromNode:getInstanceFromNode,getNodeFromInstance:getNodeFromInstance,precacheChildNodes:precacheChildNodes,precacheNode:precacheNode,uncacheNode:uncacheNode};module.exports=ReactDOMComponentTree}).call(this,require("_process"))},{"./DOMProperty":79,"./ReactDOMComponentFlags":100,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],102:[function(require,module,exports){(function(process){"use strict";var validateDOMNesting=require("./validateDOMNesting");var DOC_NODE_TYPE=9;function ReactDOMContainerInfo(topLevelWrapper,node){var info={_topLevelWrapper:topLevelWrapper,_idCounter:1,_ownerDocument:node?node.nodeType===DOC_NODE_TYPE?node:node.ownerDocument:null,_node:node,_tag:node?node.nodeName.toLowerCase():null,_namespaceURI:node?node.namespaceURI:null};if(process.env.NODE_ENV!=="production"){info._ancestorInfo=node?validateDOMNesting.updatedAncestorInfo(null,info._tag,null):null}return info}module.exports=ReactDOMContainerInfo}).call(this,require("_process"))},{"./validateDOMNesting":194,_process:407}],103:[function(require,module,exports){"use strict";var _assign=require("object-assign");var DOMLazyTree=require("./DOMLazyTree");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMEmptyComponent=function(instantiate){this._currentElement=null;this._hostNode=null;this._hostParent=null;this._hostContainerInfo=null;this._domID=0};_assign(ReactDOMEmptyComponent.prototype,{mountComponent:function(transaction,hostParent,hostContainerInfo,context){var domID=hostContainerInfo._idCounter++;this._domID=domID;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var nodeValue=" react-empty: "+this._domID+" ";if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var node=ownerDocument.createComment(nodeValue);ReactDOMComponentTree.precacheNode(this,node);return DOMLazyTree(node)}else{if(transaction.renderToStaticMarkup){return""}return"\x3c!--"+nodeValue+"--\x3e"}},receiveComponent:function(){},getHostNode:function(){return ReactDOMComponentTree.getNodeFromInstance(this)},unmountComponent:function(){ReactDOMComponentTree.uncacheNode(this)}});module.exports=ReactDOMEmptyComponent},{"./DOMLazyTree":77,"./ReactDOMComponentTree":101,"object-assign":63}],104:[function(require,module,exports){"use strict";var ReactDOMFeatureFlags={useCreateElement:true,useFiber:false};module.exports=ReactDOMFeatureFlags},{}],105:[function(require,module,exports){"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMIDOperations={dangerouslyProcessChildrenUpdates:function(parentInst,updates){var node=ReactDOMComponentTree.getNodeFromInstance(parentInst);DOMChildrenOperations.processUpdates(node,updates)}};module.exports=ReactDOMIDOperations},{"./DOMChildrenOperations":76,"./ReactDOMComponentTree":101}],106:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var DOMPropertyOperations=require("./DOMPropertyOperations");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnCheckedLink=false;var didWarnValueDefaultValue=false;var didWarnCheckedDefaultChecked=false;var didWarnControlledToUncontrolled=false;var didWarnUncontrolledToControlled=false;function forceUpdateIfMounted(){if(this._rootNodeID){ReactDOMInput.updateWrapper(this)}}function isControlled(props){var usesChecked=props.type==="checkbox"||props.type==="radio";return usesChecked?props.checked!=null:props.value!=null}var ReactDOMInput={getHostProps:function(inst,props){var value=LinkedValueUtils.getValue(props);var checked=LinkedValueUtils.getChecked(props);var hostProps=_assign({type:undefined,step:undefined,min:undefined,max:undefined},props,{defaultChecked:undefined,defaultValue:undefined,value:value!=null?value:inst._wrapperState.initialValue,checked:checked!=null?checked:inst._wrapperState.initialChecked,onChange:inst._wrapperState.onChange});return hostProps},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){LinkedValueUtils.checkPropTypes("input",props,inst._currentElement._owner);var owner=inst._currentElement._owner;if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `input` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}if(props.checkedLink!==undefined&&!didWarnCheckedLink){process.env.NODE_ENV!=="production"?warning(false,"`checkedLink` prop on `input` is deprecated; set `value` and `onChange` instead."):void 0;didWarnCheckedLink=true}if(props.checked!==undefined&&props.defaultChecked!==undefined&&!didWarnCheckedDefaultChecked){process.env.NODE_ENV!=="production"?warning(false,"%s contains an input of type %s with both checked and defaultChecked props. "+"Input elements must be either controlled or uncontrolled "+"(specify either the checked prop, or the defaultChecked prop, but not "+"both). Decide between using a controlled or uncontrolled input "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnCheckedDefaultChecked=true}if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValueDefaultValue){process.env.NODE_ENV!=="production"?warning(false,"%s contains an input of type %s with both value and defaultValue props. "+"Input elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled input "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnValueDefaultValue=true}}var defaultValue=props.defaultValue;inst._wrapperState={initialChecked:props.checked!=null?props.checked:props.defaultChecked,initialValue:props.value!=null?props.value:defaultValue,listeners:null,onChange:_handleChange.bind(inst),controlled:isControlled(props)}},updateWrapper:function(inst){var props=inst._currentElement.props;if(process.env.NODE_ENV!=="production"){var controlled=isControlled(props);var owner=inst._currentElement._owner;if(!inst._wrapperState.controlled&&controlled&&!didWarnUncontrolledToControlled){process.env.NODE_ENV!=="production"?warning(false,"%s is changing an uncontrolled input of type %s to be controlled. "+"Input elements should not switch from uncontrolled to controlled (or vice versa). "+"Decide between using a controlled or uncontrolled input "+"element for the lifetime of the component. More info: https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnUncontrolledToControlled=true}if(inst._wrapperState.controlled&&!controlled&&!didWarnControlledToUncontrolled){process.env.NODE_ENV!=="production"?warning(false,"%s is changing a controlled input of type %s to be uncontrolled. "+"Input elements should not switch from controlled to uncontrolled (or vice versa). "+"Decide between using a controlled or uncontrolled input "+"element for the lifetime of the component. More info: https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnControlledToUncontrolled=true}}var checked=props.checked;if(checked!=null){DOMPropertyOperations.setValueForProperty(ReactDOMComponentTree.getNodeFromInstance(inst),"checked",checked||false)}var node=ReactDOMComponentTree.getNodeFromInstance(inst);var value=LinkedValueUtils.getValue(props);if(value!=null){if(value===0&&node.value===""){node.value="0"}else if(props.type==="number"){var valueAsNumber=parseFloat(node.value,10)||0;if(value!=valueAsNumber||value==valueAsNumber&&node.value!=value){node.value=""+value}}else if(node.value!==""+value){node.value=""+value}}else{if(props.value==null&&props.defaultValue!=null){if(node.defaultValue!==""+props.defaultValue){node.defaultValue=""+props.defaultValue}}if(props.checked==null&&props.defaultChecked!=null){node.defaultChecked=!!props.defaultChecked}}},postMountWrapper:function(inst){var props=inst._currentElement.props;var node=ReactDOMComponentTree.getNodeFromInstance(inst);switch(props.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":node.value="";node.value=node.defaultValue;break;default:node.value=node.value;break}var name=node.name;if(name!==""){node.name=""}node.defaultChecked=!node.defaultChecked;node.defaultChecked=!node.defaultChecked;if(name!==""){node.name=name}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);var name=props.name;if(props.type==="radio"&&name!=null){var rootNode=ReactDOMComponentTree.getNodeFromInstance(this);var queryRoot=rootNode;while(queryRoot.parentNode){queryRoot=queryRoot.parentNode}var group=queryRoot.querySelectorAll("input[name="+JSON.stringify(""+name)+'][type="radio"]');for(var i=0;i<group.length;i++){var otherNode=group[i];if(otherNode===rootNode||otherNode.form!==rootNode.form){continue}var otherInstance=ReactDOMComponentTree.getInstanceFromNode(otherNode);!otherInstance?process.env.NODE_ENV!=="production"?invariant(false,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):_prodInvariant("90"):void 0;ReactUpdates.asap(forceUpdateIfMounted,otherInstance)}}return returnValue}module.exports=ReactDOMInput}).call(this,require("_process"))},{"./DOMPropertyOperations":80,"./LinkedValueUtils":91,"./ReactDOMComponentTree":101,"./ReactUpdates":145,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"object-assign":63}],107:[function(require,module,exports){(function(process){"use strict";var DOMProperty=require("./DOMProperty");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");var warnedProperties={};var rARIA=new RegExp("^(aria)-["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$");function validateProperty(tagName,name,debugID){if(warnedProperties.hasOwnProperty(name)&&warnedProperties[name]){return true}if(rARIA.test(name)){var lowerCasedName=name.toLowerCase();var standardName=DOMProperty.getPossibleStandardName.hasOwnProperty(lowerCasedName)?DOMProperty.getPossibleStandardName[lowerCasedName]:null;if(standardName==null){warnedProperties[name]=true;return false}if(name!==standardName){process.env.NODE_ENV!=="production"?warning(false,"Unknown ARIA attribute %s. Did you mean %s?%s",name,standardName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;warnedProperties[name]=true;return true}}return true}function warnInvalidARIAProps(debugID,element){var invalidProps=[];for(var key in element.props){var isValid=validateProperty(element.type,key,debugID);if(!isValid){invalidProps.push(key)}}var unknownPropString=invalidProps.map(function(prop){return"`"+prop+"`"}).join(", ");if(invalidProps.length===1){process.env.NODE_ENV!=="production"?warning(false,"Invalid aria prop %s on <%s> tag. "+"For details, see https://fb.me/invalid-aria-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}else if(invalidProps.length>1){process.env.NODE_ENV!=="production"?warning(false,"Invalid aria props %s on <%s> tag. "+"For details, see https://fb.me/invalid-aria-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}}function handleElement(debugID,element){if(element==null||typeof element.type!=="string"){return}if(element.type.indexOf("-")>=0||element.props.is){return}warnInvalidARIAProps(debugID,element)}var ReactDOMInvalidARIAHook={onBeforeMountComponent:function(debugID,element){if(process.env.NODE_ENV!=="production"){handleElement(debugID,element)}},onBeforeUpdateComponent:function(debugID,element){if(process.env.NODE_ENV!=="production"){handleElement(debugID,element)}}};module.exports=ReactDOMInvalidARIAHook}).call(this,require("_process"))},{"./DOMProperty":79,_process:407,"fbjs/lib/warning":56,"react/lib/ReactComponentTreeHook":200}],108:[function(require,module,exports){(function(process){"use strict";var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");var didWarnValueNull=false;function handleElement(debugID,element){if(element==null){return}if(element.type!=="input"&&element.type!=="textarea"&&element.type!=="select"){return}if(element.props!=null&&element.props.value===null&&!didWarnValueNull){process.env.NODE_ENV!=="production"?warning(false,"`value` prop on `%s` should not be null. "+"Consider using the empty string to clear the component or `undefined` "+"for uncontrolled components.%s",element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;didWarnValueNull=true}}var ReactDOMNullInputValuePropHook={onBeforeMountComponent:function(debugID,element){handleElement(debugID,element)},onBeforeUpdateComponent:function(debugID,element){handleElement(debugID,element)}};module.exports=ReactDOMNullInputValuePropHook}).call(this,require("_process"))},{_process:407,"fbjs/lib/warning":56,"react/lib/ReactComponentTreeHook":200}],109:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var React=require("react/lib/React");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMSelect=require("./ReactDOMSelect");var warning=require("fbjs/lib/warning");var didWarnInvalidOptionChildren=false;function flattenChildren(children){var content="";React.Children.forEach(children,function(child){if(child==null){return}if(typeof child==="string"||typeof child==="number"){content+=child}else if(!didWarnInvalidOptionChildren){didWarnInvalidOptionChildren=true;process.env.NODE_ENV!=="production"?warning(false,"Only strings and numbers are supported as <option> children."):void 0}});return content}var ReactDOMOption={mountWrapper:function(inst,props,hostParent){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(props.selected==null,"Use the `defaultValue` or `value` props on <select> instead of "+"setting `selected` on <option>."):void 0}var selectValue=null;if(hostParent!=null){var selectParent=hostParent;if(selectParent._tag==="optgroup"){selectParent=selectParent._hostParent}if(selectParent!=null&&selectParent._tag==="select"){selectValue=ReactDOMSelect.getSelectValueContext(selectParent)}}var selected=null;if(selectValue!=null){var value;if(props.value!=null){value=props.value+""}else{value=flattenChildren(props.children)}selected=false;if(Array.isArray(selectValue)){for(var i=0;i<selectValue.length;i++){if(""+selectValue[i]===value){selected=true;break}}}else{selected=""+selectValue===value}}inst._wrapperState={selected:selected}},postMountWrapper:function(inst){var props=inst._currentElement.props;if(props.value!=null){var node=ReactDOMComponentTree.getNodeFromInstance(inst);node.setAttribute("value",props.value)}},getHostProps:function(inst,props){var hostProps=_assign({selected:undefined,children:undefined},props);if(inst._wrapperState.selected!=null){hostProps.selected=inst._wrapperState.selected}var content=flattenChildren(props.children);if(content){hostProps.children=content}return hostProps}};module.exports=ReactDOMOption}).call(this,require("_process"))},{"./ReactDOMComponentTree":101,"./ReactDOMSelect":110,_process:407,"fbjs/lib/warning":56,"object-assign":63,"react/lib/React":197}],110:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnValueDefaultValue=false;function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=false;var props=this._currentElement.props;var value=LinkedValueUtils.getValue(props);if(value!=null){updateOptions(this,Boolean(props.multiple),value)}}}function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var valuePropNames=["value","defaultValue"];function checkSelectPropTypes(inst,props){var owner=inst._currentElement._owner;LinkedValueUtils.checkPropTypes("select",props,owner);if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `select` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}for(var i=0;i<valuePropNames.length;i++){var propName=valuePropNames[i];if(props[propName]==null){continue}var isArray=Array.isArray(props[propName]);if(props.multiple&&!isArray){process.env.NODE_ENV!=="production"?warning(false,"The `%s` prop supplied to <select> must be an array if "+"`multiple` is true.%s",propName,getDeclarationErrorAddendum(owner)):void 0}else if(!props.multiple&&isArray){process.env.NODE_ENV!=="production"?warning(false,"The `%s` prop supplied to <select> must be a scalar "+"value if `multiple` is false.%s",propName,getDeclarationErrorAddendum(owner)):void 0}}}function updateOptions(inst,multiple,propValue){var selectedValue,i;var options=ReactDOMComponentTree.getNodeFromInstance(inst).options;if(multiple){selectedValue={};for(i=0;i<propValue.length;i++){selectedValue[""+propValue[i]]=true}for(i=0;i<options.length;i++){var selected=selectedValue.hasOwnProperty(options[i].value);if(options[i].selected!==selected){options[i].selected=selected}}}else{selectedValue=""+propValue;for(i=0;i<options.length;i++){if(options[i].value===selectedValue){options[i].selected=true;return}}if(options.length){options[0].selected=true}}}var ReactDOMSelect={getHostProps:function(inst,props){return _assign({},props,{onChange:inst._wrapperState.onChange,value:undefined})},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){checkSelectPropTypes(inst,props)}var value=LinkedValueUtils.getValue(props);inst._wrapperState={pendingUpdate:false,initialValue:value!=null?value:props.defaultValue,listeners:null,onChange:_handleChange.bind(inst),wasMultiple:Boolean(props.multiple)};if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValueDefaultValue){process.env.NODE_ENV!=="production"?warning(false,"Select elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled select "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components"):void 0;didWarnValueDefaultValue=true}},getSelectValueContext:function(inst){return inst._wrapperState.initialValue},postUpdateWrapper:function(inst){var props=inst._currentElement.props;inst._wrapperState.initialValue=undefined;var wasMultiple=inst._wrapperState.wasMultiple;inst._wrapperState.wasMultiple=Boolean(props.multiple);var value=LinkedValueUtils.getValue(props);if(value!=null){inst._wrapperState.pendingUpdate=false;updateOptions(inst,Boolean(props.multiple),value)}else if(wasMultiple!==Boolean(props.multiple)){if(props.defaultValue!=null){updateOptions(inst,Boolean(props.multiple),props.defaultValue)}else{updateOptions(inst,Boolean(props.multiple),props.multiple?[]:"")}}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);if(this._rootNodeID){this._wrapperState.pendingUpdate=true}ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this);return returnValue}module.exports=ReactDOMSelect}).call(this,require("_process"))},{"./LinkedValueUtils":91,"./ReactDOMComponentTree":101,"./ReactUpdates":145,_process:407,"fbjs/lib/warning":56,"object-assign":63}],111:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var getNodeForCharacterOffset=require("./getNodeForCharacterOffset");var getTextContentAccessor=require("./getTextContentAccessor");function isCollapsed(anchorNode,anchorOffset,focusNode,focusOffset){return anchorNode===focusNode&&anchorOffset===focusOffset}function getIEOffsets(node){var selection=document.selection;var selectedRange=selection.createRange();var selectedLength=selectedRange.text.length;var fromStart=selectedRange.duplicate();fromStart.moveToElementText(node);fromStart.setEndPoint("EndToStart",selectedRange);var startOffset=fromStart.text.length;var endOffset=startOffset+selectedLength;return{start:startOffset,end:endOffset}}function getModernOffsets(node){var selection=window.getSelection&&window.getSelection();if(!selection||selection.rangeCount===0){return null}var anchorNode=selection.anchorNode;var anchorOffset=selection.anchorOffset;var focusNode=selection.focusNode;var focusOffset=selection.focusOffset;var currentRange=selection.getRangeAt(0);try{currentRange.startContainer.nodeType;currentRange.endContainer.nodeType}catch(e){return null}var isSelectionCollapsed=isCollapsed(selection.anchorNode,selection.anchorOffset,selection.focusNode,selection.focusOffset);var rangeLength=isSelectionCollapsed?0:currentRange.toString().length;var tempRange=currentRange.cloneRange();tempRange.selectNodeContents(node);tempRange.setEnd(currentRange.startContainer,currentRange.startOffset);var isTempRangeCollapsed=isCollapsed(tempRange.startContainer,tempRange.startOffset,tempRange.endContainer,tempRange.endOffset);var start=isTempRangeCollapsed?0:tempRange.toString().length;var end=start+rangeLength;var detectionRange=document.createRange();detectionRange.setStart(anchorNode,anchorOffset);detectionRange.setEnd(focusNode,focusOffset);var isBackward=detectionRange.collapsed;return{start:isBackward?end:start,end:isBackward?start:end}}function setIEOffsets(node,offsets){var range=document.selection.createRange().duplicate();var start,end;if(offsets.end===undefined){start=offsets.start;end=start}else if(offsets.start>offsets.end){start=offsets.end;end=offsets.start}else{start=offsets.start;end=offsets.end}range.moveToElementText(node);range.moveStart("character",start);range.setEndPoint("EndToStart",range);range.moveEnd("character",end-start);range.select()}function setModernOffsets(node,offsets){if(!window.getSelection){return}var selection=window.getSelection();var length=node[getTextContentAccessor()].length;var start=Math.min(offsets.start,length);var end=offsets.end===undefined?start:Math.min(offsets.end,length);if(!selection.extend&&start>end){var temp=end;end=start;start=temp}var startMarker=getNodeForCharacterOffset(node,start);var endMarker=getNodeForCharacterOffset(node,end);if(startMarker&&endMarker){var range=document.createRange();range.setStart(startMarker.node,startMarker.offset);selection.removeAllRanges();if(start>end){selection.addRange(range);selection.extend(endMarker.node,endMarker.offset)}else{range.setEnd(endMarker.node,endMarker.offset);selection.addRange(range)}}}var useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window);var ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection},{"./getNodeForCharacterOffset":180,"./getTextContentAccessor":181,"fbjs/lib/ExecutionEnvironment":35}],112:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var DOMChildrenOperations=require("./DOMChildrenOperations");var DOMLazyTree=require("./DOMLazyTree");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var invariant=require("fbjs/lib/invariant");var validateDOMNesting=require("./validateDOMNesting");var ReactDOMTextComponent=function(text){this._currentElement=text;this._stringText=""+text;this._hostNode=null;this._hostParent=null;this._domID=0;this._mountIndex=0;this._closingComment=null;this._commentNodes=null};_assign(ReactDOMTextComponent.prototype,{mountComponent:function(transaction,hostParent,hostContainerInfo,context){if(process.env.NODE_ENV!=="production"){var parentInfo;if(hostParent!=null){parentInfo=hostParent._ancestorInfo}else if(hostContainerInfo!=null){parentInfo=hostContainerInfo._ancestorInfo}if(parentInfo){validateDOMNesting(null,this._stringText,this,parentInfo)}}var domID=hostContainerInfo._idCounter++;var openingValue=" react-text: "+domID+" ";var closingValue=" /react-text ";this._domID=domID;this._hostParent=hostParent;if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var openingComment=ownerDocument.createComment(openingValue);var closingComment=ownerDocument.createComment(closingValue);var lazyTree=DOMLazyTree(ownerDocument.createDocumentFragment());DOMLazyTree.queueChild(lazyTree,DOMLazyTree(openingComment));if(this._stringText){DOMLazyTree.queueChild(lazyTree,DOMLazyTree(ownerDocument.createTextNode(this._stringText)))}DOMLazyTree.queueChild(lazyTree,DOMLazyTree(closingComment));ReactDOMComponentTree.precacheNode(this,openingComment);this._closingComment=closingComment;return lazyTree}else{var escapedText=escapeTextContentForBrowser(this._stringText);if(transaction.renderToStaticMarkup){return escapedText}return"\x3c!--"+openingValue+"--\x3e"+escapedText+"\x3c!--"+closingValue+"--\x3e"}},receiveComponent:function(nextText,transaction){if(nextText!==this._currentElement){this._currentElement=nextText;var nextStringText=""+nextText;if(nextStringText!==this._stringText){this._stringText=nextStringText;var commentNodes=this.getHostNode();DOMChildrenOperations.replaceDelimitedText(commentNodes[0],commentNodes[1],nextStringText)}}},getHostNode:function(){var hostNode=this._commentNodes;if(hostNode){return hostNode}if(!this._closingComment){var openingComment=ReactDOMComponentTree.getNodeFromInstance(this);var node=openingComment.nextSibling;while(true){!(node!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Missing closing comment for text component %s",this._domID):_prodInvariant("67",this._domID):void 0;if(node.nodeType===8&&node.nodeValue===" /react-text "){this._closingComment=node;break}node=node.nextSibling}}hostNode=[this._hostNode,this._closingComment];this._commentNodes=hostNode;return hostNode},unmountComponent:function(){this._closingComment=null;this._commentNodes=null;ReactDOMComponentTree.uncacheNode(this)}});module.exports=ReactDOMTextComponent}).call(this,require("_process"))},{"./DOMChildrenOperations":76,"./DOMLazyTree":77,"./ReactDOMComponentTree":101,"./escapeTextContentForBrowser":170,"./reactProdInvariant":188,"./validateDOMNesting":194,_process:407,"fbjs/lib/invariant":49,"object-assign":63}],113:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnValDefaultVal=false;function forceUpdateIfMounted(){if(this._rootNodeID){ReactDOMTextarea.updateWrapper(this)}}var ReactDOMTextarea={getHostProps:function(inst,props){!(props.dangerouslySetInnerHTML==null)?process.env.NODE_ENV!=="production"?invariant(false,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):_prodInvariant("91"):void 0;var hostProps=_assign({},props,{value:undefined,defaultValue:undefined,children:""+inst._wrapperState.initialValue,onChange:inst._wrapperState.onChange});return hostProps},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){LinkedValueUtils.checkPropTypes("textarea",props,inst._currentElement._owner);if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `textarea` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValDefaultVal){process.env.NODE_ENV!=="production"?warning(false,"Textarea elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled textarea "+"and remove one of these props. More info: "+"https://fb.me/react-controlled-components"):void 0;didWarnValDefaultVal=true}}var value=LinkedValueUtils.getValue(props);var initialValue=value;if(value==null){var defaultValue=props.defaultValue;var children=props.children;if(children!=null){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(false,"Use the `defaultValue` or `value` props instead of setting "+"children on <textarea>."):void 0}!(defaultValue==null)?process.env.NODE_ENV!=="production"?invariant(false,"If you supply `defaultValue` on a <textarea>, do not pass children."):_prodInvariant("92"):void 0;if(Array.isArray(children)){!(children.length<=1)?process.env.NODE_ENV!=="production"?invariant(false,"<textarea> can only have at most one child."):_prodInvariant("93"):void 0;children=children[0]}defaultValue=""+children}if(defaultValue==null){defaultValue=""}initialValue=defaultValue}inst._wrapperState={initialValue:""+initialValue,listeners:null,onChange:_handleChange.bind(inst)}},updateWrapper:function(inst){var props=inst._currentElement.props;var node=ReactDOMComponentTree.getNodeFromInstance(inst);var value=LinkedValueUtils.getValue(props);if(value!=null){var newValue=""+value;if(newValue!==node.value){node.value=newValue}if(props.defaultValue==null){node.defaultValue=newValue}}if(props.defaultValue!=null){node.defaultValue=props.defaultValue}},postMountWrapper:function(inst){var node=ReactDOMComponentTree.getNodeFromInstance(inst);var textContent=node.textContent;if(textContent===inst._wrapperState.initialValue){node.value=textContent}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);return returnValue}module.exports=ReactDOMTextarea}).call(this,require("_process"))},{"./LinkedValueUtils":91,"./ReactDOMComponentTree":101,"./ReactUpdates":145,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"object-assign":63}],114:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function getLowestCommonAncestor(instA,instB){!("_hostNode"in instA)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;!("_hostNode"in instB)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;var depthA=0;for(var tempA=instA;tempA;tempA=tempA._hostParent){depthA++}var depthB=0;for(var tempB=instB;tempB;tempB=tempB._hostParent){depthB++}while(depthA-depthB>0){instA=instA._hostParent;depthA--}while(depthB-depthA>0){instB=instB._hostParent;depthB--}var depth=depthA;while(depth--){if(instA===instB){return instA}instA=instA._hostParent;instB=instB._hostParent}return null}function isAncestor(instA,instB){!("_hostNode"in instA)?process.env.NODE_ENV!=="production"?invariant(false,"isAncestor: Invalid argument."):_prodInvariant("35"):void 0;!("_hostNode"in instB)?process.env.NODE_ENV!=="production"?invariant(false,"isAncestor: Invalid argument."):_prodInvariant("35"):void 0;while(instB){if(instB===instA){return true}instB=instB._hostParent}return false}function getParentInstance(inst){!("_hostNode"in inst)?process.env.NODE_ENV!=="production"?invariant(false,"getParentInstance: Invalid argument."):_prodInvariant("36"):void 0;return inst._hostParent}function traverseTwoPhase(inst,fn,arg){var path=[];while(inst){path.push(inst);inst=inst._hostParent}var i;for(i=path.length;i-- >0;){fn(path[i],"captured",arg)}for(i=0;i<path.length;i++){fn(path[i],"bubbled",arg)}}function traverseEnterLeave(from,to,fn,argFrom,argTo){var common=from&&to?getLowestCommonAncestor(from,to):null;var pathFrom=[];while(from&&from!==common){pathFrom.push(from);from=from._hostParent}var pathTo=[];while(to&&to!==common){pathTo.push(to);to=to._hostParent}var i;for(i=0;i<pathFrom.length;i++){fn(pathFrom[i],"bubbled",argFrom)}for(i=pathTo.length;i-- >0;){fn(pathTo[i],"captured",argTo)}}module.exports={isAncestor:isAncestor,getLowestCommonAncestor:getLowestCommonAncestor,getParentInstance:getParentInstance,traverseTwoPhase:traverseTwoPhase,traverseEnterLeave:traverseEnterLeave}}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],115:[function(require,module,exports){(function(process){"use strict";var DOMProperty=require("./DOMProperty");var EventPluginRegistry=require("./EventPluginRegistry");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");if(process.env.NODE_ENV!=="production"){var reactProps={children:true,dangerouslySetInnerHTML:true,key:true,ref:true,autoFocus:true,defaultValue:true,valueLink:true,defaultChecked:true,checkedLink:true,innerHTML:true,suppressContentEditableWarning:true,onFocusIn:true,onFocusOut:true};var warnedProperties={};var validateProperty=function(tagName,name,debugID){if(DOMProperty.properties.hasOwnProperty(name)||DOMProperty.isCustomAttribute(name)){return true}if(reactProps.hasOwnProperty(name)&&reactProps[name]||warnedProperties.hasOwnProperty(name)&&warnedProperties[name]){return true}if(EventPluginRegistry.registrationNameModules.hasOwnProperty(name)){return true}warnedProperties[name]=true;var lowerCasedName=name.toLowerCase();var standardName=DOMProperty.isCustomAttribute(lowerCasedName)?lowerCasedName:DOMProperty.getPossibleStandardName.hasOwnProperty(lowerCasedName)?DOMProperty.getPossibleStandardName[lowerCasedName]:null;var registrationName=EventPluginRegistry.possibleRegistrationNames.hasOwnProperty(lowerCasedName)?EventPluginRegistry.possibleRegistrationNames[lowerCasedName]:null;if(standardName!=null){process.env.NODE_ENV!=="production"?warning(false,"Unknown DOM property %s. Did you mean %s?%s",name,standardName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;return true}else if(registrationName!=null){process.env.NODE_ENV!=="production"?warning(false,"Unknown event handler property %s. Did you mean `%s`?%s",name,registrationName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;return true}else{return false}}}var warnUnknownProperties=function(debugID,element){var unknownProps=[];for(var key in element.props){var isValid=validateProperty(element.type,key,debugID);if(!isValid){unknownProps.push(key)}}var unknownPropString=unknownProps.map(function(prop){return"`"+prop+"`"}).join(", ");if(unknownProps.length===1){process.env.NODE_ENV!=="production"?warning(false,"Unknown prop %s on <%s> tag. Remove this prop from the element. "+"For details, see https://fb.me/react-unknown-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}else if(unknownProps.length>1){process.env.NODE_ENV!=="production"?warning(false,"Unknown props %s on <%s> tag. Remove these props from the element. "+"For details, see https://fb.me/react-unknown-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}};function handleElement(debugID,element){if(element==null||typeof element.type!=="string"){return}if(element.type.indexOf("-")>=0||element.props.is){return}warnUnknownProperties(debugID,element)}var ReactDOMUnknownPropertyHook={onBeforeMountComponent:function(debugID,element){handleElement(debugID,element)},onBeforeUpdateComponent:function(debugID,element){handleElement(debugID,element)}};module.exports=ReactDOMUnknownPropertyHook}).call(this,require("_process"))},{"./DOMProperty":79,"./EventPluginRegistry":85,_process:407,"fbjs/lib/warning":56,"react/lib/ReactComponentTreeHook":200}],116:[function(require,module,exports){(function(process){"use strict";var ReactInvalidSetStateWarningHook=require("./ReactInvalidSetStateWarningHook");var ReactHostOperationHistoryHook=require("./ReactHostOperationHistoryHook");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var performanceNow=require("fbjs/lib/performanceNow");var warning=require("fbjs/lib/warning");var hooks=[];var didHookThrowForEvent={};function callHook(event,fn,context,arg1,arg2,arg3,arg4,arg5){try{fn.call(context,arg1,arg2,arg3,arg4,arg5)}catch(e){process.env.NODE_ENV!=="production"?warning(didHookThrowForEvent[event],"Exception thrown by hook while handling %s: %s",event,e+"\n"+e.stack):void 0;didHookThrowForEvent[event]=true}}function emitEvent(event,arg1,arg2,arg3,arg4,arg5){for(var i=0;i<hooks.length;i++){var hook=hooks[i];var fn=hook[event];if(fn){callHook(event,fn,hook,arg1,arg2,arg3,arg4,arg5)}}}var isProfiling=false;var flushHistory=[];var lifeCycleTimerStack=[];var currentFlushNesting=0;var currentFlushMeasurements=[];var currentFlushStartTime=0;var currentTimerDebugID=null;var currentTimerStartTime=0;var currentTimerNestedFlushDuration=0;var currentTimerType=null;var lifeCycleTimerHasWarned=false;function clearHistory(){ReactComponentTreeHook.purgeUnmountedComponents();ReactHostOperationHistoryHook.clearHistory()}function getTreeSnapshot(registeredIDs){return registeredIDs.reduce(function(tree,id){var ownerID=ReactComponentTreeHook.getOwnerID(id);var parentID=ReactComponentTreeHook.getParentID(id);tree[id]={displayName:ReactComponentTreeHook.getDisplayName(id),text:ReactComponentTreeHook.getText(id),updateCount:ReactComponentTreeHook.getUpdateCount(id),childIDs:ReactComponentTreeHook.getChildIDs(id),ownerID:ownerID||parentID&&ReactComponentTreeHook.getOwnerID(parentID)||0,parentID:parentID};return tree},{})}function resetMeasurements(){var previousStartTime=currentFlushStartTime;var previousMeasurements=currentFlushMeasurements;var previousOperations=ReactHostOperationHistoryHook.getHistory();if(currentFlushNesting===0){currentFlushStartTime=0;currentFlushMeasurements=[];clearHistory();return}if(previousMeasurements.length||previousOperations.length){var registeredIDs=ReactComponentTreeHook.getRegisteredIDs();flushHistory.push({duration:performanceNow()-previousStartTime,measurements:previousMeasurements||[],operations:previousOperations||[],treeSnapshot:getTreeSnapshot(registeredIDs)})}clearHistory();currentFlushStartTime=performanceNow();currentFlushMeasurements=[]}function checkDebugID(debugID){var allowRoot=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(allowRoot&&debugID===0){return}if(!debugID){process.env.NODE_ENV!=="production"?warning(false,"ReactDebugTool: debugID may not be empty."):void 0}}function beginLifeCycleTimer(debugID,timerType){if(currentFlushNesting===0){return}if(currentTimerType&&!lifeCycleTimerHasWarned){process.env.NODE_ENV!=="production"?warning(false,"There is an internal error in the React performance measurement code. "+"Did not expect %s timer to start while %s timer is still in "+"progress for %s instance.",timerType,currentTimerType||"no",debugID===currentTimerDebugID?"the same":"another"):void 0;lifeCycleTimerHasWarned=true}currentTimerStartTime=performanceNow();currentTimerNestedFlushDuration=0;currentTimerDebugID=debugID;currentTimerType=timerType}function endLifeCycleTimer(debugID,timerType){if(currentFlushNesting===0){return}if(currentTimerType!==timerType&&!lifeCycleTimerHasWarned){process.env.NODE_ENV!=="production"?warning(false,"There is an internal error in the React performance measurement code. "+"We did not expect %s timer to stop while %s timer is still in "+"progress for %s instance. Please report this as a bug in React.",timerType,currentTimerType||"no",debugID===currentTimerDebugID?"the same":"another"):void 0;lifeCycleTimerHasWarned=true}if(isProfiling){currentFlushMeasurements.push({timerType:timerType,instanceID:debugID,duration:performanceNow()-currentTimerStartTime-currentTimerNestedFlushDuration})}currentTimerStartTime=0;currentTimerNestedFlushDuration=0;currentTimerDebugID=null;currentTimerType=null}function pauseCurrentLifeCycleTimer(){var currentTimer={startTime:currentTimerStartTime,nestedFlushStartTime:performanceNow(),debugID:currentTimerDebugID,timerType:currentTimerType};lifeCycleTimerStack.push(currentTimer);currentTimerStartTime=0;currentTimerNestedFlushDuration=0;currentTimerDebugID=null;currentTimerType=null}function resumeCurrentLifeCycleTimer(){var _lifeCycleTimerStack$=lifeCycleTimerStack.pop(),startTime=_lifeCycleTimerStack$.startTime,nestedFlushStartTime=_lifeCycleTimerStack$.nestedFlushStartTime,debugID=_lifeCycleTimerStack$.debugID,timerType=_lifeCycleTimerStack$.timerType;var nestedFlushDuration=performanceNow()-nestedFlushStartTime;currentTimerStartTime=startTime;currentTimerNestedFlushDuration+=nestedFlushDuration;currentTimerDebugID=debugID;currentTimerType=timerType}var lastMarkTimeStamp=0;var canUsePerformanceMeasure=typeof performance!=="undefined"&&typeof performance.mark==="function"&&typeof performance.clearMarks==="function"&&typeof performance.measure==="function"&&typeof performance.clearMeasures==="function";function shouldMark(debugID){if(!isProfiling||!canUsePerformanceMeasure){return false}var element=ReactComponentTreeHook.getElement(debugID);if(element==null||typeof element!=="object"){return false}var isHostElement=typeof element.type==="string";if(isHostElement){return false}return true}function markBegin(debugID,markType){if(!shouldMark(debugID)){return}var markName=debugID+"::"+markType;lastMarkTimeStamp=performanceNow();performance.mark(markName)}function markEnd(debugID,markType){if(!shouldMark(debugID)){return}var markName=debugID+"::"+markType;var displayName=ReactComponentTreeHook.getDisplayName(debugID)||"Unknown";var timeStamp=performanceNow();if(timeStamp-lastMarkTimeStamp>.1){var measurementName=displayName+" ["+markType+"]";performance.measure(measurementName,markName)}performance.clearMarks(markName);if(measurementName){performance.clearMeasures(measurementName)}}var ReactDebugTool={addHook:function(hook){hooks.push(hook)},removeHook:function(hook){for(var i=0;i<hooks.length;i++){if(hooks[i]===hook){hooks.splice(i,1);i--}}},isProfiling:function(){return isProfiling},beginProfiling:function(){if(isProfiling){return}isProfiling=true;flushHistory.length=0;resetMeasurements();ReactDebugTool.addHook(ReactHostOperationHistoryHook)},endProfiling:function(){if(!isProfiling){return}isProfiling=false;resetMeasurements();ReactDebugTool.removeHook(ReactHostOperationHistoryHook)},getFlushHistory:function(){return flushHistory},onBeginFlush:function(){currentFlushNesting++;resetMeasurements();pauseCurrentLifeCycleTimer();emitEvent("onBeginFlush")},onEndFlush:function(){resetMeasurements();currentFlushNesting--;resumeCurrentLifeCycleTimer();emitEvent("onEndFlush")},onBeginLifeCycleTimer:function(debugID,timerType){checkDebugID(debugID);emitEvent("onBeginLifeCycleTimer",debugID,timerType);markBegin(debugID,timerType);beginLifeCycleTimer(debugID,timerType)},onEndLifeCycleTimer:function(debugID,timerType){checkDebugID(debugID);endLifeCycleTimer(debugID,timerType);markEnd(debugID,timerType);emitEvent("onEndLifeCycleTimer",debugID,timerType)},onBeginProcessingChildContext:function(){emitEvent("onBeginProcessingChildContext")},onEndProcessingChildContext:function(){emitEvent("onEndProcessingChildContext")},onHostOperation:function(operation){checkDebugID(operation.instanceID);emitEvent("onHostOperation",operation)},onSetState:function(){emitEvent("onSetState")},onSetChildren:function(debugID,childDebugIDs){checkDebugID(debugID);childDebugIDs.forEach(checkDebugID);emitEvent("onSetChildren",debugID,childDebugIDs)},onBeforeMountComponent:function(debugID,element,parentDebugID){checkDebugID(debugID);checkDebugID(parentDebugID,true);emitEvent("onBeforeMountComponent",debugID,element,parentDebugID);markBegin(debugID,"mount")},onMountComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"mount");emitEvent("onMountComponent",debugID)},onBeforeUpdateComponent:function(debugID,element){checkDebugID(debugID);emitEvent("onBeforeUpdateComponent",debugID,element);markBegin(debugID,"update")},onUpdateComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"update");emitEvent("onUpdateComponent",debugID)},onBeforeUnmountComponent:function(debugID){checkDebugID(debugID);emitEvent("onBeforeUnmountComponent",debugID);markBegin(debugID,"unmount")},onUnmountComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"unmount");emitEvent("onUnmountComponent",debugID)},onTestEvent:function(){emitEvent("onTestEvent")}};ReactDebugTool.addDevtool=ReactDebugTool.addHook;ReactDebugTool.removeDevtool=ReactDebugTool.removeHook;ReactDebugTool.addHook(ReactInvalidSetStateWarningHook);ReactDebugTool.addHook(ReactComponentTreeHook);var url=ExecutionEnvironment.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(url)){ReactDebugTool.beginProfiling()}module.exports=ReactDebugTool}).call(this,require("_process"))},{"./ReactHostOperationHistoryHook":126,"./ReactInvalidSetStateWarningHook":131,_process:407,"fbjs/lib/ExecutionEnvironment":35,"fbjs/lib/performanceNow":54,"fbjs/lib/warning":56,"react/lib/ReactComponentTreeHook":200}],117:[function(require,module,exports){"use strict";var _assign=require("object-assign");var ReactUpdates=require("./ReactUpdates");var Transaction=require("./Transaction");var emptyFunction=require("fbjs/lib/emptyFunction");var RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=false}};var FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)};var TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}_assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction;var ReactDefaultBatchingStrategy={isBatchingUpdates:false,batchedUpdates:function(callback,a,b,c,d,e){var alreadyBatchingUpdates=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=true;if(alreadyBatchingUpdates){return callback(a,b,c,d,e)}else{return transaction.perform(callback,null,a,b,c,d,e)}}};module.exports=ReactDefaultBatchingStrategy},{"./ReactUpdates":145,"./Transaction":163,"fbjs/lib/emptyFunction":41,"object-assign":63}],118:[function(require,module,exports){"use strict";var ARIADOMPropertyConfig=require("./ARIADOMPropertyConfig");var BeforeInputEventPlugin=require("./BeforeInputEventPlugin");var ChangeEventPlugin=require("./ChangeEventPlugin");var DefaultEventPluginOrder=require("./DefaultEventPluginOrder");var EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin");var HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig");var ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment");var ReactDOMComponent=require("./ReactDOMComponent");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMEmptyComponent=require("./ReactDOMEmptyComponent");var ReactDOMTreeTraversal=require("./ReactDOMTreeTraversal");var ReactDOMTextComponent=require("./ReactDOMTextComponent");var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy");var ReactEventListener=require("./ReactEventListener");var ReactInjection=require("./ReactInjection");var ReactReconcileTransaction=require("./ReactReconcileTransaction");var SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig");var SelectEventPlugin=require("./SelectEventPlugin");var SimpleEventPlugin=require("./SimpleEventPlugin");var alreadyInjected=false;function inject(){if(alreadyInjected){return}alreadyInjected=true;ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener);ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder);ReactInjection.EventPluginUtils.injectComponentTree(ReactDOMComponentTree);ReactInjection.EventPluginUtils.injectTreeTraversal(ReactDOMTreeTraversal);ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin});ReactInjection.HostComponent.injectGenericComponentClass(ReactDOMComponent);ReactInjection.HostComponent.injectTextComponentClass(ReactDOMTextComponent);ReactInjection.DOMProperty.injectDOMPropertyConfig(ARIADOMPropertyConfig);ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig);ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig);ReactInjection.EmptyComponent.injectEmptyComponentFactory(function(instantiate){return new ReactDOMEmptyComponent(instantiate)});ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction);ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy);ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}module.exports={inject:inject}},{"./ARIADOMPropertyConfig":69,"./BeforeInputEventPlugin":71,"./ChangeEventPlugin":75,"./DefaultEventPluginOrder":82,"./EnterLeaveEventPlugin":83,"./HTMLDOMPropertyConfig":89,"./ReactComponentBrowserEnvironment":95,"./ReactDOMComponent":99,"./ReactDOMComponentTree":101,"./ReactDOMEmptyComponent":103,"./ReactDOMTextComponent":112,"./ReactDOMTreeTraversal":114,"./ReactDefaultBatchingStrategy":117,"./ReactEventListener":123,"./ReactInjection":127,"./ReactReconcileTransaction":139,"./SVGDOMPropertyConfig":147,"./SelectEventPlugin":148,"./SimpleEventPlugin":149}],119:[function(require,module,exports){"use strict";var REACT_ELEMENT_TYPE=typeof Symbol==="function"&&Symbol["for"]&&Symbol["for"]("react.element")||60103;module.exports=REACT_ELEMENT_TYPE},{}],120:[function(require,module,exports){"use strict";var emptyComponentFactory;var ReactEmptyComponentInjection={injectEmptyComponentFactory:function(factory){emptyComponentFactory=factory}};var ReactEmptyComponent={create:function(instantiate){return emptyComponentFactory(instantiate)}};ReactEmptyComponent.injection=ReactEmptyComponentInjection;module.exports=ReactEmptyComponent},{}],121:[function(require,module,exports){(function(process){"use strict";var caughtError=null;function invokeGuardedCallback(name,func,a){try{func(a)}catch(x){if(caughtError===null){caughtError=x}}}var ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var error=caughtError;caughtError=null;throw error}}};if(process.env.NODE_ENV!=="production"){if(typeof window!=="undefined"&&typeof window.dispatchEvent==="function"&&typeof document!=="undefined"&&typeof document.createEvent==="function"){var fakeNode=document.createElement("react");ReactErrorUtils.invokeGuardedCallback=function(name,func,a){var boundFunc=function(){func(a)};var evtType="react-"+name;fakeNode.addEventListener(evtType,boundFunc,false);var evt=document.createEvent("Event");evt.initEvent(evtType,false,false);fakeNode.dispatchEvent(evt);fakeNode.removeEventListener(evtType,boundFunc,false)}}}module.exports=ReactErrorUtils}).call(this,require("_process"))},{_process:407}],122:[function(require,module,exports){"use strict";var EventPluginHub=require("./EventPluginHub");function runEventQueueInBatch(events){EventPluginHub.enqueueEvents(events);EventPluginHub.processEventQueue(false)}var ReactEventEmitterMixin={handleTopLevel:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var events=EventPluginHub.extractEvents(topLevelType,targetInst,nativeEvent,nativeEventTarget);runEventQueueInBatch(events)}};module.exports=ReactEventEmitterMixin},{"./EventPluginHub":84}],123:[function(require,module,exports){"use strict";var _assign=require("object-assign");var EventListener=require("fbjs/lib/EventListener");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var PooledClass=require("./PooledClass");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var getEventTarget=require("./getEventTarget");var getUnboundedScrollPosition=require("fbjs/lib/getUnboundedScrollPosition");function findParent(inst){while(inst._hostParent){inst=inst._hostParent}var rootNode=ReactDOMComponentTree.getNodeFromInstance(inst);var container=rootNode.parentNode;return ReactDOMComponentTree.getClosestInstanceFromNode(container)}function TopLevelCallbackBookKeeping(topLevelType,nativeEvent){this.topLevelType=topLevelType;this.nativeEvent=nativeEvent;this.ancestors=[]}_assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null;this.nativeEvent=null;this.ancestors.length=0}});PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);function handleTopLevelImpl(bookKeeping){var nativeEventTarget=getEventTarget(bookKeeping.nativeEvent);var targetInst=ReactDOMComponentTree.getClosestInstanceFromNode(nativeEventTarget);var ancestor=targetInst;do{bookKeeping.ancestors.push(ancestor);ancestor=ancestor&&findParent(ancestor)}while(ancestor);for(var i=0;i<bookKeeping.ancestors.length;i++){targetInst=bookKeeping.ancestors[i];ReactEventListener._handleTopLevel(bookKeeping.topLevelType,targetInst,bookKeeping.nativeEvent,getEventTarget(bookKeeping.nativeEvent))}}function scrollValueMonitor(cb){var scrollPosition=getUnboundedScrollPosition(window);cb(scrollPosition)}var ReactEventListener={_enabled:true,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(handleTopLevel){ReactEventListener._handleTopLevel=handleTopLevel},setEnabled:function(enabled){ReactEventListener._enabled=!!enabled},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(topLevelType,handlerBaseName,element){if(!element){return null}return EventListener.listen(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType))},trapCapturedEvent:function(topLevelType,handlerBaseName,element){if(!element){return null}return EventListener.capture(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType))},monitorScrollValue:function(refresh){var callback=scrollValueMonitor.bind(null,refresh);EventListener.listen(window,"scroll",callback)},dispatchEvent:function(topLevelType,nativeEvent){if(!ReactEventListener._enabled){return}var bookKeeping=TopLevelCallbackBookKeeping.getPooled(topLevelType,nativeEvent);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,bookKeeping)}finally{TopLevelCallbackBookKeeping.release(bookKeeping)}}};module.exports=ReactEventListener},{"./PooledClass":92,"./ReactDOMComponentTree":101,"./ReactUpdates":145,"./getEventTarget":177,"fbjs/lib/EventListener":34,"fbjs/lib/ExecutionEnvironment":35,"fbjs/lib/getUnboundedScrollPosition":46,"object-assign":63}],124:[function(require,module,exports){"use strict";var ReactFeatureFlags={logTopLevelRenders:false};module.exports=ReactFeatureFlags},{}],125:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var genericComponentClass=null;var textComponentClass=null;var ReactHostComponentInjection={injectGenericComponentClass:function(componentClass){genericComponentClass=componentClass},injectTextComponentClass:function(componentClass){textComponentClass=componentClass}};function createInternalComponent(element){!genericComponentClass?process.env.NODE_ENV!=="production"?invariant(false,"There is no registered component for the tag %s",element.type):_prodInvariant("111",element.type):void 0;return new genericComponentClass(element)}function createInstanceForText(text){return new textComponentClass(text)}function isTextComponent(component){return component instanceof textComponentClass}var ReactHostComponent={createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactHostComponentInjection};module.exports=ReactHostComponent}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],126:[function(require,module,exports){"use strict";var history=[];var ReactHostOperationHistoryHook={onHostOperation:function(operation){history.push(operation)},clearHistory:function(){if(ReactHostOperationHistoryHook._preventClearing){return}history=[]},getHistory:function(){return history}};module.exports=ReactHostOperationHistoryHook},{}],127:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var EventPluginHub=require("./EventPluginHub");var EventPluginUtils=require("./EventPluginUtils");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactHostComponent=require("./ReactHostComponent");var ReactUpdates=require("./ReactUpdates");var ReactInjection={Component:ReactComponentEnvironment.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventPluginUtils:EventPluginUtils.injection,EventEmitter:ReactBrowserEventEmitter.injection,HostComponent:ReactHostComponent.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection},{"./DOMProperty":79,"./EventPluginHub":84,"./EventPluginUtils":86,"./ReactBrowserEventEmitter":93,"./ReactComponentEnvironment":96,"./ReactEmptyComponent":120,"./ReactHostComponent":125,"./ReactUpdates":145}],128:[function(require,module,exports){"use strict";var ReactDOMSelection=require("./ReactDOMSelection");var containsNode=require("fbjs/lib/containsNode");var focusNode=require("fbjs/lib/focusNode");var getActiveElement=require("fbjs/lib/getActiveElement");function isInDocument(node){return containsNode(document.documentElement,node)}var ReactInputSelection={hasSelectionCapabilities:function(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&(nodeName==="input"&&elem.type==="text"||nodeName==="textarea"||elem.contentEditable==="true")},getSelectionInformation:function(){var focusedElem=getActiveElement();return{focusedElem:focusedElem,selectionRange:ReactInputSelection.hasSelectionCapabilities(focusedElem)?ReactInputSelection.getSelection(focusedElem):null}},restoreSelection:function(priorSelectionInformation){var curFocusedElem=getActiveElement();var priorFocusedElem=priorSelectionInformation.focusedElem;var priorSelectionRange=priorSelectionInformation.selectionRange;if(curFocusedElem!==priorFocusedElem&&isInDocument(priorFocusedElem)){if(ReactInputSelection.hasSelectionCapabilities(priorFocusedElem)){ReactInputSelection.setSelection(priorFocusedElem,priorSelectionRange)}focusNode(priorFocusedElem)}},getSelection:function(input){var selection;if("selectionStart"in input){selection={start:input.selectionStart,end:input.selectionEnd}}else if(document.selection&&input.nodeName&&input.nodeName.toLowerCase()==="input"){var range=document.selection.createRange();if(range.parentElement()===input){selection={start:-range.moveStart("character",-input.value.length),end:-range.moveEnd("character",-input.value.length)}}}else{selection=ReactDOMSelection.getOffsets(input)}return selection||{start:0,end:0}},setSelection:function(input,offsets){var start=offsets.start;var end=offsets.end;if(end===undefined){end=start}if("selectionStart"in input){input.selectionStart=start;input.selectionEnd=Math.min(end,input.value.length)}else if(document.selection&&input.nodeName&&input.nodeName.toLowerCase()==="input"){var range=input.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",end-start);range.select()}else{ReactDOMSelection.setOffsets(input,offsets)}}};module.exports=ReactInputSelection},{"./ReactDOMSelection":111,"fbjs/lib/containsNode":38,"fbjs/lib/focusNode":43,"fbjs/lib/getActiveElement":44}],129:[function(require,module,exports){"use strict";var ReactInstanceMap={remove:function(key){key._reactInternalInstance=undefined},get:function(key){return key._reactInternalInstance},has:function(key){return key._reactInternalInstance!==undefined},set:function(key,value){key._reactInternalInstance=value}};module.exports=ReactInstanceMap},{}],130:[function(require,module,exports){(function(process){"use strict";var debugTool=null;if(process.env.NODE_ENV!=="production"){var ReactDebugTool=require("./ReactDebugTool");debugTool=ReactDebugTool}module.exports={debugTool:debugTool}}).call(this,require("_process"))},{"./ReactDebugTool":116,_process:407}],131:[function(require,module,exports){(function(process){"use strict";var warning=require("fbjs/lib/warning");if(process.env.NODE_ENV!=="production"){var processingChildContext=false;var warnInvalidSetState=function(){process.env.NODE_ENV!=="production"?warning(!processingChildContext,"setState(...): Cannot call setState() inside getChildContext()"):void 0}}var ReactInvalidSetStateWarningHook={onBeginProcessingChildContext:function(){processingChildContext=true},onEndProcessingChildContext:function(){processingChildContext=false},onSetState:function(){warnInvalidSetState()}};module.exports=ReactInvalidSetStateWarningHook}).call(this,require("_process"))},{_process:407,"fbjs/lib/warning":56}],132:[function(require,module,exports){"use strict";var adler32=require("./adler32");var TAG_END=/\/?>/;var COMMENT_START=/^<\!\-\-/;var ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(markup){var checksum=adler32(markup);if(COMMENT_START.test(markup)){return markup}else{return markup.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+checksum+'"$&')}},canReuseMarkup:function(markup,element){var existingChecksum=element.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);existingChecksum=existingChecksum&&parseInt(existingChecksum,10);var markupChecksum=adler32(markup);return markupChecksum===existingChecksum}};module.exports=ReactMarkupChecksum},{"./adler32":166}],133:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMLazyTree=require("./DOMLazyTree");var DOMProperty=require("./DOMProperty");var React=require("react/lib/React");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMContainerInfo=require("./ReactDOMContainerInfo");var ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags");var ReactFeatureFlags=require("./ReactFeatureFlags");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactMarkupChecksum=require("./ReactMarkupChecksum");var ReactReconciler=require("./ReactReconciler");var ReactUpdateQueue=require("./ReactUpdateQueue");var ReactUpdates=require("./ReactUpdates");var emptyObject=require("fbjs/lib/emptyObject");var instantiateReactComponent=require("./instantiateReactComponent");var invariant=require("fbjs/lib/invariant");var setInnerHTML=require("./setInnerHTML");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var warning=require("fbjs/lib/warning");var ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME;var ROOT_ATTR_NAME=DOMProperty.ROOT_ATTRIBUTE_NAME;var ELEMENT_NODE_TYPE=1;var DOC_NODE_TYPE=9;var DOCUMENT_FRAGMENT_NODE_TYPE=11;var instancesByReactRootID={};function firstDifferenceIndex(string1,string2){var minLen=Math.min(string1.length,string2.length);for(var i=0;i<minLen;i++){if(string1.charAt(i)!==string2.charAt(i)){return i}}return string1.length===string2.length?-1:minLen}function getReactRootElementInContainer(container){if(!container){return null}if(container.nodeType===DOC_NODE_TYPE){return container.documentElement}else{return container.firstChild}}function internalGetID(node){return node.getAttribute&&node.getAttribute(ATTR_NAME)||""}function mountComponentIntoNode(wrapperInstance,container,transaction,shouldReuseMarkup,context){var markerName;if(ReactFeatureFlags.logTopLevelRenders){var wrappedElement=wrapperInstance._currentElement.props.child;var type=wrappedElement.type;markerName="React mount: "+(typeof type==="string"?type:type.displayName||type.name);console.time(markerName)}var markup=ReactReconciler.mountComponent(wrapperInstance,transaction,null,ReactDOMContainerInfo(wrapperInstance,container),context,0);if(markerName){console.timeEnd(markerName)}wrapperInstance._renderedComponent._topLevelWrapper=wrapperInstance;ReactMount._mountImageIntoNode(markup,container,wrapperInstance,shouldReuseMarkup,transaction)}function batchedMountComponentIntoNode(componentInstance,container,shouldReuseMarkup,context){var transaction=ReactUpdates.ReactReconcileTransaction.getPooled(!shouldReuseMarkup&&ReactDOMFeatureFlags.useCreateElement);transaction.perform(mountComponentIntoNode,null,componentInstance,container,transaction,shouldReuseMarkup,context);ReactUpdates.ReactReconcileTransaction.release(transaction)}function unmountComponentFromNode(instance,container,safely){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onBeginFlush()}ReactReconciler.unmountComponent(instance,safely);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onEndFlush()}if(container.nodeType===DOC_NODE_TYPE){container=container.documentElement}while(container.lastChild){container.removeChild(container.lastChild)}}function hasNonRootReactChild(container){var rootEl=getReactRootElementInContainer(container);if(rootEl){var inst=ReactDOMComponentTree.getInstanceFromNode(rootEl);return!!(inst&&inst._hostParent)}}function nodeIsRenderedByOtherInstance(container){var rootEl=getReactRootElementInContainer(container);return!!(rootEl&&isReactNode(rootEl)&&!ReactDOMComponentTree.getInstanceFromNode(rootEl))}function isValidContainer(node){return!!(node&&(node.nodeType===ELEMENT_NODE_TYPE||node.nodeType===DOC_NODE_TYPE||node.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE))}function isReactNode(node){return isValidContainer(node)&&(node.hasAttribute(ROOT_ATTR_NAME)||node.hasAttribute(ATTR_NAME))}function getHostRootInstanceInContainer(container){var rootEl=getReactRootElementInContainer(container);var prevHostInstance=rootEl&&ReactDOMComponentTree.getInstanceFromNode(rootEl);return prevHostInstance&&!prevHostInstance._hostParent?prevHostInstance:null}function getTopLevelWrapperInContainer(container){var root=getHostRootInstanceInContainer(container);return root?root._hostContainerInfo._topLevelWrapper:null}var topLevelRootCounter=1;var TopLevelWrapper=function(){this.rootID=topLevelRootCounter++};TopLevelWrapper.prototype.isReactComponent={};if(process.env.NODE_ENV!=="production"){TopLevelWrapper.displayName="TopLevelWrapper"}TopLevelWrapper.prototype.render=function(){return this.props.child};TopLevelWrapper.isReactTopLevelWrapper=true;var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(container,renderCallback){renderCallback()},_updateRootComponent:function(prevComponent,nextElement,nextContext,container,callback){ReactMount.scrollMonitor(container,function(){ReactUpdateQueue.enqueueElementInternal(prevComponent,nextElement,nextContext);if(callback){ReactUpdateQueue.enqueueCallbackInternal(prevComponent,callback)}});return prevComponent},_renderNewRootComponent:function(nextElement,container,shouldReuseMarkup,context){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"_renderNewRootComponent(): Render methods should be a pure function "+"of props and state; triggering nested component updates from "+"render is not allowed. If necessary, trigger nested updates in "+"componentDidUpdate. Check the render method of %s.",ReactCurrentOwner.current&&ReactCurrentOwner.current.getName()||"ReactCompositeComponent"):void 0;!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"_registerComponent(...): Target container is not a DOM element."):_prodInvariant("37"):void 0;ReactBrowserEventEmitter.ensureScrollValueMonitoring();var componentInstance=instantiateReactComponent(nextElement,false);ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,componentInstance,container,shouldReuseMarkup,context);var wrapperID=componentInstance._instance.rootID;instancesByReactRootID[wrapperID]=componentInstance;return componentInstance},renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){!(parentComponent!=null&&ReactInstanceMap.has(parentComponent))?process.env.NODE_ENV!=="production"?invariant(false,"parentComponent must be a valid React Component"):_prodInvariant("38"):void 0;return ReactMount._renderSubtreeIntoContainer(parentComponent,nextElement,container,callback)},_renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){ReactUpdateQueue.validateCallback(callback,"ReactDOM.render");!React.isValidElement(nextElement)?process.env.NODE_ENV!=="production"?invariant(false,"ReactDOM.render(): Invalid component element.%s",typeof nextElement==="string"?" Instead of passing a string like 'div', pass "+"React.createElement('div') or <div />.":typeof nextElement==="function"?" Instead of passing a class like Foo, pass "+"React.createElement(Foo) or <Foo />.":nextElement!=null&&nextElement.props!==undefined?" This may be caused by unintentionally loading two independent "+"copies of React.":""):_prodInvariant("39",typeof nextElement==="string"?" Instead of passing a string like 'div', pass "+"React.createElement('div') or <div />.":typeof nextElement==="function"?" Instead of passing a class like Foo, pass "+"React.createElement(Foo) or <Foo />.":nextElement!=null&&nextElement.props!==undefined?" This may be caused by unintentionally loading two independent "+"copies of React.":""):void 0;process.env.NODE_ENV!=="production"?warning(!container||!container.tagName||container.tagName.toUpperCase()!=="BODY","render(): Rendering components directly into document.body is "+"discouraged, since its children are often manipulated by third-party "+"scripts and browser extensions. This may lead to subtle "+"reconciliation issues. Try rendering into a container element created "+"for your app."):void 0;var nextWrappedElement=React.createElement(TopLevelWrapper,{child:nextElement});var nextContext;if(parentComponent){var parentInst=ReactInstanceMap.get(parentComponent);nextContext=parentInst._processChildContext(parentInst._context)}else{nextContext=emptyObject}var prevComponent=getTopLevelWrapperInContainer(container);if(prevComponent){var prevWrappedElement=prevComponent._currentElement;var prevElement=prevWrappedElement.props.child;if(shouldUpdateReactComponent(prevElement,nextElement)){var publicInst=prevComponent._renderedComponent.getPublicInstance();var updatedCallback=callback&&function(){callback.call(publicInst)};ReactMount._updateRootComponent(prevComponent,nextWrappedElement,nextContext,container,updatedCallback);return publicInst}else{ReactMount.unmountComponentAtNode(container)}}var reactRootElement=getReactRootElementInContainer(container);var containerHasReactMarkup=reactRootElement&&!!internalGetID(reactRootElement);var containerHasNonRootReactChild=hasNonRootReactChild(container);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!containerHasNonRootReactChild,"render(...): Replacing React-rendered children with a new root "+"component. If you intended to update the children of this node, "+"you should instead have the existing children update their state "+"and render the new components instead of calling ReactDOM.render."):void 0;if(!containerHasReactMarkup||reactRootElement.nextSibling){var rootElementSibling=reactRootElement;while(rootElementSibling){if(internalGetID(rootElementSibling)){process.env.NODE_ENV!=="production"?warning(false,"render(): Target node has markup rendered by React, but there "+"are unrelated nodes as well. This is most commonly caused by "+"white-space inserted around server-rendered markup."):void 0;break}rootElementSibling=rootElementSibling.nextSibling}}}var shouldReuseMarkup=containerHasReactMarkup&&!prevComponent&&!containerHasNonRootReactChild;var component=ReactMount._renderNewRootComponent(nextWrappedElement,container,shouldReuseMarkup,nextContext)._renderedComponent.getPublicInstance();if(callback){callback.call(component)}return component},render:function(nextElement,container,callback){return ReactMount._renderSubtreeIntoContainer(null,nextElement,container,callback)},unmountComponentAtNode:function(container){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"unmountComponentAtNode(): Render methods should be a pure function "+"of props and state; triggering nested component updates from render "+"is not allowed. If necessary, trigger nested updates in "+"componentDidUpdate. Check the render method of %s.",ReactCurrentOwner.current&&ReactCurrentOwner.current.getName()||"ReactCompositeComponent"):void 0;!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"unmountComponentAtNode(...): Target container is not a DOM element."):_prodInvariant("40"):void 0;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!nodeIsRenderedByOtherInstance(container),"unmountComponentAtNode(): The node you're attempting to unmount "+"was rendered by another copy of React."):void 0}var prevComponent=getTopLevelWrapperInContainer(container);if(!prevComponent){var containerHasNonRootReactChild=hasNonRootReactChild(container);var isContainerReactRoot=container.nodeType===1&&container.hasAttribute(ROOT_ATTR_NAME);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!containerHasNonRootReactChild,"unmountComponentAtNode(): The node you're attempting to unmount "+"was rendered by React and is not a top-level container. %s",isContainerReactRoot?"You may have accidentally passed in a React root node instead "+"of its container.":"Instead, have the parent component update its state and "+"rerender in order to remove this component."):void 0}return false}delete instancesByReactRootID[prevComponent._instance.rootID];ReactUpdates.batchedUpdates(unmountComponentFromNode,prevComponent,container,false);return true},_mountImageIntoNode:function(markup,container,instance,shouldReuseMarkup,transaction){!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"mountComponentIntoNode(...): Target container is not valid."):_prodInvariant("41"):void 0;if(shouldReuseMarkup){var rootElement=getReactRootElementInContainer(container);if(ReactMarkupChecksum.canReuseMarkup(markup,rootElement)){ReactDOMComponentTree.precacheNode(instance,rootElement);return}else{var checksum=rootElement.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);rootElement.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var rootMarkup=rootElement.outerHTML;rootElement.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,checksum);var normalizedMarkup=markup;if(process.env.NODE_ENV!=="production"){var normalizer;if(container.nodeType===ELEMENT_NODE_TYPE){normalizer=document.createElement("div");normalizer.innerHTML=markup;normalizedMarkup=normalizer.innerHTML}else{normalizer=document.createElement("iframe");document.body.appendChild(normalizer);normalizer.contentDocument.write(markup);normalizedMarkup=normalizer.contentDocument.documentElement.outerHTML;document.body.removeChild(normalizer)}}var diffIndex=firstDifferenceIndex(normalizedMarkup,rootMarkup);var difference=" (client) "+normalizedMarkup.substring(diffIndex-20,diffIndex+20)+"\n (server) "+rootMarkup.substring(diffIndex-20,diffIndex+20);!(container.nodeType!==DOC_NODE_TYPE)?process.env.NODE_ENV!=="production"?invariant(false,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",difference):_prodInvariant("42",difference):void 0;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(false,"React attempted to reuse markup in a container but the "+"checksum was invalid. This generally means that you are "+"using server rendering and the markup generated on the "+"server was not what the client was expecting. React injected "+"new markup to compensate which works but you have lost many "+"of the benefits of server rendering. Instead, figure out "+"why the markup being generated is different on the client "+"or server:\n%s",difference):void 0}}}!(container.nodeType!==DOC_NODE_TYPE)?process.env.NODE_ENV!=="production"?invariant(false,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):_prodInvariant("43"):void 0;if(transaction.useCreateElement){while(container.lastChild){container.removeChild(container.lastChild)}DOMLazyTree.insertTreeBefore(container,markup,null)}else{setInnerHTML(container,markup);ReactDOMComponentTree.precacheNode(instance,container.firstChild)}if(process.env.NODE_ENV!=="production"){var hostNode=ReactDOMComponentTree.getInstanceFromNode(container.firstChild);if(hostNode._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:hostNode._debugID,type:"mount",payload:markup.toString()})}}}};module.exports=ReactMount}).call(this,require("_process"))},{"./DOMLazyTree":77,"./DOMProperty":79,"./ReactBrowserEventEmitter":93,"./ReactDOMComponentTree":101,"./ReactDOMContainerInfo":102,"./ReactDOMFeatureFlags":104,"./ReactFeatureFlags":124,"./ReactInstanceMap":129,"./ReactInstrumentation":130,"./ReactMarkupChecksum":132,"./ReactReconciler":140,"./ReactUpdateQueue":144,"./ReactUpdates":145,"./instantiateReactComponent":184,"./reactProdInvariant":188,"./setInnerHTML":190,"./shouldUpdateReactComponent":192,_process:407,"fbjs/lib/emptyObject":42,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"react/lib/React":197,"react/lib/ReactCurrentOwner":201}],134:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactReconciler=require("./ReactReconciler");var ReactChildReconciler=require("./ReactChildReconciler");var emptyFunction=require("fbjs/lib/emptyFunction");var flattenChildren=require("./flattenChildren");var invariant=require("fbjs/lib/invariant");function makeInsertMarkup(markup,afterNode,toIndex){return{type:"INSERT_MARKUP",content:markup,fromIndex:null,fromNode:null,toIndex:toIndex,afterNode:afterNode}}function makeMove(child,afterNode,toIndex){return{type:"MOVE_EXISTING",content:null,fromIndex:child._mountIndex,fromNode:ReactReconciler.getHostNode(child),toIndex:toIndex,afterNode:afterNode}}function makeRemove(child,node){return{type:"REMOVE_NODE",content:null,fromIndex:child._mountIndex,fromNode:node,toIndex:null,afterNode:null}}function makeSetMarkup(markup){return{type:"SET_MARKUP",content:markup,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function makeTextContent(textContent){return{type:"TEXT_CONTENT",content:textContent,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function enqueue(queue,update){if(update){queue=queue||[];queue.push(update)}return queue}function processQueue(inst,updateQueue){ReactComponentEnvironment.processChildrenUpdates(inst,updateQueue)}var setChildrenForInstrumentation=emptyFunction;if(process.env.NODE_ENV!=="production"){var getDebugID=function(inst){if(!inst._debugID){var internal;if(internal=ReactInstanceMap.get(inst)){inst=internal}}return inst._debugID};setChildrenForInstrumentation=function(children){var debugID=getDebugID(this);if(debugID!==0){ReactInstrumentation.debugTool.onSetChildren(debugID,children?Object.keys(children).map(function(key){return children[key]._debugID}):[])}}}var ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(nestedChildren,transaction,context){if(process.env.NODE_ENV!=="production"){var selfDebugID=getDebugID(this);if(this._currentElement){try{ReactCurrentOwner.current=this._currentElement._owner;return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context,selfDebugID)}finally{ReactCurrentOwner.current=null}}}return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context)},_reconcilerUpdateChildren:function(prevChildren,nextNestedChildrenElements,mountImages,removedNodes,transaction,context){var nextChildren;var selfDebugID=0;if(process.env.NODE_ENV!=="production"){selfDebugID=getDebugID(this);if(this._currentElement){try{ReactCurrentOwner.current=this._currentElement._owner;nextChildren=flattenChildren(nextNestedChildrenElements,selfDebugID)}finally{ReactCurrentOwner.current=null}ReactChildReconciler.updateChildren(prevChildren,nextChildren,mountImages,removedNodes,transaction,this,this._hostContainerInfo,context,selfDebugID);return nextChildren}}nextChildren=flattenChildren(nextNestedChildrenElements,selfDebugID);ReactChildReconciler.updateChildren(prevChildren,nextChildren,mountImages,removedNodes,transaction,this,this._hostContainerInfo,context,selfDebugID);return nextChildren},mountChildren:function(nestedChildren,transaction,context){var children=this._reconcilerInstantiateChildren(nestedChildren,transaction,context);this._renderedChildren=children;var mountImages=[];var index=0;for(var name in children){if(children.hasOwnProperty(name)){var child=children[name];var selfDebugID=0;if(process.env.NODE_ENV!=="production"){selfDebugID=getDebugID(this)}var mountImage=ReactReconciler.mountComponent(child,transaction,this,this._hostContainerInfo,context,selfDebugID);child._mountIndex=index++;mountImages.push(mountImage)}}if(process.env.NODE_ENV!=="production"){setChildrenForInstrumentation.call(this,children)}return mountImages},updateTextContent:function(nextContent){var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren,false);for(var name in prevChildren){if(prevChildren.hasOwnProperty(name)){!false?process.env.NODE_ENV!=="production"?invariant(false,"updateTextContent called on non-empty component."):_prodInvariant("118"):void 0}}var updates=[makeTextContent(nextContent)];processQueue(this,updates)},updateMarkup:function(nextMarkup){var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren,false);for(var name in prevChildren){if(prevChildren.hasOwnProperty(name)){!false?process.env.NODE_ENV!=="production"?invariant(false,"updateTextContent called on non-empty component."):_prodInvariant("118"):void 0}}var updates=[makeSetMarkup(nextMarkup)];processQueue(this,updates)},updateChildren:function(nextNestedChildrenElements,transaction,context){this._updateChildren(nextNestedChildrenElements,transaction,context)},_updateChildren:function(nextNestedChildrenElements,transaction,context){var prevChildren=this._renderedChildren;var removedNodes={};var mountImages=[];var nextChildren=this._reconcilerUpdateChildren(prevChildren,nextNestedChildrenElements,mountImages,removedNodes,transaction,context);if(!nextChildren&&!prevChildren){return}var updates=null;var name;var nextIndex=0;var lastIndex=0;var nextMountIndex=0;var lastPlacedNode=null;for(name in nextChildren){if(!nextChildren.hasOwnProperty(name)){continue}var prevChild=prevChildren&&prevChildren[name];var nextChild=nextChildren[name];if(prevChild===nextChild){updates=enqueue(updates,this.moveChild(prevChild,lastPlacedNode,nextIndex,lastIndex));lastIndex=Math.max(prevChild._mountIndex,lastIndex);prevChild._mountIndex=nextIndex}else{if(prevChild){lastIndex=Math.max(prevChild._mountIndex,lastIndex)}updates=enqueue(updates,this._mountChildAtIndex(nextChild,mountImages[nextMountIndex],lastPlacedNode,nextIndex,transaction,context));nextMountIndex++}nextIndex++;lastPlacedNode=ReactReconciler.getHostNode(nextChild)}for(name in removedNodes){if(removedNodes.hasOwnProperty(name)){updates=enqueue(updates,this._unmountChild(prevChildren[name],removedNodes[name]))}}if(updates){processQueue(this,updates)}this._renderedChildren=nextChildren;if(process.env.NODE_ENV!=="production"){setChildrenForInstrumentation.call(this,nextChildren)}},unmountChildren:function(safely){var renderedChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(renderedChildren,safely);this._renderedChildren=null},moveChild:function(child,afterNode,toIndex,lastIndex){if(child._mountIndex<lastIndex){return makeMove(child,afterNode,toIndex)}},createChild:function(child,afterNode,mountImage){return makeInsertMarkup(mountImage,afterNode,child._mountIndex)},removeChild:function(child,node){return makeRemove(child,node)},_mountChildAtIndex:function(child,mountImage,afterNode,index,transaction,context){child._mountIndex=index;return this.createChild(child,afterNode,mountImage)},_unmountChild:function(child,node){var update=this.removeChild(child,node);child._mountIndex=null;return update}}};module.exports=ReactMultiChild}).call(this,require("_process"))},{"./ReactChildReconciler":94,"./ReactComponentEnvironment":96,"./ReactInstanceMap":129,"./ReactInstrumentation":130,"./ReactReconciler":140,"./flattenChildren":172,"./reactProdInvariant":188,_process:407,"fbjs/lib/emptyFunction":41,"fbjs/lib/invariant":49,"react/lib/ReactCurrentOwner":201}],135:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var React=require("react/lib/React");var invariant=require("fbjs/lib/invariant");var ReactNodeTypes={HOST:0,COMPOSITE:1,EMPTY:2,getType:function(node){if(node===null||node===false){return ReactNodeTypes.EMPTY}else if(React.isValidElement(node)){if(typeof node.type==="function"){return ReactNodeTypes.COMPOSITE}else{return ReactNodeTypes.HOST}}!false?process.env.NODE_ENV!=="production"?invariant(false,"Unexpected node: %s",node):_prodInvariant("26",node):void 0}};module.exports=ReactNodeTypes}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"react/lib/React":197}],136:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function isValidOwner(object){return!!(object&&typeof object.attachRef==="function"&&typeof object.detachRef==="function")}var ReactOwner={addComponentAsRefTo:function(component,ref,owner){!isValidOwner(owner)?process.env.NODE_ENV!=="production"?invariant(false,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):_prodInvariant("119"):void 0;owner.attachRef(ref,component)},removeComponentAsRefFrom:function(component,ref,owner){!isValidOwner(owner)?process.env.NODE_ENV!=="production"?invariant(false,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):_prodInvariant("120"):void 0;var ownerPublicInstance=owner.getPublicInstance();if(ownerPublicInstance&&ownerPublicInstance.refs[ref]===component.getPublicInstance()){owner.detachRef(ref)}}};module.exports=ReactOwner}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],137:[function(require,module,exports){(function(process){"use strict";var ReactPropTypeLocationNames={};if(process.env.NODE_ENV!=="production"){ReactPropTypeLocationNames={prop:"prop",context:"context",childContext:"child context"}}module.exports=ReactPropTypeLocationNames}).call(this,require("_process"))},{_process:407}],138:[function(require,module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],139:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var CallbackQueue=require("./CallbackQueue");var PooledClass=require("./PooledClass");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactInputSelection=require("./ReactInputSelection");var ReactInstrumentation=require("./ReactInstrumentation");var Transaction=require("./Transaction");var ReactUpdateQueue=require("./ReactUpdateQueue");var SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection};var EVENT_SUPPRESSION={initialize:function(){var currentlyEnabled=ReactBrowserEventEmitter.isEnabled();ReactBrowserEventEmitter.setEnabled(false);return currentlyEnabled},close:function(previouslyEnabled){ReactBrowserEventEmitter.setEnabled(previouslyEnabled)}};var ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}};var TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING];if(process.env.NODE_ENV!=="production"){TRANSACTION_WRAPPERS.push({initialize:ReactInstrumentation.debugTool.onBeginFlush,close:ReactInstrumentation.debugTool.onEndFlush})}function ReactReconcileTransaction(useCreateElement){this.reinitializeTransaction();this.renderToStaticMarkup=false;this.reactMountReady=CallbackQueue.getPooled(null);this.useCreateElement=useCreateElement}var Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return ReactUpdateQueue},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(checkpoint){this.reactMountReady.rollback(checkpoint)},destructor:function(){CallbackQueue.release(this.reactMountReady);this.reactMountReady=null}};_assign(ReactReconcileTransaction.prototype,Transaction,Mixin);PooledClass.addPoolingTo(ReactReconcileTransaction);module.exports=ReactReconcileTransaction}).call(this,require("_process"))},{"./CallbackQueue":74,"./PooledClass":92,"./ReactBrowserEventEmitter":93,"./ReactInputSelection":128,"./ReactInstrumentation":130,"./ReactUpdateQueue":144,"./Transaction":163,_process:407,"object-assign":63}],140:[function(require,module,exports){(function(process){"use strict";var ReactRef=require("./ReactRef");var ReactInstrumentation=require("./ReactInstrumentation");var warning=require("fbjs/lib/warning");function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactReconciler={mountComponent:function(internalInstance,transaction,hostParent,hostContainerInfo,context,parentDebugID){if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeMountComponent(internalInstance._debugID,internalInstance._currentElement,parentDebugID)}}var markup=internalInstance.mountComponent(transaction,hostParent,hostContainerInfo,context,parentDebugID);if(internalInstance._currentElement&&internalInstance._currentElement.ref!=null){transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onMountComponent(internalInstance._debugID)}}return markup},getHostNode:function(internalInstance){return internalInstance.getHostNode()},unmountComponent:function(internalInstance,safely){if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUnmountComponent(internalInstance._debugID)}}ReactRef.detachRefs(internalInstance,internalInstance._currentElement);internalInstance.unmountComponent(safely);if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUnmountComponent(internalInstance._debugID)}}},receiveComponent:function(internalInstance,nextElement,transaction,context){var prevElement=internalInstance._currentElement;if(nextElement===prevElement&&context===internalInstance._context){return}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUpdateComponent(internalInstance._debugID,nextElement)}}var refsChanged=ReactRef.shouldUpdateRefs(prevElement,nextElement);if(refsChanged){ReactRef.detachRefs(internalInstance,prevElement)}internalInstance.receiveComponent(nextElement,transaction,context);if(refsChanged&&internalInstance._currentElement&&internalInstance._currentElement.ref!=null){transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUpdateComponent(internalInstance._debugID)}}},performUpdateIfNecessary:function(internalInstance,transaction,updateBatchNumber){if(internalInstance._updateBatchNumber!==updateBatchNumber){process.env.NODE_ENV!=="production"?warning(internalInstance._updateBatchNumber==null||internalInstance._updateBatchNumber===updateBatchNumber+1,"performUpdateIfNecessary: Unexpected batch number (current %s, "+"pending %s)",updateBatchNumber,internalInstance._updateBatchNumber):void 0;return}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUpdateComponent(internalInstance._debugID,internalInstance._currentElement)}}internalInstance.performUpdateIfNecessary(transaction);if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUpdateComponent(internalInstance._debugID)}}}};module.exports=ReactReconciler}).call(this,require("_process"))},{"./ReactInstrumentation":130,"./ReactRef":141,_process:407,"fbjs/lib/warning":56}],141:[function(require,module,exports){"use strict";var ReactOwner=require("./ReactOwner");var ReactRef={};function attachRef(ref,component,owner){if(typeof ref==="function"){ref(component.getPublicInstance())}else{ReactOwner.addComponentAsRefTo(component,ref,owner)}}function detachRef(ref,component,owner){if(typeof ref==="function"){ref(null)}else{ReactOwner.removeComponentAsRefFrom(component,ref,owner)}}ReactRef.attachRefs=function(instance,element){if(element===null||typeof element!=="object"){return}var ref=element.ref;if(ref!=null){attachRef(ref,instance,element._owner)}};ReactRef.shouldUpdateRefs=function(prevElement,nextElement){var prevRef=null;var prevOwner=null;if(prevElement!==null&&typeof prevElement==="object"){prevRef=prevElement.ref;prevOwner=prevElement._owner}var nextRef=null;var nextOwner=null;if(nextElement!==null&&typeof nextElement==="object"){nextRef=nextElement.ref;nextOwner=nextElement._owner}return prevRef!==nextRef||typeof nextRef==="string"&&nextOwner!==prevOwner};ReactRef.detachRefs=function(instance,element){if(element===null||typeof element!=="object"){return}var ref=element.ref;if(ref!=null){detachRef(ref,instance,element._owner)}};module.exports=ReactRef},{"./ReactOwner":136}],142:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var Transaction=require("./Transaction");var ReactInstrumentation=require("./ReactInstrumentation");var ReactServerUpdateQueue=require("./ReactServerUpdateQueue");var TRANSACTION_WRAPPERS=[];if(process.env.NODE_ENV!=="production"){TRANSACTION_WRAPPERS.push({initialize:ReactInstrumentation.debugTool.onBeginFlush,close:ReactInstrumentation.debugTool.onEndFlush})}var noopCallbackQueue={enqueue:function(){}};function ReactServerRenderingTransaction(renderToStaticMarkup){this.reinitializeTransaction();this.renderToStaticMarkup=renderToStaticMarkup;this.useCreateElement=false;this.updateQueue=new ReactServerUpdateQueue(this)}var Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return noopCallbackQueue},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};_assign(ReactServerRenderingTransaction.prototype,Transaction,Mixin);PooledClass.addPoolingTo(ReactServerRenderingTransaction);module.exports=ReactServerRenderingTransaction}).call(this,require("_process"))},{"./PooledClass":92,"./ReactInstrumentation":130,"./ReactServerUpdateQueue":143,"./Transaction":163,_process:407,"object-assign":63}],143:[function(require,module,exports){(function(process){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ReactUpdateQueue=require("./ReactUpdateQueue");var warning=require("fbjs/lib/warning");function warnNoop(publicInstance,callerName){if(process.env.NODE_ENV!=="production"){var constructor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(false,"%s(...): Can only update a mounting component. "+"This usually means you called %s() outside componentWillMount() on the server. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,constructor&&(constructor.displayName||constructor.name)||"ReactClass"):void 0}}var ReactServerUpdateQueue=function(){function ReactServerUpdateQueue(transaction){_classCallCheck(this,ReactServerUpdateQueue);this.transaction=transaction}ReactServerUpdateQueue.prototype.isMounted=function isMounted(publicInstance){return false};ReactServerUpdateQueue.prototype.enqueueCallback=function enqueueCallback(publicInstance,callback,callerName){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueCallback(publicInstance,callback,callerName)}};ReactServerUpdateQueue.prototype.enqueueForceUpdate=function enqueueForceUpdate(publicInstance){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueForceUpdate(publicInstance)}else{warnNoop(publicInstance,"forceUpdate")}};ReactServerUpdateQueue.prototype.enqueueReplaceState=function enqueueReplaceState(publicInstance,completeState){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueReplaceState(publicInstance,completeState)}else{warnNoop(publicInstance,"replaceState")}};ReactServerUpdateQueue.prototype.enqueueSetState=function enqueueSetState(publicInstance,partialState){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueSetState(publicInstance,partialState)}else{warnNoop(publicInstance,"setState")}};return ReactServerUpdateQueue}();module.exports=ReactServerUpdateQueue}).call(this,require("_process"))},{"./ReactUpdateQueue":144,_process:407,"fbjs/lib/warning":56}],144:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function enqueueUpdate(internalInstance){ReactUpdates.enqueueUpdate(internalInstance)}function formatUnexpectedArgument(arg){var type=typeof arg;if(type!=="object"){return type}var displayName=arg.constructor&&arg.constructor.name||type;var keys=Object.keys(arg);if(keys.length>0&&keys.length<20){return displayName+" (keys: "+keys.join(", ")+")"}return displayName}function getInternalInstanceReadyForUpdate(publicInstance,callerName){var internalInstance=ReactInstanceMap.get(publicInstance);if(!internalInstance){if(process.env.NODE_ENV!=="production"){var ctor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(!callerName,"%s(...): Can only update a mounted or mounting component. "+"This usually means you called %s() on an unmounted component. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,ctor&&(ctor.displayName||ctor.name)||"ReactClass"):void 0}return null}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"%s(...): Cannot update during an existing state transition (such as "+"within `render` or another component's constructor). Render methods "+"should be a pure function of props and state; constructor "+"side-effects are an anti-pattern, but can be moved to "+"`componentWillMount`.",callerName):void 0}return internalInstance}var ReactUpdateQueue={isMounted:function(publicInstance){if(process.env.NODE_ENV!=="production"){var owner=ReactCurrentOwner.current;if(owner!==null){process.env.NODE_ENV!=="production"?warning(owner._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. "+"render() should be a pure function of props and state. It should "+"never access something that requires stale data from the previous "+"render, such as refs. Move this logic to componentDidMount and "+"componentDidUpdate instead.",owner.getName()||"A component"):void 0;owner._warnedAboutRefsInRender=true}}var internalInstance=ReactInstanceMap.get(publicInstance);if(internalInstance){return!!internalInstance._renderedComponent}else{return false}},enqueueCallback:function(publicInstance,callback,callerName){ReactUpdateQueue.validateCallback(callback,callerName);var internalInstance=getInternalInstanceReadyForUpdate(publicInstance);if(!internalInstance){return null}if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}enqueueUpdate(internalInstance)},enqueueCallbackInternal:function(internalInstance,callback){if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}enqueueUpdate(internalInstance)},enqueueForceUpdate:function(publicInstance){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"forceUpdate");if(!internalInstance){return}internalInstance._pendingForceUpdate=true;enqueueUpdate(internalInstance)},enqueueReplaceState:function(publicInstance,completeState,callback){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceState");if(!internalInstance){return}internalInstance._pendingStateQueue=[completeState];internalInstance._pendingReplaceState=true;if(callback!==undefined&&callback!==null){ReactUpdateQueue.validateCallback(callback,"replaceState");if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}}enqueueUpdate(internalInstance)},enqueueSetState:function(publicInstance,partialState){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetState();process.env.NODE_ENV!=="production"?warning(partialState!=null,"setState(...): You passed an undefined or null state object; "+"instead, use forceUpdate()."):void 0}var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setState");if(!internalInstance){return}var queue=internalInstance._pendingStateQueue||(internalInstance._pendingStateQueue=[]);queue.push(partialState);enqueueUpdate(internalInstance)},enqueueElementInternal:function(internalInstance,nextElement,nextContext){internalInstance._pendingElement=nextElement;internalInstance._context=nextContext;enqueueUpdate(internalInstance)},validateCallback:function(callback,callerName){!(!callback||typeof callback==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",callerName,formatUnexpectedArgument(callback)):_prodInvariant("122",callerName,formatUnexpectedArgument(callback)):void 0}};module.exports=ReactUpdateQueue}).call(this,require("_process"))},{"./ReactInstanceMap":129,"./ReactInstrumentation":130,"./ReactUpdates":145,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"react/lib/ReactCurrentOwner":201}],145:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var CallbackQueue=require("./CallbackQueue");var PooledClass=require("./PooledClass");var ReactFeatureFlags=require("./ReactFeatureFlags");var ReactReconciler=require("./ReactReconciler");var Transaction=require("./Transaction");var invariant=require("fbjs/lib/invariant");var dirtyComponents=[];var updateBatchNumber=0;var asapCallbackQueue=CallbackQueue.getPooled();var asapEnqueued=false;var batchingStrategy=null;function ensureInjected(){!(ReactUpdates.ReactReconcileTransaction&&batchingStrategy)?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):_prodInvariant("123"):void 0}var NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){if(this.dirtyComponentsLength!==dirtyComponents.length){dirtyComponents.splice(0,this.dirtyComponentsLength);flushBatchedUpdates()}else{dirtyComponents.length=0}}};var UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}};var TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];function ReactUpdatesFlushTransaction(){this.reinitializeTransaction();this.dirtyComponentsLength=null;this.callbackQueue=CallbackQueue.getPooled();this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(true)}_assign(ReactUpdatesFlushTransaction.prototype,Transaction,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null;CallbackQueue.release(this.callbackQueue);this.callbackQueue=null;ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction);this.reconcileTransaction=null},perform:function(method,scope,a){return Transaction.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,method,scope,a)}});PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);function batchedUpdates(callback,a,b,c,d,e){ensureInjected();return batchingStrategy.batchedUpdates(callback,a,b,c,d,e)}function mountOrderComparator(c1,c2){return c1._mountOrder-c2._mountOrder}function runBatchedUpdates(transaction){var len=transaction.dirtyComponentsLength;!(len===dirtyComponents.length)?process.env.NODE_ENV!=="production"?invariant(false,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",len,dirtyComponents.length):_prodInvariant("124",len,dirtyComponents.length):void 0;dirtyComponents.sort(mountOrderComparator);updateBatchNumber++;for(var i=0;i<len;i++){var component=dirtyComponents[i];var callbacks=component._pendingCallbacks;component._pendingCallbacks=null;var markerName;if(ReactFeatureFlags.logTopLevelRenders){var namedComponent=component;if(component._currentElement.type.isReactTopLevelWrapper){namedComponent=component._renderedComponent}markerName="React update: "+namedComponent.getName();console.time(markerName)}ReactReconciler.performUpdateIfNecessary(component,transaction.reconcileTransaction,updateBatchNumber);if(markerName){console.timeEnd(markerName)}if(callbacks){for(var j=0;j<callbacks.length;j++){transaction.callbackQueue.enqueue(callbacks[j],component.getPublicInstance())}}}}var flushBatchedUpdates=function(){while(dirtyComponents.length||asapEnqueued){if(dirtyComponents.length){var transaction=ReactUpdatesFlushTransaction.getPooled();transaction.perform(runBatchedUpdates,null,transaction);ReactUpdatesFlushTransaction.release(transaction)}if(asapEnqueued){asapEnqueued=false;var queue=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled();queue.notifyAll();CallbackQueue.release(queue)}}};function enqueueUpdate(component){ensureInjected();if(!batchingStrategy.isBatchingUpdates){batchingStrategy.batchedUpdates(enqueueUpdate,component);return}dirtyComponents.push(component);if(component._updateBatchNumber==null){component._updateBatchNumber=updateBatchNumber+1}}function asap(callback,context){invariant(batchingStrategy.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context where"+"updates are not being batched.");asapCallbackQueue.enqueue(callback,context);asapEnqueued=true}var ReactUpdatesInjection={injectReconcileTransaction:function(ReconcileTransaction){!ReconcileTransaction?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a reconcile transaction class"):_prodInvariant("126"):void 0;ReactUpdates.ReactReconcileTransaction=ReconcileTransaction},injectBatchingStrategy:function(_batchingStrategy){!_batchingStrategy?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a batching strategy"):_prodInvariant("127"):void 0;!(typeof _batchingStrategy.batchedUpdates==="function")?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a batchedUpdates() function"):_prodInvariant("128"):void 0;!(typeof _batchingStrategy.isBatchingUpdates==="boolean")?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):_prodInvariant("129"):void 0;batchingStrategy=_batchingStrategy}};var ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates}).call(this,require("_process"))},{"./CallbackQueue":74,"./PooledClass":92,"./ReactFeatureFlags":124,"./ReactReconciler":140,"./Transaction":163,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"object-assign":63}],146:[function(require,module,exports){"use strict";module.exports="15.6.2"},{}],147:[function(require,module,exports){"use strict";var NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};var ATTRS={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"};var SVGDOMPropertyConfig={Properties:{},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{}};Object.keys(ATTRS).forEach(function(key){SVGDOMPropertyConfig.Properties[key]=0;if(ATTRS[key]){SVGDOMPropertyConfig.DOMAttributeNames[key]=ATTRS[key]}});module.exports=SVGDOMPropertyConfig},{}],148:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInputSelection=require("./ReactInputSelection");var SyntheticEvent=require("./SyntheticEvent");var getActiveElement=require("fbjs/lib/getActiveElement");var isTextInputElement=require("./isTextInputElement");var shallowEqual=require("fbjs/lib/shallowEqual");var skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11;var eventTypes={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}};var activeElement=null;var activeElementInst=null;var lastSelection=null;var mouseDown=false;var hasListener=false;function getSelection(node){if("selectionStart"in node&&ReactInputSelection.hasSelectionCapabilities(node)){return{start:node.selectionStart,end:node.selectionEnd}}else if(window.getSelection){var selection=window.getSelection();return{anchorNode:selection.anchorNode,anchorOffset:selection.anchorOffset,focusNode:selection.focusNode,focusOffset:selection.focusOffset}}else if(document.selection){var range=document.selection.createRange();return{parentElement:range.parentElement(),text:range.text,top:range.boundingTop,left:range.boundingLeft}}}function constructSelectEvent(nativeEvent,nativeEventTarget){if(mouseDown||activeElement==null||activeElement!==getActiveElement()){return null}var currentSelection=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,currentSelection)){lastSelection=currentSelection;var syntheticEvent=SyntheticEvent.getPooled(eventTypes.select,activeElementInst,nativeEvent,nativeEventTarget);syntheticEvent.type="select";syntheticEvent.target=activeElement;EventPropagators.accumulateTwoPhaseDispatches(syntheticEvent);return syntheticEvent}return null}var SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){if(!hasListener){return null}var targetNode=targetInst?ReactDOMComponentTree.getNodeFromInstance(targetInst):window;switch(topLevelType){case"topFocus":if(isTextInputElement(targetNode)||targetNode.contentEditable==="true"){activeElement=targetNode;activeElementInst=targetInst;lastSelection=null}break;case"topBlur":activeElement=null;activeElementInst=null;lastSelection=null;break;case"topMouseDown":mouseDown=true;break;case"topContextMenu":case"topMouseUp":mouseDown=false;return constructSelectEvent(nativeEvent,nativeEventTarget);case"topSelectionChange":if(skipSelectionChangeEvent){break}case"topKeyDown":case"topKeyUp":return constructSelectEvent(nativeEvent,nativeEventTarget)}return null},didPutListener:function(inst,registrationName,listener){if(registrationName==="onSelect"){hasListener=true}}};module.exports=SelectEventPlugin},{"./EventPropagators":87,"./ReactDOMComponentTree":101,"./ReactInputSelection":128,"./SyntheticEvent":154,"./isTextInputElement":186,"fbjs/lib/ExecutionEnvironment":35,"fbjs/lib/getActiveElement":44,"fbjs/lib/shallowEqual":55}],149:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var EventListener=require("fbjs/lib/EventListener");var EventPropagators=require("./EventPropagators");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var SyntheticAnimationEvent=require("./SyntheticAnimationEvent");var SyntheticClipboardEvent=require("./SyntheticClipboardEvent");var SyntheticEvent=require("./SyntheticEvent");var SyntheticFocusEvent=require("./SyntheticFocusEvent");var SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent");var SyntheticMouseEvent=require("./SyntheticMouseEvent");var SyntheticDragEvent=require("./SyntheticDragEvent");var SyntheticTouchEvent=require("./SyntheticTouchEvent");var SyntheticTransitionEvent=require("./SyntheticTransitionEvent");var SyntheticUIEvent=require("./SyntheticUIEvent");var SyntheticWheelEvent=require("./SyntheticWheelEvent");var emptyFunction=require("fbjs/lib/emptyFunction");var getEventCharCode=require("./getEventCharCode");var invariant=require("fbjs/lib/invariant");var eventTypes={};var topLevelEventsToDispatchConfig={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(event){var capitalizedEvent=event[0].toUpperCase()+event.slice(1);var onEvent="on"+capitalizedEvent;var topEvent="top"+capitalizedEvent;var type={phasedRegistrationNames:{bubbled:onEvent,captured:onEvent+"Capture"},dependencies:[topEvent]};eventTypes[event]=type;topLevelEventsToDispatchConfig[topEvent]=type});var onClickListeners={};function getDictionaryKey(inst){return"."+inst._rootNodeID}function isInteractive(tag){return tag==="button"||tag==="input"||tag==="select"||tag==="textarea"}var SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var dispatchConfig=topLevelEventsToDispatchConfig[topLevelType];if(!dispatchConfig){return null}var EventConstructor;switch(topLevelType){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":EventConstructor=SyntheticEvent;break;case"topKeyPress":if(getEventCharCode(nativeEvent)===0){return null}case"topKeyDown":case"topKeyUp":EventConstructor=SyntheticKeyboardEvent;break;case"topBlur":case"topFocus":EventConstructor=SyntheticFocusEvent;break;case"topClick":if(nativeEvent.button===2){return null}case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":EventConstructor=SyntheticMouseEvent;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":EventConstructor=SyntheticDragEvent;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":EventConstructor=SyntheticTouchEvent;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":EventConstructor=SyntheticAnimationEvent;break;case"topTransitionEnd":EventConstructor=SyntheticTransitionEvent;break;case"topScroll":EventConstructor=SyntheticUIEvent;break;case"topWheel":EventConstructor=SyntheticWheelEvent;break;case"topCopy":case"topCut":case"topPaste":EventConstructor=SyntheticClipboardEvent;break}!EventConstructor?process.env.NODE_ENV!=="production"?invariant(false,"SimpleEventPlugin: Unhandled event type, `%s`.",topLevelType):_prodInvariant("86",topLevelType):void 0;var event=EventConstructor.getPooled(dispatchConfig,targetInst,nativeEvent,nativeEventTarget);EventPropagators.accumulateTwoPhaseDispatches(event);return event},didPutListener:function(inst,registrationName,listener){if(registrationName==="onClick"&&!isInteractive(inst._tag)){var key=getDictionaryKey(inst);var node=ReactDOMComponentTree.getNodeFromInstance(inst);if(!onClickListeners[key]){onClickListeners[key]=EventListener.listen(node,"click",emptyFunction)}}},willDeleteListener:function(inst,registrationName){if(registrationName==="onClick"&&!isInteractive(inst._tag)){var key=getDictionaryKey(inst);onClickListeners[key].remove();delete onClickListeners[key]}}};module.exports=SimpleEventPlugin}).call(this,require("_process"))},{"./EventPropagators":87,"./ReactDOMComponentTree":101,"./SyntheticAnimationEvent":150,"./SyntheticClipboardEvent":151,"./SyntheticDragEvent":153,"./SyntheticEvent":154,"./SyntheticFocusEvent":155,"./SyntheticKeyboardEvent":157,"./SyntheticMouseEvent":158,"./SyntheticTouchEvent":159,"./SyntheticTransitionEvent":160,"./SyntheticUIEvent":161,"./SyntheticWheelEvent":162,"./getEventCharCode":174,"./reactProdInvariant":188,_process:407,"fbjs/lib/EventListener":34,"fbjs/lib/emptyFunction":41,"fbjs/lib/invariant":49}],150:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var AnimationEventInterface={animationName:null,elapsedTime:null,pseudoElement:null};function SyntheticAnimationEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticAnimationEvent,AnimationEventInterface);module.exports=SyntheticAnimationEvent},{"./SyntheticEvent":154}],151:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var ClipboardEventInterface={clipboardData:function(event){return"clipboardData"in event?event.clipboardData:window.clipboardData}};function SyntheticClipboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface);module.exports=SyntheticClipboardEvent},{"./SyntheticEvent":154}],152:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var CompositionEventInterface={data:null};function SyntheticCompositionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface);module.exports=SyntheticCompositionEvent},{"./SyntheticEvent":154}],153:[function(require,module,exports){"use strict";var SyntheticMouseEvent=require("./SyntheticMouseEvent");var DragEventInterface={dataTransfer:null};function SyntheticDragEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface);module.exports=SyntheticDragEvent},{"./SyntheticMouseEvent":158}],154:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var emptyFunction=require("fbjs/lib/emptyFunction");var warning=require("fbjs/lib/warning");var didWarnForAddedNewProperty=false;var isProxySupported=typeof Proxy==="function";var shouldBeReleasedProperties=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"];var EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function SyntheticEvent(dispatchConfig,targetInst,nativeEvent,nativeEventTarget){if(process.env.NODE_ENV!=="production"){delete this.nativeEvent;delete this.preventDefault;delete this.stopPropagation}this.dispatchConfig=dispatchConfig;this._targetInst=targetInst;this.nativeEvent=nativeEvent;var Interface=this.constructor.Interface;for(var propName in Interface){if(!Interface.hasOwnProperty(propName)){continue}if(process.env.NODE_ENV!=="production"){delete this[propName]}var normalize=Interface[propName];if(normalize){this[propName]=normalize(nativeEvent)}else{if(propName==="target"){this.target=nativeEventTarget}else{this[propName]=nativeEvent[propName]}}}var defaultPrevented=nativeEvent.defaultPrevented!=null?nativeEvent.defaultPrevented:nativeEvent.returnValue===false;if(defaultPrevented){this.isDefaultPrevented=emptyFunction.thatReturnsTrue}else{this.isDefaultPrevented=emptyFunction.thatReturnsFalse}this.isPropagationStopped=emptyFunction.thatReturnsFalse;return this}_assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=true;var event=this.nativeEvent;if(!event){return}if(event.preventDefault){event.preventDefault()}else if(typeof event.returnValue!=="unknown"){event.returnValue=false}this.isDefaultPrevented=emptyFunction.thatReturnsTrue},stopPropagation:function(){var event=this.nativeEvent;if(!event){return}if(event.stopPropagation){event.stopPropagation()}else if(typeof event.cancelBubble!=="unknown"){event.cancelBubble=true}this.isPropagationStopped=emptyFunction.thatReturnsTrue},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var Interface=this.constructor.Interface;for(var propName in Interface){if(process.env.NODE_ENV!=="production"){Object.defineProperty(this,propName,getPooledWarningPropertyDefinition(propName,Interface[propName]))}else{this[propName]=null}}for(var i=0;i<shouldBeReleasedProperties.length;i++){this[shouldBeReleasedProperties[i]]=null}if(process.env.NODE_ENV!=="production"){Object.defineProperty(this,"nativeEvent",getPooledWarningPropertyDefinition("nativeEvent",null));Object.defineProperty(this,"preventDefault",getPooledWarningPropertyDefinition("preventDefault",emptyFunction));Object.defineProperty(this,"stopPropagation",getPooledWarningPropertyDefinition("stopPropagation",emptyFunction))}}});SyntheticEvent.Interface=EventInterface;SyntheticEvent.augmentClass=function(Class,Interface){var Super=this;var E=function(){};E.prototype=Super.prototype;var prototype=new E;_assign(prototype,Class.prototype);Class.prototype=prototype;Class.prototype.constructor=Class;Class.Interface=_assign({},Super.Interface,Interface);Class.augmentClass=Super.augmentClass;PooledClass.addPoolingTo(Class,PooledClass.fourArgumentPooler)};if(process.env.NODE_ENV!=="production"){if(isProxySupported){SyntheticEvent=new Proxy(SyntheticEvent,{construct:function(target,args){return this.apply(target,Object.create(target.prototype),args)},apply:function(constructor,that,args){return new Proxy(constructor.apply(that,args),{set:function(target,prop,value){if(prop!=="isPersistent"&&!target.constructor.Interface.hasOwnProperty(prop)&&shouldBeReleasedProperties.indexOf(prop)===-1){process.env.NODE_ENV!=="production"?warning(didWarnForAddedNewProperty||target.isPersistent(),"This synthetic event is reused for performance reasons. If you're "+"seeing this, you're adding a new property in the synthetic event object. "+"The property is never released. See "+"https://fb.me/react-event-pooling for more information."):void 0;didWarnForAddedNewProperty=true}target[prop]=value;return true}})}})}}PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler);module.exports=SyntheticEvent;function getPooledWarningPropertyDefinition(propName,getVal){var isFunction=typeof getVal==="function";return{configurable:true,set:set,get:get};function set(val){var action=isFunction?"setting the method":"setting the property";warn(action,"This is effectively a no-op");return val}function get(){var action=isFunction?"accessing the method":"accessing the property";var result=isFunction?"This is a no-op function":"This is set to null";warn(action,result);return getVal}function warn(action,result){var warningCondition=false;process.env.NODE_ENV!=="production"?warning(warningCondition,"This synthetic event is reused for performance reasons. If you're seeing this, "+"you're %s `%s` on a released/nullified synthetic event. %s. "+"If you must keep the original synthetic event around, use event.persist(). "+"See https://fb.me/react-event-pooling for more information.",action,propName,result):void 0}}}).call(this,require("_process"))},{"./PooledClass":92,_process:407,"fbjs/lib/emptyFunction":41,"fbjs/lib/warning":56,"object-assign":63}],155:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var FocusEventInterface={relatedTarget:null};function SyntheticFocusEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface);module.exports=SyntheticFocusEvent},{"./SyntheticUIEvent":161}],156:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var InputEventInterface={data:null};function SyntheticInputEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface);module.exports=SyntheticInputEvent},{"./SyntheticEvent":154}],157:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var getEventCharCode=require("./getEventCharCode");var getEventKey=require("./getEventKey");var getEventModifierState=require("./getEventModifierState");var KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(event){if(event.type==="keypress"){return getEventCharCode(event)}return 0},keyCode:function(event){if(event.type==="keydown"||event.type==="keyup"){return event.keyCode}return 0},which:function(event){if(event.type==="keypress"){return getEventCharCode(event)}if(event.type==="keydown"||event.type==="keyup"){return event.keyCode}return 0}};function SyntheticKeyboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface);module.exports=SyntheticKeyboardEvent},{"./SyntheticUIEvent":161,"./getEventCharCode":174,"./getEventKey":175,"./getEventModifierState":176}],158:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var ViewportMetrics=require("./ViewportMetrics");var getEventModifierState=require("./getEventModifierState");var MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(event){var button=event.button;if("which"in event){return button}return button===2?2:button===4?1:0},buttons:null,relatedTarget:function(event){return event.relatedTarget||(event.fromElement===event.srcElement?event.toElement:event.fromElement)},pageX:function(event){return"pageX"in event?event.pageX:event.clientX+ViewportMetrics.currentScrollLeft},pageY:function(event){return"pageY"in event?event.pageY:event.clientY+ViewportMetrics.currentScrollTop}};function SyntheticMouseEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface);module.exports=SyntheticMouseEvent},{"./SyntheticUIEvent":161,"./ViewportMetrics":164,"./getEventModifierState":176}],159:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var getEventModifierState=require("./getEventModifierState");var TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};function SyntheticTouchEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface);module.exports=SyntheticTouchEvent},{"./SyntheticUIEvent":161,"./getEventModifierState":176}],160:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var TransitionEventInterface={propertyName:null,elapsedTime:null,pseudoElement:null};function SyntheticTransitionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticTransitionEvent,TransitionEventInterface);module.exports=SyntheticTransitionEvent},{"./SyntheticEvent":154}],161:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var getEventTarget=require("./getEventTarget");var UIEventInterface={view:function(event){if(event.view){return event.view}var target=getEventTarget(event);if(target.window===target){return target}var doc=target.ownerDocument;if(doc){return doc.defaultView||doc.parentWindow}else{return window}},detail:function(event){return event.detail||0}};function SyntheticUIEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface);module.exports=SyntheticUIEvent},{"./SyntheticEvent":154,"./getEventTarget":177}],162:[function(require,module,exports){"use strict";var SyntheticMouseEvent=require("./SyntheticMouseEvent");var WheelEventInterface={deltaX:function(event){return"deltaX"in event?event.deltaX:"wheelDeltaX"in event?-event.wheelDeltaX:0},deltaY:function(event){return"deltaY"in event?event.deltaY:"wheelDeltaY"in event?-event.wheelDeltaY:"wheelDelta"in event?-event.wheelDelta:0},deltaZ:null,deltaMode:null};function SyntheticWheelEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface);module.exports=SyntheticWheelEvent},{"./SyntheticMouseEvent":158}],163:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var OBSERVED_ERROR={};var TransactionImpl={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers();if(this.wrapperInitData){this.wrapperInitData.length=0}else{this.wrapperInitData=[]}this._isInTransaction=false},_isInTransaction:false,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(method,scope,a,b,c,d,e,f){!!this.isInTransaction()?process.env.NODE_ENV!=="production"?invariant(false,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):_prodInvariant("27"):void 0;var errorThrown;var ret;try{this._isInTransaction=true;errorThrown=true;this.initializeAll(0);ret=method.call(scope,a,b,c,d,e,f);errorThrown=false}finally{try{if(errorThrown){try{this.closeAll(0)}catch(err){}}else{this.closeAll(0)}}finally{this._isInTransaction=false}}return ret},initializeAll:function(startIndex){var transactionWrappers=this.transactionWrappers;for(var i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];try{this.wrapperInitData[i]=OBSERVED_ERROR;this.wrapperInitData[i]=wrapper.initialize?wrapper.initialize.call(this):null}finally{if(this.wrapperInitData[i]===OBSERVED_ERROR){try{this.initializeAll(i+1)}catch(err){}}}}},closeAll:function(startIndex){!this.isInTransaction()?process.env.NODE_ENV!=="production"?invariant(false,"Transaction.closeAll(): Cannot close transaction when none are open."):_prodInvariant("28"):void 0;var transactionWrappers=this.transactionWrappers;for(var i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];var initData=this.wrapperInitData[i];var errorThrown;try{errorThrown=true;if(initData!==OBSERVED_ERROR&&wrapper.close){wrapper.close.call(this,initData)}errorThrown=false}finally{if(errorThrown){try{this.closeAll(i+1)}catch(e){}}}}this.wrapperInitData.length=0}};module.exports=TransactionImpl}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],164:[function(require,module,exports){"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(scrollPosition){ViewportMetrics.currentScrollLeft=scrollPosition.x;ViewportMetrics.currentScrollTop=scrollPosition.y}};module.exports=ViewportMetrics},{}],165:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function accumulateInto(current,next){!(next!=null)?process.env.NODE_ENV!=="production"?invariant(false,"accumulateInto(...): Accumulated items must not be null or undefined."):_prodInvariant("30"):void 0;if(current==null){return next}if(Array.isArray(current)){if(Array.isArray(next)){current.push.apply(current,next);return current}current.push(next);return current}if(Array.isArray(next)){return[current].concat(next)}return[current,next]}module.exports=accumulateInto}).call(this,require("_process"))},{"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49}],166:[function(require,module,exports){"use strict";var MOD=65521;function adler32(data){var a=1;var b=0;var i=0;var l=data.length;var m=l&~3;while(i<m){var n=Math.min(i+4096,m);for(;i<n;i+=4){b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3))}a%=MOD;b%=MOD}for(;i<l;i++){b+=a+=data.charCodeAt(i)}a%=MOD;b%=MOD;return a|b<<16}module.exports=adler32},{}],167:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}var loggedTypeFailures={};function checkReactTypeSpec(typeSpecs,values,location,componentName,element,debugID){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{!(typeof typeSpecs[typeSpecName]==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):_prodInvariant("84",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):void 0;error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}process.env.NODE_ENV!=="production"?warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName,typeof error):void 0;if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var componentStackInfo="";if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(debugID!==null){componentStackInfo=ReactComponentTreeHook.getStackAddendumByID(debugID)}else if(element!==null){componentStackInfo=ReactComponentTreeHook.getCurrentStackAddendum(element)}}process.env.NODE_ENV!=="production"?warning(false,"Failed %s type: %s%s",location,error.message,componentStackInfo):void 0}}}}module.exports=checkReactTypeSpec}).call(this,require("_process"))},{"./ReactPropTypeLocationNames":137,"./ReactPropTypesSecret":138,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"react/lib/ReactComponentTreeHook":200}],168:[function(require,module,exports){"use strict";var createMicrosoftUnsafeLocalFunction=function(func){if(typeof MSApp!=="undefined"&&MSApp.execUnsafeLocalFunction){return function(arg0,arg1,arg2,arg3){MSApp.execUnsafeLocalFunction(function(){return func(arg0,arg1,arg2,arg3)})}}else{return func}};module.exports=createMicrosoftUnsafeLocalFunction},{}],169:[function(require,module,exports){(function(process){"use strict";var CSSProperty=require("./CSSProperty");var warning=require("fbjs/lib/warning");var isUnitlessNumber=CSSProperty.isUnitlessNumber;var styleWarnings={};function dangerousStyleValue(name,value,component,isCustomProperty){var isEmpty=value==null||typeof value==="boolean"||value==="";if(isEmpty){return""}var isNonNumeric=isNaN(value);if(isCustomProperty||isNonNumeric||value===0||isUnitlessNumber.hasOwnProperty(name)&&isUnitlessNumber[name]){return""+value}if(typeof value==="string"){if(process.env.NODE_ENV!=="production"){if(component&&value!=="0"){var owner=component._currentElement._owner;var ownerName=owner?owner.getName():null;if(ownerName&&!styleWarnings[ownerName]){styleWarnings[ownerName]={}}var warned=false;if(ownerName){var warnings=styleWarnings[ownerName];warned=warnings[name];if(!warned){warnings[name]=true}}if(!warned){process.env.NODE_ENV!=="production"?warning(false,"a `%s` tag (owner: `%s`) was passed a numeric string value "+"for CSS property `%s` (value: `%s`) which will be treated "+"as a unitless number in a future version of React.",component._currentElement.type,ownerName||"unknown",name,value):void 0}}}value=value.trim()}return value+"px"}module.exports=dangerousStyleValue}).call(this,require("_process"))},{"./CSSProperty":72,_process:407,"fbjs/lib/warning":56}],170:[function(require,module,exports){"use strict";var matchHtmlRegExp=/["'&<>]/;function escapeHtml(string){var str=""+string;var match=matchHtmlRegExp.exec(str);if(!match){return str}var escape;var html="";var index=0;var lastIndex=0;for(index=match.index;index<str.length;index++){switch(str.charCodeAt(index)){case 34:escape="&quot;";break;case 38:escape="&amp;";break;case 39:escape="&#x27;";break;case 60:escape="&lt;";break;case 62:escape="&gt;";break;default:continue}if(lastIndex!==index){html+=str.substring(lastIndex,index)}lastIndex=index+1;html+=escape}return lastIndex!==index?html+str.substring(lastIndex,index):html}function escapeTextContentForBrowser(text){if(typeof text==="boolean"||typeof text==="number"){return""+text}return escapeHtml(text)}module.exports=escapeTextContentForBrowser},{}],171:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstanceMap=require("./ReactInstanceMap");var getHostComponentFromComposite=require("./getHostComponentFromComposite");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function findDOMNode(componentOrElement){if(process.env.NODE_ENV!=="production"){var owner=ReactCurrentOwner.current;if(owner!==null){process.env.NODE_ENV!=="production"?warning(owner._warnedAboutRefsInRender,"%s is accessing findDOMNode inside its render(). "+"render() should be a pure function of props and state. It should "+"never access something that requires stale data from the previous "+"render, such as refs. Move this logic to componentDidMount and "+"componentDidUpdate instead.",owner.getName()||"A component"):void 0;owner._warnedAboutRefsInRender=true}}if(componentOrElement==null){return null}if(componentOrElement.nodeType===1){return componentOrElement}var inst=ReactInstanceMap.get(componentOrElement);if(inst){inst=getHostComponentFromComposite(inst);return inst?ReactDOMComponentTree.getNodeFromInstance(inst):null}if(typeof componentOrElement.render==="function"){!false?process.env.NODE_ENV!=="production"?invariant(false,"findDOMNode was called on an unmounted component."):_prodInvariant("44"):void 0}else{!false?process.env.NODE_ENV!=="production"?invariant(false,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(componentOrElement)):_prodInvariant("45",Object.keys(componentOrElement)):void 0}}module.exports=findDOMNode}).call(this,require("_process"))},{"./ReactDOMComponentTree":101,"./ReactInstanceMap":129,"./getHostComponentFromComposite":178,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"react/lib/ReactCurrentOwner":201}],172:[function(require,module,exports){(function(process){"use strict";var KeyEscapeUtils=require("./KeyEscapeUtils");var traverseAllChildren=require("./traverseAllChildren");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}function flattenSingleChildIntoContext(traverseContext,child,name,selfDebugID){if(traverseContext&&typeof traverseContext==="object"){var result=traverseContext;var keyUnique=result[name]===undefined;if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(!keyUnique){process.env.NODE_ENV!=="production"?warning(false,"flattenChildren(...): Encountered two children with the same key, "+"`%s`. Child keys must be unique; when two children share a key, only "+"the first child will be used.%s",KeyEscapeUtils.unescape(name),ReactComponentTreeHook.getStackAddendumByID(selfDebugID)):void 0}}if(keyUnique&&child!=null){result[name]=child}}}function flattenChildren(children,selfDebugID){if(children==null){return children}var result={};if(process.env.NODE_ENV!=="production"){traverseAllChildren(children,function(traverseContext,child,name){return flattenSingleChildIntoContext(traverseContext,child,name,selfDebugID)},result)}else{traverseAllChildren(children,flattenSingleChildIntoContext,result)}return result}module.exports=flattenChildren}).call(this,require("_process"))},{"./KeyEscapeUtils":90,"./traverseAllChildren":193,_process:407,"fbjs/lib/warning":56,"react/lib/ReactComponentTreeHook":200}],173:[function(require,module,exports){"use strict";function forEachAccumulated(arr,cb,scope){if(Array.isArray(arr)){arr.forEach(cb,scope)}else if(arr){cb.call(scope,arr)}}module.exports=forEachAccumulated},{}],174:[function(require,module,exports){"use strict";function getEventCharCode(nativeEvent){var charCode;var keyCode=nativeEvent.keyCode;if("charCode"in nativeEvent){charCode=nativeEvent.charCode;if(charCode===0&&keyCode===13){charCode=13}}else{charCode=keyCode}if(charCode>=32||charCode===13){return charCode}return 0}module.exports=getEventCharCode},{}],175:[function(require,module,exports){"use strict";var getEventCharCode=require("./getEventCharCode");var normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};var translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function getEventKey(nativeEvent){if(nativeEvent.key){var key=normalizeKey[nativeEvent.key]||nativeEvent.key;if(key!=="Unidentified"){return key}}if(nativeEvent.type==="keypress"){var charCode=getEventCharCode(nativeEvent);return charCode===13?"Enter":String.fromCharCode(charCode)}if(nativeEvent.type==="keydown"||nativeEvent.type==="keyup"){return translateToKey[nativeEvent.keyCode]||"Unidentified"}return""}module.exports=getEventKey},{"./getEventCharCode":174}],176:[function(require,module,exports){"use strict";var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function modifierStateGetter(keyArg){var syntheticEvent=this;var nativeEvent=syntheticEvent.nativeEvent;if(nativeEvent.getModifierState){return nativeEvent.getModifierState(keyArg)}var keyProp=modifierKeyToProp[keyArg];return keyProp?!!nativeEvent[keyProp]:false}function getEventModifierState(nativeEvent){return modifierStateGetter}module.exports=getEventModifierState},{}],177:[function(require,module,exports){"use strict";function getEventTarget(nativeEvent){var target=nativeEvent.target||nativeEvent.srcElement||window;if(target.correspondingUseElement){target=target.correspondingUseElement}return target.nodeType===3?target.parentNode:target}module.exports=getEventTarget},{}],178:[function(require,module,exports){"use strict";var ReactNodeTypes=require("./ReactNodeTypes");function getHostComponentFromComposite(inst){var type;while((type=inst._renderedNodeType)===ReactNodeTypes.COMPOSITE){inst=inst._renderedComponent}if(type===ReactNodeTypes.HOST){return inst._renderedComponent}else if(type===ReactNodeTypes.EMPTY){return null}}module.exports=getHostComponentFromComposite},{"./ReactNodeTypes":135}],179:[function(require,module,exports){"use strict";var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}module.exports=getIteratorFn},{}],180:[function(require,module,exports){"use strict";function getLeafNode(node){while(node&&node.firstChild){node=node.firstChild}return node}function getSiblingNode(node){while(node){if(node.nextSibling){return node.nextSibling}node=node.parentNode}}function getNodeForCharacterOffset(root,offset){var node=getLeafNode(root);var nodeStart=0;var nodeEnd=0;while(node){if(node.nodeType===3){nodeEnd=nodeStart+node.textContent.length;if(nodeStart<=offset&&nodeEnd>=offset){return{node:node,offset:offset-nodeStart}}nodeStart=nodeEnd}node=getLeafNode(getSiblingNode(node))}}module.exports=getNodeForCharacterOffset},{}],181:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var contentKey=null;function getTextContentAccessor(){if(!contentKey&&ExecutionEnvironment.canUseDOM){contentKey="textContent"in document.documentElement?"textContent":"innerText"}return contentKey}module.exports=getTextContentAccessor},{"fbjs/lib/ExecutionEnvironment":35}],182:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");function makePrefixMap(styleProp,eventName){var prefixes={};prefixes[styleProp.toLowerCase()]=eventName.toLowerCase();prefixes["Webkit"+styleProp]="webkit"+eventName;prefixes["Moz"+styleProp]="moz"+eventName;prefixes["ms"+styleProp]="MS"+eventName;prefixes["O"+styleProp]="o"+eventName.toLowerCase();return prefixes}var vendorPrefixes={animationend:makePrefixMap("Animation","AnimationEnd"),animationiteration:makePrefixMap("Animation","AnimationIteration"),animationstart:makePrefixMap("Animation","AnimationStart"),transitionend:makePrefixMap("Transition","TransitionEnd")};var prefixedEventNames={};var style={};if(ExecutionEnvironment.canUseDOM){style=document.createElement("div").style;if(!("AnimationEvent"in window)){delete vendorPrefixes.animationend.animation;delete vendorPrefixes.animationiteration.animation;delete vendorPrefixes.animationstart.animation}if(!("TransitionEvent"in window)){delete vendorPrefixes.transitionend.transition}}function getVendorPrefixedEventName(eventName){if(prefixedEventNames[eventName]){return prefixedEventNames[eventName]}else if(!vendorPrefixes[eventName]){return eventName}var prefixMap=vendorPrefixes[eventName];for(var styleProp in prefixMap){if(prefixMap.hasOwnProperty(styleProp)&&styleProp in style){return prefixedEventNames[eventName]=prefixMap[styleProp]}}return""}module.exports=getVendorPrefixedEventName},{"fbjs/lib/ExecutionEnvironment":35}],183:[function(require,module,exports){"use strict";var ReactDOMComponentTree=require("./ReactDOMComponentTree");function isCheckable(elem){var type=elem.type;var nodeName=elem.nodeName;return nodeName&&nodeName.toLowerCase()==="input"&&(type==="checkbox"||type==="radio")}function getTracker(inst){return inst._wrapperState.valueTracker}function attachTracker(inst,tracker){inst._wrapperState.valueTracker=tracker}function detachTracker(inst){inst._wrapperState.valueTracker=null}function getValueFromNode(node){var value;if(node){value=isCheckable(node)?""+node.checked:node.value}return value}var inputValueTracking={_getTrackerFromNode:function(node){return getTracker(ReactDOMComponentTree.getInstanceFromNode(node))},track:function(inst){if(getTracker(inst)){return}var node=ReactDOMComponentTree.getNodeFromInstance(inst);var valueField=isCheckable(node)?"checked":"value";var descriptor=Object.getOwnPropertyDescriptor(node.constructor.prototype,valueField);var currentValue=""+node[valueField];if(node.hasOwnProperty(valueField)||typeof descriptor.get!=="function"||typeof descriptor.set!=="function"){return}Object.defineProperty(node,valueField,{enumerable:descriptor.enumerable,configurable:true,get:function(){return descriptor.get.call(this)},set:function(value){currentValue=""+value;descriptor.set.call(this,value)}});attachTracker(inst,{getValue:function(){return currentValue},setValue:function(value){currentValue=""+value},stopTracking:function(){detachTracker(inst);delete node[valueField]}})},updateValueIfChanged:function(inst){if(!inst){return false}var tracker=getTracker(inst);if(!tracker){inputValueTracking.track(inst);return true}var lastValue=tracker.getValue();var nextValue=getValueFromNode(ReactDOMComponentTree.getNodeFromInstance(inst));if(nextValue!==lastValue){tracker.setValue(nextValue);return true}return false},stopTracking:function(inst){var tracker=getTracker(inst);if(tracker){tracker.stopTracking()}}};module.exports=inputValueTracking},{"./ReactDOMComponentTree":101}],184:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var ReactCompositeComponent=require("./ReactCompositeComponent");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactHostComponent=require("./ReactHostComponent");var getNextDebugID=require("react/lib/getNextDebugID");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactCompositeComponentWrapper=function(element){this.construct(element)};function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}function isInternalComponentType(type){return typeof type==="function"&&typeof type.prototype!=="undefined"&&typeof type.prototype.mountComponent==="function"&&typeof type.prototype.receiveComponent==="function"}function instantiateReactComponent(node,shouldHaveDebugID){var instance;if(node===null||node===false){instance=ReactEmptyComponent.create(instantiateReactComponent)}else if(typeof node==="object"){var element=node;var type=element.type;if(typeof type!=="function"&&typeof type!=="string"){var info="";if(process.env.NODE_ENV!=="production"){if(type===undefined||typeof type==="object"&&type!==null&&Object.keys(type).length===0){info+=" You likely forgot to export your component from the file "+"it's defined in."}}info+=getDeclarationErrorAddendum(element._owner);!false?process.env.NODE_ENV!=="production"?invariant(false,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",type==null?type:typeof type,info):_prodInvariant("130",type==null?type:typeof type,info):void 0}if(typeof element.type==="string"){instance=ReactHostComponent.createInternalComponent(element)}else if(isInternalComponentType(element.type)){instance=new element.type(element);if(!instance.getHostNode){instance.getHostNode=instance.getNativeNode}}else{instance=new ReactCompositeComponentWrapper(element)}}else if(typeof node==="string"||typeof node==="number"){instance=ReactHostComponent.createInstanceForText(node)}else{!false?process.env.NODE_ENV!=="production"?invariant(false,"Encountered invalid React node of type %s",typeof node):_prodInvariant("131",typeof node):void 0}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(typeof instance.mountComponent==="function"&&typeof instance.receiveComponent==="function"&&typeof instance.getHostNode==="function"&&typeof instance.unmountComponent==="function","Only React Components can be mounted."):void 0}instance._mountIndex=0;instance._mountImage=null;if(process.env.NODE_ENV!=="production"){instance._debugID=shouldHaveDebugID?getNextDebugID():0}if(process.env.NODE_ENV!=="production"){if(Object.preventExtensions){Object.preventExtensions(instance)}}return instance}_assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent,{_instantiateReactComponent:instantiateReactComponent});module.exports=instantiateReactComponent}).call(this,require("_process"))},{"./ReactCompositeComponent":97,"./ReactEmptyComponent":120,"./ReactHostComponent":125,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"object-assign":63,"react/lib/getNextDebugID":215}],185:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var useHasFeature;if(ExecutionEnvironment.canUseDOM){useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==true}function isEventSupported(eventNameSuffix,capture){if(!ExecutionEnvironment.canUseDOM||capture&&!("addEventListener"in document)){return false}var eventName="on"+eventNameSuffix;var isSupported=eventName in document;if(!isSupported){var element=document.createElement("div");element.setAttribute(eventName,"return;");isSupported=typeof element[eventName]==="function"}if(!isSupported&&useHasFeature&&eventNameSuffix==="wheel"){isSupported=document.implementation.hasFeature("Events.wheel","3.0")}return isSupported}module.exports=isEventSupported},{"fbjs/lib/ExecutionEnvironment":35}],186:[function(require,module,exports){"use strict";var supportedInputTypes={color:true,date:true,datetime:true,"datetime-local":true,email:true,month:true,number:true,password:true,range:true,search:true,tel:true,text:true,time:true,url:true,week:true};function isTextInputElement(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();if(nodeName==="input"){return!!supportedInputTypes[elem.type]}if(nodeName==="textarea"){return true}return false}module.exports=isTextInputElement},{}],187:[function(require,module,exports){"use strict";var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");function quoteAttributeValueForBrowser(value){return'"'+escapeTextContentForBrowser(value)+'"'}module.exports=quoteAttributeValueForBrowser},{"./escapeTextContentForBrowser":170}],188:[function(require,module,exports){"use strict";function reactProdInvariant(code){var argCount=arguments.length-1;var message="Minified React error #"+code+"; visit "+"http://facebook.github.io/react/docs/error-decoder.html?invariant="+code;for(var argIdx=0;argIdx<argCount;argIdx++){message+="&args[]="+encodeURIComponent(arguments[argIdx+1])}message+=" for the full message or use the non-minified dev environment"+" for full errors and additional helpful warnings.";var error=new Error(message);error.name="Invariant Violation";error.framesToPop=1;throw error}module.exports=reactProdInvariant},{}],189:[function(require,module,exports){"use strict";var ReactMount=require("./ReactMount");module.exports=ReactMount.renderSubtreeIntoContainer},{"./ReactMount":133}],190:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var DOMNamespaces=require("./DOMNamespaces");var WHITESPACE_TEST=/^[ \r\n\t\f]/;var NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/;var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var reusableSVGContainer;var setInnerHTML=createMicrosoftUnsafeLocalFunction(function(node,html){if(node.namespaceURI===DOMNamespaces.svg&&!("innerHTML"in node)){reusableSVGContainer=reusableSVGContainer||document.createElement("div");reusableSVGContainer.innerHTML="<svg>"+html+"</svg>";var svgNode=reusableSVGContainer.firstChild;while(svgNode.firstChild){node.appendChild(svgNode.firstChild)}}else{node.innerHTML=html}});if(ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ";if(testElement.innerHTML===""){setInnerHTML=function(node,html){if(node.parentNode){node.parentNode.replaceChild(node,node)}if(WHITESPACE_TEST.test(html)||html[0]==="<"&&NONVISIBLE_TEST.test(html)){node.innerHTML=String.fromCharCode(65279)+html;var textNode=node.firstChild;if(textNode.data.length===1){node.removeChild(textNode)}else{textNode.deleteData(0,1)}}else{node.innerHTML=html}}}testElement=null}module.exports=setInnerHTML},{"./DOMNamespaces":78,"./createMicrosoftUnsafeLocalFunction":168,"fbjs/lib/ExecutionEnvironment":35}],191:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var setInnerHTML=require("./setInnerHTML");var setTextContent=function(node,text){if(text){var firstChild=node.firstChild;if(firstChild&&firstChild===node.lastChild&&firstChild.nodeType===3){firstChild.nodeValue=text;return}}node.textContent=text};if(ExecutionEnvironment.canUseDOM){if(!("textContent"in document.documentElement)){setTextContent=function(node,text){if(node.nodeType===3){node.nodeValue=text;return}setInnerHTML(node,escapeTextContentForBrowser(text))}}}module.exports=setTextContent},{"./escapeTextContentForBrowser":170,"./setInnerHTML":190,"fbjs/lib/ExecutionEnvironment":35}],192:[function(require,module,exports){"use strict";function shouldUpdateReactComponent(prevElement,nextElement){var prevEmpty=prevElement===null||prevElement===false;var nextEmpty=nextElement===null||nextElement===false;if(prevEmpty||nextEmpty){return prevEmpty===nextEmpty}var prevType=typeof prevElement;var nextType=typeof nextElement;if(prevType==="string"||prevType==="number"){return nextType==="string"||nextType==="number"}else{return nextType==="object"&&prevElement.type===nextElement.type&&prevElement.key===nextElement.key}}module.exports=shouldUpdateReactComponent},{}],193:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var getIteratorFn=require("./getIteratorFn");var invariant=require("fbjs/lib/invariant");var KeyEscapeUtils=require("./KeyEscapeUtils");var warning=require("fbjs/lib/warning");var SEPARATOR=".";var SUBSEPARATOR=":";var didWarnAboutMaps=false;function getComponentKey(component,index){if(component&&typeof component==="object"&&component.key!=null){return KeyEscapeUtils.escape(component.key)}return index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if(type==="undefined"||type==="boolean"){children=null}if(children===null||type==="string"||type==="number"||type==="object"&&children.$$typeof===REACT_ELEMENT_TYPE){callback(traverseContext,children,nameSoFar===""?SEPARATOR+getComponentKey(children,0):nameSoFar);return 1}var child;var nextName;var subtreeCount=0;var nextNamePrefix=nameSoFar===""?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children)){for(var i=0;i<children.length;i++){child=children[i];nextName=nextNamePrefix+getComponentKey(child,i);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var iterator=iteratorFn.call(children);var step;if(iteratorFn!==children.entries){var ii=0;while(!(step=iterator.next()).done){child=step.value;nextName=nextNamePrefix+getComponentKey(child,ii++);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{if(process.env.NODE_ENV!=="production"){var mapsAsChildrenAddendum="";if(ReactCurrentOwner.current){var mapsAsChildrenOwnerName=ReactCurrentOwner.current.getName();if(mapsAsChildrenOwnerName){mapsAsChildrenAddendum=" Check the render method of `"+mapsAsChildrenOwnerName+"`."}}process.env.NODE_ENV!=="production"?warning(didWarnAboutMaps,"Using Maps as children is not yet fully supported. It is an "+"experimental feature that might be removed. Convert it to a "+"sequence / iterable of keyed ReactElements instead.%s",mapsAsChildrenAddendum):void 0;didWarnAboutMaps=true}while(!(step=iterator.next()).done){var entry=step.value;if(entry){child=entry[1];nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}}}else if(type==="object"){var addendum="";if(process.env.NODE_ENV!=="production"){addendum=" If you meant to render a collection of children, use an array "+"instead or wrap the object using createFragment(object) from the "+"React add-ons.";if(children._isReactElement){addendum=" It looks like you're using an element created by a different "+"version of React. Make sure to use only one copy of React."}if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){addendum+=" Check the render method of `"+name+"`."}}}var childrenString=String(children);!false?process.env.NODE_ENV!=="production"?invariant(false,"Objects are not valid as a React child (found: %s).%s",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):_prodInvariant("31",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):void 0}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){if(children==null){return 0}return traverseAllChildrenImpl(children,"",callback,traverseContext)}module.exports=traverseAllChildren}).call(this,require("_process"))},{"./KeyEscapeUtils":90,"./ReactElementSymbol":119,"./getIteratorFn":179,"./reactProdInvariant":188,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56,"react/lib/ReactCurrentOwner":201}],194:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var emptyFunction=require("fbjs/lib/emptyFunction");var warning=require("fbjs/lib/warning");var validateDOMNesting=emptyFunction;if(process.env.NODE_ENV!=="production"){var specialTags=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"];var inScopeTags=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"];var buttonScopeTags=inScopeTags.concat(["button"]);var impliedEndTags=["dd","dt","li","option","optgroup","p","rp","rt"];var emptyAncestorInfo={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};var updatedAncestorInfo=function(oldInfo,tag,instance){var ancestorInfo=_assign({},oldInfo||emptyAncestorInfo);var info={tag:tag,instance:instance};if(inScopeTags.indexOf(tag)!==-1){ancestorInfo.aTagInScope=null;ancestorInfo.buttonTagInScope=null;ancestorInfo.nobrTagInScope=null}if(buttonScopeTags.indexOf(tag)!==-1){ancestorInfo.pTagInButtonScope=null}if(specialTags.indexOf(tag)!==-1&&tag!=="address"&&tag!=="div"&&tag!=="p"){ancestorInfo.listItemTagAutoclosing=null;ancestorInfo.dlItemTagAutoclosing=null}ancestorInfo.current=info;if(tag==="form"){ancestorInfo.formTag=info}if(tag==="a"){ancestorInfo.aTagInScope=info}if(tag==="button"){ancestorInfo.buttonTagInScope=info}if(tag==="nobr"){ancestorInfo.nobrTagInScope=info}if(tag==="p"){ancestorInfo.pTagInButtonScope=info}if(tag==="li"){ancestorInfo.listItemTagAutoclosing=info}if(tag==="dd"||tag==="dt"){ancestorInfo.dlItemTagAutoclosing=info}return ancestorInfo};var isTagValidWithParent=function(tag,parentTag){switch(parentTag){case"select":return tag==="option"||tag==="optgroup"||tag==="#text";case"optgroup":return tag==="option"||tag==="#text";case"option":return tag==="#text";case"tr":return tag==="th"||tag==="td"||tag==="style"||tag==="script"||tag==="template";case"tbody":case"thead":case"tfoot":return tag==="tr"||tag==="style"||tag==="script"||tag==="template";case"colgroup":return tag==="col"||tag==="template";case"table":return tag==="caption"||tag==="colgroup"||tag==="tbody"||tag==="tfoot"||tag==="thead"||tag==="style"||tag==="script"||tag==="template";case"head":return tag==="base"||tag==="basefont"||tag==="bgsound"||tag==="link"||tag==="meta"||tag==="title"||tag==="noscript"||tag==="noframes"||tag==="style"||tag==="script"||tag==="template";case"html":return tag==="head"||tag==="body";case"#document":return tag==="html"}switch(tag){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return parentTag!=="h1"&&parentTag!=="h2"&&parentTag!=="h3"&&parentTag!=="h4"&&parentTag!=="h5"&&parentTag!=="h6";case"rp":case"rt":return impliedEndTags.indexOf(parentTag)===-1;case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return parentTag==null}return true};var findInvalidAncestorForTag=function(tag,ancestorInfo){switch(tag){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return ancestorInfo.pTagInButtonScope;case"form":return ancestorInfo.formTag||ancestorInfo.pTagInButtonScope;case"li":return ancestorInfo.listItemTagAutoclosing;case"dd":case"dt":return ancestorInfo.dlItemTagAutoclosing;case"button":return ancestorInfo.buttonTagInScope;case"a":return ancestorInfo.aTagInScope;case"nobr":return ancestorInfo.nobrTagInScope}return null};var findOwnerStack=function(instance){if(!instance){return[]}var stack=[];do{stack.push(instance)}while(instance=instance._currentElement._owner);stack.reverse();return stack};var didWarn={};validateDOMNesting=function(childTag,childText,childInstance,ancestorInfo){ancestorInfo=ancestorInfo||emptyAncestorInfo;var parentInfo=ancestorInfo.current;var parentTag=parentInfo&&parentInfo.tag;if(childText!=null){process.env.NODE_ENV!=="production"?warning(childTag==null,"validateDOMNesting: when childText is passed, childTag should be null"):void 0;childTag="#text"}var invalidParent=isTagValidWithParent(childTag,parentTag)?null:parentInfo;var invalidAncestor=invalidParent?null:findInvalidAncestorForTag(childTag,ancestorInfo);var problematic=invalidParent||invalidAncestor;if(problematic){var ancestorTag=problematic.tag;var ancestorInstance=problematic.instance;var childOwner=childInstance&&childInstance._currentElement._owner;var ancestorOwner=ancestorInstance&&ancestorInstance._currentElement._owner;var childOwners=findOwnerStack(childOwner);var ancestorOwners=findOwnerStack(ancestorOwner);var minStackLen=Math.min(childOwners.length,ancestorOwners.length);var i;var deepestCommon=-1;for(i=0;i<minStackLen;i++){if(childOwners[i]===ancestorOwners[i]){deepestCommon=i}else{break}}var UNKNOWN="(unknown)";var childOwnerNames=childOwners.slice(deepestCommon+1).map(function(inst){return inst.getName()||UNKNOWN});var ancestorOwnerNames=ancestorOwners.slice(deepestCommon+1).map(function(inst){return inst.getName()||UNKNOWN});var ownerInfo=[].concat(deepestCommon!==-1?childOwners[deepestCommon].getName()||UNKNOWN:[],ancestorOwnerNames,ancestorTag,invalidAncestor?["..."]:[],childOwnerNames,childTag).join(" > ");var warnKey=!!invalidParent+"|"+childTag+"|"+ancestorTag+"|"+ownerInfo;if(didWarn[warnKey]){return}didWarn[warnKey]=true;var tagDisplayName=childTag;var whitespaceInfo="";if(childTag==="#text"){if(/\S/.test(childText)){tagDisplayName="Text nodes"}else{tagDisplayName="Whitespace text nodes";whitespaceInfo=" Make sure you don't have any extra whitespace between tags on "+"each line of your source code."}}else{tagDisplayName="<"+childTag+">"}if(invalidParent){var info="";if(ancestorTag==="table"&&childTag==="tr"){info+=" Add a <tbody> to your code to match the DOM tree generated by "+"the browser."}process.env.NODE_ENV!=="production"?warning(false,"validateDOMNesting(...): %s cannot appear as a child of <%s>.%s "+"See %s.%s",tagDisplayName,ancestorTag,whitespaceInfo,ownerInfo,info):void 0}else{process.env.NODE_ENV!=="production"?warning(false,"validateDOMNesting(...): %s cannot appear as a descendant of "+"<%s>. See %s.",tagDisplayName,ancestorTag,ownerInfo):void 0}}};validateDOMNesting.updatedAncestorInfo=updatedAncestorInfo;validateDOMNesting.isTagValidInContext=function(tag,ancestorInfo){ancestorInfo=ancestorInfo||emptyAncestorInfo;var parentInfo=ancestorInfo.current;var parentTag=parentInfo&&parentInfo.tag;return isTagValidWithParent(tag,parentTag)&&!findInvalidAncestorForTag(tag,ancestorInfo)}}module.exports=validateDOMNesting}).call(this,require("_process"))},{_process:407,"fbjs/lib/emptyFunction":41,"fbjs/lib/warning":56,"object-assign":63}],195:[function(require,module,exports){arguments[4][90][0].apply(exports,arguments)},{dup:90}],196:[function(require,module,exports){arguments[4][92][0].apply(exports,arguments)},{"./reactProdInvariant":218,_process:407,dup:92,"fbjs/lib/invariant":49}],197:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var ReactBaseClasses=require("./ReactBaseClasses");var ReactChildren=require("./ReactChildren");var ReactDOMFactories=require("./ReactDOMFactories");var ReactElement=require("./ReactElement");var ReactPropTypes=require("./ReactPropTypes");var ReactVersion=require("./ReactVersion");var createReactClass=require("./createClass");var onlyChild=require("./onlyChild");var createElement=ReactElement.createElement;var createFactory=ReactElement.createFactory;var cloneElement=ReactElement.cloneElement;if(process.env.NODE_ENV!=="production"){var lowPriorityWarning=require("./lowPriorityWarning");var canDefineProperty=require("./canDefineProperty");var ReactElementValidator=require("./ReactElementValidator");var didWarnPropTypesDeprecated=false;createElement=ReactElementValidator.createElement;createFactory=ReactElementValidator.createFactory;cloneElement=ReactElementValidator.cloneElement}var __spread=_assign;var createMixin=function(mixin){return mixin};if(process.env.NODE_ENV!=="production"){var warnedForSpread=false;var warnedForCreateMixin=false;__spread=function(){lowPriorityWarning(warnedForSpread,"React.__spread is deprecated and should not be used. Use "+"Object.assign directly or another helper function with similar "+"semantics. You may be seeing this warning due to your compiler. "+"See https://fb.me/react-spread-deprecation for more details.");warnedForSpread=true;return _assign.apply(null,arguments)};createMixin=function(mixin){lowPriorityWarning(warnedForCreateMixin,"React.createMixin is deprecated and should not be used. "+"In React v16.0, it will be removed. "+"You can use this mixin directly instead. "+"See https://fb.me/createmixin-was-never-implemented for more info.");warnedForCreateMixin=true;return mixin}}var React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactBaseClasses.Component,PureComponent:ReactBaseClasses.PureComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:createReactClass,createFactory:createFactory,createMixin:createMixin,DOM:ReactDOMFactories,version:ReactVersion,__spread:__spread};if(process.env.NODE_ENV!=="production"){var warnedForCreateClass=false;if(canDefineProperty){Object.defineProperty(React,"PropTypes",{get:function(){lowPriorityWarning(didWarnPropTypesDeprecated,"Accessing PropTypes via the main React package is deprecated,"+" and will be removed in  React v16.0."+" Use the latest available v15.* prop-types package from npm instead."+" For info on usage, compatibility, migration and more, see "+"https://fb.me/prop-types-docs");didWarnPropTypesDeprecated=true;return ReactPropTypes}});Object.defineProperty(React,"createClass",{get:function(){lowPriorityWarning(warnedForCreateClass,"Accessing createClass via the main React package is deprecated,"+" and will be removed in React v16.0."+" Use a plain JavaScript class instead. If you're not yet "+"ready to migrate, create-react-class v15.* is available "+"on npm as a temporary, drop-in replacement. "+"For more info see https://fb.me/react-create-class");warnedForCreateClass=true;return createReactClass}})}React.DOM={};var warnedForFactories=false;Object.keys(ReactDOMFactories).forEach(function(factory){React.DOM[factory]=function(){if(!warnedForFactories){lowPriorityWarning(false,"Accessing factories like React.DOM.%s has been deprecated "+"and will be removed in v16.0+. Use the "+"react-dom-factories package instead. "+" Version 1.0 provides a drop-in replacement."+" For more info, see https://fb.me/react-dom-factories",factory);warnedForFactories=true}return ReactDOMFactories[factory].apply(ReactDOMFactories,arguments)}})}module.exports=React}).call(this,require("_process"))},{"./ReactBaseClasses":198,"./ReactChildren":199,"./ReactDOMFactories":202,"./ReactElement":203,"./ReactElementValidator":205,"./ReactPropTypes":208,"./ReactVersion":210,"./canDefineProperty":211,"./createClass":213,"./lowPriorityWarning":216,"./onlyChild":217,_process:407,"object-assign":63}],198:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue");var canDefineProperty=require("./canDefineProperty");var emptyObject=require("fbjs/lib/emptyObject");var invariant=require("fbjs/lib/invariant");var lowPriorityWarning=require("./lowPriorityWarning");function ReactComponent(props,context,updater){this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue}ReactComponent.prototype.isReactComponent={};ReactComponent.prototype.setState=function(partialState,callback){!(typeof partialState==="object"||typeof partialState==="function"||partialState==null)?process.env.NODE_ENV!=="production"?invariant(false,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):_prodInvariant("85"):void 0;this.updater.enqueueSetState(this,partialState);if(callback){this.updater.enqueueCallback(this,callback,"setState")}};ReactComponent.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this);if(callback){this.updater.enqueueCallback(this,callback,"forceUpdate")}};if(process.env.NODE_ENV!=="production"){var deprecatedAPIs={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in "+"componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see "+"https://github.com/facebook/react/issues/3236)."]};var defineDeprecationWarning=function(methodName,info){if(canDefineProperty){Object.defineProperty(ReactComponent.prototype,methodName,{get:function(){lowPriorityWarning(false,"%s(...) is deprecated in plain JavaScript React classes. %s",info[0],info[1]);return undefined}})}};for(var fnName in deprecatedAPIs){if(deprecatedAPIs.hasOwnProperty(fnName)){defineDeprecationWarning(fnName,deprecatedAPIs[fnName])}}}function ReactPureComponent(props,context,updater){this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue}function ComponentDummy(){}ComponentDummy.prototype=ReactComponent.prototype;ReactPureComponent.prototype=new ComponentDummy;ReactPureComponent.prototype.constructor=ReactPureComponent;_assign(ReactPureComponent.prototype,ReactComponent.prototype);ReactPureComponent.prototype.isPureReactComponent=true;module.exports={Component:ReactComponent,PureComponent:ReactPureComponent}}).call(this,require("_process"))},{"./ReactNoopUpdateQueue":206,"./canDefineProperty":211,"./lowPriorityWarning":216,"./reactProdInvariant":218,_process:407,"fbjs/lib/emptyObject":42,"fbjs/lib/invariant":49,"object-assign":63}],199:[function(require,module,exports){"use strict";var PooledClass=require("./PooledClass");var ReactElement=require("./ReactElement");var emptyFunction=require("fbjs/lib/emptyFunction");var traverseAllChildren=require("./traverseAllChildren");var twoArgumentPooler=PooledClass.twoArgumentPooler;var fourArgumentPooler=PooledClass.fourArgumentPooler;var userProvidedKeyEscapeRegex=/\/+/g;function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,"$&/")}function ForEachBookKeeping(forEachFunction,forEachContext){this.func=forEachFunction;this.context=forEachContext;this.count=0}ForEachBookKeeping.prototype.destructor=function(){this.func=null;this.context=null;this.count=0};PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler);function forEachSingleChild(bookKeeping,child,name){var func=bookKeeping.func,context=bookKeeping.context;func.call(context,child,bookKeeping.count++)}function forEachChildren(children,forEachFunc,forEachContext){if(children==null){return children}var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext);ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,keyPrefix,mapFunction,mapContext){this.result=mapResult;this.keyPrefix=keyPrefix;this.func=mapFunction;this.context=mapContext;this.count=0}MapBookKeeping.prototype.destructor=function(){this.result=null;this.keyPrefix=null;this.func=null;this.context=null;this.count=0};PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);function mapSingleChildIntoContext(bookKeeping,child,childKey){var result=bookKeeping.result,keyPrefix=bookKeeping.keyPrefix,func=bookKeeping.func,context=bookKeeping.context;var mappedChild=func.call(context,child,bookKeeping.count++);if(Array.isArray(mappedChild)){mapIntoWithKeyPrefixInternal(mappedChild,result,childKey,emptyFunction.thatReturnsArgument)}else if(mappedChild!=null){if(ReactElement.isValidElement(mappedChild)){mappedChild=ReactElement.cloneAndReplaceKey(mappedChild,keyPrefix+(mappedChild.key&&(!child||child.key!==mappedChild.key)?escapeUserProvidedKey(mappedChild.key)+"/":"")+childKey)}result.push(mappedChild)}}function mapIntoWithKeyPrefixInternal(children,array,prefix,func,context){var escapedPrefix="";if(prefix!=null){escapedPrefix=escapeUserProvidedKey(prefix)+"/"}var traverseContext=MapBookKeeping.getPooled(array,escapedPrefix,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext);MapBookKeeping.release(traverseContext)}function mapChildren(children,func,context){if(children==null){return children}var result=[];mapIntoWithKeyPrefixInternal(children,result,null,func,context);return result}function forEachSingleChildDummy(traverseContext,child,name){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}function toArray(children){var result=[];mapIntoWithKeyPrefixInternal(children,result,null,emptyFunction.thatReturnsArgument);return result}var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren},{"./PooledClass":196,"./ReactElement":203,"./traverseAllChildren":219,"fbjs/lib/emptyFunction":41}],200:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("./ReactCurrentOwner");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function isNative(fn){var funcToString=Function.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var source=funcToString.call(fn);return reIsNative.test(source)}catch(err){return false}}var canUseCollections=typeof Array.from==="function"&&typeof Map==="function"&&isNative(Map)&&Map.prototype!=null&&typeof Map.prototype.keys==="function"&&isNative(Map.prototype.keys)&&typeof Set==="function"&&isNative(Set)&&Set.prototype!=null&&typeof Set.prototype.keys==="function"&&isNative(Set.prototype.keys);var setItem;var getItem;var removeItem;var getItemIDs;var addRoot;var removeRoot;var getRootIDs;if(canUseCollections){var itemMap=new Map;var rootIDSet=new Set;setItem=function(id,item){itemMap.set(id,item)};getItem=function(id){return itemMap.get(id)};removeItem=function(id){itemMap["delete"](id)};getItemIDs=function(){return Array.from(itemMap.keys())};addRoot=function(id){rootIDSet.add(id)};removeRoot=function(id){rootIDSet["delete"](id)};getRootIDs=function(){return Array.from(rootIDSet.keys())}}else{var itemByKey={};var rootByKey={};var getKeyFromID=function(id){return"."+id};var getIDFromKey=function(key){return parseInt(key.substr(1),10)};setItem=function(id,item){var key=getKeyFromID(id);itemByKey[key]=item};getItem=function(id){var key=getKeyFromID(id);return itemByKey[key]};removeItem=function(id){var key=getKeyFromID(id);delete itemByKey[key]};getItemIDs=function(){return Object.keys(itemByKey).map(getIDFromKey)};addRoot=function(id){var key=getKeyFromID(id);rootByKey[key]=true};removeRoot=function(id){var key=getKeyFromID(id);delete rootByKey[key]};getRootIDs=function(){return Object.keys(rootByKey).map(getIDFromKey)}}var unmountedIDs=[];function purgeDeep(id){var item=getItem(id);if(item){var childIDs=item.childIDs;removeItem(id);childIDs.forEach(purgeDeep)}}function describeComponentFrame(name,source,ownerName){return"\n    in "+(name||"Unknown")+(source?" (at "+source.fileName.replace(/^.*[\\\/]/,"")+":"+source.lineNumber+")":ownerName?" (created by "+ownerName+")":"")}function getDisplayName(element){if(element==null){return"#empty"}else if(typeof element==="string"||typeof element==="number"){return"#text"}else if(typeof element.type==="string"){return element.type}else{return element.type.displayName||element.type.name||"Unknown"}}function describeID(id){var name=ReactComponentTreeHook.getDisplayName(id);var element=ReactComponentTreeHook.getElement(id);var ownerID=ReactComponentTreeHook.getOwnerID(id);var ownerName;if(ownerID){ownerName=ReactComponentTreeHook.getDisplayName(ownerID)}process.env.NODE_ENV!=="production"?warning(element,"ReactComponentTreeHook: Missing React element for debugID %s when "+"building stack",id):void 0;return describeComponentFrame(name,element&&element._source,ownerName)}var ReactComponentTreeHook={onSetChildren:function(id,nextChildIDs){var item=getItem(id);!item?process.env.NODE_ENV!=="production"?invariant(false,"Item must have been set"):_prodInvariant("144"):void 0;item.childIDs=nextChildIDs;for(var i=0;i<nextChildIDs.length;i++){var nextChildID=nextChildIDs[i];var nextChild=getItem(nextChildID);!nextChild?process.env.NODE_ENV!=="production"?invariant(false,"Expected hook events to fire for the child before its parent includes it in onSetChildren()."):_prodInvariant("140"):void 0;!(nextChild.childIDs!=null||typeof nextChild.element!=="object"||nextChild.element==null)?process.env.NODE_ENV!=="production"?invariant(false,"Expected onSetChildren() to fire for a container child before its parent includes it in onSetChildren()."):_prodInvariant("141"):void 0;!nextChild.isMounted?process.env.NODE_ENV!=="production"?invariant(false,"Expected onMountComponent() to fire for the child before its parent includes it in onSetChildren()."):_prodInvariant("71"):void 0;if(nextChild.parentID==null){nextChild.parentID=id}!(nextChild.parentID===id)?process.env.NODE_ENV!=="production"?invariant(false,"Expected onBeforeMountComponent() parent and onSetChildren() to be consistent (%s has parents %s and %s).",nextChildID,nextChild.parentID,id):_prodInvariant("142",nextChildID,nextChild.parentID,id):void 0}},onBeforeMountComponent:function(id,element,parentID){var item={element:element,parentID:parentID,text:null,childIDs:[],isMounted:false,updateCount:0};setItem(id,item)},onBeforeUpdateComponent:function(id,element){var item=getItem(id);if(!item||!item.isMounted){return}item.element=element},onMountComponent:function(id){var item=getItem(id);!item?process.env.NODE_ENV!=="production"?invariant(false,"Item must have been set"):_prodInvariant("144"):void 0;item.isMounted=true;var isRoot=item.parentID===0;if(isRoot){addRoot(id)}},onUpdateComponent:function(id){var item=getItem(id);if(!item||!item.isMounted){return}item.updateCount++},onUnmountComponent:function(id){var item=getItem(id);if(item){item.isMounted=false;var isRoot=item.parentID===0;if(isRoot){removeRoot(id)}}unmountedIDs.push(id)},purgeUnmountedComponents:function(){if(ReactComponentTreeHook._preventPurging){return}for(var i=0;i<unmountedIDs.length;i++){var id=unmountedIDs[i];purgeDeep(id)}unmountedIDs.length=0},isMounted:function(id){var item=getItem(id);return item?item.isMounted:false},getCurrentStackAddendum:function(topElement){var info="";if(topElement){var name=getDisplayName(topElement);var owner=topElement._owner;info+=describeComponentFrame(name,topElement._source,owner&&owner.getName())}var currentOwner=ReactCurrentOwner.current;var id=currentOwner&&currentOwner._debugID;info+=ReactComponentTreeHook.getStackAddendumByID(id);return info},getStackAddendumByID:function(id){var info="";while(id){info+=describeID(id);id=ReactComponentTreeHook.getParentID(id)}return info},getChildIDs:function(id){var item=getItem(id);return item?item.childIDs:[]},getDisplayName:function(id){var element=ReactComponentTreeHook.getElement(id);if(!element){return null}return getDisplayName(element)},getElement:function(id){var item=getItem(id);return item?item.element:null},getOwnerID:function(id){var element=ReactComponentTreeHook.getElement(id);if(!element||!element._owner){return null}return element._owner._debugID},getParentID:function(id){var item=getItem(id);return item?item.parentID:null},getSource:function(id){var item=getItem(id);var element=item?item.element:null;var source=element!=null?element._source:null;return source},getText:function(id){var element=ReactComponentTreeHook.getElement(id);if(typeof element==="string"){return element}else if(typeof element==="number"){return""+element}else{return null}},getUpdateCount:function(id){var item=getItem(id);return item?item.updateCount:0},getRootIDs:getRootIDs,getRegisteredIDs:getItemIDs,pushNonStandardWarningStack:function(isCreatingElement,currentSource){if(typeof console.reactStack!=="function"){return}var stack=[];var currentOwner=ReactCurrentOwner.current;var id=currentOwner&&currentOwner._debugID;try{if(isCreatingElement){stack.push({name:id?ReactComponentTreeHook.getDisplayName(id):null,fileName:currentSource?currentSource.fileName:null,lineNumber:currentSource?currentSource.lineNumber:null})}while(id){var element=ReactComponentTreeHook.getElement(id);var parentID=ReactComponentTreeHook.getParentID(id);var ownerID=ReactComponentTreeHook.getOwnerID(id);var ownerName=ownerID?ReactComponentTreeHook.getDisplayName(ownerID):null;var source=element&&element._source;stack.push({name:ownerName,fileName:source?source.fileName:null,lineNumber:source?source.lineNumber:null});id=parentID}}catch(err){}console.reactStack(stack)},popNonStandardWarningStack:function(){if(typeof console.reactStackEnd!=="function"){return}console.reactStackEnd()}};module.exports=ReactComponentTreeHook}).call(this,require("_process"))},{"./ReactCurrentOwner":201,"./reactProdInvariant":218,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56}],201:[function(require,module,exports){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},{}],202:[function(require,module,exports){(function(process){"use strict";var ReactElement=require("./ReactElement");var createDOMFactory=ReactElement.createFactory;if(process.env.NODE_ENV!=="production"){var ReactElementValidator=require("./ReactElementValidator");createDOMFactory=ReactElementValidator.createFactory}var ReactDOMFactories={a:createDOMFactory("a"),abbr:createDOMFactory("abbr"),address:createDOMFactory("address"),area:createDOMFactory("area"),article:createDOMFactory("article"),aside:createDOMFactory("aside"),audio:createDOMFactory("audio"),b:createDOMFactory("b"),base:createDOMFactory("base"),bdi:createDOMFactory("bdi"),bdo:createDOMFactory("bdo"),big:createDOMFactory("big"),blockquote:createDOMFactory("blockquote"),body:createDOMFactory("body"),br:createDOMFactory("br"),button:createDOMFactory("button"),canvas:createDOMFactory("canvas"),caption:createDOMFactory("caption"),cite:createDOMFactory("cite"),code:createDOMFactory("code"),col:createDOMFactory("col"),colgroup:createDOMFactory("colgroup"),data:createDOMFactory("data"),datalist:createDOMFactory("datalist"),dd:createDOMFactory("dd"),del:createDOMFactory("del"),details:createDOMFactory("details"),dfn:createDOMFactory("dfn"),dialog:createDOMFactory("dialog"),div:createDOMFactory("div"),dl:createDOMFactory("dl"),dt:createDOMFactory("dt"),em:createDOMFactory("em"),embed:createDOMFactory("embed"),fieldset:createDOMFactory("fieldset"),figcaption:createDOMFactory("figcaption"),figure:createDOMFactory("figure"),footer:createDOMFactory("footer"),form:createDOMFactory("form"),h1:createDOMFactory("h1"),h2:createDOMFactory("h2"),h3:createDOMFactory("h3"),h4:createDOMFactory("h4"),h5:createDOMFactory("h5"),h6:createDOMFactory("h6"),head:createDOMFactory("head"),header:createDOMFactory("header"),hgroup:createDOMFactory("hgroup"),hr:createDOMFactory("hr"),html:createDOMFactory("html"),i:createDOMFactory("i"),iframe:createDOMFactory("iframe"),img:createDOMFactory("img"),input:createDOMFactory("input"),ins:createDOMFactory("ins"),kbd:createDOMFactory("kbd"),keygen:createDOMFactory("keygen"),label:createDOMFactory("label"),legend:createDOMFactory("legend"),li:createDOMFactory("li"),link:createDOMFactory("link"),main:createDOMFactory("main"),map:createDOMFactory("map"),mark:createDOMFactory("mark"),menu:createDOMFactory("menu"),menuitem:createDOMFactory("menuitem"),meta:createDOMFactory("meta"),meter:createDOMFactory("meter"),nav:createDOMFactory("nav"),noscript:createDOMFactory("noscript"),object:createDOMFactory("object"),ol:createDOMFactory("ol"),optgroup:createDOMFactory("optgroup"),option:createDOMFactory("option"),output:createDOMFactory("output"),p:createDOMFactory("p"),param:createDOMFactory("param"),picture:createDOMFactory("picture"),pre:createDOMFactory("pre"),progress:createDOMFactory("progress"),q:createDOMFactory("q"),rp:createDOMFactory("rp"),rt:createDOMFactory("rt"),ruby:createDOMFactory("ruby"),s:createDOMFactory("s"),samp:createDOMFactory("samp"),script:createDOMFactory("script"),section:createDOMFactory("section"),select:createDOMFactory("select"),small:createDOMFactory("small"),source:createDOMFactory("source"),span:createDOMFactory("span"),strong:createDOMFactory("strong"),style:createDOMFactory("style"),sub:createDOMFactory("sub"),summary:createDOMFactory("summary"),sup:createDOMFactory("sup"),table:createDOMFactory("table"),tbody:createDOMFactory("tbody"),td:createDOMFactory("td"),textarea:createDOMFactory("textarea"),tfoot:createDOMFactory("tfoot"),th:createDOMFactory("th"),thead:createDOMFactory("thead"),time:createDOMFactory("time"),title:createDOMFactory("title"),tr:createDOMFactory("tr"),track:createDOMFactory("track"),u:createDOMFactory("u"),ul:createDOMFactory("ul"),var:createDOMFactory("var"),video:createDOMFactory("video"),wbr:createDOMFactory("wbr"),circle:createDOMFactory("circle"),clipPath:createDOMFactory("clipPath"),defs:createDOMFactory("defs"),ellipse:createDOMFactory("ellipse"),g:createDOMFactory("g"),image:createDOMFactory("image"),line:createDOMFactory("line"),linearGradient:createDOMFactory("linearGradient"),mask:createDOMFactory("mask"),path:createDOMFactory("path"),pattern:createDOMFactory("pattern"),polygon:createDOMFactory("polygon"),polyline:createDOMFactory("polyline"),radialGradient:createDOMFactory("radialGradient"),rect:createDOMFactory("rect"),stop:createDOMFactory("stop"),svg:createDOMFactory("svg"),text:createDOMFactory("text"),tspan:createDOMFactory("tspan")};module.exports=ReactDOMFactories}).call(this,require("_process"))},{"./ReactElement":203,"./ReactElementValidator":205,_process:407}],203:[function(require,module,exports){(function(process){"use strict";var _assign=require("object-assign");var ReactCurrentOwner=require("./ReactCurrentOwner");var warning=require("fbjs/lib/warning");var canDefineProperty=require("./canDefineProperty");var hasOwnProperty=Object.prototype.hasOwnProperty;var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var RESERVED_PROPS={key:true,ref:true,__self:true,__source:true};var specialPropKeyWarningShown,specialPropRefWarningShown;function hasValidRef(config){if(process.env.NODE_ENV!=="production"){if(hasOwnProperty.call(config,"ref")){var getter=Object.getOwnPropertyDescriptor(config,"ref").get;if(getter&&getter.isReactWarning){return false}}}return config.ref!==undefined}function hasValidKey(config){if(process.env.NODE_ENV!=="production"){if(hasOwnProperty.call(config,"key")){var getter=Object.getOwnPropertyDescriptor(config,"key").get;if(getter&&getter.isReactWarning){return false}}}return config.key!==undefined}function defineKeyPropWarningGetter(props,displayName){var warnAboutAccessingKey=function(){if(!specialPropKeyWarningShown){specialPropKeyWarningShown=true;process.env.NODE_ENV!=="production"?warning(false,"%s: `key` is not a prop. Trying to access it will result "+"in `undefined` being returned. If you need to access the same "+"value within the child component, you should pass it as a different "+"prop. (https://fb.me/react-special-props)",displayName):void 0}};warnAboutAccessingKey.isReactWarning=true;Object.defineProperty(props,"key",{get:warnAboutAccessingKey,configurable:true})}function defineRefPropWarningGetter(props,displayName){var warnAboutAccessingRef=function(){if(!specialPropRefWarningShown){specialPropRefWarningShown=true;process.env.NODE_ENV!=="production"?warning(false,"%s: `ref` is not a prop. Trying to access it will result "+"in `undefined` being returned. If you need to access the same "+"value within the child component, you should pass it as a different "+"prop. (https://fb.me/react-special-props)",displayName):void 0}};warnAboutAccessingRef.isReactWarning=true;Object.defineProperty(props,"ref",{get:warnAboutAccessingRef,configurable:true})}var ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};if(process.env.NODE_ENV!=="production"){element._store={};if(canDefineProperty){Object.defineProperty(element._store,"validated",{configurable:false,enumerable:false,writable:true,value:false});Object.defineProperty(element,"_self",{configurable:false,enumerable:false,writable:false,value:self});Object.defineProperty(element,"_source",{configurable:false,enumerable:false,writable:false,value:source})}else{element._store.validated=false;element._self=self;element._source=source}if(Object.freeze){Object.freeze(element.props);Object.freeze(element)}}return element};ReactElement.createElement=function(type,config,children){var propName;var props={};var key=null;var ref=null;var self=null;var source=null;if(config!=null){if(hasValidRef(config)){ref=config.ref}if(hasValidKey(config)){key=""+config.key}self=config.__self===undefined?null:config.__self;source=config.__source===undefined?null:config.__source;for(propName in config){if(hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)){props[propName]=config[propName]}}}var childrenLength=arguments.length-2;if(childrenLength===1){props.children=children}else if(childrenLength>1){var childArray=Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+2]}if(process.env.NODE_ENV!=="production"){if(Object.freeze){Object.freeze(childArray)}}props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps){if(props[propName]===undefined){props[propName]=defaultProps[propName]}}}if(process.env.NODE_ENV!=="production"){if(key||ref){if(typeof props.$$typeof==="undefined"||props.$$typeof!==REACT_ELEMENT_TYPE){var displayName=typeof type==="function"?type.displayName||type.name||"Unknown":type;if(key){defineKeyPropWarningGetter(props,displayName)}if(ref){defineRefPropWarningGetter(props,displayName)}}}}return ReactElement(type,key,ref,self,source,ReactCurrentOwner.current,props)};ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);factory.type=type;return factory};ReactElement.cloneAndReplaceKey=function(oldElement,newKey){var newElement=ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props);return newElement};ReactElement.cloneElement=function(element,config,children){var propName;var props=_assign({},element.props);var key=element.key;var ref=element.ref;var self=element._self;var source=element._source;var owner=element._owner;if(config!=null){if(hasValidRef(config)){ref=config.ref;owner=ReactCurrentOwner.current}if(hasValidKey(config)){key=""+config.key}var defaultProps;if(element.type&&element.type.defaultProps){defaultProps=element.type.defaultProps}for(propName in config){if(hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)){if(config[propName]===undefined&&defaultProps!==undefined){props[propName]=defaultProps[propName]}else{props[propName]=config[propName]}}}}var childrenLength=arguments.length-2;if(childrenLength===1){props.children=children}else if(childrenLength>1){var childArray=Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+2]}props.children=childArray}return ReactElement(element.type,key,ref,self,source,owner,props)};ReactElement.isValidElement=function(object){return typeof object==="object"&&object!==null&&object.$$typeof===REACT_ELEMENT_TYPE};module.exports=ReactElement}).call(this,require("_process"))},{"./ReactCurrentOwner":201,"./ReactElementSymbol":204,"./canDefineProperty":211,_process:407,"fbjs/lib/warning":56,"object-assign":63}],204:[function(require,module,exports){arguments[4][119][0].apply(exports,arguments)},{dup:119}],205:[function(require,module,exports){(function(process){"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactComponentTreeHook=require("./ReactComponentTreeHook");var ReactElement=require("./ReactElement");var checkReactTypeSpec=require("./checkReactTypeSpec");var canDefineProperty=require("./canDefineProperty");var getIteratorFn=require("./getIteratorFn");var warning=require("fbjs/lib/warning");var lowPriorityWarning=require("./lowPriorityWarning");function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){return" Check the render method of `"+name+"`."}}return""}function getSourceInfoErrorAddendum(elementProps){if(elementProps!==null&&elementProps!==undefined&&elementProps.__source!==undefined){var source=elementProps.__source;var fileName=source.fileName.replace(/^.*[\\\/]/,"");var lineNumber=source.lineNumber;return" Check your code at "+fileName+":"+lineNumber+"."}return""}var ownerHasKeyUseWarning={};function getCurrentComponentErrorInfo(parentType){var info=getDeclarationErrorAddendum();if(!info){var parentName=typeof parentType==="string"?parentType:parentType.displayName||parentType.name;if(parentName){info=" Check the top-level render call using <"+parentName+">."}}return info}function validateExplicitKey(element,parentType){if(!element._store||element._store.validated||element.key!=null){return}element._store.validated=true;var memoizer=ownerHasKeyUseWarning.uniqueKey||(ownerHasKeyUseWarning.uniqueKey={});var currentComponentErrorInfo=getCurrentComponentErrorInfo(parentType);if(memoizer[currentComponentErrorInfo]){return}memoizer[currentComponentErrorInfo]=true;var childOwner="";if(element&&element._owner&&element._owner!==ReactCurrentOwner.current){childOwner=" It was passed a child from "+element._owner.getName()+"."}process.env.NODE_ENV!=="production"?warning(false,'Each child in an array or iterator should have a unique "key" prop.'+"%s%s See https://fb.me/react-warning-keys for more information.%s",currentComponentErrorInfo,childOwner,ReactComponentTreeHook.getCurrentStackAddendum(element)):void 0}function validateChildKeys(node,parentType){if(typeof node!=="object"){return}if(Array.isArray(node)){for(var i=0;i<node.length;i++){var child=node[i];if(ReactElement.isValidElement(child)){validateExplicitKey(child,parentType)}}}else if(ReactElement.isValidElement(node)){if(node._store){node._store.validated=true}}else if(node){var iteratorFn=getIteratorFn(node);if(iteratorFn){if(iteratorFn!==node.entries){var iterator=iteratorFn.call(node);var step;while(!(step=iterator.next()).done){if(ReactElement.isValidElement(step.value)){validateExplicitKey(step.value,parentType)}}}}}}function validatePropTypes(element){var componentClass=element.type;if(typeof componentClass!=="function"){return}var name=componentClass.displayName||componentClass.name;if(componentClass.propTypes){checkReactTypeSpec(componentClass.propTypes,element.props,"prop",name,element,null)}if(typeof componentClass.getDefaultProps==="function"){process.env.NODE_ENV!=="production"?warning(componentClass.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass "+"definitions. Use a static property named `defaultProps` instead."):void 0}}var ReactElementValidator={createElement:function(type,props,children){var validType=typeof type==="string"||typeof type==="function";if(!validType){if(typeof type!=="function"&&typeof type!=="string"){var info="";if(type===undefined||typeof type==="object"&&type!==null&&Object.keys(type).length===0){info+=" You likely forgot to export your component from the file "+"it's defined in."}var sourceInfo=getSourceInfoErrorAddendum(props);if(sourceInfo){info+=sourceInfo}else{info+=getDeclarationErrorAddendum()}info+=ReactComponentTreeHook.getCurrentStackAddendum();var currentSource=props!==null&&props!==undefined&&props.__source!==undefined?props.__source:null;ReactComponentTreeHook.pushNonStandardWarningStack(true,currentSource);process.env.NODE_ENV!=="production"?warning(false,"React.createElement: type is invalid -- expected a string (for "+"built-in components) or a class/function (for composite "+"components) but got: %s.%s",type==null?type:typeof type,info):void 0;ReactComponentTreeHook.popNonStandardWarningStack()}}var element=ReactElement.createElement.apply(this,arguments);if(element==null){return element}if(validType){for(var i=2;i<arguments.length;i++){validateChildKeys(arguments[i],type)}}validatePropTypes(element);return element},createFactory:function(type){var validatedFactory=ReactElementValidator.createElement.bind(null,type);validatedFactory.type=type;if(process.env.NODE_ENV!=="production"){if(canDefineProperty){Object.defineProperty(validatedFactory,"type",{enumerable:false,get:function(){lowPriorityWarning(false,"Factory.type is deprecated. Access the class directly "+"before passing it to createFactory.");Object.defineProperty(this,"type",{value:type});return type}})}}return validatedFactory},cloneElement:function(element,props,children){var newElement=ReactElement.cloneElement.apply(this,arguments);for(var i=2;i<arguments.length;i++){validateChildKeys(arguments[i],newElement.type)}validatePropTypes(newElement);return newElement}};module.exports=ReactElementValidator}).call(this,require("_process"))},{"./ReactComponentTreeHook":200,"./ReactCurrentOwner":201,"./ReactElement":203,"./canDefineProperty":211,"./checkReactTypeSpec":212,"./getIteratorFn":214,"./lowPriorityWarning":216,_process:407,"fbjs/lib/warning":56}],206:[function(require,module,exports){(function(process){"use strict";var warning=require("fbjs/lib/warning");function warnNoop(publicInstance,callerName){if(process.env.NODE_ENV!=="production"){var constructor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(false,"%s(...): Can only update a mounted or mounting component. "+"This usually means you called %s() on an unmounted component. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,constructor&&(constructor.displayName||constructor.name)||"ReactClass"):void 0}}var ReactNoopUpdateQueue={isMounted:function(publicInstance){return false},enqueueCallback:function(publicInstance,callback){},enqueueForceUpdate:function(publicInstance){warnNoop(publicInstance,"forceUpdate")},enqueueReplaceState:function(publicInstance,completeState){warnNoop(publicInstance,"replaceState")},enqueueSetState:function(publicInstance,partialState){warnNoop(publicInstance,"setState")}};module.exports=ReactNoopUpdateQueue}).call(this,require("_process"))},{_process:407,"fbjs/lib/warning":56}],207:[function(require,module,exports){arguments[4][137][0].apply(exports,arguments)},{_process:407,dup:137}],208:[function(require,module,exports){"use strict";var _require=require("./ReactElement"),isValidElement=_require.isValidElement;var factory=require("prop-types/factory");module.exports=factory(isValidElement)},{"./ReactElement":203,"prop-types/factory":65}],209:[function(require,module,exports){arguments[4][138][0].apply(exports,arguments)},{dup:138}],210:[function(require,module,exports){arguments[4][146][0].apply(exports,arguments)},{dup:146}],211:[function(require,module,exports){(function(process){"use strict";var canDefineProperty=false;if(process.env.NODE_ENV!=="production"){try{Object.defineProperty({},"x",{get:function(){}});canDefineProperty=true}catch(x){}}module.exports=canDefineProperty}).call(this,require("_process"))},{_process:407}],212:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("./ReactComponentTreeHook")}var loggedTypeFailures={};function checkReactTypeSpec(typeSpecs,values,location,componentName,element,debugID){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{!(typeof typeSpecs[typeSpecName]==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):_prodInvariant("84",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):void 0;error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}process.env.NODE_ENV!=="production"?warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName,typeof error):void 0;if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var componentStackInfo="";if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("./ReactComponentTreeHook")}if(debugID!==null){componentStackInfo=ReactComponentTreeHook.getStackAddendumByID(debugID)}else if(element!==null){componentStackInfo=ReactComponentTreeHook.getCurrentStackAddendum(element)}}process.env.NODE_ENV!=="production"?warning(false,"Failed %s type: %s%s",location,error.message,componentStackInfo):void 0}}}}module.exports=checkReactTypeSpec}).call(this,require("_process"))},{"./ReactComponentTreeHook":200,"./ReactPropTypeLocationNames":207,"./ReactPropTypesSecret":209,"./reactProdInvariant":218,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56}],213:[function(require,module,exports){"use strict";var _require=require("./ReactBaseClasses"),Component=_require.Component;var _require2=require("./ReactElement"),isValidElement=_require2.isValidElement;var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue");var factory=require("create-react-class/factory");module.exports=factory(Component,isValidElement,ReactNoopUpdateQueue)},{"./ReactBaseClasses":198,"./ReactElement":203,"./ReactNoopUpdateQueue":206,"create-react-class/factory":2}],214:[function(require,module,exports){arguments[4][179][0].apply(exports,arguments)},{dup:179}],215:[function(require,module,exports){"use strict";var nextDebugID=1;function getNextDebugID(){return nextDebugID++}module.exports=getNextDebugID},{}],216:[function(require,module,exports){(function(process){"use strict";var lowPriorityWarning=function(){};if(process.env.NODE_ENV!=="production"){var printWarning=function(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.warn(message)}try{throw new Error(message)}catch(x){}};lowPriorityWarning=function(condition,format){if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}printWarning.apply(undefined,[format].concat(args))}}}module.exports=lowPriorityWarning}).call(this,require("_process"))},{_process:407}],217:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactElement=require("./ReactElement");var invariant=require("fbjs/lib/invariant");function onlyChild(children){!ReactElement.isValidElement(children)?process.env.NODE_ENV!=="production"?invariant(false,"React.Children.only expected to receive a single React element child."):_prodInvariant("143"):void 0;return children}module.exports=onlyChild}).call(this,require("_process"))},{"./ReactElement":203,"./reactProdInvariant":218,_process:407,"fbjs/lib/invariant":49}],218:[function(require,module,exports){arguments[4][188][0].apply(exports,arguments)},{dup:188}],219:[function(require,module,exports){(function(process){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("./ReactCurrentOwner");var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var getIteratorFn=require("./getIteratorFn");var invariant=require("fbjs/lib/invariant");var KeyEscapeUtils=require("./KeyEscapeUtils");var warning=require("fbjs/lib/warning");var SEPARATOR=".";var SUBSEPARATOR=":";var didWarnAboutMaps=false;function getComponentKey(component,index){if(component&&typeof component==="object"&&component.key!=null){return KeyEscapeUtils.escape(component.key)}return index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if(type==="undefined"||type==="boolean"){children=null}if(children===null||type==="string"||type==="number"||type==="object"&&children.$$typeof===REACT_ELEMENT_TYPE){callback(traverseContext,children,nameSoFar===""?SEPARATOR+getComponentKey(children,0):nameSoFar);return 1}var child;var nextName;var subtreeCount=0;var nextNamePrefix=nameSoFar===""?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children)){for(var i=0;i<children.length;i++){child=children[i];nextName=nextNamePrefix+getComponentKey(child,i);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var iterator=iteratorFn.call(children);var step;if(iteratorFn!==children.entries){var ii=0;while(!(step=iterator.next()).done){child=step.value;nextName=nextNamePrefix+getComponentKey(child,ii++);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{if(process.env.NODE_ENV!=="production"){var mapsAsChildrenAddendum="";if(ReactCurrentOwner.current){var mapsAsChildrenOwnerName=ReactCurrentOwner.current.getName();if(mapsAsChildrenOwnerName){mapsAsChildrenAddendum=" Check the render method of `"+mapsAsChildrenOwnerName+"`."}}process.env.NODE_ENV!=="production"?warning(didWarnAboutMaps,"Using Maps as children is not yet fully supported. It is an "+"experimental feature that might be removed. Convert it to a "+"sequence / iterable of keyed ReactElements instead.%s",mapsAsChildrenAddendum):void 0;didWarnAboutMaps=true}while(!(step=iterator.next()).done){var entry=step.value;if(entry){child=entry[1];nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}}}else if(type==="object"){var addendum="";if(process.env.NODE_ENV!=="production"){addendum=" If you meant to render a collection of children, use an array "+"instead or wrap the object using createFragment(object) from the "+"React add-ons.";if(children._isReactElement){addendum=" It looks like you're using an element created by a different "+"version of React. Make sure to use only one copy of React."}if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){addendum+=" Check the render method of `"+name+"`."}}}var childrenString=String(children);!false?process.env.NODE_ENV!=="production"?invariant(false,"Objects are not valid as a React child (found: %s).%s",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):_prodInvariant("31",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):void 0}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){if(children==null){return 0}return traverseAllChildrenImpl(children,"",callback,traverseContext)}module.exports=traverseAllChildren}).call(this,require("_process"))},{"./KeyEscapeUtils":195,"./ReactCurrentOwner":201,"./ReactElementSymbol":204,"./getIteratorFn":214,"./reactProdInvariant":218,_process:407,"fbjs/lib/invariant":49,"fbjs/lib/warning":56}],220:[function(require,module,exports){"use strict";module.exports=require("./lib/React")},{"./lib/React":197}],221:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.topojson=global.topojson||{})})(this,function(exports){"use strict";function noop(){}function transformAbsolute(transform){if(!transform)return noop;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(point,i){if(!i)x0=y0=0;point[0]=(x0+=point[0])*kx+dx;point[1]=(y0+=point[1])*ky+dy}}function transformRelative(transform){if(!transform)return noop;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(point,i){if(!i)x0=y0=0;var x1=Math.round((point[0]-dx)/kx),y1=Math.round((point[1]-dy)/ky);point[0]=x1-x0;point[1]=y1-y0;x0=x1;y0=y1}}function reverse(array,n){var t,j=array.length,i=j-n;while(i<--j)t=array[i],array[i++]=array[j],array[j]=t}function bisect(a,x){var lo=0,hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(a[mid]<x)lo=mid+1;else hi=mid}return lo}function feature(topology,o){return o.type==="GeometryCollection"?{type:"FeatureCollection",features:o.geometries.map(function(o){return feature$1(topology,o)})}:feature$1(topology,o)}function feature$1(topology,o){var f={type:"Feature",id:o.id,properties:o.properties||{},geometry:object(topology,o)};if(o.id==null)delete f.id;return f}function object(topology,o){var absolute=transformAbsolute(topology.transform),arcs=topology.arcs;function arc(i,points){if(points.length)points.pop();for(var a=arcs[i<0?~i:i],k=0,n=a.length,p;k<n;++k){points.push(p=a[k].slice());absolute(p,k)}if(i<0)reverse(points,n)}function point(p){p=p.slice();absolute(p,0);return p}function line(arcs){var points=[];for(var i=0,n=arcs.length;i<n;++i)arc(arcs[i],points);if(points.length<2)points.push(points[0].slice());return points}function ring(arcs){var points=line(arcs);while(points.length<4)points.push(points[0].slice());return points}function polygon(arcs){return arcs.map(ring)}function geometry(o){var t=o.type;return t==="GeometryCollection"?{type:t,geometries:o.geometries.map(geometry)}:t in geometryType?{type:t,coordinates:geometryType[t](o)}:null}var geometryType={Point:function(o){return point(o.coordinates)},MultiPoint:function(o){return o.coordinates.map(point)},LineString:function(o){return line(o.arcs)},MultiLineString:function(o){return o.arcs.map(line)},Polygon:function(o){return polygon(o.arcs)},MultiPolygon:function(o){return o.arcs.map(polygon)}};return geometry(o)}function stitchArcs(topology,arcs){var stitchedArcs={},fragmentByStart={},fragmentByEnd={},fragments=[],emptyIndex=-1;arcs.forEach(function(i,j){var arc=topology.arcs[i<0?~i:i],t;if(arc.length<3&&!arc[1][0]&&!arc[1][1]){t=arcs[++emptyIndex],arcs[emptyIndex]=i,arcs[j]=t}});arcs.forEach(function(i){var e=ends(i),start=e[0],end=e[1],f,g;if(f=fragmentByEnd[start]){delete fragmentByEnd[f.end];f.push(i);f.end=end;if(g=fragmentByStart[end]){delete fragmentByStart[g.start];var fg=g===f?f:f.concat(g);fragmentByStart[fg.start=f.start]=fragmentByEnd[fg.end=g.end]=fg}else{fragmentByStart[f.start]=fragmentByEnd[f.end]=f}}else if(f=fragmentByStart[end]){delete fragmentByStart[f.start];f.unshift(i);f.start=start;if(g=fragmentByEnd[start]){delete fragmentByEnd[g.end];var gf=g===f?f:g.concat(f);fragmentByStart[gf.start=g.start]=fragmentByEnd[gf.end=f.end]=gf}else{fragmentByStart[f.start]=fragmentByEnd[f.end]=f}}else{f=[i];fragmentByStart[f.start=start]=fragmentByEnd[f.end=end]=f}});function ends(i){var arc=topology.arcs[i<0?~i:i],p0=arc[0],p1;if(topology.transform)p1=[0,0],arc.forEach(function(dp){p1[0]+=dp[0],p1[1]+=dp[1]});else p1=arc[arc.length-1];return i<0?[p1,p0]:[p0,p1]}function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f=fragmentByEnd[k];delete fragmentByStart[f.start];delete f.start;delete f.end;f.forEach(function(i){stitchedArcs[i<0?~i:i]=1});fragments.push(f)}}flush(fragmentByEnd,fragmentByStart);flush(fragmentByStart,fragmentByEnd);arcs.forEach(function(i){if(!stitchedArcs[i<0?~i:i])fragments.push([i])});return fragments}function mesh(topology){return object(topology,meshArcs.apply(this,arguments))}function meshArcs(topology,o,filter){var arcs=[];function arc(i){var j=i<0?~i:i;(geomsByArc[j]||(geomsByArc[j]=[])).push({i:i,g:geom})}function line(arcs){arcs.forEach(arc)}function polygon(arcs){arcs.forEach(line)}function geometry(o){if(o.type==="GeometryCollection")o.geometries.forEach(geometry);else if(o.type in geometryType)geom=o,geometryType[o.type](o.arcs)}if(arguments.length>1){var geomsByArc=[],geom;var geometryType={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs){arcs.forEach(polygon)}};geometry(o);geomsByArc.forEach(arguments.length<3?function(geoms){arcs.push(geoms[0].i)}:function(geoms){if(filter(geoms[0].g,geoms[geoms.length-1].g))arcs.push(geoms[0].i)})}else{for(var i=0,n=topology.arcs.length;i<n;++i)arcs.push(i)}return{type:"MultiLineString",arcs:stitchArcs(topology,arcs)}}function cartesianTriangleArea(triangle){var a=triangle[0],b=triangle[1],c=triangle[2];return Math.abs((a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1]))}function ring(ring){var i=-1,n=ring.length,a,b=ring[n-1],area=0;while(++i<n){a=b;b=ring[i];area+=a[0]*b[1]-a[1]*b[0]}return area/2}function merge(topology){return object(topology,mergeArcs.apply(this,arguments))}function mergeArcs(topology,objects){var polygonsByArc={},polygons=[],components=[];objects.forEach(function(o){if(o.type==="Polygon")register(o.arcs);else if(o.type==="MultiPolygon")o.arcs.forEach(register)});function register(polygon){polygon.forEach(function(ring$$){ring$$.forEach(function(arc){(polygonsByArc[arc=arc<0?~arc:arc]||(polygonsByArc[arc]=[])).push(polygon)})});polygons.push(polygon)}function area(ring$$){return Math.abs(ring(object(topology,{type:"Polygon",arcs:[ring$$]}).coordinates[0]))}polygons.forEach(function(polygon){if(!polygon._){var component=[],neighbors=[polygon];polygon._=1;components.push(component);while(polygon=neighbors.pop()){component.push(polygon);polygon.forEach(function(ring$$){ring$$.forEach(function(arc){polygonsByArc[arc<0?~arc:arc].forEach(function(polygon){if(!polygon._){polygon._=1;neighbors.push(polygon)}})})})}}});polygons.forEach(function(polygon){delete polygon._});return{type:"MultiPolygon",arcs:components.map(function(polygons){var arcs=[],n;polygons.forEach(function(polygon){polygon.forEach(function(ring$$){ring$$.forEach(function(arc){if(polygonsByArc[arc<0?~arc:arc].length<2){arcs.push(arc)}})})});arcs=stitchArcs(topology,arcs);if((n=arcs.length)>1){for(var i=1,k=area(arcs[0]),ki,t;i<n;++i){if((ki=area(arcs[i]))>k){t=arcs[0],arcs[0]=arcs[i],arcs[i]=t,k=ki}}}return arcs})}}function neighbors(objects){var indexesByArc={},neighbors=objects.map(function(){return[]});function line(arcs,i){arcs.forEach(function(a){if(a<0)a=~a;var o=indexesByArc[a];if(o)o.push(i);else indexesByArc[a]=[i]})}function polygon(arcs,i){arcs.forEach(function(arc){line(arc,i)})}function geometry(o,i){if(o.type==="GeometryCollection")o.geometries.forEach(function(o){geometry(o,i)});else if(o.type in geometryType)geometryType[o.type](o.arcs,i)}var geometryType={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs,i){arcs.forEach(function(arc){polygon(arc,i)})}};objects.forEach(geometry);for(var i in indexesByArc){for(var indexes=indexesByArc[i],m=indexes.length,j=0;j<m;++j){for(var k=j+1;k<m;++k){var ij=indexes[j],ik=indexes[k],n;if((n=neighbors[ij])[i=bisect(n,ik)]!==ik)n.splice(i,0,ik);if((n=neighbors[ik])[i=bisect(n,ij)]!==ij)n.splice(i,0,ij)}}}return neighbors}function compareArea(a,b){return a[1][2]-b[1][2]}function minAreaHeap(){var heap={},array=[],size=0;heap.push=function(object){up(array[object._=size]=object,size++);return size};heap.pop=function(){if(size<=0)return;var removed=array[0],object;if(--size>0)object=array[size],down(array[object._=0]=object,0);return removed};heap.remove=function(removed){var i=removed._,object;if(array[i]!==removed)return;if(i!==--size)object=array[size],(compareArea(object,removed)<0?up:down)(array[object._=i]=object,i);return i};function up(object,i){while(i>0){var j=(i+1>>1)-1,parent=array[j];if(compareArea(object,parent)>=0)break;array[parent._=i]=parent;array[object._=i=j]=object}}function down(object,i){while(true){var r=i+1<<1,l=r-1,j=i,child=array[j];if(l<size&&compareArea(array[l],child)<0)child=array[j=l];if(r<size&&compareArea(array[r],child)<0)child=array[j=r];if(j===i)break;array[child._=i]=child;array[object._=i=j]=object}}return heap}function presimplify(topology,triangleArea){var absolute=transformAbsolute(topology.transform),relative=transformRelative(topology.transform),heap=minAreaHeap();if(!triangleArea)triangleArea=cartesianTriangleArea;topology.arcs.forEach(function(arc){var triangles=[],maxArea=0,triangle,i,n,p;for(i=0,n=arc.length;i<n;++i){p=arc[i];absolute(arc[i]=[p[0],p[1],Infinity],i)}for(i=1,n=arc.length-1;i<n;++i){triangle=arc.slice(i-1,i+2);triangle[1][2]=triangleArea(triangle);triangles.push(triangle);heap.push(triangle)}for(i=0,n=triangles.length;i<n;++i){triangle=triangles[i];triangle.previous=triangles[i-1];triangle.next=triangles[i+1]}while(triangle=heap.pop()){var previous=triangle.previous,next=triangle.next;if(triangle[1][2]<maxArea)triangle[1][2]=maxArea;else maxArea=triangle[1][2];if(previous){previous.next=next;previous[2]=triangle[2];update(previous)}if(next){next.previous=previous;next[0]=triangle[0];update(next)}}arc.forEach(relative)});function update(triangle){heap.remove(triangle);triangle[1][2]=triangleArea(triangle);heap.push(triangle)}return topology}var version="1.6.27";exports.version=version;exports.mesh=mesh;exports.meshArcs=meshArcs;exports.merge=merge;exports.mergeArcs=mergeArcs;exports.feature=feature;exports.neighbors=neighbors;exports.presimplify=presimplify;Object.defineProperty(exports,"__esModule",{value:true})})},{}],222:[function(require,module,exports){(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value)};_.iteratee=function(value,context){return cb(value,context,Infinity)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key]}}return obj}};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result};var property=function(key){return function(obj){return obj==null?void 0:obj[key]}};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var getLength=property("length");var isArrayLike=function(collection){var length=getLength(collection);return typeof length=="number"&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(arguments.length<3){memo=obj[keys?keys[index]:index];index+=dir}return iterator(obj,iteratee,memo,keys,index,length)}}_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj)){key=_.findIndex(obj,predicate,context)}else{key=_.findKey(obj,predicate,context)}if(key!==void 0&&key!==-1)return obj[key]};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false};_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=_.values(obj);if(typeof fromIndex!="number"||guard)fromIndex=0;return _.indexOf(obj,item,fromIndex)>=0};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed}})}return result};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed}})}return result};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index]}return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value]});_.indexBy=group(function(result,value,key){result[key]=value});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1});_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length};_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)});return[pass,fail]};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n)};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len){output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output};_.flatten=function(array,shallow){return flatten(array,shallow,false)};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!_.contains(result,value)){result.push(value)}}return result};_.union=function(){return _.uniq(flatten(arguments,true,true))};_.intersection=function(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){return _.unzip(arguments)};_.unzip=function(array){var length=array&&_.max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=_.pluck(array,index)}return result};_.object=function(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}_.findIndex=createPredicateIndexFinder(1);_.findLastIndex=createPredicateIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low};function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=="number"){if(dir>0){i=idx>=0?idx:Math.max(idx+length,i)}else{length=idx>=0?Math.min(idx+1,length):idx+length+1}}else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1}if(item!==item){idx=predicateFind(slice.call(array,i,length),_.isNaN);return idx>=0?idx+i:-1}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir){if(array[idx]===item)return idx}return-1}}_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex);_.lastIndexOf=createIndexFinder(-1,_.findLastIndex);_.range=function(start,stop,step){if(stop==null){stop=start||0;start=0}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2);var bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound};_.partial=function(func){var boundArgs=slice.call(arguments,1);var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj)}return obj};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}};_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=_.isFunction(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)){keys.push(prop)}}}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={},currentKey;for(var index=0;index<length;index++){currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context)}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj};obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee)}else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)};_.defaults=createAssigner(_.allKeys,true);_.create=function(prototype,props){var result=baseCreate(prototype);if(props)_.extendOwn(result,props);return result};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true};_.isEqual=function(a,b){return eq(a,b)};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){_.isFunction=function(obj){return typeof obj=="function"||false}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.noop=function(){};_.property=property;_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key]}};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs)}};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match]};var source="(?:"+_.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0){value=fallback}return _.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};var argument=settings.variable||"obj";template.source="function("+argument+"){\n"+source+"}";return template};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args))}})};_.mixin(_);_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0)delete obj[0];return result(this,obj)}});_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}});_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return _})}}).call(this)},{}],223:[function(require,module,exports){var DEPS=require("./Dependencies").ALL;function create(cs,reflow){var out={};copy(cs,out);out.add=[];out.mod=[];out.rem=[];out.reflow=reflow;return out}function copy(a,b){b.stamp=a?a.stamp:0;b.sort=a?a.sort:null;b.facet=a?a.facet:null;b.trans=a?a.trans:null;b.dirty=a?a.dirty:[];b.request=a?a.request:null;for(var d,i=0,n=DEPS.length;i<n;++i){b[d=DEPS[i]]=a?a[d]:{}}}module.exports={create:create,copy:copy}},{"./Dependencies":226}],224:[function(require,module,exports){var log=require("vega-logging"),Tuple=require("./Tuple"),Base=require("./Node").prototype,ChangeSet=require("./ChangeSet");function Collector(graph){Base.init.call(this,graph);this._data=[];this.router(true).collector(true)}var prototype=Collector.prototype=Object.create(Base);prototype.constructor=Collector;prototype.data=function(){return this._data};prototype.evaluate=function(input){log.debug(input,["collecting"]);var output=ChangeSet.create(input);if(input.rem.length){this._data=Tuple.idFilter(this._data,input.rem);output.rem=input.rem.slice(0)}if(input.add.length){this._data=this._data.concat(input.add);output.add=input.add.slice(0)}if(input.mod.length){output.mod=input.mod.slice(0)}if(input.sort){this._data.sort(input.sort)}if(input.reflow){output.mod=output.mod.concat(Tuple.idFilter(this._data,output.add,output.mod,output.rem));output.reflow=false}return output};module.exports=Collector},{"./ChangeSet":223,"./Node":229,"./Tuple":231,"vega-logging":299}],225:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),ChangeSet=require("./ChangeSet"),Collector=require("./Collector"),Tuple=require("./Tuple"),Node=require("./Node");function DataSource(graph,name,facet){this._graph=graph;this._name=name;this._data=[];this._source=null;this._facet=facet;this._input=ChangeSet.create();this._output=null;this._indexes={};this._indexFields=[];this._inputNode=null;this._outputNode=null;this._pipeline=null;this._collector=null;this._mutates=false}var prototype=DataSource.prototype;prototype.name=function(name){if(!arguments.length)return this._name;return this._name=name,this};prototype.source=function(src){if(!arguments.length)return this._source;return this._source=this._graph.data(src)};prototype.insert=function(tuples){this._input.add=this._input.add.concat(tuples.map(Tuple.ingest));return this};prototype.remove=function(where){var remove=this._data.filter(where);this._input.rem=this._input.rem.concat(remove);return this};prototype.update=function(where,field,func){var mod=this._input.mod,ids=Tuple.idMap(mod);this._input.fields[field]=1;this._data.filter(where).forEach(function(x){var prev=x[field],next=func(x);if(prev!==next){Tuple.set(x,field,next);if(ids[x._id]!==1){mod.push(x);ids[x._id]=1}}});return this};prototype.values=function(data){if(!arguments.length)return this._collector.data();this._input.rem=this._data.slice();if(data){this.insert(data)}return this};prototype.mutates=function(m){if(!arguments.length)return this._mutates;this._mutates=this._mutates||m;return this};prototype.last=function(){return this._output};prototype.fire=function(input){if(input)this._input=input;this._graph.propagate(this._input,this._pipeline[0]);return this};prototype.pipeline=function(pipeline){if(!arguments.length)return this._pipeline;var graph=this._graph,status;pipeline.unshift(this._inputNode=DataSourceInput(this));status=graph.preprocess(pipeline);if(status.router){pipeline.push(status.collector=new Collector(graph))}pipeline.push(this._outputNode=DataSourceOutput(this));this._collector=status.collector;this._mutates=!!status.mutates;graph.connect(this._pipeline=pipeline);return this};prototype.synchronize=function(){this._graph.synchronize(this._pipeline);return this};prototype.getIndex=function(field){var data=this.values(),indexes=this._indexes,fields=this._indexFields,f=dl.$(field),index,i,len,value;if(!indexes[field]){indexes[field]=index={};fields.push(field);for(i=0,len=data.length;i<len;++i){value=f(data[i]);index[value]=(index[value]||0)+1;Tuple.prev_init(data[i])}}return indexes[field]};prototype.listener=function(){return DataSourceListener(this).addListener(this._inputNode)};prototype.addListener=function(l){if(l instanceof DataSource){this._collector.addListener(l.listener())}else{this._outputNode.addListener(l)}return this};prototype.removeListener=function(l){this._outputNode.removeListener(l)};prototype.listeners=function(ds){return(ds?this._collector:this._outputNode).listeners()};function DataSourceInput(ds){var input=new Node(ds._graph).router(true).collector(true);input.data=function(){return ds._data};input.evaluate=function(input){log.debug(input,["input",ds._name]);var delta=ds._input,out=ChangeSet.create(input),f;for(f in delta.fields){out.fields[f]=1}if(delta.rem.length){ds._data=Tuple.idFilter(ds._data,delta.rem)}if(delta.add.length){ds._data=ds._data.concat(delta.add)}if(delta.sort){ds._data.sort(delta.sort)}if(input.reflow){delta.mod=delta.mod.concat(Tuple.idFilter(ds._data,delta.add,delta.mod,delta.rem))}ds._input=ChangeSet.create();out.add=delta.add;out.mod=delta.mod;out.rem=delta.rem;out.facet=ds._facet;return out};return input}function DataSourceOutput(ds){var output=new Node(ds._graph).router(true).reflows(true).collector(true);function updateIndices(pulse){var fields=ds._indexFields,i,j,f,key,index,value;for(i=0;i<fields.length;++i){key=fields[i];index=ds._indexes[key];f=dl.$(key);for(j=0;j<pulse.add.length;++j){value=f(pulse.add[j]);Tuple.prev_init(pulse.add[j]);index[value]=(index[value]||0)+1}for(j=0;j<pulse.rem.length;++j){value=f(pulse.rem[j]);index[value]=(index[value]||0)-1}for(j=0;j<pulse.mod.length;++j){value=f(pulse.mod[j]._prev);index[value]=(index[value]||0)-1;value=f(pulse.mod[j]);index[value]=(index[value]||0)+1}}}output.data=function(){return ds._collector?ds._collector.data():ds._data};output.evaluate=function(input){log.debug(input,["output",ds._name]);updateIndices(input);var out=ChangeSet.create(input,true);if(ds._facet){ds._facet.values=ds.values();input.facet=null}ds._output=input;out.data[ds._name]=1;return out};return output}function DataSourceListener(ds){var l=new Node(ds._graph).router(true);l.evaluate=function(input){if(ds.mutates()){var map=ds._srcMap||(ds._srcMap={}),output=ChangeSet.create(input);output.add=input.add.map(function(t){return map[t._id]=Tuple.derive(t)});output.mod=input.mod.map(function(t){return Tuple.rederive(t,map[t._id])});output.rem=input.rem.map(function(t){var o=map[t._id];return map[t._id]=null,o});return ds._input=output}else{return ds._input=input}};return l}module.exports=DataSource},{"./ChangeSet":223,"./Collector":224,"./Node":229,"./Tuple":231,datalib:29,"vega-logging":299}],226:[function(require,module,exports){var deps=module.exports={ALL:["data","fields","scales","signals"]};deps.ALL.forEach(function(k){deps[k.toUpperCase()]=k})},{}],227:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),Heap=require("./Heap"),ChangeSet=require("./ChangeSet"),DataSource=require("./DataSource"),Collector=require("./Collector"),Tuple=require("./Tuple"),Signal=require("./Signal"),Deps=require("./Dependencies");function Graph(){}var prototype=Graph.prototype;prototype.init=function(){this._stamp=0;this._rank=0;this._data={};this._signals={};this._requestedIndexes={};this.doNotPropagate={}};prototype.rank=function(){return++this._rank};prototype.values=function(type,names,hash){var data=type===Deps.SIGNALS?this._signals:this._data,n=names!==undefined?names:dl.keys(data),vals,i;if(Array.isArray(n)){vals=hash||{};for(i=0;i<n.length;++i){vals[n[i]]=data[n[i]].values()}return vals}else{return data[n].values()}};prototype.dataValues=function(names){return this.values(Deps.DATA,names)};prototype.signalValues=function(names){return this.values(Deps.SIGNALS,names)};prototype.data=function(name,pipeline,facet){var db=this._data;if(!arguments.length){var all=[],key;for(key in db){all.push(db[key])}return all}else if(arguments.length===1){return db[name]}else{return db[name]=new DataSource(this,name,facet).pipeline(pipeline)}};prototype.signal=function(name,init){if(arguments.length===1){var m=this;return Array.isArray(name)?name.map(function(n){return m._signals[n]}):this._signals[name]}else{return this._signals[name]=new Signal(this,name,init)}};prototype.signalRef=function(ref){if(!Array.isArray(ref)){ref=dl.field(ref)}var value=this.signal(ref[0]).value();if(ref.length>1){for(var i=1,n=ref.length;i<n;++i){value=value[ref[i]]}}return value};prototype.requestIndex=function(data,field){var ri=this._requestedIndexes,reg=ri[data]||(ri[data]={});return reg[field]=true,this};prototype.buildIndexes=function(){var ri=this._requestedIndexes,data=dl.keys(ri),i,len,j,jlen,d,src,fields,f;for(i=0,len=data.length;i<len;++i){src=this.data(d=data[i]);if(!src)throw Error("Data source "+dl.str(d)+" does not exist.");fields=dl.keys(ri[d]);for(j=0,jlen=fields.length;j<jlen;++j){if((f=fields[j])===null)continue;src.getIndex(f);ri[d][f]=null}}return this};prototype.propagate=function(pulse,node,stamp,skipSignals){var pulses={},listeners,next,nplse,tpls,ntpls,i,len,isSg;var pq=new Heap(function(a,b){return a._qrank-b._qrank});if(pulse.stamp)throw Error("Pulse already has a non-zero stamp.");pulse.stamp=stamp||++this._stamp;pulses[node._id]=pulse;pq.push(node.qrank(true));while(pq.size()>0){node=pq.peek();isSg=node instanceof Signal;pulse=pulses[node._id];if(node.rank()!==node.qrank()){pq.replace(node.qrank(true))}else{pq.pop();pulses[node._id]=null;listeners=node._listeners;if(!isSg||isSg&&!skipSignals){pulse=this.evaluate(pulse,node)}if(pulse!==this.doNotPropagate){if(!pulse.reflow&&node.reflows()){pulse=ChangeSet.create(pulse,true)}for(i=0,len=listeners.length;i<len;++i){next=listeners[i];if((nplse=pulses[next._id])!==undefined){if(nplse===null)throw Error("Already propagated to node.");if(nplse===pulse)continue;tpls=pulse.add.length||pulse.mod.length||pulse.rem.length;ntpls=nplse.add.length||nplse.mod.length||nplse.rem.length;if(tpls&&ntpls)throw Error("Multiple changeset pulses to same node");pulses[next._id]=tpls?pulse:nplse;pulses[next._id].reflow=pulse.reflow||nplse.reflow}else{pq.push(next.qrank(true));pulses[next._id]=pulse}}}}}return this.done(pulse)};prototype.done=function(pulse){log.debug(pulse,["bookkeeping"]);for(var d in pulse.data){this.data(d).synchronize()}return this};prototype.preprocess=function(branch){var graph=this,mutates=0,node,router,collector,collects;for(var i=0;i<branch.length;++i){node=branch[i];if(node.batch()&&!node._collector){if(router||!collector){node=new Collector(graph);branch.splice(i,0,node);router=false}else{node._collector=collector}}if(collects=node.collector())collector=node;router=router||node.router()&&!collects;mutates=mutates||node.mutates();if(node.produces()){branch.splice(i+1,0,new Collector(graph));router=false}}return{router:router,collector:collector,mutates:mutates}};prototype.connect=function(branch){var collector,node,data,signals,i,n,j,m,x,y;for(i=0,n=branch.length;i<n;++i){node=branch[i];if(node.collector())collector=node;data=node.dependency(Deps.DATA);for(j=0,m=data.length;j<m;++j){if(!(x=this.data(y=data[j]))){throw new Error("Unknown data source "+dl.str(y))}x.addListener(collector)}signals=node.dependency(Deps.SIGNALS);for(j=0,m=signals.length;j<m;++j){if(!(x=this.signal(y=signals[j]))){throw new Error("Unknown signal "+dl.str(y))}x.addListener(collector)}if(i>0)branch[i-1].addListener(node)}return branch};prototype.disconnect=function(branch){var collector,node,data,signals,i,n,j,m;for(i=0,n=branch.length;i<n;++i){node=branch[i];if(node.collector())collector=node;data=node.dependency(Deps.DATA);for(j=0,m=data.length;j<m;++j){this.data(data[j]).removeListener(collector)}signals=node.dependency(Deps.SIGNALS);for(j=0,m=signals.length;j<m;++j){this.signal(signals[j]).removeListener(collector)}node.disconnect()}return branch};prototype.synchronize=function(branch){var ids={},node,data,i,n,j,m,d,id;for(i=0,n=branch.length;i<n;++i){node=branch[i];if(!node.collector())continue;for(j=0,data=node.data(),m=data.length;j<m;++j){id=(d=data[j])._id;if(ids[id])continue;Tuple.prev_update(d);ids[id]=1}}return this};prototype.reevaluate=function(pulse,node){var reflowed=pulse.reflow&&node.last()>=pulse.stamp,run=node.router()||pulse.add.length||pulse.rem.length;return run||!reflowed||node.reevaluate(pulse)};prototype.evaluate=function(pulse,node){if(!this.reevaluate(pulse,node))return pulse;pulse=node.evaluate(pulse);node.last(pulse.stamp);return pulse};module.exports=Graph},{"./ChangeSet":223,"./Collector":224,"./DataSource":225,"./Dependencies":226,"./Heap":228,"./Signal":230,"./Tuple":231,datalib:29,"vega-logging":299}],228:[function(require,module,exports){function Heap(comparator){this.cmp=comparator;this.nodes=[]}var prototype=Heap.prototype;prototype.size=function(){return this.nodes.length};prototype.clear=function(){return this.nodes=[],this};prototype.peek=function(){return this.nodes[0]};prototype.push=function(x){var array=this.nodes;array.push(x);return _siftdown(array,0,array.length-1,this.cmp)};prototype.pop=function(){var array=this.nodes,last=array.pop(),item;if(array.length){item=array[0];array[0]=last;_siftup(array,0,this.cmp)}else{item=last}return item};prototype.replace=function(item){var array=this.nodes,retval=array[0];array[0]=item;_siftup(array,0,this.cmp);return retval};prototype.pushpop=function(item){var array=this.nodes,ref=array[0];if(array.length&&this.cmp(ref,item)<0){array[0]=item;item=ref;_siftup(array,0,this.cmp)}return item};function _siftdown(array,start,idx,cmp){var item,parent,pidx;item=array[idx];while(idx>start){pidx=idx-1>>1;parent=array[pidx];if(cmp(item,parent)<0){array[idx]=parent;idx=pidx;continue}break}return array[idx]=item}function _siftup(array,idx,cmp){var start=idx,end=array.length,item=array[idx],cidx=2*idx+1,ridx;while(cidx<end){ridx=cidx+1;if(ridx<end&&cmp(array[cidx],array[ridx])>=0){cidx=ridx}array[idx]=array[cidx];idx=cidx;cidx=2*idx+1}array[idx]=item;return _siftdown(array,start,idx,cmp)}module.exports=Heap},{}],229:[function(require,module,exports){var DEPS=require("./Dependencies").ALL,nodeID=0;function Node(graph){if(graph)this.init(graph)}var Flags=Node.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32};var prototype=Node.prototype;prototype.init=function(graph){this._id=++nodeID;this._graph=graph;this._rank=graph.rank();this._qrank=null;this._stamp=0;this._listeners=[];this._listeners._ids={};this._deps={};for(var i=0,n=DEPS.length;i<n;++i){this._deps[DEPS[i]]=[]}this._flags=0;return this};prototype.rank=function(){return this._rank};prototype.rerank=function(){var g=this._graph,q=[this],cur;while(q.length){cur=q.shift();cur._rank=g.rank();q.unshift.apply(q,cur.listeners())}return this};prototype.qrank=function(){if(!arguments.length)return this._qrank;return this._qrank=this._rank,this};prototype.last=function(stamp){if(!arguments.length)return this._stamp;return this._stamp=stamp,this};prototype._setf=function(v,b){if(b){this._flags|=v}else{this._flags&=~v}return this};prototype.router=function(state){if(!arguments.length)return this._flags&Flags.Router;return this._setf(Flags.Router,state)};prototype.collector=function(state){if(!arguments.length)return this._flags&Flags.Collector;return this._setf(Flags.Collector,state)};prototype.produces=function(state){if(!arguments.length)return this._flags&Flags.Produces;return this._setf(Flags.Produces,state)};prototype.mutates=function(state){if(!arguments.length)return this._flags&Flags.Mutates;return this._setf(Flags.Mutates,state)};prototype.reflows=function(state){if(!arguments.length)return this._flags&Flags.Reflows;return this._setf(Flags.Reflows,state)};prototype.batch=function(state){if(!arguments.length)return this._flags&Flags.Batch;return this._setf(Flags.Batch,state)};prototype.dependency=function(type,deps){var d=this._deps[type],n=d._names||(d._names={});if(arguments.length===1){return d}if(deps===null){d.splice(0,d.length);d._names={}}else if(!Array.isArray(deps)){if(n[deps])return this;d.push(deps);n[deps]=1}else{for(var i=0,len=deps.length,dep;i<len;++i){dep=deps[i];if(n[dep])continue;d.push(dep);n[dep]=1}}return this};prototype.listeners=function(){return this._listeners};prototype.addListener=function(l){if(!(l instanceof Node)){throw Error("Listener is not a Node")}if(this._listeners._ids[l._id])return this;this._listeners.push(l);this._listeners._ids[l._id]=1;if(this._rank>l._rank){l.rerank()}return this};prototype.removeListener=function(l){if(!this._listeners._ids[l._id])return false;var idx=this._listeners.indexOf(l),b=idx>=0;if(b){this._listeners.splice(idx,1);this._listeners._ids[l._id]=null}return b};prototype.disconnect=function(){this._listeners=[];this._listeners._ids={}};prototype.evaluate=function(pulse){return pulse};prototype.reevaluate=function(pulse){var prop,dep,i,n,j,m;for(i=0,n=DEPS.length;i<n;++i){prop=DEPS[i];dep=this._deps[prop];for(j=0,m=dep.length;j<m;++j){if(pulse[prop][dep[j]])return true}}return false};Node.reset=function(){nodeID=0};module.exports=Node},{"./Dependencies":226}],230:[function(require,module,exports){var ChangeSet=require("./ChangeSet"),Node=require("./Node"),Base=Node.prototype;function Signal(graph,name,initialValue){Base.init.call(this,graph);this._name=name;this._value=initialValue;this._verbose=false;this._handlers=[];return this}var prototype=Signal.prototype=Object.create(Base);prototype.constructor=Signal;prototype.name=function(){return this._name};prototype.value=function(val){if(!arguments.length)return this._value;return this._value=val,this};prototype.values=prototype.value;prototype.verbose=function(v){if(!arguments.length)return this._verbose;return this._verbose=!!v,this};prototype.evaluate=function(input){return input.signals[this._name]?input:this._graph.doNotPropagate};prototype.fire=function(cs){if(!cs)cs=ChangeSet.create(null,true);cs.signals[this._name]=1;this._graph.propagate(cs,this)};prototype.on=function(handler){var signal=this,node=new Node(this._graph);node.evaluate=function(input){handler(signal.name(),signal.value());return input};this._handlers.push({handler:handler,node:node});return this.addListener(node)};prototype.off=function(handler){var h=this._handlers,i,x;for(i=h.length;--i>=0;){if(!handler||h[i].handler===handler){x=h.splice(i,1)[0];this.removeListener(x.node)}}return this};module.exports=Signal},{"./ChangeSet":223,"./Node":229}],231:[function(require,module,exports){var tupleID=0;function ingest(datum){datum=datum===Object(datum)?datum:{data:datum};datum._id=++tupleID;if(datum._prev)datum._prev=null;return datum}function idMap(a,ids){ids=ids||{};for(var i=0,n=a.length;i<n;++i){ids[a[i]._id]=1}return ids}function copy(t,c){c=c||{};for(var k in t){if(k!=="_prev"&&k!=="_id")c[k]=t[k]}return c}module.exports={ingest:ingest,idMap:idMap,derive:function(d){return ingest(copy(d))},rederive:function(d,t){return copy(d,t)},set:function(t,k,v){return t[k]===v?0:(t[k]=v,1)},prev:function(t){return t._prev||t},prev_init:function(t){if(!t._prev){t._prev={_id:t._id}}},prev_update:function(t){var p=t._prev,k,v;if(p)for(k in t){if(k!=="_prev"&&k!=="_id"){p[k]=(v=t[k])instanceof Object&&v._prev?v._prev:v}}},reset:function(){tupleID=0},idFilter:function(data){var ids={};for(var i=arguments.length;--i>0;){idMap(arguments[i],ids)}return data.filter(function(x){return!ids[x._id]})}}},{}],232:[function(require,module,exports){module.exports={ChangeSet:require("./ChangeSet"),Collector:require("./Collector"),DataSource:require("./DataSource"),Dependencies:require("./Dependencies"),Graph:require("./Graph"),Node:require("./Node"),Signal:require("./Signal"),Tuple:require("./Tuple"),debug:require("vega-logging").debug}},{"./ChangeSet":223,"./Collector":224,"./DataSource":225,"./Dependencies":226,"./Graph":227,"./Node":229,"./Signal":230,"./Tuple":231,"vega-logging":299}],233:[function(require,module,exports){module.exports=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var options=arguments.length>1?arguments[1]:{},parser=this,peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=",",peg$c1={type:"literal",value:",",description:'","'},peg$c2=function(o,m){return[o].concat(m)},peg$c3=function(o){return[o]},peg$c4="[",peg$c5={type:"literal",value:"[",description:'"["'},peg$c6="]",peg$c7={type:"literal",value:"]",description:'"]"'},peg$c8=">",peg$c9={type:"literal",value:">",description:'">"'},peg$c10=function(f1,f2,o){return{start:f1,middle:o,end:f2,str:"["+f1.str+", "+f2.str+"] > "+o.str}},peg$c11=function(s,f){s.filters=f;s.str+=f.map(function(x){return"["+x+"]"}).join("");return s},peg$c12=function(s){return s},peg$c13="(",peg$c14={type:"literal",value:"(",description:'"("'},peg$c15=")",peg$c16={type:"literal",value:")",description:'")"'},peg$c17=function(m){return{stream:m,str:"("+m.map(function(m){return m.str}).join(", ")+")"}},peg$c18="@",peg$c19={type:"literal",value:"@",description:'"@"'},peg$c20=":",peg$c21={type:"literal",value:":",description:'":"'},peg$c22=function(n,e){return{event:e,name:n,str:"@"+n+":"+e}},peg$c23=function(m,e){return{event:e,mark:m,str:m+":"+e}},peg$c24=function(t,e){return{event:e,target:t,str:t+":"+e}},peg$c25=function(e){return{event:e,str:e}},peg$c26=function(s){return{signal:s,str:s}},peg$c27="rect",peg$c28={type:"literal",value:"rect",description:'"rect"'},peg$c29="symbol",peg$c30={type:"literal",value:"symbol",description:'"symbol"'},peg$c31="path",peg$c32={type:"literal",value:"path",description:'"path"'},peg$c33="arc",peg$c34={type:"literal",value:"arc",description:'"arc"'},peg$c35="area",peg$c36={type:"literal",value:"area",description:'"area"'},peg$c37="line",peg$c38={type:"literal",value:"line",description:'"line"'},peg$c39="rule",peg$c40={type:"literal",value:"rule",description:'"rule"'},peg$c41="image",peg$c42={type:"literal",value:"image",description:'"image"'},peg$c43="text",peg$c44={type:"literal",value:"text",description:'"text"'},peg$c45="group",peg$c46={type:"literal",value:"group",description:'"group"'},peg$c47="mousedown",peg$c48={type:"literal",value:"mousedown",description:'"mousedown"'},peg$c49="mouseup",peg$c50={type:"literal",value:"mouseup",description:'"mouseup"'},peg$c51="click",peg$c52={type:"literal",value:"click",description:'"click"'},peg$c53="dblclick",peg$c54={type:"literal",value:"dblclick",description:'"dblclick"'},peg$c55="wheel",peg$c56={type:"literal",value:"wheel",description:'"wheel"'},peg$c57="keydown",peg$c58={type:"literal",value:"keydown",description:'"keydown"'},peg$c59="keypress",peg$c60={type:"literal",value:"keypress",description:'"keypress"'},peg$c61="keyup",peg$c62={type:"literal",value:"keyup",description:'"keyup"'},peg$c63="mousewheel",peg$c64={type:"literal",value:"mousewheel",description:'"mousewheel"'},peg$c65="mousemove",peg$c66={type:"literal",value:"mousemove",description:'"mousemove"'},peg$c67="mouseout",peg$c68={type:"literal",value:"mouseout",description:'"mouseout"'},peg$c69="mouseover",peg$c70={type:"literal",value:"mouseover",description:'"mouseover"'},peg$c71="mouseenter",peg$c72={type:"literal",value:"mouseenter",description:'"mouseenter"'},peg$c73="touchstart",peg$c74={type:"literal",value:"touchstart",description:'"touchstart"'},peg$c75="touchmove",peg$c76={type:"literal",value:"touchmove",description:'"touchmove"'},peg$c77="touchend",peg$c78={type:"literal",value:"touchend",description:'"touchend"'},peg$c79="dragenter",peg$c80={type:"literal",value:"dragenter",description:'"dragenter"'},peg$c81="dragover",peg$c82={type:"literal",value:"dragover",description:'"dragover"'},peg$c83="dragleave",peg$c84={type:"literal",value:"dragleave",description:'"dragleave"'},peg$c85=function(e){return e},peg$c86=/^[a-zA-Z0-9_\-]/,peg$c87={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},peg$c88=function(n){return n.join("")},peg$c89=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,peg$c90={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},peg$c91=function(c){return c.join("")},peg$c92=/^['"a-zA-Z0-9_().><=! \t-&|~]/,peg$c93={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},peg$c94=function(v){return v.join("")},peg$c95=/^[ \t\r\n]/,peg$c96={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p,ch;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0100-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1000-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}if(expected!==null){cleanupExpected(expected)}return new peg$SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0;s0=peg$parsemerged();return s0}function peg$parsemerged(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseordered();if(s1!==peg$FAILED){s2=peg$parsesep();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s3=peg$c0;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}if(s3!==peg$FAILED){s4=peg$parsesep();if(s4!==peg$FAILED){s5=peg$parsemerged();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseordered();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1)}s0=s1}return s0}function peg$parseordered(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c4;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5)}}if(s1!==peg$FAILED){s2=peg$parsesep();if(s2!==peg$FAILED){s3=peg$parsefiltered();if(s3!==peg$FAILED){s4=peg$parsesep();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s5=peg$c0;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}if(s5!==peg$FAILED){s6=peg$parsesep();if(s6!==peg$FAILED){s7=peg$parsefiltered();if(s7!==peg$FAILED){s8=peg$parsesep();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s9=peg$c6;peg$currPos++}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s9!==peg$FAILED){s10=peg$parsesep();if(s10!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s11=peg$c8;peg$currPos++}else{s11=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9)}}if(s11!==peg$FAILED){s12=peg$parsesep();if(s12!==peg$FAILED){s13=peg$parseordered();if(s13!==peg$FAILED){peg$savedPos=s0;s1=peg$c10(s3,s7,s13);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parsefiltered()}return s0}function peg$parsefiltered(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsestream();if(s1!==peg$FAILED){s2=[];s3=peg$parsefilter();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsefilter()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c11(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsestream();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c12(s1)}s0=s1}return s0}function peg$parsestream(){var s0,s1,s2,s3,s4;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c13;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s1!==peg$FAILED){s2=peg$parsemerged();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s3=peg$c15;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c16)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c17(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===64){s1=peg$c18;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}if(s1!==peg$FAILED){s2=peg$parsename();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c20;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s3!==peg$FAILED){s4=peg$parseeventType();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c22(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsemarkType();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s2=peg$c20;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s2!==peg$FAILED){s3=peg$parseeventType();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c23(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsecss();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s2=peg$c20;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s2!==peg$FAILED){s3=peg$parseeventType();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c24(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseeventType();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c25(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsename();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s1)}s0=s1}}}}}return s0}function peg$parsemarkType(){var s0;if(input.substr(peg$currPos,4)===peg$c27){s0=peg$c27;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,6)===peg$c29){s0=peg$c29;peg$currPos+=6}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c31){s0=peg$c31;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,3)===peg$c33){s0=peg$c33;peg$currPos+=3}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c35){s0=peg$c35;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c37){s0=peg$c37;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c38)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c39){s0=peg$c39;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c40)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c41){s0=peg$c41;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c43){s0=peg$c43;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c44)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c45){s0=peg$c45;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c46)}}}}}}}}}}}return s0}function peg$parseeventType(){var s0;if(input.substr(peg$currPos,9)===peg$c47){s0=peg$c47;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,7)===peg$c49){s0=peg$c49;peg$currPos+=7}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c51){s0=peg$c51;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c53){s0=peg$c53;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c54)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c55){s0=peg$c55;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,7)===peg$c57){s0=peg$c57;peg$currPos+=7}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c58)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c59){s0=peg$c59;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c60)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c61){s0=peg$c61;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c62)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,10)===peg$c63){s0=peg$c63;peg$currPos+=10}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c64)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c65){s0=peg$c65;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c66)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c67){s0=peg$c67;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c69){s0=peg$c69;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,10)===peg$c71){s0=peg$c71;peg$currPos+=10}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c72)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,10)===peg$c73){s0=peg$c73;peg$currPos+=10}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c74)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c75){s0=peg$c75;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c77){s0=peg$c77;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c79){s0=peg$c79;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c81){s0=peg$c81;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c82)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c83){s0=peg$c83;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c84)}}}}}}}}}}}}}}}}}}}}return s0}function peg$parsefilter(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c4;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5)}}if(s1!==peg$FAILED){s2=peg$parseexpr();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s3=peg$c6;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c85(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsename(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c86.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c87)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c86.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c87)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c88(s1)}s0=s1;return s0}function peg$parsecss(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c89.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c90)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c89.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c90)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c91(s1)}s0=s1;return s0}function peg$parseexpr(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c92.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c93)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c92.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c93)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c94(s1)}s0=s1;return s0}function peg$parsesep(){var s0,s1;s0=[];if(peg$c95.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c96)}}while(s1!==peg$FAILED){s0.push(s1);if(peg$c95.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c96)}}}return s0}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},{}],234:[function(require,module,exports){function toMap(list){var map={},i,n;for(i=0,n=list.length;i<n;++i)map[list[i]]=1;return map}function keys(object){var list=[],k;for(k in object)list.push(k);return list}module.exports=function(opt){opt=opt||{};var constants=opt.constants||require("./constants"),functions=(opt.functions||require("./functions"))(codegen),functionDefs=opt.functionDefs?opt.functionDefs(codegen):{},idWhiteList=opt.idWhiteList?toMap(opt.idWhiteList):null,idBlackList=opt.idBlackList?toMap(opt.idBlackList):null,memberDepth=0,FIELD_VAR=opt.fieldVar||"datum",GLOBAL_VAR=opt.globalVar||"signals",globals={},fields={},dataSources={};function codegen_wrap(ast){var retval={code:codegen(ast),globals:keys(globals),fields:keys(fields),dataSources:keys(dataSources),defs:functionDefs};globals={};fields={};dataSources={};return retval}var lookupGlobal=typeof GLOBAL_VAR==="function"?GLOBAL_VAR:function(id){return GLOBAL_VAR+'["'+id+'"]'};function codegen(ast){if(typeof ast==="string")return ast;var generator=CODEGEN_TYPES[ast.type];if(generator==null){throw new Error("Unsupported type: "+ast.type)}return generator(ast)}var CODEGEN_TYPES={Literal:function(n){return n.raw},Identifier:function(n){var id=n.name;if(memberDepth>0){return id}if(constants.hasOwnProperty(id)){return constants[id]}if(idWhiteList){if(idWhiteList.hasOwnProperty(id)){return id}else{globals[id]=1;return lookupGlobal(id)}}if(idBlackList&&idBlackList.hasOwnProperty(id)){throw new Error("Illegal identifier: "+id)}return id},Program:function(n){return n.body.map(codegen).join("\n")},MemberExpression:function(n){var d=!n.computed;var o=codegen(n.object);if(d)memberDepth+=1;var p=codegen(n.property);if(o===FIELD_VAR){fields[p]=1}if(d)memberDepth-=1;return o+(d?"."+p:"["+p+"]")},CallExpression:function(n){if(n.callee.type!=="Identifier"){throw new Error("Illegal callee type: "+n.callee.type)}var callee=n.callee.name;var args=n.arguments;var fn=functions.hasOwnProperty(callee)&&functions[callee];if(!fn)throw new Error("Unrecognized function: "+callee);return fn instanceof Function?fn(args,globals,fields,dataSources):fn+"("+args.map(codegen).join(",")+")"},ArrayExpression:function(n){return"["+n.elements.map(codegen).join(",")+"]"},BinaryExpression:function(n){return"("+codegen(n.left)+n.operator+codegen(n.right)+")"},UnaryExpression:function(n){return"("+n.operator+codegen(n.argument)+")"},ConditionalExpression:function(n){return"("+codegen(n.test)+"?"+codegen(n.consequent)+":"+codegen(n.alternate)+")"},LogicalExpression:function(n){return"("+codegen(n.left)+n.operator+codegen(n.right)+")"},ObjectExpression:function(n){return"{"+n.properties.map(codegen).join(",")+"}"},Property:function(n){memberDepth+=1;var k=codegen(n.key);memberDepth-=1;return k+":"+codegen(n.value)},ExpressionStatement:function(n){return codegen(n.expression)}};codegen_wrap.functions=functions;codegen_wrap.functionDefs=functionDefs;codegen_wrap.constants=constants;return codegen_wrap}},{"./constants":235,"./functions":236}],235:[function(require,module,exports){module.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],236:[function(require,module,exports){module.exports=function(codegen){function fncall(name,args,cast,type){var obj=codegen(args[0]);if(cast){obj=cast+"("+obj+")";if(cast.lastIndexOf("new ",0)===0)obj="("+obj+")"}return obj+"."+name+(type<0?"":type===0?"()":"("+args.slice(1).map(codegen).join(",")+")")}function fn(name,cast,type){return function(args){return fncall(name,args,cast,type)}}var DATE="new Date",STRING="String",REGEXP="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(args){if(args.length<3)throw new Error("Missing arguments to clamp function.");if(args.length>3)throw new Error("Too many arguments to clamp function.");var a=args.map(codegen);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:DATE,date:fn("getDate",DATE,0),day:fn("getDay",DATE,0),year:fn("getFullYear",DATE,0),month:fn("getMonth",DATE,0),hours:fn("getHours",DATE,0),minutes:fn("getMinutes",DATE,0),seconds:fn("getSeconds",DATE,0),milliseconds:fn("getMilliseconds",DATE,0),time:fn("getTime",DATE,0),timezoneoffset:fn("getTimezoneOffset",DATE,0),utcdate:fn("getUTCDate",DATE,0),utcday:fn("getUTCDay",DATE,0),utcyear:fn("getUTCFullYear",DATE,0),utcmonth:fn("getUTCMonth",DATE,0),utchours:fn("getUTCHours",DATE,0),utcminutes:fn("getUTCMinutes",DATE,0),utcseconds:fn("getUTCSeconds",DATE,0),utcmilliseconds:fn("getUTCMilliseconds",DATE,0),length:fn("length",null,-1),indexof:fn("indexOf",null),lastindexof:fn("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:fn("toUpperCase",STRING,0),lower:fn("toLowerCase",STRING,0),slice:fn("slice",STRING),substring:fn("substring",STRING),replace:fn("replace",STRING),regexp:REGEXP,test:fn("test",REGEXP),if:function(args){if(args.length<3)throw new Error("Missing arguments to if function.");if(args.length>3)throw new Error("Too many arguments to if function.");var a=args.map(codegen);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}},{}],237:[function(require,module,exports){var parser=require("./parser"),codegen=require("./codegen");var expr=module.exports={parse:function(input,opt){return parser.parse("("+input+")",opt)},code:function(opt){return codegen(opt)},compiler:function(args,opt){args=args.slice();var generator=codegen(opt),len=args.length,compile=function(str){var value=generator(expr.parse(str));args[len]='"use strict"; return ('+value.code+");";var fn=Function.apply(null,args);value.fn=args.length>8?function(){return fn.apply(value,arguments)}:function(a,b,c,d,e,f,g){return fn.call(value,a,b,c,d,e,f,g)};return value};compile.codegen=generator;return compile},functions:require("./functions"),constants:require("./constants")}},{"./codegen":234,"./constants":235,"./functions":236,"./parser":238}],238:[function(require,module,exports){module.exports=function(){"use strict";var Token,TokenName,Syntax,PropertyKind,Messages,Regex,source,strict,index,lineNumber,lineStart,length,lookahead,state,extra;Token={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};TokenName={};TokenName[Token.BooleanLiteral]="Boolean";TokenName[Token.EOF]="<end>";TokenName[Token.Identifier]="Identifier";TokenName[Token.Keyword]="Keyword";TokenName[Token.NullLiteral]="Null";TokenName[Token.NumericLiteral]="Numeric";TokenName[Token.Punctuator]="Punctuator";TokenName[Token.StringLiteral]="String";TokenName[Token.RegularExpression]="RegularExpression";Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"};PropertyKind={Data:1,Get:2,Set:4};Messages={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Regex={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};function assert(condition,message){if(!condition){throw new Error("ASSERT: "+message)}}function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch===92||ch>=128&&Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57||ch===92||ch>=128&&Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch))}function isFutureReservedWord(id){switch(id){case"class":case"enum":case"export":case"extends":case"import":case"super":return true;default:return false}}function isStrictModeReservedWord(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function isKeyword(id){if(strict&&isStrictModeReservedWord(id)){return true}switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try"||id==="let";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function skipComment(){var ch,start;start=index===0;while(index<length){ch=source.charCodeAt(index);if(isWhiteSpace(ch)){++index}else if(isLineTerminator(ch)){++index;if(ch===13&&source.charCodeAt(index)===10){++index}++lineNumber;lineStart=index;start=true}else{break}}}function scanHexEscape(prefix){var i,len,ch,code=0;len=prefix==="u"?4:2;for(i=0;i<len;++i){if(index<length&&isHexDigit(source[index])){ch=source[index++];code=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}else{return""}}return String.fromCharCode(code)}function scanUnicodeCodePointEscape(){var ch,code,cu1,cu2;ch=source[index];code=0;if(ch==="}"){throwError({},Messages.UnexpectedToken,"ILLEGAL")}while(index<length){ch=source[index++];if(!isHexDigit(ch)){break}code=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}if(code>1114111||ch!=="}"){throwError({},Messages.UnexpectedToken,"ILLEGAL")}if(code<=65535){return String.fromCharCode(code)}cu1=(code-65536>>10)+55296;cu2=(code-65536&1023)+56320;return String.fromCharCode(cu1,cu2)}function getEscapedIdentifier(){var ch,id;ch=source.charCodeAt(index++);id=String.fromCharCode(ch);if(ch===92){if(source.charCodeAt(index)!==117){throwError({},Messages.UnexpectedToken,"ILLEGAL")}++index;ch=scanHexEscape("u");if(!ch||ch==="\\"||!isIdentifierStart(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}id=ch}while(index<length){ch=source.charCodeAt(index);if(!isIdentifierPart(ch)){break}++index;id+=String.fromCharCode(ch);if(ch===92){id=id.substr(0,id.length-1);if(source.charCodeAt(index)!==117){throwError({},Messages.UnexpectedToken,"ILLEGAL")}++index;ch=scanHexEscape("u");if(!ch||ch==="\\"||!isIdentifierPart(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}id+=ch}}return id}function getIdentifier(){var start,ch;start=index++;while(index<length){ch=source.charCodeAt(index);if(ch===92){index=start;return getEscapedIdentifier()}if(isIdentifierPart(ch)){++index}else{break}}return source.slice(start,index)}function scanIdentifier(){var start,id,type;start=index;id=source.charCodeAt(index)===92?getEscapedIdentifier():getIdentifier();if(id.length===1){type=Token.Identifier}else if(isKeyword(id)){type=Token.Keyword}else if(id==="null"){type=Token.NullLiteral}else if(id==="true"||id==="false"){type=Token.BooleanLiteral}else{type=Token.Identifier}return{type:type,value:id,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanPunctuator(){var start=index,code=source.charCodeAt(index),code2,ch1=source[index],ch2,ch3,ch4;switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:++index;if(extra.tokenize){if(code===40){extra.openParenToken=extra.tokens.length}else if(code===123){extra.openCurlyToken=extra.tokens.length}}return{type:Token.Punctuator,value:String.fromCharCode(code),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index};default:code2=source.charCodeAt(index+1);if(code2===61){switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:index+=2;return{type:Token.Punctuator,value:String.fromCharCode(code)+String.fromCharCode(code2),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index};case 33:case 61:index+=2;if(source.charCodeAt(index)===61){++index}return{type:Token.Punctuator,value:source.slice(start,index),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}}}ch4=source.substr(index,4);if(ch4===">>>="){index+=4;return{type:Token.Punctuator,value:ch4,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}ch3=ch4.substr(0,3);if(ch3===">>>"||ch3==="<<="||ch3===">>="){index+=3;return{type:Token.Punctuator,value:ch3,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}ch2=ch3.substr(0,2);if(ch1===ch2[1]&&"+-<>&|".indexOf(ch1)>=0||ch2==="=>"){index+=2;return{type:Token.Punctuator,value:ch2,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}if("<>=!+-*%&|^/".indexOf(ch1)>=0){++index;return{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}throwError({},Messages.UnexpectedToken,"ILLEGAL")}function scanHexLiteral(start){var number="";while(index<length){if(!isHexDigit(source[index])){break}number+=source[index++]}if(number.length===0){throwError({},Messages.UnexpectedToken,"ILLEGAL")}if(isIdentifierStart(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseInt("0x"+number,16),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanOctalLiteral(start){var number="0"+source[index++];while(index<length){if(!isOctalDigit(source[index])){break}number+=source[index++]}if(isIdentifierStart(source.charCodeAt(index))||isDecimalDigit(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseInt(number,8),octal:true,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanNumericLiteral(){var number,start,ch;ch=source[index];assert(isDecimalDigit(ch.charCodeAt(0))||ch===".","Numeric literal must start with a decimal digit or a decimal point");start=index;number="";if(ch!=="."){number=source[index++];ch=source[index];if(number==="0"){if(ch==="x"||ch==="X"){++index;return scanHexLiteral(start)}if(isOctalDigit(ch)){return scanOctalLiteral(start)}if(ch&&isDecimalDigit(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="."){number+=source[index++];while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="e"||ch==="E"){number+=source[index++];ch=source[index];if(ch==="+"||ch==="-"){number+=source[index++]}if(isDecimalDigit(source.charCodeAt(index))){while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}}else{throwError({},Messages.UnexpectedToken,"ILLEGAL")}}if(isIdentifierStart(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseFloat(number),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanStringLiteral(){var str="",quote,start,ch,code,unescaped,restore,octal=false,startLineNumber,startLineStart;startLineNumber=lineNumber;startLineStart=lineStart;quote=source[index];assert(quote==="'"||quote==='"',"String literal must starts with a quote");start=index;++index;while(index<length){ch=source[index++];if(ch===quote){quote="";break}else if(ch==="\\"){ch=source[index++];if(!ch||!isLineTerminator(ch.charCodeAt(0))){switch(ch){case"u":case"x":if(source[index]==="{"){++index;str+=scanUnicodeCodePointEscape()}else{restore=index;unescaped=scanHexEscape(ch);if(unescaped){str+=unescaped}else{index=restore;str+=ch}}break;case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="\t";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="\v";break;default:if(isOctalDigit(ch)){code="01234567".indexOf(ch);if(code!==0){octal=true}if(index<length&&isOctalDigit(source[index])){octal=true;code=code*8+"01234567".indexOf(source[index++]);if("0123".indexOf(ch)>=0&&index<length&&isOctalDigit(source[index])){code=code*8+"01234567".indexOf(source[index++])}}str+=String.fromCharCode(code)}else{str+=ch}break}}else{++lineNumber;if(ch==="\r"&&source[index]==="\n"){++index}lineStart=index}}else if(isLineTerminator(ch.charCodeAt(0))){break}else{str+=ch}}if(quote!==""){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.StringLiteral,value:str,octal:octal,startLineNumber:startLineNumber,startLineStart:startLineStart,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function testRegExp(pattern,flags){var tmp=pattern,value;if(flags.indexOf("u")>=0){tmp=tmp.replace(/\\u\{([0-9a-fA-F]+)\}/g,function($0,$1){if(parseInt($1,16)<=1114111){return"x"}throwError({},Messages.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x")}try{value=new RegExp(tmp)}catch(e){throwError({},Messages.InvalidRegExp)}try{return new RegExp(pattern,flags)}catch(exception){return null}}function scanRegExpBody(){var ch,str,classMarker,terminated,body;ch=source[index];assert(ch==="/","Regular expression literal must start with a slash");str=source[index++];classMarker=false;terminated=false;while(index<length){ch=source[index++];str+=ch;if(ch==="\\"){ch=source[index++];if(isLineTerminator(ch.charCodeAt(0))){throwError({},Messages.UnterminatedRegExp)}str+=ch}else if(isLineTerminator(ch.charCodeAt(0))){throwError({},Messages.UnterminatedRegExp)}else if(classMarker){if(ch==="]"){classMarker=false}}else{if(ch==="/"){terminated=true;break}else if(ch==="["){classMarker=true}}}if(!terminated){throwError({},Messages.UnterminatedRegExp)}body=str.substr(1,str.length-2);return{value:body,literal:str}}function scanRegExpFlags(){var ch,str,flags,restore;str="";flags="";while(index<length){ch=source[index];if(!isIdentifierPart(ch.charCodeAt(0))){break}++index;if(ch==="\\"&&index<length){ch=source[index];if(ch==="u"){++index;restore=index;ch=scanHexEscape("u");if(ch){flags+=ch;for(str+="\\u";restore<index;++restore){str+=source[restore]}}else{index=restore;flags+="u";str+="\\u"}throwErrorTolerant({},Messages.UnexpectedToken,"ILLEGAL")}else{str+="\\";throwErrorTolerant({},Messages.UnexpectedToken,"ILLEGAL")}}else{flags+=ch;str+=ch}}return{value:flags,literal:str}}function scanRegExp(){var start,body,flags,value;lookahead=null;skipComment();start=index;body=scanRegExpBody();flags=scanRegExpFlags();value=testRegExp(body.value,flags.value);if(extra.tokenize){return{type:Token.RegularExpression,value:value,regex:{pattern:body.value,flags:flags.value},lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}return{literal:body.literal+flags.literal,value:value,regex:{pattern:body.value,flags:flags.value},start:start,end:index}}function collectRegex(){var pos,loc,regex,token;skipComment();pos=index;loc={start:{line:lineNumber,column:index-lineStart}};regex=scanRegExp();loc.end={line:lineNumber,column:index-lineStart};if(!extra.tokenize){if(extra.tokens.length>0){token=extra.tokens[extra.tokens.length-1];if(token.range[0]===pos&&token.type==="Punctuator"){if(token.value==="/"||token.value==="/="){extra.tokens.pop()}}}extra.tokens.push({type:"RegularExpression",value:regex.literal,regex:regex.regex,range:[pos,index],loc:loc})}return regex}function isIdentifierName(token){return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}function advanceSlash(){var prevToken,checkToken;prevToken=extra.tokens[extra.tokens.length-1];if(!prevToken){return collectRegex()}if(prevToken.type==="Punctuator"){if(prevToken.value==="]"){return scanPunctuator()}if(prevToken.value===")"){checkToken=extra.tokens[extra.openParenToken-1];if(checkToken&&checkToken.type==="Keyword"&&(checkToken.value==="if"||checkToken.value==="while"||checkToken.value==="for"||checkToken.value==="with")){return collectRegex()}return scanPunctuator()}if(prevToken.value==="}"){if(extra.tokens[extra.openCurlyToken-3]&&extra.tokens[extra.openCurlyToken-3].type==="Keyword"){checkToken=extra.tokens[extra.openCurlyToken-4];if(!checkToken){return scanPunctuator()}}else if(extra.tokens[extra.openCurlyToken-4]&&extra.tokens[extra.openCurlyToken-4].type==="Keyword"){checkToken=extra.tokens[extra.openCurlyToken-5];if(!checkToken){return collectRegex()}}else{return scanPunctuator()}return scanPunctuator()}return collectRegex()}if(prevToken.type==="Keyword"&&prevToken.value!=="this"){return collectRegex()}return scanPunctuator()}function advance(){var ch;skipComment();if(index>=length){return{type:Token.EOF,lineNumber:lineNumber,lineStart:lineStart,start:index,end:index}}ch=source.charCodeAt(index);if(isIdentifierStart(ch)){return scanIdentifier()}if(ch===40||ch===41||ch===59){return scanPunctuator()}if(ch===39||ch===34){return scanStringLiteral()}if(ch===46){if(isDecimalDigit(source.charCodeAt(index+1))){return scanNumericLiteral()}return scanPunctuator()}if(isDecimalDigit(ch)){return scanNumericLiteral()}if(extra.tokenize&&ch===47){return advanceSlash()}return scanPunctuator()}function collectToken(){var loc,token,value,entry;skipComment();loc={start:{line:lineNumber,column:index-lineStart}};token=advance();loc.end={line:lineNumber,column:index-lineStart};if(token.type!==Token.EOF){value=source.slice(token.start,token.end);entry={type:TokenName[token.type],value:value,range:[token.start,token.end],loc:loc};if(token.regex){entry.regex={pattern:token.regex.pattern,flags:token.regex.flags}}extra.tokens.push(entry)}return token}function lex(){var token;token=lookahead;index=token.end;lineNumber=token.lineNumber;lineStart=token.lineStart;lookahead=typeof extra.tokens!=="undefined"?collectToken():advance();index=token.end;lineNumber=token.lineNumber;lineStart=token.lineStart;return token}function peek(){var pos,line,start;pos=index;line=lineNumber;start=lineStart;lookahead=typeof extra.tokens!=="undefined"?collectToken():advance();index=pos;lineNumber=line;lineStart=start}function Position(){this.line=lineNumber;this.column=index-lineStart}function SourceLocation(){this.start=new Position;this.end=null}function WrappingSourceLocation(startToken){if(startToken.type===Token.StringLiteral){this.start={line:startToken.startLineNumber,column:startToken.start-startToken.startLineStart}}else{this.start={line:startToken.lineNumber,column:startToken.start-startToken.lineStart}}this.end=null}function Node(){index=lookahead.start;if(lookahead.type===Token.StringLiteral){lineNumber=lookahead.startLineNumber;lineStart=lookahead.startLineStart}else{lineNumber=lookahead.lineNumber;lineStart=lookahead.lineStart}if(extra.range){this.range=[index,0]}if(extra.loc){this.loc=new SourceLocation}}function WrappingNode(startToken){if(extra.range){this.range=[startToken.start,0]}if(extra.loc){this.loc=new WrappingSourceLocation(startToken)}}WrappingNode.prototype=Node.prototype={finish:function(){if(extra.range){this.range[1]=index}if(extra.loc){this.loc.end=new Position;if(extra.source){this.loc.source=extra.source}}},finishArrayExpression:function(elements){this.type=Syntax.ArrayExpression;this.elements=elements;this.finish();return this},finishAssignmentExpression:function(operator,left,right){this.type=Syntax.AssignmentExpression;this.operator=operator;this.left=left;this.right=right;this.finish();return this},finishBinaryExpression:function(operator,left,right){this.type=operator==="||"||operator==="&&"?Syntax.LogicalExpression:Syntax.BinaryExpression;this.operator=operator;this.left=left;this.right=right;this.finish();return this},finishCallExpression:function(callee,args){this.type=Syntax.CallExpression;this.callee=callee;this.arguments=args;this.finish();return this},finishConditionalExpression:function(test,consequent,alternate){this.type=Syntax.ConditionalExpression;this.test=test;this.consequent=consequent;this.alternate=alternate;this.finish();return this},finishExpressionStatement:function(expression){this.type=Syntax.ExpressionStatement;this.expression=expression;this.finish();return this},finishIdentifier:function(name){this.type=Syntax.Identifier;this.name=name;this.finish();return this},finishLiteral:function(token){this.type=Syntax.Literal;this.value=token.value;this.raw=source.slice(token.start,token.end);if(token.regex){if(this.raw=="//"){this.raw="/(?:)/"}this.regex=token.regex}this.finish();return this},finishMemberExpression:function(accessor,object,property){this.type=Syntax.MemberExpression;this.computed=accessor==="[";this.object=object;this.property=property;this.finish();return this},finishObjectExpression:function(properties){this.type=Syntax.ObjectExpression;this.properties=properties;this.finish();return this},finishProgram:function(body){this.type=Syntax.Program;this.body=body;this.finish();return this},finishProperty:function(kind,key,value){this.type=Syntax.Property;this.key=key;this.value=value;this.kind=kind;this.finish();return this},finishUnaryExpression:function(operator,argument){this.type=Syntax.UnaryExpression;this.operator=operator;this.argument=argument;this.prefix=true;this.finish();return this}};function peekLineTerminator(){var pos,line,start,found;pos=index;line=lineNumber;start=lineStart;skipComment();found=lineNumber!==line;index=pos;lineNumber=line;lineStart=start;return found}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,function(whole,index){assert(index<args.length,"Message reference must be in range");return args[index]});if(typeof token.lineNumber==="number"){error=new Error("Line "+token.lineNumber+": "+msg);error.index=token.start;error.lineNumber=token.lineNumber;error.column=token.start-lineStart+1}else{error=new Error("Line "+lineNumber+": "+msg);error.index=index;error.lineNumber=lineNumber;error.column=index-lineStart+1}error.description=msg;throw error}function throwErrorTolerant(){try{throwError.apply(null,arguments)}catch(e){if(extra.errors){extra.errors.push(e)}else{throw e}}}function throwUnexpected(token){if(token.type===Token.EOF){throwError(token,Messages.UnexpectedEOS)}if(token.type===Token.NumericLiteral){throwError(token,Messages.UnexpectedNumber)}if(token.type===Token.StringLiteral){throwError(token,Messages.UnexpectedString)}if(token.type===Token.Identifier){throwError(token,Messages.UnexpectedIdentifier)}if(token.type===Token.Keyword){if(isFutureReservedWord(token.value)){throwError(token,Messages.UnexpectedReserved)}else if(strict&&isStrictModeReservedWord(token.value)){throwErrorTolerant(token,Messages.StrictReservedWord);return}throwError(token,Messages.UnexpectedToken,token.value)}throwError(token,Messages.UnexpectedToken,token.value)}function expect(value){var token=lex();if(token.type!==Token.Punctuator||token.value!==value){throwUnexpected(token)}}function expectTolerant(value){if(extra.errors){var token=lookahead;if(token.type!==Token.Punctuator&&token.value!==value){throwErrorTolerant(token,Messages.UnexpectedToken,token.value)}else{lex()}}else{expect(value)}}function match(value){return lookahead.type===Token.Punctuator&&lookahead.value===value}function matchKeyword(keyword){return lookahead.type===Token.Keyword&&lookahead.value===keyword}function consumeSemicolon(){var line;if(source.charCodeAt(index)===59||match(";")){lex();return}line=lineNumber;skipComment();if(lineNumber!==line){return}if(lookahead.type!==Token.EOF&&!match("}")){throwUnexpected(lookahead)}}function parseArrayInitialiser(){var elements=[],node=new Node;expect("[");while(!match("]")){if(match(",")){lex();elements.push(null)}else{elements.push(parseAssignmentExpression());if(!match("]")){expect(",")}}}lex();return node.finishArrayExpression(elements)}function parseObjectPropertyKey(){var token,node=new Node;token=lex();if(token.type===Token.StringLiteral||token.type===Token.NumericLiteral){if(strict&&token.octal){throwErrorTolerant(token,Messages.StrictOctalLiteral)}return node.finishLiteral(token)}return node.finishIdentifier(token.value)}function parseObjectProperty(){var token,key,id,value,node=new Node;token=lookahead;if(token.type===Token.Identifier){id=parseObjectPropertyKey();expect(":");value=parseAssignmentExpression();return node.finishProperty("init",id,value)}if(token.type===Token.EOF||token.type===Token.Punctuator){throwUnexpected(token)}else{key=parseObjectPropertyKey();expect(":");value=parseAssignmentExpression();return node.finishProperty("init",key,value)}}function parseObjectInitialiser(){var properties=[],property,name,key,kind,map={},toString=String,node=new Node;expect("{");while(!match("}")){property=parseObjectProperty();if(property.key.type===Syntax.Identifier){name=property.key.name}else{name=toString(property.key.value)}kind=property.kind==="init"?PropertyKind.Data:property.kind==="get"?PropertyKind.Get:PropertyKind.Set;key="$"+name;if(Object.prototype.hasOwnProperty.call(map,key)){if(map[key]===PropertyKind.Data){if(strict&&kind===PropertyKind.Data){throwErrorTolerant({},Messages.StrictDuplicateProperty)}else if(kind!==PropertyKind.Data){throwErrorTolerant({},Messages.AccessorDataProperty)}}else{if(kind===PropertyKind.Data){throwErrorTolerant({},Messages.AccessorDataProperty)}else if(map[key]&kind){throwErrorTolerant({},Messages.AccessorGetSet)}}map[key]|=kind}else{map[key]=kind}properties.push(property);if(!match("}")){expectTolerant(",")}}expect("}");return node.finishObjectExpression(properties)}function parseGroupExpression(){var expr;expect("(");++state.parenthesisCount;expr=parseExpression();expect(")");return expr}var legalKeywords={if:1,this:1};function parsePrimaryExpression(){var type,token,expr,node;if(match("(")){return parseGroupExpression()}if(match("[")){return parseArrayInitialiser()}if(match("{")){return parseObjectInitialiser()}type=lookahead.type;node=new Node;if(type===Token.Identifier||legalKeywords[lookahead.value]){expr=node.finishIdentifier(lex().value)}else if(type===Token.StringLiteral||type===Token.NumericLiteral){if(strict&&lookahead.octal){throwErrorTolerant(lookahead,Messages.StrictOctalLiteral)}expr=node.finishLiteral(lex())}else if(type===Token.Keyword){throw new Error("Disabled.")}else if(type===Token.BooleanLiteral){token=lex();token.value=token.value==="true";expr=node.finishLiteral(token)}else if(type===Token.NullLiteral){token=lex();token.value=null;expr=node.finishLiteral(token)}else if(match("/")||match("/=")){if(typeof extra.tokens!=="undefined"){expr=node.finishLiteral(collectRegex())}else{expr=node.finishLiteral(scanRegExp())}peek()}else{throwUnexpected(lex())}return expr}function parseArguments(){var args=[];expect("(");if(!match(")")){while(index<length){args.push(parseAssignmentExpression());if(match(")")){break}expectTolerant(",")}}expect(")");return args}function parseNonComputedProperty(){var token,node=new Node;token=lex();if(!isIdentifierName(token)){throwUnexpected(token)}return node.finishIdentifier(token.value)}function parseNonComputedMember(){expect(".");return parseNonComputedProperty()}function parseComputedMember(){var expr;expect("[");expr=parseExpression();expect("]");return expr}function parseLeftHandSideExpressionAllowCall(){var expr,args,property,startToken,previousAllowIn=state.allowIn;startToken=lookahead;state.allowIn=true;expr=parsePrimaryExpression();for(;;){if(match(".")){property=parseNonComputedMember();expr=new WrappingNode(startToken).finishMemberExpression(".",expr,property)}else if(match("(")){args=parseArguments();expr=new WrappingNode(startToken).finishCallExpression(expr,args)}else if(match("[")){property=parseComputedMember();expr=new WrappingNode(startToken).finishMemberExpression("[",expr,property)}else{break}}state.allowIn=previousAllowIn;return expr}function parsePostfixExpression(){var expr=parseLeftHandSideExpressionAllowCall();if(lookahead.type===Token.Punctuator){if((match("++")||match("--"))&&!peekLineTerminator()){throw new Error("Disabled.")}}return expr}function parseUnaryExpression(){var token,expr,startToken;if(lookahead.type!==Token.Punctuator&&lookahead.type!==Token.Keyword){expr=parsePostfixExpression()}else if(match("++")||match("--")){throw new Error("Disabled.")}else if(match("+")||match("-")||match("~")||match("!")){startToken=lookahead;token=lex();expr=parseUnaryExpression();expr=new WrappingNode(startToken).finishUnaryExpression(token.value,expr)}else if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")){throw new Error("Disabled.")}else{expr=parsePostfixExpression()}return expr}function binaryPrecedence(token,allowIn){var prec=0;if(token.type!==Token.Punctuator&&token.type!==Token.Keyword){return 0}switch(token.value){case"||":prec=1;break;case"&&":prec=2;break;case"|":prec=3;break;case"^":prec=4;break;case"&":prec=5;break;case"==":case"!=":case"===":case"!==":prec=6;break;case"<":case">":case"<=":case">=":case"instanceof":prec=7;break;case"in":prec=allowIn?7:0;break;case"<<":case">>":case">>>":prec=8;break;case"+":case"-":prec=9;break;case"*":case"/":case"%":prec=11;break;default:break}return prec}function parseBinaryExpression(){var marker,markers,expr,token,prec,stack,right,operator,left,i;marker=lookahead;left=parseUnaryExpression();token=lookahead;prec=binaryPrecedence(token,state.allowIn);if(prec===0){return left}token.prec=prec;lex();markers=[marker,lookahead];right=parseUnaryExpression();stack=[left,token,right];while((prec=binaryPrecedence(lookahead,state.allowIn))>0){while(stack.length>2&&prec<=stack[stack.length-2].prec){right=stack.pop();operator=stack.pop().value;left=stack.pop();markers.pop();expr=new WrappingNode(markers[markers.length-1]).finishBinaryExpression(operator,left,right);stack.push(expr)}token=lex();token.prec=prec;stack.push(token);markers.push(lookahead);expr=parseUnaryExpression();stack.push(expr)}i=stack.length-1;expr=stack[i];markers.pop();while(i>1){expr=new WrappingNode(markers.pop()).finishBinaryExpression(stack[i-1].value,stack[i-2],expr);i-=2}return expr}function parseConditionalExpression(){var expr,previousAllowIn,consequent,alternate,startToken;startToken=lookahead;expr=parseBinaryExpression();if(match("?")){lex();previousAllowIn=state.allowIn;state.allowIn=true;consequent=parseAssignmentExpression();state.allowIn=previousAllowIn;expect(":");alternate=parseAssignmentExpression();expr=new WrappingNode(startToken).finishConditionalExpression(expr,consequent,alternate)}return expr}function parseAssignmentExpression(){var oldParenthesisCount,token,expr,startToken;oldParenthesisCount=state.parenthesisCount;startToken=lookahead;token=lookahead;expr=parseConditionalExpression();return expr}function parseExpression(){var expr=parseAssignmentExpression();if(match(",")){throw new Error("Disabled.")}return expr}function parseExpressionStatement(node){var expr=parseExpression();consumeSemicolon();return node.finishExpressionStatement(expr)}function parseStatement(){var type=lookahead.type,expr,node;if(type===Token.EOF){throwUnexpected(lookahead)}if(type===Token.Punctuator&&lookahead.value==="{"){throw new Error("Disabled.")}node=new Node;if(type===Token.Punctuator){switch(lookahead.value){case";":throw new Error("Disabled.");case"(":return parseExpressionStatement(node);default:break}}else if(type===Token.Keyword){throw new Error("Disabled.")}expr=parseExpression();consumeSemicolon();return node.finishExpressionStatement(expr)}function parseSourceElement(){if(lookahead.type===Token.Keyword){switch(lookahead.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return parseStatement()}}if(lookahead.type!==Token.EOF){return parseStatement()}}function parseSourceElements(){var sourceElement,sourceElements=[],token,directive,firstRestricted;while(index<length){token=lookahead;if(token.type!==Token.StringLiteral){break}sourceElement=parseSourceElement();sourceElements.push(sourceElement);if(sourceElement.expression.type!==Syntax.Literal){break}directive=source.slice(token.start+1,token.end-1);if(directive==="use strict"){strict=true;if(firstRestricted){throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}while(index<length){sourceElement=parseSourceElement();if(typeof sourceElement==="undefined"){break}sourceElements.push(sourceElement)}return sourceElements}function parseProgram(){var body,node;skipComment();peek();node=new Node;strict=true;body=parseSourceElements();return node.finishProgram(body)}function filterTokenLocation(){var i,entry,token,tokens=[];for(i=0;i<extra.tokens.length;++i){entry=extra.tokens[i];token={type:entry.type,value:entry.value};if(entry.regex){token.regex={pattern:entry.regex.pattern,flags:entry.regex.flags}}if(extra.range){token.range=entry.range}if(extra.loc){token.loc=entry.loc}tokens.push(token)}extra.tokens=tokens}function tokenize(code,options){var toString,tokens;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}source=code;index=0;lineNumber=source.length>0?1:0;lineStart=0;length=source.length;lookahead=null;state={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};extra={};options=options||{};options.tokens=true;extra.tokens=[];extra.tokenize=true;extra.openParenToken=-1;extra.openCurlyToken=-1;extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}try{peek();if(lookahead.type===Token.EOF){return extra.tokens}lex();while(lookahead.type!==Token.EOF){try{lex()}catch(lexError){if(extra.errors){extra.errors.push(lexError);break}else{throw lexError}}}filterTokenLocation();tokens=extra.tokens;if(typeof extra.errors!=="undefined"){tokens.errors=extra.errors}}catch(e){throw e}finally{extra={}}return tokens}function parse(code,options){var program,toString;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}source=code;index=0;lineNumber=source.length>0?1:0;lineStart=0;length=source.length;lookahead=null;state={allowIn:true,labelSet:{},parenthesisCount:0,inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};extra={};if(typeof options!=="undefined"){extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;if(extra.loc&&options.source!==null&&options.source!==undefined){extra.source=toString(options.source)}if(typeof options.tokens==="boolean"&&options.tokens){extra.tokens=[]}if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}}try{program=parseProgram();if(typeof extra.tokens!=="undefined"){filterTokenLocation();program.tokens=extra.tokens}if(typeof extra.errors!=="undefined"){program.errors=extra.errors}}catch(e){throw e}finally{extra={}}return program}return{tokenize:tokenize,parse:parse}}()},{}],239:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{buffer:406,dup:33}],240:[function(require,module,exports){var json=typeof JSON!=="undefined"?JSON:require("jsonify");module.exports=function(obj,opts){if(!opts)opts={};if(typeof opts==="function")opts={cmp:opts};var space=opts.space||"";if(typeof space==="number")space=Array(space+1).join(" ");var cycles=typeof opts.cycles==="boolean"?opts.cycles:false;var replacer=opts.replacer||function(key,value){return value};var cmp=opts.cmp&&function(f){return function(node){return function(a,b){var aobj={key:a,value:node[a]};var bobj={key:b,value:node[b]};return f(aobj,bobj)}}}(opts.cmp);var seen=[];return function stringify(parent,key,node,level){var indent=space?"\n"+new Array(level+1).join(space):"";var colonSeparator=space?": ":":";if(node&&node.toJSON&&typeof node.toJSON==="function"){node=node.toJSON()}node=replacer.call(parent,key,node);if(node===undefined){return}if(typeof node!=="object"||node===null){return json.stringify(node)}if(isArray(node)){var out=[];for(var i=0;i<node.length;i++){var item=stringify(node,i,node[i],level+1)||json.stringify(null);out.push(indent+space+item)}return"["+out.join(",")+indent+"]"}else{if(seen.indexOf(node)!==-1){if(cycles)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else seen.push(node);var keys=objectKeys(node).sort(cmp&&cmp(node));var out=[];for(var i=0;i<keys.length;i++){var key=keys[i];var value=stringify(node,key,node[key],level+1);if(!value)continue;var keyValue=json.stringify(key)+colonSeparator+value;out.push(indent+space+keyValue)}seen.splice(seen.indexOf(node),1);return"{"+out.join(",")+indent+"}"}}({"":obj},"",obj,0)};var isArray=Array.isArray||function(x){return{}.toString.call(x)==="[object Array]"};var objectKeys=Object.keys||function(obj){var has=Object.prototype.hasOwnProperty||function(){return true};var keys=[];for(var key in obj){if(has.call(obj,key))keys.push(key)}return keys}},{jsonify:59}],241:[function(require,module,exports){module.exports={_from:"vega-lite@^1.2.0",_id:"vega-lite@1.3.1",_inBundle:false,_integrity:"sha1-SLASl1UiE3knCGrjpGdVt+0uiYk=",_location:"/vega-lite",_phantomChildren:{cliui:"3.2.0","d3-dsv":"0.1.14","d3-format":"0.4.2","d3-time":"0.1.1","d3-time-format":"0.2.1",decamelize:"1.2.0","get-caller-file":"1.0.2",jsonify:"0.0.0","os-locale":"1.4.0","read-pkg-up":"1.0.1",request:"2.85.0","require-directory":"2.1.1","require-main-filename":"1.0.1","set-blocking":"2.0.0","string-width":"1.0.2","sync-request":"2.2.0",topojson:"1.6.27","which-module":"1.0.0",y18n:"3.2.1","yargs-parser":"4.2.1"},_requested:{type:"range",registry:true,raw:"vega-lite@^1.2.0",name:"vega-lite",escapedName:"vega-lite",rawSpec:"^1.2.0",saveSpec:null,fetchSpec:"^1.2.0"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/vega-lite/-/vega-lite-1.3.1.tgz",_shasum:"48b012975522137927086ae3a46755b7ed2e8989",_spec:"vega-lite@^1.2.0",_where:"/Users/jkhartshorne/Documents/Teaching/probmods2/node_modules/webppl-viz",author:{name:'Jeffrey Heer, Dominik Moritz, Kanit "Ham" Wongsuphasawat'},bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},bugs:{url:"https://github.com/vega/vega-lite/issues"},bundleDependencies:false,collaborators:["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (http://www.domoritz.de)","Jeffrey Heer <jheer@uw.edu> (http://jheer.org)"],dependencies:{datalib:"~1.7.2","json-stable-stringify":"~1.0.1",yargs:"~6.3.0"},deprecated:false,description:"Vega-lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.",devDependencies:{"@types/chai":"^3.4.34","@types/d3":"^3.5.36","@types/json-stable-stringify":"^1.0.29","@types/mocha":"^2.2.32","@types/node":"^6.0.45","browser-sync":"~2.17.3",browserify:"~13.1.0",chai:"~3.5.0",cheerio:"~0.22.0",exorcist:"~0.4.0",istanbul:"~0.4.5",mocha:"~3.1.2",nodemon:"~1.11.0","source-map-support":"~0.4.2",tsify:"~2.0.2",tslint:"~3.15.1",typescript:"^2.0.3","typescript-json-schema":"~0.2.0","uglify-js":"~2.7.3",vega:"~2.6.3","vega-datasets":"github:vega/vega-datasets#gh-pages",watchify:"~3.7.0","yaml-front-matter":"~3.4.0","z-schema":"~3.18.0"},directories:{test:"test"},homepage:"https://github.com/vega/vega-lite",license:"BSD-3-Clause",main:"src/vl.js",name:"vega-lite",repository:{type:"git",url:"git+https://github.com/vega/vega-lite.git"},scripts:{build:"browserify src/vl.ts -p tsify -d -s vl | exorcist vega-lite.js.map > vega-lite.js ","build:all":"npm run clean && npm run data && npm run build && npm test && npm run lint && npm run build:images","build:images":"npm run data && scripts/generate-images.sh","build:toc":"bundle exec jekyll build --incremental -q && scripts/generate-toc",clean:"rm -f vega-lite.* vega-lite-schema.json & find -E src test site -regex '.*\\.(js|js.map|d.ts)' -delete & rm -rf examples/_diff examples/_original examples/_output examples/images && rm -rf data",cover:"npm run pretest && istanbul cover node_modules/.bin/_mocha -- --recursive",data:"rsync -r node_modules/vega-datasets/data/* data",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh",lint:"tslint -c tslint.json 'src/**/*.ts' 'test/**/*.ts' --exclude '**/*.d.ts'",postbuild:"uglifyjs vega-lite.js -cm --source-map vega-lite.min.js.map > vega-lite.min.js && npm run schema",poststart:"rm examples/all-examples.json",presite:"tsc && npm run build && bower install && npm run data && npm run build:toc",prestart:"npm run build && npm run data && scripts/index-examples",pretest:"tsc && npm run data",schema:"typescript-json-schema --required true src/spec.ts ExtendedSpec > vega-lite-schema.json",site:"bundle exec jekyll serve --incremental",start:"npm run watch & browser-sync start --server --files 'vega-lite.js' --index 'test-gallery.html'",test:"npm run schema && mocha --recursive --require source-map-support/register test examples","test:debug":"npm run schema && mocha --debug-brk --recursive --require source-map-support/register test examples",watch:"nodemon -x 'npm run build && npm test && npm run lint'","watch:build":"watchify src/vl.ts -p tsify -v -d -s vl -o 'exorcist vega-lite.js.map > vega-lite.js'","watch:test":"nodemon -x 'npm test && npm run lint'","x-compile":"./scripts/examples-compile.sh","x-diff":"./scripts/examples-diff.sh"},types:"src/vl.d.ts",version:"1.3.1"}},{}],242:[function(require,module,exports){"use strict";(function(AggregateOp){AggregateOp[AggregateOp["VALUES"]="values"]="VALUES";AggregateOp[AggregateOp["COUNT"]="count"]="COUNT";AggregateOp[AggregateOp["VALID"]="valid"]="VALID";AggregateOp[AggregateOp["MISSING"]="missing"]="MISSING";AggregateOp[AggregateOp["DISTINCT"]="distinct"]="DISTINCT";AggregateOp[AggregateOp["SUM"]="sum"]="SUM";AggregateOp[AggregateOp["MEAN"]="mean"]="MEAN";AggregateOp[AggregateOp["AVERAGE"]="average"]="AVERAGE";AggregateOp[AggregateOp["VARIANCE"]="variance"]="VARIANCE";AggregateOp[AggregateOp["VARIANCEP"]="variancep"]="VARIANCEP";AggregateOp[AggregateOp["STDEV"]="stdev"]="STDEV";AggregateOp[AggregateOp["STDEVP"]="stdevp"]="STDEVP";AggregateOp[AggregateOp["MEDIAN"]="median"]="MEDIAN";AggregateOp[AggregateOp["Q1"]="q1"]="Q1";AggregateOp[AggregateOp["Q3"]="q3"]="Q3";AggregateOp[AggregateOp["MODESKEW"]="modeskew"]="MODESKEW";AggregateOp[AggregateOp["MIN"]="min"]="MIN";AggregateOp[AggregateOp["MAX"]="max"]="MAX";AggregateOp[AggregateOp["ARGMIN"]="argmin"]="ARGMIN";AggregateOp[AggregateOp["ARGMAX"]="argmax"]="ARGMAX"})(exports.AggregateOp||(exports.AggregateOp={}));var AggregateOp=exports.AggregateOp;exports.AGGREGATE_OPS=[AggregateOp.VALUES,AggregateOp.COUNT,AggregateOp.VALID,AggregateOp.MISSING,AggregateOp.DISTINCT,AggregateOp.SUM,AggregateOp.MEAN,AggregateOp.AVERAGE,AggregateOp.VARIANCE,AggregateOp.VARIANCEP,AggregateOp.STDEV,AggregateOp.STDEVP,AggregateOp.MEDIAN,AggregateOp.Q1,AggregateOp.Q3,AggregateOp.MODESKEW,AggregateOp.MIN,AggregateOp.MAX,AggregateOp.ARGMIN,AggregateOp.ARGMAX];exports.SUM_OPS=[AggregateOp.COUNT,AggregateOp.SUM,AggregateOp.DISTINCT,AggregateOp.VALID,AggregateOp.MISSING];exports.SHARED_DOMAIN_OPS=[AggregateOp.MEAN,AggregateOp.AVERAGE,AggregateOp.STDEV,AggregateOp.STDEVP,AggregateOp.MEDIAN,AggregateOp.Q1,AggregateOp.Q3,AggregateOp.MIN,AggregateOp.MAX]},{}],243:[function(require,module,exports){"use strict";(function(AxisOrient){AxisOrient[AxisOrient["TOP"]="top"]="TOP";AxisOrient[AxisOrient["RIGHT"]="right"]="RIGHT";AxisOrient[AxisOrient["LEFT"]="left"]="LEFT";AxisOrient[AxisOrient["BOTTOM"]="bottom"]="BOTTOM"})(exports.AxisOrient||(exports.AxisOrient={}));var AxisOrient=exports.AxisOrient;exports.defaultAxisConfig={offset:undefined,grid:undefined,labels:true,labelMaxLength:25,tickSize:undefined,characterWidth:6};exports.defaultFacetAxisConfig={axisWidth:0,labels:true,grid:false,tickSize:0}},{}],244:[function(require,module,exports){"use strict";var channel_1=require("./channel");function autoMaxBins(channel){switch(channel){case channel_1.ROW:case channel_1.COLUMN:case channel_1.SIZE:case channel_1.SHAPE:return 6;default:return 10}}exports.autoMaxBins=autoMaxBins},{"./channel":245}],245:[function(require,module,exports){"use strict";var util_1=require("./util");(function(Channel){Channel[Channel["X"]="x"]="X";Channel[Channel["Y"]="y"]="Y";Channel[Channel["X2"]="x2"]="X2";Channel[Channel["Y2"]="y2"]="Y2";Channel[Channel["ROW"]="row"]="ROW";Channel[Channel["COLUMN"]="column"]="COLUMN";Channel[Channel["SHAPE"]="shape"]="SHAPE";Channel[Channel["SIZE"]="size"]="SIZE";Channel[Channel["COLOR"]="color"]="COLOR";Channel[Channel["TEXT"]="text"]="TEXT";Channel[Channel["DETAIL"]="detail"]="DETAIL";Channel[Channel["LABEL"]="label"]="LABEL";Channel[Channel["PATH"]="path"]="PATH";Channel[Channel["ORDER"]="order"]="ORDER";Channel[Channel["OPACITY"]="opacity"]="OPACITY"})(exports.Channel||(exports.Channel={}));var Channel=exports.Channel;exports.X=Channel.X;exports.Y=Channel.Y;exports.X2=Channel.X2;exports.Y2=Channel.Y2;exports.ROW=Channel.ROW;exports.COLUMN=Channel.COLUMN;exports.SHAPE=Channel.SHAPE;exports.SIZE=Channel.SIZE;exports.COLOR=Channel.COLOR;exports.TEXT=Channel.TEXT;exports.DETAIL=Channel.DETAIL;exports.LABEL=Channel.LABEL;exports.PATH=Channel.PATH;exports.ORDER=Channel.ORDER;exports.OPACITY=Channel.OPACITY;exports.CHANNELS=[exports.X,exports.Y,exports.X2,exports.Y2,exports.ROW,exports.COLUMN,exports.SIZE,exports.SHAPE,exports.COLOR,exports.PATH,exports.ORDER,exports.OPACITY,exports.TEXT,exports.DETAIL,exports.LABEL];exports.UNIT_CHANNELS=util_1.without(exports.CHANNELS,[exports.ROW,exports.COLUMN]);exports.UNIT_SCALE_CHANNELS=util_1.without(exports.UNIT_CHANNELS,[exports.PATH,exports.ORDER,exports.DETAIL,exports.TEXT,exports.LABEL,exports.X2,exports.Y2]);exports.NONSPATIAL_CHANNELS=util_1.without(exports.UNIT_CHANNELS,[exports.X,exports.Y,exports.X2,exports.Y2]);exports.NONSPATIAL_SCALE_CHANNELS=util_1.without(exports.UNIT_SCALE_CHANNELS,[exports.X,exports.Y,exports.X2,exports.Y2]);exports.STACK_GROUP_CHANNELS=[exports.COLOR,exports.DETAIL,exports.ORDER,exports.OPACITY,exports.SIZE];function supportMark(channel,mark){return!!getSupportedMark(channel)[mark]}exports.supportMark=supportMark;function getSupportedMark(channel){switch(channel){case exports.X:case exports.Y:case exports.COLOR:case exports.DETAIL:case exports.ORDER:case exports.OPACITY:case exports.ROW:case exports.COLUMN:return{point:true,tick:true,rule:true,circle:true,square:true,bar:true,line:true,area:true,text:true};case exports.X2:case exports.Y2:return{rule:true,bar:true,area:true};case exports.SIZE:return{point:true,tick:true,rule:true,circle:true,square:true,bar:true,text:true};case exports.SHAPE:return{point:true};case exports.TEXT:return{text:true};case exports.PATH:return{line:true}}return{}}exports.getSupportedMark=getSupportedMark;function getSupportedRole(channel){switch(channel){case exports.X:case exports.Y:case exports.COLOR:case exports.OPACITY:case exports.LABEL:case exports.DETAIL:return{measure:true,dimension:true};case exports.ROW:case exports.COLUMN:case exports.SHAPE:return{measure:false,dimension:true};case exports.X2:case exports.Y2:case exports.SIZE:case exports.TEXT:return{measure:true,dimension:false};case exports.PATH:return{measure:false,dimension:true}}throw new Error("Invalid encoding channel"+channel)}exports.getSupportedRole=getSupportedRole;function hasScale(channel){return!util_1.contains([exports.DETAIL,exports.PATH,exports.TEXT,exports.LABEL,exports.ORDER],channel)}exports.hasScale=hasScale},{"./util":295}],246:[function(require,module,exports){"use strict";var axis_1=require("../axis");var channel_1=require("../channel");var datetime_1=require("../datetime");var fielddef_1=require("../fielddef");var type_1=require("../type");var util_1=require("../util");var common_1=require("./common");function parseAxisComponent(model,axisChannels){return axisChannels.reduce(function(axis,channel){if(model.axis(channel)){axis[channel]=parseAxis(channel,model)}return axis},{})}exports.parseAxisComponent=parseAxisComponent;function parseInnerAxis(channel,model){var isCol=channel===channel_1.COLUMN,isRow=channel===channel_1.ROW,type=isCol?"x":isRow?"y":channel;var def={type:type,scale:model.scaleName(channel),grid:true,tickSize:0,properties:{labels:{text:{value:""}},axis:{stroke:{value:"transparent"}}}};var axis=model.axis(channel);["layer","ticks","values","subdivide"].forEach(function(property){var method;var value=(method=exports[property])?method(model,channel,def):axis[property];if(value!==undefined){def[property]=value}});var props=model.axis(channel).properties||{};["grid"].forEach(function(group){var value=properties[group]?properties[group](model,channel,props[group]||{},def):props[group];if(value!==undefined&&util_1.keys(value).length>0){def.properties=def.properties||{};def.properties[group]=value}});return def}exports.parseInnerAxis=parseInnerAxis;function parseAxis(channel,model){var isCol=channel===channel_1.COLUMN,isRow=channel===channel_1.ROW,type=isCol?"x":isRow?"y":channel;var axis=model.axis(channel);var def={type:type,scale:model.scaleName(channel)};["format","grid","layer","offset","orient","tickSize","ticks","tickSizeEnd","title","titleOffset","values","tickPadding","tickSize","tickSizeMajor","tickSizeMinor","subdivide"].forEach(function(property){var method;var value=(method=exports[property])?method(model,channel,def):axis[property];if(value!==undefined){def[property]=value}});var props=model.axis(channel).properties||{};["axis","labels","grid","title","ticks","majorTicks","minorTicks"].forEach(function(group){var value=properties[group]?properties[group](model,channel,props[group]||{},def):props[group];if(value!==undefined&&util_1.keys(value).length>0){def.properties=def.properties||{};def.properties[group]=value}});return def}exports.parseAxis=parseAxis;function format(model,channel){return common_1.numberFormat(model.fieldDef(channel),model.axis(channel).format,model.config(),channel)}exports.format=format;function offset(model,channel){return model.axis(channel).offset}exports.offset=offset;function gridShow(model,channel){var grid=model.axis(channel).grid;if(grid!==undefined){return grid}return!model.isOrdinalScale(channel)&&!model.fieldDef(channel).bin}exports.gridShow=gridShow;function grid(model,channel){if(channel===channel_1.ROW||channel===channel_1.COLUMN){return undefined}return gridShow(model,channel)&&((channel===channel_1.Y||channel===channel_1.X)&&!(model.parent()&&model.parent().isFacet()))}exports.grid=grid;function layer(model,channel,def){var layer=model.axis(channel).layer;if(layer!==undefined){return layer}if(def.grid){return"back"}return undefined}exports.layer=layer;function orient(model,channel){var orient=model.axis(channel).orient;if(orient){return orient}else if(channel===channel_1.COLUMN){return axis_1.AxisOrient.TOP}return undefined}exports.orient=orient;function ticks(model,channel){var ticks=model.axis(channel).ticks;if(ticks!==undefined){return ticks}if(channel===channel_1.X&&!model.fieldDef(channel).bin){return 5}return undefined}exports.ticks=ticks;function tickSize(model,channel){var tickSize=model.axis(channel).tickSize;if(tickSize!==undefined){return tickSize}return undefined}exports.tickSize=tickSize;function tickSizeEnd(model,channel){var tickSizeEnd=model.axis(channel).tickSizeEnd;if(tickSizeEnd!==undefined){return tickSizeEnd}return undefined}exports.tickSizeEnd=tickSizeEnd;function title(model,channel){var axis=model.axis(channel);if(axis.title!==undefined){return axis.title}var fieldTitle=fielddef_1.title(model.fieldDef(channel),model.config());var maxLength;if(axis.titleMaxLength){maxLength=axis.titleMaxLength}else if(channel===channel_1.X&&!model.isOrdinalScale(channel_1.X)){var unitModel=model;maxLength=unitModel.width/model.axis(channel_1.X).characterWidth}else if(channel===channel_1.Y&&!model.isOrdinalScale(channel_1.Y)){var unitModel=model;maxLength=unitModel.height/model.axis(channel_1.Y).characterWidth}return maxLength?util_1.truncate(fieldTitle,maxLength):fieldTitle}exports.title=title;function titleOffset(model,channel){var titleOffset=model.axis(channel).titleOffset;if(titleOffset!==undefined){return titleOffset}return undefined}exports.titleOffset=titleOffset;function values(model,channel){var vals=model.axis(channel).values;if(vals&&datetime_1.isDateTime(vals[0])){return vals.map(function(dt){return datetime_1.timestamp(dt,true)})}return vals}exports.values=values;var properties;(function(properties){function axis(model,channel,axisPropsSpec){var axis=model.axis(channel);return util_1.extend(axis.axisColor!==undefined?{stroke:{value:axis.axisColor}}:{},axis.axisWidth!==undefined?{strokeWidth:{value:axis.axisWidth}}:{},axisPropsSpec||{})}properties.axis=axis;function grid(model,channel,gridPropsSpec){var axis=model.axis(channel);return util_1.extend(axis.gridColor!==undefined?{stroke:{value:axis.gridColor}}:{},axis.gridOpacity!==undefined?{strokeOpacity:{value:axis.gridOpacity}}:{},axis.gridWidth!==undefined?{strokeWidth:{value:axis.gridWidth}}:{},axis.gridDash!==undefined?{strokeDashOffset:{value:axis.gridDash}}:{},gridPropsSpec||{})}properties.grid=grid;function labels(model,channel,labelsSpec,def){var fieldDef=model.fieldDef(channel);var axis=model.axis(channel);var config=model.config();if(!axis.labels){return util_1.extend({text:""},labelsSpec)}if(util_1.contains([type_1.NOMINAL,type_1.ORDINAL],fieldDef.type)&&axis.labelMaxLength){labelsSpec=util_1.extend({text:{template:'{{ datum["data"] | truncate:'+axis.labelMaxLength+" }}"}},labelsSpec||{})}else if(fieldDef.type===type_1.TEMPORAL){labelsSpec=util_1.extend({text:{template:common_1.timeTemplate('datum["data"]',fieldDef.timeUnit,axis.format,axis.shortTimeLabels,config)}},labelsSpec)}if(axis.labelAngle!==undefined){labelsSpec.angle={value:axis.labelAngle}}else{if(channel===channel_1.X&&(util_1.contains([type_1.NOMINAL,type_1.ORDINAL],fieldDef.type)||!!fieldDef.bin||fieldDef.type===type_1.TEMPORAL)){labelsSpec.angle={value:270}}}if(axis.labelAlign!==undefined){labelsSpec.align={value:axis.labelAlign}}else{if(labelsSpec.angle){if(labelsSpec.angle.value===270){labelsSpec.align={value:def.orient==="top"?"left":def.type==="x"?"right":"center"}}else if(labelsSpec.angle.value===90){labelsSpec.align={value:"center"}}}}if(axis.labelBaseline!==undefined){labelsSpec.baseline={value:axis.labelBaseline}}else{if(labelsSpec.angle){if(labelsSpec.angle.value===270){labelsSpec.baseline={value:def.type==="x"?"middle":"bottom"}}else if(labelsSpec.angle.value===90){labelsSpec.baseline={value:"bottom"}}}}if(axis.tickLabelColor!==undefined){labelsSpec.fill={value:axis.tickLabelColor}}if(axis.tickLabelFont!==undefined){labelsSpec.font={value:axis.tickLabelFont}}if(axis.tickLabelFontSize!==undefined){labelsSpec.fontSize={value:axis.tickLabelFontSize}}return util_1.keys(labelsSpec).length===0?undefined:labelsSpec}properties.labels=labels;function ticks(model,channel,ticksPropsSpec){var axis=model.axis(channel);return util_1.extend(axis.tickColor!==undefined?{stroke:{value:axis.tickColor}}:{},axis.tickWidth!==undefined?{strokeWidth:{value:axis.tickWidth}}:{},ticksPropsSpec||{})}properties.ticks=ticks;function title(model,channel,titlePropsSpec){var axis=model.axis(channel);return util_1.extend(axis.titleColor!==undefined?{fill:{value:axis.titleColor}}:{},axis.titleFont!==undefined?{font:{value:axis.titleFont}}:{},axis.titleFontSize!==undefined?{fontSize:{value:axis.titleFontSize}}:{},axis.titleFontWeight!==undefined?{fontWeight:{value:axis.titleFontWeight}}:{},titlePropsSpec||{})}properties.title=title})(properties=exports.properties||(exports.properties={}))},{"../axis":243,"../channel":245,"../datetime":280,"../fielddef":283,"../type":294,"../util":295,"./common":247}],247:[function(require,module,exports){"use strict";var mark_1=require("../mark");var aggregate_1=require("../aggregate");var channel_1=require("../channel");var fielddef_1=require("../fielddef");var sort_1=require("../sort");var type_1=require("../type");var util_1=require("../util");var facet_1=require("./facet");var layer_1=require("./layer");var timeunit_1=require("../timeunit");var unit_1=require("./unit");var spec_1=require("../spec");function buildModel(spec,parent,parentGivenName){if(spec_1.isSomeFacetSpec(spec)){return new facet_1.FacetModel(spec,parent,parentGivenName)}if(spec_1.isLayerSpec(spec)){return new layer_1.LayerModel(spec,parent,parentGivenName)}if(spec_1.isUnitSpec(spec)){return new unit_1.UnitModel(spec,parent,parentGivenName)}console.error("Invalid spec.");return null}exports.buildModel=buildModel;exports.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","opacity"];exports.FILL_CONFIG=["fill","fillOpacity","opacity"];exports.FILL_STROKE_CONFIG=util_1.union(exports.STROKE_CONFIG,exports.FILL_CONFIG);function applyColorAndOpacity(p,model){var filled=model.config().mark.filled;var colorFieldDef=model.encoding().color;var opacityFieldDef=model.encoding().opacity;if(filled){applyMarkConfig(p,model,exports.FILL_CONFIG)}else{applyMarkConfig(p,model,exports.STROKE_CONFIG)}var colorValue;var opacityValue;if(model.has(channel_1.COLOR)){colorValue={scale:model.scaleName(channel_1.COLOR),field:model.field(channel_1.COLOR,colorFieldDef.type===type_1.ORDINAL?{prefix:"rank"}:{})}}else if(colorFieldDef&&colorFieldDef.value){colorValue={value:colorFieldDef.value}}if(model.has(channel_1.OPACITY)){opacityValue={scale:model.scaleName(channel_1.OPACITY),field:model.field(channel_1.OPACITY,opacityFieldDef.type===type_1.ORDINAL?{prefix:"rank"}:{})}}else if(opacityFieldDef&&opacityFieldDef.value){opacityValue={value:opacityFieldDef.value}}if(colorValue!==undefined){if(filled){p.fill=colorValue}else{p.stroke=colorValue}}else{p[filled?"fill":"stroke"]=p[filled?"fill":"stroke"]||{value:model.config().mark.color}}if(!p.fill&&util_1.contains([mark_1.BAR,mark_1.POINT,mark_1.CIRCLE,mark_1.SQUARE],model.mark())){p.fill={value:"transparent"}}if(opacityValue!==undefined){p.opacity=opacityValue}}exports.applyColorAndOpacity=applyColorAndOpacity;function applyConfig(properties,config,propsList){propsList.forEach(function(property){var value=config[property];if(value!==undefined){properties[property]={value:value}}});return properties}exports.applyConfig=applyConfig;function applyMarkConfig(marksProperties,model,propsList){return applyConfig(marksProperties,model.config().mark,propsList)}exports.applyMarkConfig=applyMarkConfig;function numberFormat(fieldDef,format,config,channel){if(fieldDef.type===type_1.QUANTITATIVE&&!fieldDef.bin){if(format){return format}else if(fieldDef.aggregate===aggregate_1.AggregateOp.COUNT&&channel===channel_1.TEXT){return"d"}return config.numberFormat}return undefined}exports.numberFormat=numberFormat;function sortField(orderChannelDef){return(orderChannelDef.sort===sort_1.SortOrder.DESCENDING?"-":"")+fielddef_1.field(orderChannelDef,{binSuffix:"mid"})}exports.sortField=sortField;function timeTemplate(templateField,timeUnit,format,shortTimeLabels,config){if(!timeUnit||format){var _format=format||config.timeFormat;return"{{"+templateField+" | time:'"+_format+"'}}"}else{return timeunit_1.template(timeUnit,templateField,shortTimeLabels)}}exports.timeTemplate=timeTemplate},{"../aggregate":242,"../channel":245,"../fielddef":283,"../mark":286,"../sort":289,"../spec":290,"../timeunit":292,"../type":294,"../util":295,"./facet":263,"./layer":264,"./unit":277}],248:[function(require,module,exports){"use strict";var data_1=require("../data");var spec_1=require("../spec");var util_1=require("../util");var common_1=require("./common");function compile(inputSpec){var spec=spec_1.normalize(inputSpec);var model=common_1.buildModel(spec,null,"");model.parse();return assemble(model)}exports.compile=compile;function assemble(model){var config=model.config();var output=util_1.extend({width:1,height:1,padding:"auto"},config.viewport?{viewport:config.viewport}:{},config.background?{background:config.background}:{},{data:[].concat(model.assembleData([]),model.assembleLayout([])),marks:[assembleRootGroup(model)]});return{spec:output}}function assembleRootGroup(model){var rootGroup=util_1.extend({name:model.name("root"),type:"group"},model.description()?{description:model.description()}:{},{from:{data:model.name(data_1.LAYOUT+"")},properties:{update:util_1.extend({width:{field:model.name("width")},height:{field:model.name("height")}},model.assembleParentGroupProperties(model.config().cell))}});return util_1.extend(rootGroup,model.assembleGroup())}exports.assembleRootGroup=assembleRootGroup},{"../data":279,"../spec":290,"../util":295,"./common":247}],249:[function(require,module,exports){"use strict";var channel_1=require("../channel");var config_1=require("../config");var encoding_1=require("../encoding");var fielddef_1=require("../fielddef");var mark_1=require("../mark");var scale_1=require("../scale");var type_1=require("../type");var util_1=require("../util");var scale_2=require("../compile/scale");function initMarkConfig(mark,encoding,stacked,config){return util_1.extend(["filled","opacity","orient","align"].reduce(function(cfg,property){var value=config.mark[property];switch(property){case"filled":if(value===undefined){cfg[property]=mark!==mark_1.POINT&&mark!==mark_1.LINE&&mark!==mark_1.RULE}break;case"opacity":if(value===undefined){if(util_1.contains([mark_1.POINT,mark_1.TICK,mark_1.CIRCLE,mark_1.SQUARE],mark)){if(!encoding_1.isAggregate(encoding)||encoding_1.has(encoding,channel_1.DETAIL)){cfg[property]=.7}}if(mark===mark_1.BAR&&!stacked){if(encoding_1.has(encoding,channel_1.COLOR)||encoding_1.has(encoding,channel_1.DETAIL)||encoding_1.has(encoding,channel_1.SIZE)){cfg[property]=.7}}if(mark===mark_1.AREA){cfg[property]=.7}}break;case"orient":cfg[property]=orient(mark,encoding,config.mark);break;case"align":if(value===undefined){cfg[property]=encoding_1.has(encoding,channel_1.X)?"center":"right"}}return cfg},{}),config.mark)}exports.initMarkConfig=initMarkConfig;function orient(mark,encoding,markConfig){if(markConfig===void 0){markConfig={}}switch(mark){case mark_1.POINT:case mark_1.CIRCLE:case mark_1.SQUARE:case mark_1.TEXT:return undefined}var yIsRange=encoding.y&&encoding.y2;var xIsRange=encoding.x&&encoding.x2;switch(mark){case mark_1.TICK:var xScaleType=encoding.x?scale_2.scaleType(encoding.x.scale||{},encoding.x,channel_1.X,mark):null;var yScaleType=encoding.y?scale_2.scaleType(encoding.y.scale||{},encoding.y,channel_1.Y,mark):null;if(xScaleType!==scale_1.ScaleType.ORDINAL&&(!encoding.y||yScaleType===scale_1.ScaleType.ORDINAL)||encoding.y.bin){return config_1.Orient.VERTICAL}return config_1.Orient.HORIZONTAL;case mark_1.RULE:if(xIsRange){return config_1.Orient.HORIZONTAL}if(yIsRange){return config_1.Orient.VERTICAL}if(encoding.y){return config_1.Orient.HORIZONTAL}if(encoding.x){return config_1.Orient.VERTICAL}return undefined;case mark_1.BAR:case mark_1.AREA:if(yIsRange){return config_1.Orient.VERTICAL}if(xIsRange){return config_1.Orient.HORIZONTAL}case mark_1.LINE:var xIsMeasure=fielddef_1.isMeasure(encoding.x)||fielddef_1.isMeasure(encoding.x2);var yIsMeasure=fielddef_1.isMeasure(encoding.y)||fielddef_1.isMeasure(encoding.y2);if(xIsMeasure&&!yIsMeasure){return config_1.Orient.HORIZONTAL}else if(!xIsMeasure&&yIsMeasure){return config_1.Orient.VERTICAL}else if(xIsMeasure&&yIsMeasure){if(encoding.x.type===type_1.TEMPORAL){return config_1.Orient.VERTICAL}else if(encoding.y.type===type_1.TEMPORAL){return config_1.Orient.HORIZONTAL}}return config_1.Orient.VERTICAL}console.warn("orient unimplemented for mark",mark);return config_1.Orient.VERTICAL}exports.orient=orient},{"../channel":245,"../compile/scale":276,"../config":278,"../encoding":281,"../fielddef":283,"../mark":286,"../scale":287,"../type":294,"../util":295}],250:[function(require,module,exports){"use strict";var bin_1=require("../../bin");var channel_1=require("../../channel");var fielddef_1=require("../../fielddef");var util_1=require("../../util");var bin;(function(bin_2){function numberFormatExpr(format,expr){return"format('"+format+"', "+expr+")"}function parse(model){return model.reduce(function(binComponent,fieldDef,channel){var bin=model.fieldDef(channel).bin;if(bin){var binTrans=util_1.extend({type:"bin",field:fieldDef.field,output:{start:fielddef_1.field(fieldDef,{binSuffix:"start"}),mid:fielddef_1.field(fieldDef,{binSuffix:"mid"}),end:fielddef_1.field(fieldDef,{binSuffix:"end"})}},typeof bin==="boolean"?{}:bin);if(!binTrans.maxbins&&!binTrans.step){binTrans.maxbins=bin_1.autoMaxBins(channel)}var transform=[binTrans];var isOrdinalColor=model.isOrdinalScale(channel)||channel===channel_1.COLOR;if(isOrdinalColor){var format=(model.axis(channel)||model.legend(channel)||{}).format||model.config().numberFormat;var startField=fielddef_1.field(fieldDef,{datum:true,binSuffix:"start"});var endField=fielddef_1.field(fieldDef,{datum:true,binSuffix:"end"});transform.push({type:"formula",field:fielddef_1.field(fieldDef,{binSuffix:"range"}),expr:numberFormatExpr(format,startField)+" + '-' + "+numberFormatExpr(format,endField)})}var key=util_1.hash(bin)+"_"+fieldDef.field+"oc:"+isOrdinalColor;binComponent[key]=transform}return binComponent},{})}bin_2.parseUnit=parse;function parseFacet(model){var binComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source){util_1.extend(binComponent,childDataComponent.bin);delete childDataComponent.bin}return binComponent}bin_2.parseFacet=parseFacet;function parseLayer(model){var binComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source){util_1.extend(binComponent,childDataComponent.bin);delete childDataComponent.bin}});return binComponent}bin_2.parseLayer=parseLayer;function assemble(component){return util_1.flatten(util_1.vals(component.bin))}bin_2.assemble=assemble})(bin=exports.bin||(exports.bin={}))},{"../../bin":244,"../../channel":245,"../../fielddef":283,"../../util":295}],251:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var type_1=require("../../type");var util_1=require("../../util");var colorRank;(function(colorRank){function parseUnit(model){var colorRankComponent={};if(model.has(channel_1.COLOR)&&model.encoding().color.type===type_1.ORDINAL){colorRankComponent[model.field(channel_1.COLOR)]=[{type:"sort",by:model.field(channel_1.COLOR)},{type:"rank",field:model.field(channel_1.COLOR),output:{rank:model.field(channel_1.COLOR,{prefix:"rank"})}}]}return colorRankComponent}colorRank.parseUnit=parseUnit;function parseFacet(model){var childDataComponent=model.child().component.data;if(!childDataComponent.source){var colorRankComponent=childDataComponent.colorRank;delete childDataComponent.colorRank;return colorRankComponent}return{}}colorRank.parseFacet=parseFacet;function parseLayer(model){var colorRankComponent={};model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source){util_1.extend(colorRankComponent,childDataComponent.colorRank);delete childDataComponent.colorRank}});return colorRankComponent}colorRank.parseLayer=parseLayer;function assemble(component){return util_1.flatten(util_1.vals(component.colorRank))}colorRank.assemble=assemble})(colorRank=exports.colorRank||(exports.colorRank={}))},{"../../channel":245,"../../type":294,"../../util":295}],252:[function(require,module,exports){"use strict";var util_1=require("../../util");var source_1=require("./source");var formatparse_1=require("./formatparse");var nullfilter_1=require("./nullfilter");var filter_1=require("./filter");var bin_1=require("./bin");var formula_1=require("./formula");var nonpositivenullfilter_1=require("./nonpositivenullfilter");var summary_1=require("./summary");var stackscale_1=require("./stackscale");var timeunit_1=require("./timeunit");var timeunitdomain_1=require("./timeunitdomain");var colorrank_1=require("./colorrank");function parseUnitData(model){return{formatParse:formatparse_1.formatParse.parseUnit(model),nullFilter:nullfilter_1.nullFilter.parseUnit(model),filter:filter_1.filter.parseUnit(model),nonPositiveFilter:nonpositivenullfilter_1.nonPositiveFilter.parseUnit(model),source:source_1.source.parseUnit(model),bin:bin_1.bin.parseUnit(model),calculate:formula_1.formula.parseUnit(model),timeUnit:timeunit_1.timeUnit.parseUnit(model),timeUnitDomain:timeunitdomain_1.timeUnitDomain.parseUnit(model),summary:summary_1.summary.parseUnit(model),stackScale:stackscale_1.stackScale.parseUnit(model),colorRank:colorrank_1.colorRank.parseUnit(model)}}exports.parseUnitData=parseUnitData;function parseFacetData(model){return{formatParse:formatparse_1.formatParse.parseFacet(model),nullFilter:nullfilter_1.nullFilter.parseFacet(model),filter:filter_1.filter.parseFacet(model),nonPositiveFilter:nonpositivenullfilter_1.nonPositiveFilter.parseFacet(model),source:source_1.source.parseFacet(model),bin:bin_1.bin.parseFacet(model),calculate:formula_1.formula.parseFacet(model),timeUnit:timeunit_1.timeUnit.parseFacet(model),timeUnitDomain:timeunitdomain_1.timeUnitDomain.parseFacet(model),summary:summary_1.summary.parseFacet(model),stackScale:stackscale_1.stackScale.parseFacet(model),colorRank:colorrank_1.colorRank.parseFacet(model)}}exports.parseFacetData=parseFacetData;function parseLayerData(model){return{filter:filter_1.filter.parseLayer(model),formatParse:formatparse_1.formatParse.parseLayer(model),nullFilter:nullfilter_1.nullFilter.parseLayer(model),nonPositiveFilter:nonpositivenullfilter_1.nonPositiveFilter.parseLayer(model),source:source_1.source.parseLayer(model),bin:bin_1.bin.parseLayer(model),calculate:formula_1.formula.parseLayer(model),timeUnit:timeunit_1.timeUnit.parseLayer(model),timeUnitDomain:timeunitdomain_1.timeUnitDomain.parseLayer(model),summary:summary_1.summary.parseLayer(model),stackScale:stackscale_1.stackScale.parseLayer(model),colorRank:colorrank_1.colorRank.parseLayer(model)}}exports.parseLayerData=parseLayerData;function assembleData(model,data){var component=model.component.data;var sourceData=source_1.source.assemble(model,component);if(sourceData){data.push(sourceData)}summary_1.summary.assemble(component,model).forEach(function(summaryData){data.push(summaryData)});if(data.length>0){var dataTable=data[data.length-1];var colorRankTransform=colorrank_1.colorRank.assemble(component);if(colorRankTransform.length>0){dataTable.transform=(dataTable.transform||[]).concat(colorRankTransform)}var nonPositiveFilterTransform=nonpositivenullfilter_1.nonPositiveFilter.assemble(component);if(nonPositiveFilterTransform.length>0){dataTable.transform=(dataTable.transform||[]).concat(nonPositiveFilterTransform)}}else{if(util_1.keys(component.colorRank).length>0){throw new Error("Invalid colorRank not merged")}else if(util_1.keys(component.nonPositiveFilter).length>0){throw new Error("Invalid nonPositiveFilter not merged")}}var stackData=stackscale_1.stackScale.assemble(component);if(stackData){data.push(stackData)}timeunitdomain_1.timeUnitDomain.assemble(component).forEach(function(timeUnitDomainData){data.push(timeUnitDomainData)});return data}exports.assembleData=assembleData},{"../../util":295,"./bin":250,"./colorrank":251,"./filter":253,"./formatparse":254,"./formula":255,"./nonpositivenullfilter":256,"./nullfilter":257,"./source":258,"./stackscale":259,"./summary":260,"./timeunit":261,"./timeunitdomain":262}],253:[function(require,module,exports){"use strict";var filter_1=require("../../filter");var util_1=require("../../util");var filter;(function(filter_2){function parse(model){var filter=model.filter();if(util_1.isArray(filter)){return"("+filter.map(function(f){return filter_1.expression(f)}).filter(function(f){return f!==undefined}).join(") && (")+")"}else if(filter){return filter_1.expression(filter)}return undefined}filter_2.parse=parse;filter_2.parseUnit=parse;function parseFacet(model){var filterComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source&&childDataComponent.filter){filterComponent=(filterComponent?filterComponent+" && ":"")+childDataComponent.filter;delete childDataComponent.filter}return filterComponent}filter_2.parseFacet=parseFacet;function parseLayer(model){var filterComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(model.compatibleSource(child)&&childDataComponent.filter&&childDataComponent.filter===filterComponent){delete childDataComponent.filter}});return filterComponent}filter_2.parseLayer=parseLayer;function assemble(component){var filter=component.filter;return filter?[{type:"filter",test:filter}]:[]}filter_2.assemble=assemble})(filter=exports.filter||(exports.filter={}))},{"../../filter":284,"../../util":295}],254:[function(require,module,exports){"use strict";var datetime_1=require("../../datetime");var fielddef_1=require("../../fielddef");var filter_1=require("../../filter");var type_1=require("../../type");var util_1=require("../../util");var formatParse;(function(formatParse){function parse(model){var calcFieldMap=(model.calculate()||[]).reduce(function(fieldMap,formula){fieldMap[formula.field]=true;return fieldMap},{});var parseComponent={};var filter=model.filter();if(!util_1.isArray(filter)){filter=[filter]}filter.forEach(function(f){var val=null;if(filter_1.isEqualFilter(f)){val=f.equal}else if(filter_1.isRangeFilter(f)){val=f.range[0]}else if(filter_1.isOneOfFilter(f)){val=(f.oneOf||f["in"])[0]}if(!!val){if(datetime_1.isDateTime(val)){parseComponent[f["field"]]="date"}else if(util_1.isNumber(val)){parseComponent[f["field"]]="number"}else if(util_1.isString(val)){parseComponent[f["field"]]="string"}}});model.forEach(function(fieldDef){if(fieldDef.type===type_1.TEMPORAL){parseComponent[fieldDef.field]="date"}else if(fieldDef.type===type_1.QUANTITATIVE){if(fielddef_1.isCount(fieldDef)||calcFieldMap[fieldDef.field]){return}parseComponent[fieldDef.field]="number"}});var data=model.data();if(data&&data.format&&data.format.parse){var parse_1=data.format.parse;util_1.keys(parse_1).forEach(function(field){parseComponent[field]=parse_1[field]})}return parseComponent}formatParse.parseUnit=parse;function parseFacet(model){var parseComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source&&childDataComponent.formatParse){util_1.extend(parseComponent,childDataComponent.formatParse);delete childDataComponent.formatParse}return parseComponent}formatParse.parseFacet=parseFacet;function parseLayer(model){var parseComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(model.compatibleSource(child)&&!util_1.differ(childDataComponent.formatParse,parseComponent)){util_1.extend(parseComponent,childDataComponent.formatParse);delete childDataComponent.formatParse}});return parseComponent}formatParse.parseLayer=parseLayer})(formatParse=exports.formatParse||(exports.formatParse={}))},{"../../datetime":280,"../../fielddef":283,"../../filter":284,"../../type":294,"../../util":295}],255:[function(require,module,exports){"use strict";var util_1=require("../../util");var formula;(function(formula_1){function parse(model){return(model.calculate()||[]).reduce(function(formulaComponent,formula){formulaComponent[util_1.hash(formula)]=formula;return formulaComponent},{})}formula_1.parseUnit=parse;function parseFacet(model){var formulaComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source){util_1.extend(formulaComponent,childDataComponent.calculate);delete childDataComponent.calculate}return formulaComponent}formula_1.parseFacet=parseFacet;function parseLayer(model){var formulaComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source&&childDataComponent.calculate){util_1.extend(formulaComponent||{},childDataComponent.calculate);delete childDataComponent.calculate}});return formulaComponent}formula_1.parseLayer=parseLayer;function assemble(component){return util_1.vals(component.calculate).reduce(function(transform,formula){transform.push(util_1.extend({type:"formula"},formula));return transform},[])}formula_1.assemble=assemble})(formula=exports.formula||(exports.formula={}))},{"../../util":295}],256:[function(require,module,exports){"use strict";var scale_1=require("../../scale");var util_1=require("../../util");var nonPositiveFilter;(function(nonPositiveFilter_1){function parseUnit(model){return model.channels().reduce(function(nonPositiveComponent,channel){var scale=model.scale(channel);if(!model.field(channel)||!scale){return nonPositiveComponent}nonPositiveComponent[model.field(channel)]=scale.type===scale_1.ScaleType.LOG;return nonPositiveComponent},{})}nonPositiveFilter_1.parseUnit=parseUnit;function parseFacet(model){var childDataComponent=model.child().component.data;if(!childDataComponent.source){var nonPositiveFilterComponent=childDataComponent.nonPositiveFilter;delete childDataComponent.nonPositiveFilter;return nonPositiveFilterComponent}return{}}nonPositiveFilter_1.parseFacet=parseFacet;function parseLayer(model){var nonPositiveFilter={};model.children().forEach(function(child){var childDataComponent=child.component.data;if(model.compatibleSource(child)&&!util_1.differ(childDataComponent.nonPositiveFilter,nonPositiveFilter)){util_1.extend(nonPositiveFilter,childDataComponent.nonPositiveFilter);delete childDataComponent.nonPositiveFilter}});return nonPositiveFilter}nonPositiveFilter_1.parseLayer=parseLayer;function assemble(component){return util_1.keys(component.nonPositiveFilter).filter(function(field){return component.nonPositiveFilter[field]}).map(function(field){return{type:"filter",test:'datum["'+field+'"] > 0'}})}nonPositiveFilter_1.assemble=assemble})(nonPositiveFilter=exports.nonPositiveFilter||(exports.nonPositiveFilter={}))},{"../../scale":287,"../../util":295}],257:[function(require,module,exports){"use strict";var type_1=require("../../type");var util_1=require("../../util");var DEFAULT_NULL_FILTERS={nominal:false,ordinal:false,quantitative:true,temporal:true};var nullFilter;(function(nullFilter){function parse(model){var filterInvalid=model.filterInvalid();return model.reduce(function(aggregator,fieldDef){if(fieldDef.field!=="*"){if(filterInvalid||filterInvalid===undefined&&fieldDef.field&&DEFAULT_NULL_FILTERS[fieldDef.type]){aggregator[fieldDef.field]=fieldDef}else{aggregator[fieldDef.field]=null}}return aggregator},{})}nullFilter.parseUnit=parse;function parseFacet(model){var nullFilterComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source){util_1.extend(nullFilterComponent,childDataComponent.nullFilter);delete childDataComponent.nullFilter}return nullFilterComponent}nullFilter.parseFacet=parseFacet;function parseLayer(model){var nullFilterComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(model.compatibleSource(child)&&!util_1.differ(childDataComponent.nullFilter,nullFilterComponent)){util_1.extend(nullFilterComponent,childDataComponent.nullFilter);delete childDataComponent.nullFilter}});return nullFilterComponent}nullFilter.parseLayer=parseLayer;function assemble(component){var filters=util_1.keys(component.nullFilter).reduce(function(_filters,field){var fieldDef=component.nullFilter[field];if(fieldDef!==null){_filters.push('datum["'+fieldDef.field+'"] !== null');if(util_1.contains([type_1.QUANTITATIVE,type_1.TEMPORAL],fieldDef.type)){_filters.push('!isNaN(datum["'+fieldDef.field+'"])')}}return _filters},[]);return filters.length>0?[{type:"filter",test:filters.join(" && ")}]:[]}nullFilter.assemble=assemble})(nullFilter=exports.nullFilter||(exports.nullFilter={}))},{"../../type":294,"../../util":295}],258:[function(require,module,exports){"use strict";var data_1=require("../../data");var util_1=require("../../util");var nullfilter_1=require("./nullfilter");var filter_1=require("./filter");var bin_1=require("./bin");var formula_1=require("./formula");var timeunit_1=require("./timeunit");var source;(function(source){function parse(model){var data=model.data();if(data){var sourceData={name:model.dataName(data_1.SOURCE)};if(data.values&&data.values.length>0){sourceData.values=data.values;sourceData.format={type:"json"}}else if(data.url){sourceData.url=data.url;var defaultExtension=/(?:\.([^.]+))?$/.exec(sourceData.url)[1];if(!util_1.contains(["json","csv","tsv","topojson"],defaultExtension)){defaultExtension="json"}var dataFormat=data.format||{};var formatType=dataFormat.type||data["formatType"];sourceData.format=util_1.extend({type:formatType?formatType:defaultExtension},dataFormat.property?{property:dataFormat.property}:{},dataFormat.feature?{feature:dataFormat.feature}:dataFormat.mesh?{mesh:dataFormat.mesh}:{})}return sourceData}else if(!model.parent()){return{name:model.dataName(data_1.SOURCE)}}return undefined}source.parseUnit=parse;function parseFacet(model){var sourceData=parse(model);if(!model.child().component.data.source){model.child().renameData(model.child().dataName(data_1.SOURCE),model.dataName(data_1.SOURCE))}return sourceData}source.parseFacet=parseFacet;function parseLayer(model){var sourceData=parse(model);model.children().forEach(function(child){var childData=child.component.data;if(model.compatibleSource(child)){var canMerge=!childData.filter&&!childData.formatParse&&!childData.nullFilter;if(canMerge){child.renameData(child.dataName(data_1.SOURCE),model.dataName(data_1.SOURCE));delete childData.source}else{childData.source={name:child.dataName(data_1.SOURCE),source:model.dataName(data_1.SOURCE)}}}});return sourceData}source.parseLayer=parseLayer;function assemble(model,component){if(component.source){var sourceData=component.source;if(component.formatParse){component.source.format=component.source.format||{};component.source.format.parse=component.formatParse}sourceData.transform=[].concat(formula_1.formula.assemble(component),nullfilter_1.nullFilter.assemble(component),filter_1.filter.assemble(component),bin_1.bin.assemble(component),timeunit_1.timeUnit.assemble(component));return sourceData}return null}source.assemble=assemble})(source=exports.source||(exports.source={}))},{"../../data":279,"../../util":295,"./bin":250,"./filter":253,"./formula":255,"./nullfilter":257,"./timeunit":261}],259:[function(require,module,exports){"use strict";var data_1=require("../../data");var fielddef_1=require("../../fielddef");var util_1=require("../../util");var stackScale;(function(stackScale){function parseUnit(model){var stackProps=model.stack();if(stackProps){var groupbyChannel=stackProps.groupbyChannel;var fieldChannel=stackProps.fieldChannel;var fields=[];var field_1=model.field(groupbyChannel);if(field_1){fields.push(field_1)}return{name:model.dataName(data_1.STACKED_SCALE),source:model.dataName(data_1.SUMMARY),transform:[util_1.extend({type:"aggregate",summarize:[{ops:["sum"],field:model.field(fieldChannel)}]},fields.length>0?{groupby:fields}:{})]}}return null}stackScale.parseUnit=parseUnit;function parseFacet(model){var child=model.child();var childDataComponent=child.component.data;if(!childDataComponent.source&&childDataComponent.stackScale){var stackComponent=childDataComponent.stackScale;var newName=model.dataName(data_1.STACKED_SCALE);child.renameData(stackComponent.name,newName);stackComponent.name=newName;stackComponent.source=model.dataName(data_1.SUMMARY);stackComponent.transform[0].groupby=model.reduce(function(groupby,fieldDef){groupby.push(fielddef_1.field(fieldDef));return groupby},stackComponent.transform[0].groupby);delete childDataComponent.stackScale;return stackComponent}return null}stackScale.parseFacet=parseFacet;function parseLayer(model){return null}stackScale.parseLayer=parseLayer;function assemble(component){return component.stackScale}stackScale.assemble=assemble})(stackScale=exports.stackScale||(exports.stackScale={}))},{"../../data":279,"../../fielddef":283,"../../util":295}],260:[function(require,module,exports){"use strict";var aggregate_1=require("../../aggregate");var data_1=require("../../data");var fielddef_1=require("../../fielddef");var util_1=require("../../util");var summary;(function(summary){function addDimension(dims,fieldDef){if(fieldDef.bin){dims[fielddef_1.field(fieldDef,{binSuffix:"start"})]=true;dims[fielddef_1.field(fieldDef,{binSuffix:"mid"})]=true;dims[fielddef_1.field(fieldDef,{binSuffix:"end"})]=true;dims[fielddef_1.field(fieldDef,{binSuffix:"range"})]=true}else{dims[fielddef_1.field(fieldDef)]=true}return dims}function parseUnit(model){var dims={};var meas={};model.forEach(function(fieldDef,channel){if(fieldDef.aggregate){if(fieldDef.aggregate===aggregate_1.AggregateOp.COUNT){meas["*"]=meas["*"]||{};meas["*"]["count"]=true}else{meas[fieldDef.field]=meas[fieldDef.field]||{};meas[fieldDef.field][fieldDef.aggregate]=true}}else{addDimension(dims,fieldDef)}});return[{name:model.dataName(data_1.SUMMARY),dimensions:dims,measures:meas}]}summary.parseUnit=parseUnit;function parseFacet(model){var childDataComponent=model.child().component.data;if(!childDataComponent.source&&childDataComponent.summary){var summaryComponents=childDataComponent.summary.map(function(summaryComponent){summaryComponent.dimensions=model.reduce(addDimension,summaryComponent.dimensions);var summaryNameWithoutPrefix=summaryComponent.name.substr(model.child().name("").length);model.child().renameData(summaryComponent.name,summaryNameWithoutPrefix);summaryComponent.name=summaryNameWithoutPrefix;return summaryComponent});delete childDataComponent.summary;return summaryComponents}return[]}summary.parseFacet=parseFacet;function mergeMeasures(parentMeasures,childMeasures){for(var field_1 in childMeasures){if(childMeasures.hasOwnProperty(field_1)){var ops=childMeasures[field_1];for(var op in ops){if(ops.hasOwnProperty(op)){if(field_1 in parentMeasures){parentMeasures[field_1][op]=true}else{parentMeasures[field_1]={op:true}}}}}}}function parseLayer(model){var summaries={};model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source&&childDataComponent.summary){childDataComponent.summary.forEach(function(childSummary){var key=util_1.hash(childSummary.dimensions);if(key in summaries){mergeMeasures(summaries[key].measures,childSummary.measures)}else{childSummary.name=model.dataName(data_1.SUMMARY)+"_"+util_1.keys(summaries).length;summaries[key]=childSummary}child.renameData(child.dataName(data_1.SUMMARY),summaries[key].name);delete childDataComponent.summary})}});return util_1.vals(summaries)}summary.parseLayer=parseLayer;function assemble(component,model){if(!component.summary){return[]}return component.summary.reduce(function(summaryData,summaryComponent){var dims=summaryComponent.dimensions;var meas=summaryComponent.measures;var groupby=util_1.keys(dims);var summarize=util_1.reduce(meas,function(aggregator,fnDictSet,field){aggregator[field]=util_1.keys(fnDictSet);return aggregator},{});if(util_1.keys(meas).length>0){summaryData.push({name:summaryComponent.name,source:model.dataName(data_1.SOURCE),transform:[{type:"aggregate",groupby:groupby,summarize:summarize}]})}return summaryData},[])}summary.assemble=assemble})(summary=exports.summary||(exports.summary={}))},{"../../aggregate":242,"../../data":279,"../../fielddef":283,"../../util":295}],261:[function(require,module,exports){"use strict";var fielddef_1=require("../../fielddef");var timeunit_1=require("../../timeunit");var type_1=require("../../type");var util_1=require("../../util");var timeUnit;(function(timeUnit){function parse(model){return model.reduce(function(timeUnitComponent,fieldDef,channel){if(fieldDef.type===type_1.TEMPORAL&&fieldDef.timeUnit){var hash=fielddef_1.field(fieldDef);timeUnitComponent[hash]={type:"formula",field:fielddef_1.field(fieldDef),expr:timeunit_1.fieldExpr(fieldDef.timeUnit,fieldDef.field)}}return timeUnitComponent},{})}timeUnit.parseUnit=parse;function parseFacet(model){var timeUnitComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source){util_1.extend(timeUnitComponent,childDataComponent.timeUnit);delete childDataComponent.timeUnit}return timeUnitComponent}timeUnit.parseFacet=parseFacet;function parseLayer(model){var timeUnitComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source){util_1.extend(timeUnitComponent,childDataComponent.timeUnit);delete childDataComponent.timeUnit}});return timeUnitComponent}timeUnit.parseLayer=parseLayer;function assemble(component){return util_1.vals(component.timeUnit)}timeUnit.assemble=assemble})(timeUnit=exports.timeUnit||(exports.timeUnit={}))},{"../../fielddef":283,"../../timeunit":292,"../../type":294,"../../util":295}],262:[function(require,module,exports){"use strict";var datetime_1=require("../../datetime");var timeunit_1=require("../../timeunit");var util_1=require("../../util");var timeUnitDomain;(function(timeUnitDomain){function parse(model){return model.reduce(function(timeUnitDomainMap,fieldDef,channel){if(fieldDef.timeUnit){var domain=timeunit_1.imputedDomain(fieldDef.timeUnit,channel);if(domain){timeUnitDomainMap[fieldDef.timeUnit]=true}}return timeUnitDomainMap},{})}timeUnitDomain.parseUnit=parse;function parseFacet(model){return util_1.extend(parse(model),model.child().component.data.timeUnitDomain)}timeUnitDomain.parseFacet=parseFacet;function parseLayer(model){return util_1.extend(parse(model),model.children().forEach(function(child){return child.component.data.timeUnitDomain}))}timeUnitDomain.parseLayer=parseLayer;function assemble(component){return util_1.keys(component.timeUnitDomain).reduce(function(timeUnitData,tu){var timeUnit=tu;var domain=timeunit_1.imputedDomain(timeUnit,null);if(domain){var datetime={};datetime[timeUnit]='datum["data"]';timeUnitData.push({name:timeUnit,values:domain,transform:[{type:"formula",field:"date",expr:datetime_1.dateTimeExpr(datetime)}]})}return timeUnitData},[])}timeUnitDomain.assemble=assemble})(timeUnitDomain=exports.timeUnitDomain||(exports.timeUnitDomain={}))},{"../../datetime":280,"../../timeunit":292,"../../util":295}],263:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var axis_1=require("../axis");var channel_1=require("../channel");var config_1=require("../config");var data_1=require("../data");var encoding_1=require("../encoding");var fielddef_1=require("../fielddef");var scale_1=require("../scale");var type_1=require("../type");var util_1=require("../util");var axis_2=require("./axis");var common_1=require("./common");var data_2=require("./data/data");var layout_1=require("./layout");var model_1=require("./model");var scale_2=require("./scale");var FacetModel=function(_super){__extends(FacetModel,_super);function FacetModel(spec,parent,parentGivenName){_super.call(this,spec,parent,parentGivenName);var config=this._config=this._initConfig(spec.config,parent);var child=this._child=common_1.buildModel(spec.spec,this,this.name("child"));var facet=this._facet=this._initFacet(spec.facet);this._scale=this._initScale(facet,config,child);this._axis=this._initAxis(facet,config,child)}FacetModel.prototype._initConfig=function(specConfig,parent){return util_1.mergeDeep(util_1.duplicate(config_1.defaultConfig),parent?parent.config():{},specConfig)};FacetModel.prototype._initFacet=function(facet){facet=util_1.duplicate(facet);var model=this;encoding_1.channelMappingForEach(this.channels(),facet,function(fieldDef,channel){if(fieldDef.type){fieldDef.type=type_1.getFullName(fieldDef.type)}if(!fielddef_1.isDimension(fieldDef)){model.addWarning(channel+" encoding should be ordinal.")}});return facet};FacetModel.prototype._initScale=function(facet,config,child){return[channel_1.ROW,channel_1.COLUMN].reduce(function(_scale,channel){if(facet[channel]){var scaleSpec=facet[channel].scale||{};_scale[channel]=util_1.extend({type:scale_1.ScaleType.ORDINAL,round:config.facet.scale.round,padding:channel===channel_1.ROW&&child.has(channel_1.Y)||channel===channel_1.COLUMN&&child.has(channel_1.X)?config.facet.scale.padding:0},scaleSpec)}return _scale},{})};FacetModel.prototype._initAxis=function(facet,config,child){return[channel_1.ROW,channel_1.COLUMN].reduce(function(_axis,channel){if(facet[channel]){var axisSpec=facet[channel].axis;if(axisSpec!==false){var modelAxis=_axis[channel]=util_1.extend({},config.facet.axis,axisSpec===true?{}:axisSpec||{});if(channel===channel_1.ROW){var yAxis=child.axis(channel_1.Y);if(yAxis&&yAxis.orient!==axis_1.AxisOrient.RIGHT&&!modelAxis.orient){modelAxis.orient=axis_1.AxisOrient.RIGHT}if(child.has(channel_1.X)&&!modelAxis.labelAngle){modelAxis.labelAngle=modelAxis.orient===axis_1.AxisOrient.RIGHT?90:270}}}}return _axis},{})};FacetModel.prototype.facet=function(){return this._facet};FacetModel.prototype.has=function(channel){return!!this._facet[channel]};FacetModel.prototype.child=function(){return this._child};FacetModel.prototype.hasSummary=function(){var summary=this.component.data.summary;for(var i=0;i<summary.length;i++){if(util_1.keys(summary[i].measures).length>0){return true}}return false};FacetModel.prototype.dataTable=function(){return(this.hasSummary()?data_1.SUMMARY:data_1.SOURCE)+""};FacetModel.prototype.fieldDef=function(channel){return this.facet()[channel]};FacetModel.prototype.stack=function(){return null};FacetModel.prototype.parseData=function(){this.child().parseData();this.component.data=data_2.parseFacetData(this)};FacetModel.prototype.parseSelectionData=function(){};FacetModel.prototype.parseLayoutData=function(){this.child().parseLayoutData();this.component.layout=layout_1.parseFacetLayout(this)};FacetModel.prototype.parseScale=function(){var child=this.child();var model=this;child.parseScale();var scaleComponent=this.component.scale=scale_2.parseScaleComponent(this);util_1.keys(child.component.scale).forEach(function(channel){if(true){scaleComponent[channel]=child.component.scale[channel];util_1.vals(scaleComponent[channel]).forEach(function(scale){var scaleNameWithoutPrefix=scale.name.substr(child.name("").length);var newName=model.scaleName(scaleNameWithoutPrefix,true);child.renameScale(scale.name,newName);scale.name=newName});delete child.component.scale[channel]}})};FacetModel.prototype.parseMark=function(){this.child().parseMark();this.component.mark=util_1.extend({name:this.name("cell"),type:"group",from:util_1.extend(this.dataTable()?{data:this.dataTable()}:{},{transform:[{type:"facet",groupby:[].concat(this.has(channel_1.ROW)?[this.field(channel_1.ROW)]:[],this.has(channel_1.COLUMN)?[this.field(channel_1.COLUMN)]:[])}]}),properties:{update:getFacetGroupProperties(this)}},this.child().assembleGroup())};FacetModel.prototype.parseAxis=function(){this.child().parseAxis();this.component.axis=axis_2.parseAxisComponent(this,[channel_1.ROW,channel_1.COLUMN])};FacetModel.prototype.parseAxisGroup=function(){var xAxisGroup=parseAxisGroup(this,channel_1.X);var yAxisGroup=parseAxisGroup(this,channel_1.Y);this.component.axisGroup=util_1.extend(xAxisGroup?{x:xAxisGroup}:{},yAxisGroup?{y:yAxisGroup}:{})};FacetModel.prototype.parseGridGroup=function(){var child=this.child();this.component.gridGroup=util_1.extend(!child.has(channel_1.X)&&this.has(channel_1.COLUMN)?{column:getColumnGridGroups(this)}:{},!child.has(channel_1.Y)&&this.has(channel_1.ROW)?{row:getRowGridGroups(this)}:{})};FacetModel.prototype.parseLegend=function(){this.child().parseLegend();this.component.legend=this._child.component.legend;this._child.component.legend={}};FacetModel.prototype.assembleParentGroupProperties=function(){return null};FacetModel.prototype.assembleData=function(data){data_2.assembleData(this,data);return this._child.assembleData(data)};FacetModel.prototype.assembleLayout=function(layoutData){this._child.assembleLayout(layoutData);return layout_1.assembleLayout(this,layoutData)};FacetModel.prototype.assembleMarks=function(){return[].concat(util_1.vals(this.component.axisGroup),util_1.flatten(util_1.vals(this.component.gridGroup)),this.component.mark)};FacetModel.prototype.channels=function(){return[channel_1.ROW,channel_1.COLUMN]};FacetModel.prototype.mapping=function(){return this.facet()};FacetModel.prototype.isFacet=function(){return true};return FacetModel}(model_1.Model);exports.FacetModel=FacetModel;function getFacetGroupProperties(model){var child=model.child();var mergedCellConfig=util_1.extend({},child.config().cell,child.config().facet.cell);return util_1.extend({x:model.has(channel_1.COLUMN)?{scale:model.scaleName(channel_1.COLUMN),field:model.field(channel_1.COLUMN),offset:model.scale(channel_1.COLUMN).padding/2}:{value:model.config().facet.scale.padding/2},y:model.has(channel_1.ROW)?{scale:model.scaleName(channel_1.ROW),field:model.field(channel_1.ROW),offset:model.scale(channel_1.ROW).padding/2}:{value:model.config().facet.scale.padding/2},width:{field:{parent:model.child().sizeName("width")}},height:{field:{parent:model.child().sizeName("height")}}},child.assembleParentGroupProperties(mergedCellConfig))}function parseAxisGroup(model,channel){var axisGroup=null;var child=model.child();if(child.has(channel)){if(child.axis(channel)){if(true){axisGroup=channel===channel_1.X?getXAxesGroup(model):getYAxesGroup(model);if(child.axis(channel)&&axis_2.gridShow(child,channel)){child.component.axis[channel]=axis_2.parseInnerAxis(channel,child)}else{delete child.component.axis[channel]}}else{}}}return axisGroup}function getXAxesGroup(model){var hasCol=model.has(channel_1.COLUMN);return util_1.extend({name:model.name("x-axes"),type:"group"},hasCol?{from:{data:model.dataTable(),transform:[{type:"aggregate",groupby:[model.field(channel_1.COLUMN)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{parent:model.child().sizeName("width")}},height:{field:{group:"height"}},x:hasCol?{scale:model.scaleName(channel_1.COLUMN),field:model.field(channel_1.COLUMN),offset:model.scale(channel_1.COLUMN).padding/2}:{value:model.config().facet.scale.padding/2}}},axes:[axis_2.parseAxis(channel_1.X,model.child())]})}function getYAxesGroup(model){var hasRow=model.has(channel_1.ROW);return util_1.extend({name:model.name("y-axes"),type:"group"},hasRow?{from:{data:model.dataTable(),transform:[{type:"aggregate",groupby:[model.field(channel_1.ROW)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{group:"width"}},height:{field:{parent:model.child().sizeName("height")}},y:hasRow?{scale:model.scaleName(channel_1.ROW),field:model.field(channel_1.ROW),offset:model.scale(channel_1.ROW).padding/2}:{value:model.config().facet.scale.padding/2}}},axes:[axis_2.parseAxis(channel_1.Y,model.child())]})}function getRowGridGroups(model){var facetGridConfig=model.config().facet.grid;var rowGrid={name:model.name("row-grid"),type:"rule",from:{data:model.dataTable(),transform:[{type:"facet",groupby:[model.field(channel_1.ROW)]}]},properties:{update:{y:{scale:model.scaleName(channel_1.ROW),field:model.field(channel_1.ROW)},x:{value:0,offset:-facetGridConfig.offset},x2:{field:{group:"width"},offset:facetGridConfig.offset},stroke:{value:facetGridConfig.color},strokeOpacity:{value:facetGridConfig.opacity},strokeWidth:{value:.5}}}};return[rowGrid,{name:model.name("row-grid-end"),type:"rule",properties:{update:{y:{field:{group:"height"}},x:{value:0,offset:-facetGridConfig.offset},x2:{field:{group:"width"},offset:facetGridConfig.offset},stroke:{value:facetGridConfig.color},strokeOpacity:{value:facetGridConfig.opacity},strokeWidth:{value:.5}}}}]}function getColumnGridGroups(model){var facetGridConfig=model.config().facet.grid;var columnGrid={name:model.name("column-grid"),type:"rule",from:{data:model.dataTable(),transform:[{type:"facet",groupby:[model.field(channel_1.COLUMN)]}]},properties:{update:{x:{scale:model.scaleName(channel_1.COLUMN),field:model.field(channel_1.COLUMN)},y:{value:0,offset:-facetGridConfig.offset},y2:{field:{group:"height"},offset:facetGridConfig.offset},stroke:{value:facetGridConfig.color},strokeOpacity:{value:facetGridConfig.opacity},strokeWidth:{value:.5}}}};return[columnGrid,{name:model.name("column-grid-end"),type:"rule",properties:{update:{x:{field:{group:"width"}},y:{value:0,offset:-facetGridConfig.offset},y2:{field:{group:"height"},offset:facetGridConfig.offset},stroke:{value:facetGridConfig.color},strokeOpacity:{value:facetGridConfig.opacity},strokeWidth:{value:.5}}}}]}},{"../axis":243,"../channel":245,"../config":278,"../data":279,"../encoding":281,"../fielddef":283,"../scale":287,"../type":294,"../util":295,"./axis":246,"./common":247,"./data/data":252,"./layout":265,"./model":275,"./scale":276}],264:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var util_1=require("../util");var config_1=require("../config");var data_1=require("./data/data");var layout_1=require("./layout");var model_1=require("./model");var common_1=require("./common");var vega_schema_1=require("../vega.schema");var LayerModel=function(_super){__extends(LayerModel,_super);function LayerModel(spec,parent,parentGivenName){var _this=this;_super.call(this,spec,parent,parentGivenName);this._width=spec.width;this._height=spec.height;this._config=this._initConfig(spec.config,parent);this._children=spec.layers.map(function(layer,i){return common_1.buildModel(layer,_this,_this.name("layer_"+i))})}LayerModel.prototype._initConfig=function(specConfig,parent){return util_1.mergeDeep(util_1.duplicate(config_1.defaultConfig),specConfig,parent?parent.config():{})};Object.defineProperty(LayerModel.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(LayerModel.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});LayerModel.prototype.has=function(channel){return false};LayerModel.prototype.children=function(){return this._children};LayerModel.prototype.isOrdinalScale=function(channel){return this._children[0].isOrdinalScale(channel)};LayerModel.prototype.dataTable=function(){return this._children[0].dataTable()};LayerModel.prototype.fieldDef=function(channel){return null};LayerModel.prototype.stack=function(){return null};LayerModel.prototype.parseData=function(){this._children.forEach(function(child){child.parseData()});this.component.data=data_1.parseLayerData(this)};LayerModel.prototype.parseSelectionData=function(){};LayerModel.prototype.parseLayoutData=function(){this._children.forEach(function(child,i){child.parseLayoutData()});this.component.layout=layout_1.parseLayerLayout(this)};LayerModel.prototype.parseScale=function(){var model=this;var scaleComponent=this.component.scale={};this._children.forEach(function(child){child.parseScale();if(true){util_1.keys(child.component.scale).forEach(function(channel){var childScales=child.component.scale[channel];if(!childScales){return}var modelScales=scaleComponent[channel];if(modelScales&&modelScales.main){var modelDomain=modelScales.main.domain;var childDomain=childScales.main.domain;if(util_1.isArray(modelDomain)){if(util_1.isArray(childScales.main.domain)){modelScales.main.domain=modelDomain.concat(childDomain)}else{model.addWarning("custom domain scale cannot be unioned with default field-based domain")}}else{var unionedFields=vega_schema_1.isUnionedDomain(modelDomain)?modelDomain.fields:[modelDomain];if(util_1.isArray(childDomain)){model.addWarning("custom domain scale cannot be unioned with default field-based domain")}var fields=vega_schema_1.isDataRefDomain(childDomain)?unionedFields.concat([childDomain]):vega_schema_1.isUnionedDomain(childDomain)?unionedFields.concat(childDomain.fields):unionedFields;fields=util_1.unique(fields,util_1.hash);if(fields.length>1){modelScales.main.domain={fields:fields}}else{modelScales.main.domain=fields[0]}}modelScales.colorLegend=modelScales.colorLegend?modelScales.colorLegend:childScales.colorLegend;modelScales.binColorLegend=modelScales.binColorLegend?modelScales.binColorLegend:childScales.binColorLegend}else{scaleComponent[channel]=childScales}util_1.vals(childScales).forEach(function(scale){var scaleNameWithoutPrefix=scale.name.substr(child.name("").length);var newName=model.scaleName(scaleNameWithoutPrefix,true);child.renameScale(scale.name,newName);scale.name=newName});delete childScales[channel]})}})};LayerModel.prototype.parseMark=function(){this._children.forEach(function(child){child.parseMark()})};LayerModel.prototype.parseAxis=function(){var axisComponent=this.component.axis={};this._children.forEach(function(child){child.parseAxis();if(true){util_1.keys(child.component.axis).forEach(function(channel){if(!axisComponent[channel]){axisComponent[channel]=child.component.axis[channel]}})}})};LayerModel.prototype.parseAxisGroup=function(){return null};LayerModel.prototype.parseGridGroup=function(){return null};LayerModel.prototype.parseLegend=function(){var legendComponent=this.component.legend={};this._children.forEach(function(child){child.parseLegend();if(true){util_1.keys(child.component.legend).forEach(function(channel){if(!legendComponent[channel]){legendComponent[channel]=child.component.legend[channel]}})}})};LayerModel.prototype.assembleParentGroupProperties=function(){return null};LayerModel.prototype.assembleData=function(data){data_1.assembleData(this,data);this._children.forEach(function(child){child.assembleData(data)});return data};LayerModel.prototype.assembleLayout=function(layoutData){this._children.forEach(function(child){child.assembleLayout(layoutData)});return layout_1.assembleLayout(this,layoutData)};LayerModel.prototype.assembleMarks=function(){return util_1.flatten(this._children.map(function(child){return child.assembleMarks()}))};LayerModel.prototype.channels=function(){return[]};LayerModel.prototype.mapping=function(){return null};LayerModel.prototype.isLayer=function(){return true};LayerModel.prototype.compatibleSource=function(child){var data=this.data();var childData=child.component.data;var compatible=!childData.source||data&&data.url===childData.source.url;return compatible};return LayerModel}(model_1.Model);exports.LayerModel=LayerModel},{"../config":278,"../util":295,"../vega.schema":297,"./common":247,"./data/data":252,"./layout":265,"./model":275}],265:[function(require,module,exports){"use strict";var channel_1=require("../channel");var data_1=require("../data");var scale_1=require("../scale");var util_1=require("../util");var timeunit_1=require("../timeunit");function assembleLayout(model,layoutData){var layoutComponent=model.component.layout;if(!layoutComponent.width&&!layoutComponent.height){return layoutData}if(true){var distinctFields=util_1.keys(util_1.extend(layoutComponent.width.distinct,layoutComponent.height.distinct));var formula=layoutComponent.width.formula.concat(layoutComponent.height.formula).map(function(formula){return util_1.extend({type:"formula"},formula)});return[distinctFields.length>0?{name:model.dataName(data_1.LAYOUT),source:model.dataTable(),transform:[{type:"aggregate",summarize:distinctFields.map(function(field){return{field:field,ops:["distinct"]}})}].concat(formula)}:{name:model.dataName(data_1.LAYOUT),values:[{}],transform:formula}]}}exports.assembleLayout=assembleLayout;function parseUnitLayout(model){return{width:parseUnitSizeLayout(model,channel_1.X),height:parseUnitSizeLayout(model,channel_1.Y)}}exports.parseUnitLayout=parseUnitLayout;function parseUnitSizeLayout(model,channel){return{distinct:getDistinct(model,channel),formula:[{field:model.channelSizeName(channel),expr:unitSizeExpr(model,channel)}]}}function unitSizeExpr(model,channel){var scale=model.scale(channel);if(scale){if(scale.type===scale_1.ScaleType.ORDINAL&&scale.bandSize!==scale_1.BANDSIZE_FIT){return"("+cardinalityExpr(model,channel)+" + "+1+") * "+scale.bandSize}}return(channel===channel_1.X?model.width:model.height)+""}exports.unitSizeExpr=unitSizeExpr;function parseFacetLayout(model){return{width:parseFacetSizeLayout(model,channel_1.COLUMN),height:parseFacetSizeLayout(model,channel_1.ROW)}}exports.parseFacetLayout=parseFacetLayout;function parseFacetSizeLayout(model,channel){var childLayoutComponent=model.child().component.layout;var sizeType=channel===channel_1.ROW?"height":"width";var childSizeComponent=childLayoutComponent[sizeType];if(true){var distinct=util_1.extend(getDistinct(model,channel),childSizeComponent.distinct);var formula=childSizeComponent.formula.concat([{field:model.channelSizeName(channel),expr:facetSizeFormula(model,channel,model.child().channelSizeName(channel))}]);delete childLayoutComponent[sizeType];return{distinct:distinct,formula:formula}}}function facetSizeFormula(model,channel,innerSize){var scale=model.scale(channel);if(model.has(channel)){return'(datum["'+innerSize+'"] + '+scale.padding+")"+" * "+cardinalityExpr(model,channel)}else{return'datum["'+innerSize+'"] + '+model.config().facet.scale.padding}}function parseLayerLayout(model){return{width:parseLayerSizeLayout(model,channel_1.X),height:parseLayerSizeLayout(model,channel_1.Y)}}exports.parseLayerLayout=parseLayerLayout;function parseLayerSizeLayout(model,channel){if(true){var childLayoutComponent=model.children()[0].component.layout;var sizeType_1=channel===channel_1.Y?"height":"width";var childSizeComponent=childLayoutComponent[sizeType_1];var distinct=childSizeComponent.distinct;var formula=[{field:model.channelSizeName(channel),expr:childSizeComponent.formula[0].expr}];model.children().forEach(function(child){delete child.component.layout[sizeType_1]});return{distinct:distinct,formula:formula}}}function getDistinct(model,channel){if(model.has(channel)&&model.isOrdinalScale(channel)){var scale=model.scale(channel);if(scale.type===scale_1.ScaleType.ORDINAL&&!(scale.domain instanceof Array)){var distinctField=model.field(channel);var distinct={};distinct[distinctField]=true;return distinct}}return{}}function cardinalityExpr(model,channel){var scale=model.scale(channel);if(scale.domain instanceof Array){return scale.domain.length}var timeUnit=model.fieldDef(channel).timeUnit;var timeUnitDomain=timeUnit?timeunit_1.imputedDomain(timeUnit,channel):null;return timeUnitDomain!==null?timeUnitDomain.length:model.field(channel,{datum:true,prefix:"distinct"})}exports.cardinalityExpr=cardinalityExpr},{"../channel":245,"../data":279,"../scale":287,"../timeunit":292,"../util":295}],266:[function(require,module,exports){"use strict";var channel_1=require("../channel");var datetime_1=require("../datetime");var fielddef_1=require("../fielddef");var mark_1=require("../mark");var type_1=require("../type");var util_1=require("../util");var common_1=require("./common");var scale_1=require("./scale");function parseLegendComponent(model){return[channel_1.COLOR,channel_1.SIZE,channel_1.SHAPE,channel_1.OPACITY].reduce(function(legendComponent,channel){if(model.legend(channel)){legendComponent[channel]=parseLegend(model,channel)}return legendComponent},{})}exports.parseLegendComponent=parseLegendComponent;function getLegendDefWithScale(model,channel){switch(channel){case channel_1.COLOR:var fieldDef=model.encoding().color;var scale=model.scaleName(useColorLegendScale(fieldDef)?scale_1.COLOR_LEGEND:channel_1.COLOR);return model.config().mark.filled?{fill:scale}:{stroke:scale};case channel_1.SIZE:return{size:model.scaleName(channel_1.SIZE)};case channel_1.SHAPE:return{shape:model.scaleName(channel_1.SHAPE)};case channel_1.OPACITY:return{opacity:model.scaleName(channel_1.OPACITY)}}return null}function parseLegend(model,channel){var fieldDef=model.fieldDef(channel);var legend=model.legend(channel);var config=model.config();var def=getLegendDefWithScale(model,channel);def.title=title(legend,fieldDef,config);var format=common_1.numberFormat(fieldDef,legend.format,config,channel);if(format){def.format=format}var vals=values(legend);if(vals){def.values=vals}["offset","orient"].forEach(function(property){var value=legend[property];if(value!==undefined){def[property]=value}});var props=typeof legend!=="boolean"&&legend.properties||{};["title","symbols","legend","labels"].forEach(function(group){var value=properties[group]?properties[group](fieldDef,props[group],model,channel):props[group];if(value!==undefined&&util_1.keys(value).length>0){def.properties=def.properties||{};def.properties[group]=value}});return def}exports.parseLegend=parseLegend;function title(legend,fieldDef,config){if(legend.title!==undefined){return legend.title}return fielddef_1.title(fieldDef,config)}exports.title=title;function values(legend){var vals=legend.values;if(vals&&datetime_1.isDateTime(vals[0])){return vals.map(function(dt){return datetime_1.timestamp(dt,true)})}return vals}exports.values=values;function useColorLegendScale(fieldDef){return fieldDef.type===type_1.ORDINAL||fieldDef.bin||fieldDef.timeUnit}exports.useColorLegendScale=useColorLegendScale;var properties;(function(properties){function symbols(fieldDef,symbolsSpec,model,channel){var symbols={};var mark=model.mark();var legend=model.legend(channel);switch(mark){case mark_1.BAR:case mark_1.TICK:case mark_1.TEXT:symbols.shape={value:"square"};break;case mark_1.CIRCLE:case mark_1.SQUARE:symbols.shape={value:mark};break;case mark_1.POINT:case mark_1.LINE:case mark_1.AREA:break}var cfg=model.config();var filled=cfg.mark.filled;var config=channel===channel_1.COLOR?util_1.without(common_1.FILL_STROKE_CONFIG,[filled?"fill":"stroke","strokeDash","strokeDashOffset"]):util_1.without(common_1.FILL_STROKE_CONFIG,["strokeDash","strokeDashOffset"]);config=util_1.without(config,["strokeDash","strokeDashOffset"]);common_1.applyMarkConfig(symbols,model,config);if(filled){symbols.strokeWidth={value:0}}if(channel===channel_1.OPACITY){delete symbols.opacity}var value;if(model.has(channel_1.COLOR)&&channel===channel_1.COLOR){if(useColorLegendScale(fieldDef)){value={scale:model.scaleName(channel_1.COLOR),field:"data"}}}else if(model.encoding().color&&model.encoding().color.value){value={value:model.encoding().color.value}}if(value!==undefined){if(filled){symbols.fill=value}else{symbols.stroke=value}}else if(channel!==channel_1.COLOR){symbols[filled?"fill":"stroke"]=symbols[filled?"fill":"stroke"]||{value:cfg.mark.color}}if(legend.symbolColor!==undefined){symbols.fill={value:legend.symbolColor}}else if(symbols.fill===undefined){if(cfg.mark.fill!==undefined){symbols.fill={value:cfg.mark.fill}}else if(cfg.mark.stroke!==undefined){symbols.stroke={value:cfg.mark.stroke}}}if(channel!==channel_1.SHAPE){if(legend.symbolShape!==undefined){symbols.shape={value:legend.symbolShape}}else if(cfg.mark.shape!==undefined){symbols.shape={value:cfg.mark.shape}}}if(channel!==channel_1.SIZE){if(legend.symbolSize!==undefined){symbols.size={value:legend.symbolSize}}}if(legend.symbolStrokeWidth!==undefined){symbols.strokeWidth={value:legend.symbolStrokeWidth}}symbols=util_1.extend(symbols,symbolsSpec||{});return util_1.keys(symbols).length>0?symbols:undefined}properties.symbols=symbols;function labels(fieldDef,labelsSpec,model,channel){var legend=model.legend(channel);var config=model.config();var labels={};if(channel===channel_1.COLOR){if(fieldDef.type===type_1.ORDINAL){labelsSpec=util_1.extend({text:{scale:model.scaleName(scale_1.COLOR_LEGEND),field:"data"}},labelsSpec||{})}else if(fieldDef.bin){labelsSpec=util_1.extend({text:{scale:model.scaleName(scale_1.COLOR_LEGEND_LABEL),field:"data"}},labelsSpec||{})}else if(fieldDef.type===type_1.TEMPORAL){labelsSpec=util_1.extend({text:{template:common_1.timeTemplate('datum["data"]',fieldDef.timeUnit,legend.format,legend.shortTimeLabels,config)}},labelsSpec||{})}}if(legend.labelAlign!==undefined){labels.align={value:legend.labelAlign}}if(legend.labelColor!==undefined){labels.fill={value:legend.labelColor}}if(legend.labelFont!==undefined){labels.font={value:legend.labelFont}}if(legend.labelFontSize!==undefined){labels.fontSize={value:legend.labelFontSize}}if(legend.labelBaseline!==undefined){labels.baseline={value:legend.labelBaseline}}labels=util_1.extend(labels,labelsSpec||{});return util_1.keys(labels).length>0?labels:undefined}properties.labels=labels;function title(fieldDef,titleSpec,model,channel){var legend=model.legend(channel);var titles={};if(legend.titleColor!==undefined){titles.fill={value:legend.titleColor}}if(legend.titleFont!==undefined){titles.font={value:legend.titleFont}}if(legend.titleFontSize!==undefined){titles.fontSize={value:legend.titleFontSize}}if(legend.titleFontWeight!==undefined){titles.fontWeight={value:legend.titleFontWeight}}titles=util_1.extend(titles,titleSpec||{});return util_1.keys(titles).length>0?titles:undefined}properties.title=title})(properties=exports.properties||(exports.properties={}))},{"../channel":245,"../datetime":280,"../fielddef":283,"../mark":286,"../type":294,"../util":295,"./common":247,"./scale":276}],267:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var fielddef_1=require("../../fielddef");var scale_1=require("../../scale");var util_1=require("../../util");var common_1=require("../common");var area;(function(area){function markType(){return"area"}area.markType=markType;function properties(model){var p={};var config=model.config();var orient=config.mark.orient;p.orient={value:orient};var stack=model.stack();p.x=x(model.encoding().x,model.scaleName(channel_1.X),model.scale(channel_1.X),orient,stack);p.y=y(model.encoding().y,model.scaleName(channel_1.Y),model.scale(channel_1.Y),orient,stack);var _x2=x2(model.encoding().x,model.encoding().x2,model.scaleName(channel_1.X),model.scale(channel_1.X),orient,stack);if(_x2){p.x2=_x2}var _y2=y2(model.encoding().y,model.encoding().y2,model.scaleName(channel_1.Y),model.scale(channel_1.Y),orient,stack);if(_y2){p.y2=_y2}common_1.applyColorAndOpacity(p,model);common_1.applyMarkConfig(p,model,["interpolate","tension"]);return p}area.properties=properties;function x(fieldDef,scaleName,scale,orient,stack){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"start"})}}else if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}else if(fieldDef.value){return{scale:scaleName,value:fieldDef.value}}}return{value:0}}area.x=x;function x2(xFieldDef,x2FieldDef,scaleName,scale,orient,stack){if(orient===config_1.Orient.HORIZONTAL){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(xFieldDef,{suffix:"end"})}}else if(x2FieldDef){if(x2FieldDef.field){return{scale:scaleName,field:fielddef_1.field(x2FieldDef)}}else if(x2FieldDef.value){return{scale:scaleName,value:x2FieldDef.value}}}if(util_1.contains([scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type)||scale.zero===false){return{value:0}}return{scale:scaleName,value:0}}return undefined}area.x2=x2;function y(fieldDef,scaleName,scale,orient,stack){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"start"})}}else if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}else if(fieldDef.value){return{scale:scaleName,value:fieldDef.value}}}return{value:0}}area.y=y;function y2(yFieldDef,y2FieldDef,scaleName,scale,orient,stack){if(orient!==config_1.Orient.HORIZONTAL){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(yFieldDef,{suffix:"end"})}}else if(y2FieldDef){if(y2FieldDef.field){return{scale:scaleName,field:fielddef_1.field(y2FieldDef)}}else if(y2FieldDef.value){return{scale:scaleName,value:y2FieldDef.value}}}if(util_1.contains([scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type)||scale.zero===false){return{field:{group:"height"}}}return{scale:scaleName,value:0}}return undefined}area.y2=y2})(area=exports.area||(exports.area={}))},{"../../channel":245,"../../config":278,"../../fielddef":283,"../../scale":287,"../../util":295,"../common":247}],268:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var fielddef_1=require("../../fielddef");var scale_1=require("../../scale");var util_1=require("../../util");var common_1=require("../common");var bar;(function(bar){function markType(){return"rect"}bar.markType=markType;function properties(model){var p={};var orient=model.config().mark.orient;var stack=model.stack();var xFieldDef=model.encoding().x;var x2FieldDef=model.encoding().x2;var xIsMeasure=fielddef_1.isMeasure(xFieldDef)||fielddef_1.isMeasure(x2FieldDef);if(stack&&channel_1.X===stack.fieldChannel){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{suffix:"start"})};p.x2={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{suffix:"end"})}}else if(xIsMeasure){if(orient===config_1.Orient.HORIZONTAL){if(model.has(channel_1.X)){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X)}}else{p.x={scale:model.scaleName(channel_1.X),value:0}}if(model.has(channel_1.X2)){p.x2={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X2)}}else{if(util_1.contains([scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],model.scale(channel_1.X).type)||model.scale(channel_1.X).zero===false){p.x2={value:0}}else{p.x2={scale:model.scaleName(channel_1.X),value:0}}}}else{p.xc={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X)};p.width={value:sizeValue(model,channel_1.X)}}}else{if(model.has(channel_1.X)){if(model.encoding().x.bin){if(model.has(channel_1.SIZE)&&orient!==config_1.Orient.HORIZONTAL){p.xc={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"mid"})};p.width={scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}}else{p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"start"}),offset:1};p.x2={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"end"})}}}else if(model.scale(channel_1.X).bandSize===scale_1.BANDSIZE_FIT){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X),offset:.5}}else{p.xc={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X)}}}else{p.x={value:0,offset:2}}p.width=model.has(channel_1.X)&&model.scale(channel_1.X).bandSize===scale_1.BANDSIZE_FIT?{scale:model.scaleName(channel_1.X),band:true,offset:-.5}:model.has(channel_1.SIZE)&&orient!==config_1.Orient.HORIZONTAL?{scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}:{value:sizeValue(model,channel_1.X)}}var yFieldDef=model.encoding().y;var y2FieldDef=model.encoding().y2;var yIsMeasure=fielddef_1.isMeasure(yFieldDef)||fielddef_1.isMeasure(y2FieldDef);if(stack&&channel_1.Y===stack.fieldChannel){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{suffix:"start"})};p.y2={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{suffix:"end"})}}else if(yIsMeasure){if(orient!==config_1.Orient.HORIZONTAL){if(model.has(channel_1.Y)){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y)}}else{p.y={scale:model.scaleName(channel_1.Y),value:0}}if(model.has(channel_1.Y2)){p.y2={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y2)}}else{if(util_1.contains([scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],model.scale(channel_1.Y).type)||model.scale(channel_1.Y).zero===false){p.y2={field:{group:"height"}}}else{p.y2={scale:model.scaleName(channel_1.Y),value:0}}}}else{p.yc={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y)};p.height={value:sizeValue(model,channel_1.Y)}}}else{if(model.has(channel_1.Y)){if(model.encoding().y.bin){if(model.has(channel_1.SIZE)&&orient===config_1.Orient.HORIZONTAL){p.yc={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"mid"})};p.height={scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}}else{p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"start"})};p.y2={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"end"}),offset:1}}}else if(model.scale(channel_1.Y).bandSize===scale_1.BANDSIZE_FIT){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y),offset:.5}}else{p.yc={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y)}}}else{p.y2={field:{group:"height"},offset:-1}}p.height=model.has(channel_1.Y)&&model.scale(channel_1.Y).bandSize===scale_1.BANDSIZE_FIT?{scale:model.scaleName(channel_1.Y),band:true,offset:-.5}:model.has(channel_1.SIZE)&&orient===config_1.Orient.HORIZONTAL?{scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}:{value:sizeValue(model,channel_1.Y)}}common_1.applyColorAndOpacity(p,model);return p}bar.properties=properties;function sizeValue(model,channel){var fieldDef=model.encoding().size;if(fieldDef&&fieldDef.value!==undefined){return fieldDef.value}var markConfig=model.config().mark;if(markConfig.barSize){return markConfig.barSize}return model.isOrdinalScale(channel)?model.scale(channel).bandSize-1:!model.has(channel)?model.config().scale.bandSize-1:markConfig.barThinSize}})(bar=exports.bar||(exports.bar={}))},{"../../channel":245,"../../config":278,"../../fielddef":283,"../../scale":287,"../../util":295,"../common":247}],269:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var fielddef_1=require("../../fielddef");var common_1=require("../common");var line;(function(line){function markType(){return"line"}line.markType=markType;function properties(model){var p={};var config=model.config();var stack=model.stack();p.x=x(model.encoding().x,model.scaleName(channel_1.X),stack,config);p.y=y(model.encoding().y,model.scaleName(channel_1.Y),stack,config);var _size=size(model.encoding().size,config);if(_size){p.strokeWidth=_size}common_1.applyColorAndOpacity(p,model);common_1.applyMarkConfig(p,model,["interpolate","tension"]);return p}line.properties=properties;function x(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{value:0}}function y(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{field:{group:"height"}}}function size(fieldDef,config){if(fieldDef&&fieldDef.value!==undefined){return{value:fieldDef.value}}return{value:config.mark.lineSize}}})(line=exports.line||(exports.line={}))},{"../../channel":245,"../../fielddef":283,"../common":247}],270:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var encoding_1=require("../../encoding");var fielddef_1=require("../../fielddef");var mark_1=require("../../mark");var scale_1=require("../../scale");var sort_1=require("../../sort");var util_1=require("../../util");var area_1=require("./area");var bar_1=require("./bar");var common_1=require("../common");var line_1=require("./line");var point_1=require("./point");var rule_1=require("./rule");var text_1=require("./text");var tick_1=require("./tick");var markCompiler={area:area_1.area,bar:bar_1.bar,line:line_1.line,point:point_1.point,text:text_1.text,tick:tick_1.tick,rule:rule_1.rule,circle:point_1.circle,square:point_1.square};function parseMark(model){if(util_1.contains([mark_1.LINE,mark_1.AREA],model.mark())){return parsePathMark(model)}else{return parseNonPathMark(model)}}exports.parseMark=parseMark;function parsePathMark(model){var mark=model.mark();var isFaceted=model.parent()&&model.parent().isFacet();var dataFrom={data:model.dataTable()};var details=detailFields(model);var pathMarks=[{name:model.name("marks"),type:markCompiler[mark].markType(),from:util_1.extend(isFaceted||details.length>0?{}:dataFrom,{transform:[{type:"sort",by:sortPathBy(model)}]}),properties:{update:markCompiler[mark].properties(model)}}];if(details.length>0){var facetTransform={type:"facet",groupby:details};var transform=model.stack()?stackTransforms(model,true).concat(facetTransform):[].concat(facetTransform,model.has(channel_1.ORDER)?[{type:"sort",by:sortBy(model)}]:[]);return[{name:model.name("pathgroup"),type:"group",from:util_1.extend(isFaceted?{}:dataFrom,{transform:transform}),properties:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:pathMarks}]}else{return pathMarks}}function parseNonPathMark(model){var mark=model.mark();var isFaceted=model.parent()&&model.parent().isFacet();var dataFrom={data:model.dataTable()};var marks=[];if(mark===mark_1.TEXT&&model.has(channel_1.COLOR)&&model.config().mark.applyColorToBackground&&!model.has(channel_1.X)&&!model.has(channel_1.Y)){marks.push(util_1.extend({name:model.name("background"),type:"rect"},isFaceted?{}:{from:dataFrom},{properties:{update:text_1.text.background(model)}}))}marks.push(util_1.extend({name:model.name("marks"),type:markCompiler[mark].markType()},!isFaceted||model.stack()||model.has(channel_1.ORDER)?{from:util_1.extend(isFaceted?{}:dataFrom,model.stack()?{transform:stackTransforms(model,false)}:model.has(channel_1.ORDER)?{transform:[{type:"sort",by:sortBy(model)}]}:{})}:{},{properties:{update:markCompiler[mark].properties(model)}}));return marks}function sortBy(model){if(model.has(channel_1.ORDER)){var channelDef=model.encoding().order;if(channelDef instanceof Array){return channelDef.map(common_1.sortField)}else{return common_1.sortField(channelDef)}}return null}function sortPathBy(model){if(model.mark()===mark_1.LINE&&model.has(channel_1.PATH)){var channelDef=model.encoding().path;if(channelDef instanceof Array){return channelDef.map(common_1.sortField)}else{return common_1.sortField(channelDef)}}else{var dimensionChannel=model.config().mark.orient===config_1.Orient.HORIZONTAL?channel_1.Y:channel_1.X;var sort=model.sort(dimensionChannel);if(sort_1.isSortField(sort)){return"-"+fielddef_1.field({aggregate:encoding_1.isAggregate(model.encoding())?sort.op:undefined,field:sort.field})}else{return"-"+model.field(dimensionChannel,{binSuffix:"mid"})}}}function detailFields(model){return[channel_1.COLOR,channel_1.DETAIL,channel_1.OPACITY,channel_1.SHAPE].reduce(function(details,channel){if(model.has(channel)&&!model.fieldDef(channel).aggregate){details.push(model.field(channel))}return details},[])}function stackTransforms(model,impute){var stackByFields=getStackByFields(model);if(impute){return[imputeTransform(model,stackByFields),stackTransform(model,stackByFields)]}return[stackTransform(model,stackByFields)]}function getStackByFields(model){var encoding=model.encoding();return channel_1.STACK_GROUP_CHANNELS.reduce(function(fields,channel){var channelEncoding=encoding[channel];if(encoding_1.has(encoding,channel)){if(util_1.isArray(channelEncoding)){channelEncoding.forEach(function(fieldDef){fields.push(fielddef_1.field(fieldDef))})}else{var fieldDef=channelEncoding;var scale=model.scale(channel);var _field=fielddef_1.field(fieldDef,{binSuffix:scale&&scale.type===scale_1.ScaleType.ORDINAL?"range":"start"});if(!!_field){fields.push(_field)}}}return fields},[])}function imputeTransform(model,stackFields){var stack=model.stack();return{type:"impute",field:model.field(stack.fieldChannel),groupby:stackFields,orderby:[model.field(stack.groupbyChannel,{binSuffix:"mid"})],method:"value",value:0}}function stackTransform(model,stackFields){var stack=model.stack();var encoding=model.encoding();var sortby=model.has(channel_1.ORDER)?(util_1.isArray(encoding[channel_1.ORDER])?encoding[channel_1.ORDER]:[encoding[channel_1.ORDER]]).map(common_1.sortField):stackFields.map(function(field){return"-"+field});var valName=model.field(stack.fieldChannel);var transform={type:"stack",groupby:[model.field(stack.groupbyChannel,{binSuffix:"mid"})||"undefined"],field:model.field(stack.fieldChannel),sortby:sortby,output:{start:valName+"_start",end:valName+"_end"}};if(stack.offset){transform.offset=stack.offset}return transform}},{"../../channel":245,"../../config":278,"../../encoding":281,"../../fielddef":283,"../../mark":286,"../../scale":287,"../../sort":289,"../../util":295,"../common":247,"./area":267,"./bar":268,"./line":269,"./point":271,"./rule":272,"./text":273,"./tick":274}],271:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var fielddef_1=require("../../fielddef");var common_1=require("../common");var point;(function(point){function markType(){return"symbol"}point.markType=markType;function properties(model,fixedShape){var p={};var config=model.config();var stack=model.stack();p.x=x(model.encoding().x,model.scaleName(channel_1.X),stack,config);p.y=y(model.encoding().y,model.scaleName(channel_1.Y),stack,config);p.size=size(model.encoding().size,model.scaleName(channel_1.SIZE),model.scale(channel_1.SIZE),config);p.shape=shape(model.encoding().shape,model.scaleName(channel_1.SHAPE),model.scale(channel_1.SHAPE),config,fixedShape);common_1.applyColorAndOpacity(p,model);return p}point.properties=properties;function x(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{value:config.scale.bandSize/2}}function y(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{value:config.scale.bandSize/2}}function size(fieldDef,scaleName,scale,config){if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{scaleType:scale.type})}}else if(fieldDef.value!==undefined){return{value:fieldDef.value}}}return{value:config.mark.size}}function shape(fieldDef,scaleName,scale,config,fixedShape){if(fixedShape){return{value:fixedShape}}else if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{scaleType:scale.type})}}else if(fieldDef.value){return{value:fieldDef.value}}}return{value:config.mark.shape}}})(point=exports.point||(exports.point={}));var circle;(function(circle){function markType(){return"symbol"}circle.markType=markType;function properties(model){return point.properties(model,"circle")}circle.properties=properties})(circle=exports.circle||(exports.circle={}));var square;(function(square){function markType(){return"symbol"}square.markType=markType;function properties(model){return point.properties(model,"square")}square.properties=properties})(square=exports.square||(exports.square={}))},{"../../channel":245,"../../fielddef":283,"../common":247}],272:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var common_1=require("../common");var rule;(function(rule){function markType(){return"rule"}rule.markType=markType;function properties(model){var p={};if(model.config().mark.orient===config_1.Orient.VERTICAL){if(model.has(channel_1.X)){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"mid"})}}else{p.x={value:0}}if(model.has(channel_1.Y)){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"mid"})}}else{p.y={field:{group:"height"}}}if(model.has(channel_1.Y2)){p.y2={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y2,{binSuffix:"mid"})}}else{p.y2={value:0}}}else{if(model.has(channel_1.Y)){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"mid"})}}else{p.y={value:0}}if(model.has(channel_1.X)){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"mid"})}}else{p.x={value:0}}if(model.has(channel_1.X2)){p.x2={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X2,{binSuffix:"mid"})}}else{p.x2={field:{group:"width"}}}}common_1.applyColorAndOpacity(p,model);if(model.has(channel_1.SIZE)){p.strokeWidth={scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}}else{p.strokeWidth={value:sizeValue(model)}}return p}rule.properties=properties;function sizeValue(model){var fieldDef=model.encoding().size;if(fieldDef&&fieldDef.value!==undefined){return fieldDef.value}return model.config().mark.ruleSize}})(rule=exports.rule||(exports.rule={}))},{"../../channel":245,"../../config":278,"../common":247}],273:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var common_1=require("../common");var fielddef_1=require("../../fielddef");var type_1=require("../../type");var text;(function(text_1){function markType(){return"text"}text_1.markType=markType;function background(model){return{x:{value:0},y:{value:0},width:{field:{group:"width"}},height:{field:{group:"height"}},fill:{scale:model.scaleName(channel_1.COLOR),field:model.field(channel_1.COLOR,model.encoding().color.type===type_1.ORDINAL?{prefix:"rank"}:{})}}}text_1.background=background;function properties(model){var p={};common_1.applyMarkConfig(p,model,["angle","align","baseline","dx","dy","font","fontWeight","fontStyle","radius","theta","text"]);var config=model.config();var stack=model.stack();var textFieldDef=model.encoding().text;p.x=x(model.encoding().x,model.scaleName(channel_1.X),stack,config,textFieldDef);p.y=y(model.encoding().y,model.scaleName(channel_1.Y),stack,config);p.fontSize=size(model.encoding().size,model.scaleName(channel_1.SIZE),config);p.text=text(textFieldDef,model.scaleName(channel_1.TEXT),config);if(model.config().mark.applyColorToBackground&&!model.has(channel_1.X)&&!model.has(channel_1.Y)){p.fill={value:"black"};var opacity=model.config().mark.opacity;if(opacity){p.opacity={value:opacity}}}else{common_1.applyColorAndOpacity(p,model)}return p}text_1.properties=properties;function x(fieldDef,scaleName,stack,config,textFieldDef){if(fieldDef){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}if(textFieldDef&&textFieldDef.type===type_1.QUANTITATIVE){return{field:{group:"width"},offset:-5}}else{return{value:config.scale.textBandWidth/2}}}function y(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{value:config.scale.bandSize/2}}function size(sizeFieldDef,scaleName,config){if(sizeFieldDef){if(sizeFieldDef.field){return{scale:scaleName,field:fielddef_1.field(sizeFieldDef)}}if(sizeFieldDef.value){return{value:sizeFieldDef.value}}}return{value:config.mark.fontSize}}function text(textFieldDef,scaleName,config){if(textFieldDef){if(textFieldDef.field){if(type_1.QUANTITATIVE===textFieldDef.type){var format=common_1.numberFormat(textFieldDef,config.mark.format,config,channel_1.TEXT);var filter="number"+(format?":'"+format+"'":"");return{template:"{{"+fielddef_1.field(textFieldDef,{datum:true})+" | "+filter+"}}"}}else if(type_1.TEMPORAL===textFieldDef.type){return{template:common_1.timeTemplate(fielddef_1.field(textFieldDef,{datum:true}),textFieldDef.timeUnit,config.mark.format,config.mark.shortTimeLabels,config)}}else{return{field:textFieldDef.field}}}else if(textFieldDef.value){return{value:textFieldDef.value}}}return{value:config.mark.text}}})(text=exports.text||(exports.text={}))},{"../../channel":245,"../../fielddef":283,"../../type":294,"../common":247}],274:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var fielddef_1=require("../../fielddef");var common_1=require("../common");var tick;(function(tick){function markType(){return"rect"}tick.markType=markType;function properties(model){var p={};var config=model.config();var stack=model.stack();p.xc=x(model.encoding().x,model.scaleName(channel_1.X),stack,config);p.yc=y(model.encoding().y,model.scaleName(channel_1.Y),stack,config);if(config.mark.orient===config_1.Orient.HORIZONTAL){p.width=size(model.encoding().size,model.scaleName(channel_1.SIZE),config,(model.scale(channel_1.X)||{}).bandSize);p.height={value:config.mark.tickThickness}}else{p.width={value:config.mark.tickThickness};p.height=size(model.encoding().size,model.scaleName(channel_1.SIZE),config,(model.scale(channel_1.Y)||{}).bandSize)}common_1.applyColorAndOpacity(p,model);return p}tick.properties=properties;function x(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}else if(fieldDef.value){return{value:fieldDef.value}}}return{value:config.scale.bandSize/2}}function y(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}else if(fieldDef.value){return{value:fieldDef.value}}}return{value:config.scale.bandSize/2}}function size(fieldDef,scaleName,config,scaleBandSize){if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fieldDef.field}}else if(fieldDef.value!==undefined){return{value:fieldDef.value}}}if(config.mark.tickSize){return{value:config.mark.tickSize}}var bandSize=scaleBandSize!==undefined?scaleBandSize:config.scale.bandSize;return{value:bandSize/1.5}}})(tick=exports.tick||(exports.tick={}))},{"../../channel":245,"../../config":278,"../../fielddef":283,"../common":247}],275:[function(require,module,exports){"use strict";var channel_1=require("../channel");var encoding_1=require("../encoding");var fielddef_1=require("../fielddef");var scale_1=require("../scale");var util_1=require("../util");var scale_2=require("./scale");var NameMap=function(){function NameMap(){this._nameMap={}}NameMap.prototype.rename=function(oldName,newName){this._nameMap[oldName]=newName};NameMap.prototype.has=function(name){return this._nameMap[name]!==undefined};NameMap.prototype.get=function(name){while(this._nameMap[name]){name=this._nameMap[name]}return name};return NameMap}();var Model=function(){function Model(spec,parent,parentGivenName){this._warnings=[];this._parent=parent;this._name=spec.name||parentGivenName;this._dataNameMap=parent?parent._dataNameMap:new NameMap;this._scaleNameMap=parent?parent._scaleNameMap:new NameMap;this._sizeNameMap=parent?parent._sizeNameMap:new NameMap;this._data=spec.data;this._description=spec.description;this._transform=spec.transform;if(spec.transform){if(spec.transform.filterInvalid===undefined&&spec.transform["filterNull"]!==undefined){spec.transform.filterInvalid=spec.transform["filterNull"];console.warn("filterNull is deprecated. Please use filterInvalid instead.")}}this.component={data:null,layout:null,mark:null,scale:null,axis:null,axisGroup:null,gridGroup:null,legend:null}}Model.prototype.parse=function(){this.parseData();this.parseSelectionData();this.parseLayoutData();this.parseScale();this.parseAxis();this.parseLegend();this.parseAxisGroup();this.parseGridGroup();this.parseMark()};Model.prototype.assembleScales=function(){return util_1.flatten(util_1.vals(this.component.scale).map(function(scales){var arr=[scales.main];if(scales.colorLegend){arr.push(scales.colorLegend)}if(scales.binColorLegend){arr.push(scales.binColorLegend)}return arr}))};Model.prototype.assembleAxes=function(){return util_1.vals(this.component.axis)};Model.prototype.assembleLegends=function(){return util_1.vals(this.component.legend)};Model.prototype.assembleGroup=function(){var group={};group.marks=this.assembleMarks();var scales=this.assembleScales();if(scales.length>0){group.scales=scales}var axes=this.assembleAxes();if(axes.length>0){group.axes=axes}var legends=this.assembleLegends();if(legends.length>0){group.legends=legends}return group};Model.prototype.reduce=function(f,init,t){return encoding_1.channelMappingReduce(this.channels(),this.mapping(),f,init,t)};Model.prototype.forEach=function(f,t){encoding_1.channelMappingForEach(this.channels(),this.mapping(),f,t)};Model.prototype.parent=function(){return this._parent};Model.prototype.name=function(text,delimiter){if(delimiter===void 0){delimiter="_"}return(this._name?this._name+delimiter:"")+text};Model.prototype.description=function(){return this._description};Model.prototype.data=function(){return this._data};Model.prototype.renameData=function(oldName,newName){this._dataNameMap.rename(oldName,newName)};Model.prototype.dataName=function(dataSourceType){return this._dataNameMap.get(this.name(String(dataSourceType)))};Model.prototype.renameSize=function(oldName,newName){this._sizeNameMap.rename(oldName,newName)};Model.prototype.channelSizeName=function(channel){return this.sizeName(channel===channel_1.X||channel===channel_1.COLUMN?"width":"height")};Model.prototype.sizeName=function(size){return this._sizeNameMap.get(this.name(size,"_"))};Model.prototype.calculate=function(){return this._transform?this._transform.calculate:undefined};Model.prototype.filterInvalid=function(){var transform=this._transform||{};if(transform.filterInvalid===undefined){return this.parent()?this.parent().filterInvalid():undefined}return transform.filterInvalid};Model.prototype.filter=function(){return this._transform?this._transform.filter:undefined};Model.prototype.field=function(channel,opt){if(opt===void 0){opt={}}var fieldDef=this.fieldDef(channel);if(fieldDef.bin){opt=util_1.extend({binSuffix:this.scale(channel).type===scale_1.ScaleType.ORDINAL?"range":"start"},opt)}return fielddef_1.field(fieldDef,opt)};Model.prototype.scale=function(channel){return this._scale[channel]};Model.prototype.isOrdinalScale=function(channel){var scale=this.scale(channel);return scale&&scale.type===scale_1.ScaleType.ORDINAL};Model.prototype.renameScale=function(oldName,newName){this._scaleNameMap.rename(oldName,newName)};Model.prototype.scaleName=function(originalScaleName,parse){var channel=util_1.contains([scale_2.COLOR_LEGEND,scale_2.COLOR_LEGEND_LABEL],originalScaleName)?"color":originalScaleName;if(parse){return this.name(originalScaleName+"")}if(this._scale&&this._scale[channel]||this._scaleNameMap.has(this.name(originalScaleName+""))){return this._scaleNameMap.get(this.name(originalScaleName+""))}return undefined};Model.prototype.sort=function(channel){return(this.mapping()[channel]||{}).sort};Model.prototype.axis=function(channel){return this._axis[channel]};Model.prototype.legend=function(channel){return this._legend[channel]};Model.prototype.config=function(){return this._config};Model.prototype.addWarning=function(message){util_1.warning(message);this._warnings.push(message)};Model.prototype.warnings=function(){return this._warnings};Model.prototype.isUnit=function(){return false};Model.prototype.isFacet=function(){return false};Model.prototype.isLayer=function(){return false};return Model}();exports.Model=Model},{"../channel":245,"../encoding":281,"../fielddef":283,"../scale":287,"../util":295,"./scale":276}],276:[function(require,module,exports){"use strict";var aggregate_1=require("../aggregate");var channel_1=require("../channel");var config_1=require("../config");var data_1=require("../data");var datetime_1=require("../datetime");var fielddef_1=require("../fielddef");var mark_1=require("../mark");var scale_1=require("../scale");var sort_1=require("../sort");var stack_1=require("../stack");var type_1=require("../type");var util_1=require("../util");var timeunit_1=require("../timeunit");exports.COLOR_LEGEND="color_legend";exports.COLOR_LEGEND_LABEL="color_legend_label";function parseScaleComponent(model){return model.channels().reduce(function(scale,channel){if(model.scale(channel)){var fieldDef=model.fieldDef(channel);var scales={main:parseMainScale(model,fieldDef,channel)};if(channel===channel_1.COLOR&&model.legend(channel_1.COLOR)&&(fieldDef.type===type_1.ORDINAL||fieldDef.bin||fieldDef.timeUnit)){scales.colorLegend=parseColorLegendScale(model,fieldDef);if(fieldDef.bin){scales.binColorLegend=parseBinColorLegendLabel(model,fieldDef)}}scale[channel]=scales}return scale},{})}exports.parseScaleComponent=parseScaleComponent;function parseMainScale(model,fieldDef,channel){var scale=model.scale(channel);var sort=model.sort(channel);var scaleDef={name:model.scaleName(channel+"",true),type:scale.type};if(channel===channel_1.X&&model.has(channel_1.X2)){if(model.has(channel_1.X)){scaleDef.domain={fields:[domain(scale,model,channel_1.X),domain(scale,model,channel_1.X2)]}}else{scaleDef.domain=domain(scale,model,channel_1.X2)}}else if(channel===channel_1.Y&&model.has(channel_1.Y2)){if(model.has(channel_1.Y)){scaleDef.domain={fields:[domain(scale,model,channel_1.Y),domain(scale,model,channel_1.Y2)]}}else{scaleDef.domain=domain(scale,model,channel_1.Y2)}}else{scaleDef.domain=domain(scale,model,channel)}util_1.extend(scaleDef,rangeMixins(scale,model,channel));if(sort&&(sort_1.isSortField(sort)?sort.order:sort)===sort_1.SortOrder.DESCENDING){scaleDef.reverse=true}["round","clamp","nice","exponent","zero","points","padding"].forEach(function(property){var value=exports[property](scale,channel,fieldDef,model,scaleDef);if(value!==undefined){scaleDef[property]=value}});return scaleDef}function parseColorLegendScale(model,fieldDef){return{name:model.scaleName(exports.COLOR_LEGEND,true),type:scale_1.ScaleType.ORDINAL,domain:{data:model.dataTable(),field:model.field(channel_1.COLOR,fieldDef.bin||fieldDef.timeUnit?{}:{prefix:"rank"}),sort:true},range:{data:model.dataTable(),field:model.field(channel_1.COLOR),sort:true}}}function parseBinColorLegendLabel(model,fieldDef){return{name:model.scaleName(exports.COLOR_LEGEND_LABEL,true),type:scale_1.ScaleType.ORDINAL,domain:{data:model.dataTable(),field:model.field(channel_1.COLOR),sort:true},range:{data:model.dataTable(),field:fielddef_1.field(fieldDef,{binSuffix:"range"}),sort:{field:model.field(channel_1.COLOR,{binSuffix:"start"}),op:"min"}}}}function scaleType(scale,fieldDef,channel,mark){if(!channel_1.hasScale(channel)){return null}if(util_1.contains([channel_1.ROW,channel_1.COLUMN,channel_1.SHAPE],channel)){if(scale&&scale.type!==undefined&&scale.type!==scale_1.ScaleType.ORDINAL){console.warn("Channel",channel,"does not work with scale type =",scale.type)}return scale_1.ScaleType.ORDINAL}if(scale.type!==undefined){return scale.type}switch(fieldDef.type){case type_1.NOMINAL:return scale_1.ScaleType.ORDINAL;case type_1.ORDINAL:if(channel===channel_1.COLOR){return scale_1.ScaleType.LINEAR}return scale_1.ScaleType.ORDINAL;case type_1.TEMPORAL:if(channel===channel_1.COLOR){return scale_1.ScaleType.TIME}if(fieldDef.timeUnit){return timeunit_1.defaultScaleType(fieldDef.timeUnit)}return scale_1.ScaleType.TIME;case type_1.QUANTITATIVE:if(fieldDef.bin){return util_1.contains([channel_1.X,channel_1.Y,channel_1.COLOR],channel)?scale_1.ScaleType.LINEAR:scale_1.ScaleType.ORDINAL}return scale_1.ScaleType.LINEAR}return null}exports.scaleType=scaleType;function scaleBandSize(scaleType,bandSize,scaleConfig,topLevelSize,mark,channel){if(scaleType===scale_1.ScaleType.ORDINAL){if(topLevelSize===undefined){if(bandSize){return bandSize}else if(channel===channel_1.X&&mark===mark_1.TEXT){return scaleConfig.textBandWidth}else{return scaleConfig.bandSize}}else{if(bandSize){console.warn("bandSize for",channel,"overridden as top-level",channel===channel_1.X?"width":"height","is provided.")}return scale_1.BANDSIZE_FIT}}else{return undefined}}exports.scaleBandSize=scaleBandSize;function domain(scale,model,channel){var fieldDef=model.fieldDef(channel);if(scale.domain){if(datetime_1.isDateTime(scale.domain[0])){return scale.domain.map(function(dt){return datetime_1.timestamp(dt,true)})}return scale.domain}if(fieldDef.type===type_1.TEMPORAL){if(timeunit_1.imputedDomain(fieldDef.timeUnit,channel)){return{data:fieldDef.timeUnit,field:"date"}}return{data:model.dataTable(),field:model.field(channel),sort:{field:model.field(channel),op:"min"}}}var stack=model.stack();if(stack&&channel===stack.fieldChannel){if(stack.offset===stack_1.StackOffset.NORMALIZE){return[0,1]}return{data:model.dataName(data_1.STACKED_SCALE),field:model.field(channel,{prefix:"sum"})}}var useRawDomain=_useRawDomain(scale,model,channel),sort=domainSort(model,channel,scale.type);if(useRawDomain){return{data:data_1.SOURCE,field:model.field(channel,{noAggregate:true})}}else if(fieldDef.bin){if(scale.type===scale_1.ScaleType.ORDINAL){return{data:model.dataTable(),field:model.field(channel,{binSuffix:"range"}),sort:{field:model.field(channel,{binSuffix:"start"}),op:"min"}}}else if(channel===channel_1.COLOR){return{data:model.dataTable(),field:model.field(channel,{binSuffix:"start"})}}else{return{data:model.dataTable(),field:[model.field(channel,{binSuffix:"start"}),model.field(channel,{binSuffix:"end"})]}}}else if(sort){return{data:sort.op?data_1.SOURCE:model.dataTable(),field:fieldDef.type===type_1.ORDINAL&&channel===channel_1.COLOR?model.field(channel,{prefix:"rank"}):model.field(channel),sort:sort}}else{return{data:model.dataTable(),field:fieldDef.type===type_1.ORDINAL&&channel===channel_1.COLOR?model.field(channel,{prefix:"rank"}):model.field(channel)}}}exports.domain=domain;function domainSort(model,channel,scaleType){if(scaleType!==scale_1.ScaleType.ORDINAL){return undefined}var sort=model.sort(channel);if(sort_1.isSortField(sort)){return{op:sort.op,field:sort.field}}if(util_1.contains([sort_1.SortOrder.ASCENDING,sort_1.SortOrder.DESCENDING,undefined],sort)){return true}return undefined}exports.domainSort=domainSort;function _useRawDomain(scale,model,channel){var fieldDef=model.fieldDef(channel);return scale.useRawDomain&&fieldDef.aggregate&&aggregate_1.SHARED_DOMAIN_OPS.indexOf(fieldDef.aggregate)>=0&&(fieldDef.type===type_1.QUANTITATIVE&&!fieldDef.bin&&scale.type!==scale_1.ScaleType.LOG||fieldDef.type===type_1.TEMPORAL&&util_1.contains([scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type))}function rangeMixins(scale,model,channel){var fieldDef=model.fieldDef(channel);var scaleConfig=model.config().scale;if(scale.type===scale_1.ScaleType.ORDINAL&&scale.bandSize&&scale.bandSize!==scale_1.BANDSIZE_FIT&&util_1.contains([channel_1.X,channel_1.Y],channel)){return{bandSize:scale.bandSize}}if(scale.range&&!util_1.contains([channel_1.X,channel_1.Y,channel_1.ROW,channel_1.COLUMN],channel)){return{range:scale.range}}switch(channel){case channel_1.ROW:return{range:"height"};case channel_1.COLUMN:return{range:"width"}}var unitModel=model;switch(channel){case channel_1.X:return{rangeMin:0,rangeMax:unitModel.width};case channel_1.Y:return{rangeMin:unitModel.height,rangeMax:0};case channel_1.SIZE:if(unitModel.mark()===mark_1.BAR){if(scaleConfig.barSizeRange!==undefined){return{range:scaleConfig.barSizeRange}}var dimension=model.config().mark.orient===config_1.Orient.HORIZONTAL?channel_1.Y:channel_1.X;return{range:[model.config().mark.barThinSize,model.scale(dimension).bandSize]}}else if(unitModel.mark()===mark_1.TEXT){return{range:scaleConfig.fontSizeRange}}else if(unitModel.mark()===mark_1.RULE){return{range:scaleConfig.ruleSizeRange}}else if(unitModel.mark()===mark_1.TICK){return{range:scaleConfig.tickSizeRange}}if(scaleConfig.pointSizeRange!==undefined){return{range:scaleConfig.pointSizeRange}}var bandSize=pointBandSize(unitModel);return{range:[9,(bandSize-2)*(bandSize-2)]};case channel_1.SHAPE:return{range:scaleConfig.shapeRange};case channel_1.COLOR:if(fieldDef.type===type_1.NOMINAL){return{range:scaleConfig.nominalColorRange}}return{range:scaleConfig.sequentialColorRange};case channel_1.OPACITY:return{range:scaleConfig.opacity}}return{}}exports.rangeMixins=rangeMixins;function pointBandSize(model){var scaleConfig=model.config().scale;var hasX=model.has(channel_1.X);var hasY=model.has(channel_1.Y);var xIsMeasure=fielddef_1.isMeasure(model.encoding().x);var yIsMeasure=fielddef_1.isMeasure(model.encoding().y);if(hasX&&hasY){return xIsMeasure!==yIsMeasure?model.scale(xIsMeasure?channel_1.Y:channel_1.X).bandSize:Math.min(model.scale(channel_1.X).bandSize||scaleConfig.bandSize,model.scale(channel_1.Y).bandSize||scaleConfig.bandSize)}else if(hasY){return yIsMeasure?model.config().scale.bandSize:model.scale(channel_1.Y).bandSize}else if(hasX){return xIsMeasure?model.config().scale.bandSize:model.scale(channel_1.X).bandSize}return model.config().scale.bandSize}function clamp(scale){if(util_1.contains([scale_1.ScaleType.LINEAR,scale_1.ScaleType.POW,scale_1.ScaleType.SQRT,scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type)){return scale.clamp}return undefined}exports.clamp=clamp;function exponent(scale){if(scale.type===scale_1.ScaleType.POW){return scale.exponent}return undefined}exports.exponent=exponent;function nice(scale,channel,fieldDef){if(util_1.contains([scale_1.ScaleType.LINEAR,scale_1.ScaleType.POW,scale_1.ScaleType.SQRT,scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC,scale_1.ScaleType.QUANTIZE],scale.type)){if(scale.nice!==undefined){return scale.nice}if(util_1.contains([scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type)){return timeunit_1.smallestUnit(fieldDef.timeUnit)}return util_1.contains([channel_1.X,channel_1.Y],channel)}return undefined}exports.nice=nice;function padding(scale,channel,__,___,scaleDef){if(scale.type===scale_1.ScaleType.ORDINAL&&util_1.contains([channel_1.X,channel_1.Y],channel)){return scaleDef.points?1:scale.padding}return undefined}exports.padding=padding;function points(scale,channel,__,model){if(scale.type===scale_1.ScaleType.ORDINAL&&util_1.contains([channel_1.X,channel_1.Y],channel)){return model.mark()===mark_1.BAR&&scale.bandSize===scale_1.BANDSIZE_FIT?undefined:true}return undefined}exports.points=points;function round(scale,channel){if(util_1.contains([channel_1.X,channel_1.Y,channel_1.ROW,channel_1.COLUMN,channel_1.SIZE],channel)&&scale.round!==undefined){return scale.round}return undefined}exports.round=round;function zero(scale,channel,fieldDef){if(!util_1.contains([scale_1.ScaleType.TIME,scale_1.ScaleType.UTC,scale_1.ScaleType.ORDINAL],scale.type)){if(scale.zero!==undefined){return scale.zero}return!scale.domain&&!fieldDef.bin&&util_1.contains([channel_1.X,channel_1.Y],channel)}return undefined}exports.zero=zero},{"../aggregate":242,"../channel":245,"../config":278,"../data":279,"../datetime":280,"../fielddef":283,"../mark":286,"../scale":287,"../sort":289,"../stack":291,"../timeunit":292,"../type":294,"../util":295}],277:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var aggregate_1=require("../aggregate");var channel_1=require("../channel");var config_1=require("../config");var data_1=require("../data");var vlEncoding=require("../encoding");var fielddef_1=require("../fielddef");var mark_1=require("../mark");var scale_1=require("../scale");var type_1=require("../type");var util_1=require("../util");var axis_1=require("./axis");var common_1=require("./common");var config_2=require("./config");var data_2=require("./data/data");var legend_1=require("./legend");var layout_1=require("./layout");var model_1=require("./model");var mark_2=require("./mark/mark");var scale_2=require("./scale");var stack_1=require("../stack");var UnitModel=function(_super){__extends(UnitModel,_super);function UnitModel(spec,parent,parentGivenName){_super.call(this,spec,parent,parentGivenName);var providedWidth=spec.width!==undefined?spec.width:parent?parent["width"]:undefined;var providedHeight=spec.height!==undefined?spec.height:parent?parent["height"]:undefined;var mark=this._mark=spec.mark;var encoding=this._encoding=this._initEncoding(mark,spec.encoding||{});this._stack=stack_1.stack(mark,encoding,((spec.config||{}).mark||{}).stacked);var config=this._config=this._initConfig(spec.config,parent,mark,encoding,this._stack);this._scale=this._initScale(mark,encoding,config,providedWidth,providedHeight);this._axis=this._initAxis(encoding,config);this._legend=this._initLegend(encoding,config);this._initSize(mark,this._scale,providedWidth,providedHeight,config.cell,config.scale)}UnitModel.prototype._initEncoding=function(mark,encoding){encoding=util_1.duplicate(encoding);vlEncoding.forEach(encoding,function(fieldDef,channel){if(!channel_1.supportMark(channel,mark)){console.warn(channel,"dropped as it is incompatible with",mark);delete fieldDef.field;return}if(fieldDef.type){fieldDef.type=type_1.getFullName(fieldDef.type)}if((channel===channel_1.PATH||channel===channel_1.ORDER)&&!fieldDef.aggregate&&fieldDef.type===type_1.QUANTITATIVE){fieldDef.aggregate=aggregate_1.AggregateOp.MIN}});return encoding};UnitModel.prototype._initConfig=function(specConfig,parent,mark,encoding,stack){var config=util_1.mergeDeep(util_1.duplicate(config_1.defaultConfig),parent?parent.config():{},specConfig);var hasFacetParent=false;while(parent!==null){if(parent.isFacet()){hasFacetParent=true;break}parent=parent.parent()}if(hasFacetParent){config.cell=util_1.extend({},config.cell,config.facet.cell)}config.mark=config_2.initMarkConfig(mark,encoding,stack,config);return config};UnitModel.prototype._initScale=function(mark,encoding,config,topLevelWidth,topLevelHeight){return channel_1.UNIT_SCALE_CHANNELS.reduce(function(_scale,channel){if(vlEncoding.has(encoding,channel)||channel===channel_1.X&&vlEncoding.has(encoding,channel_1.X2)||channel===channel_1.Y&&vlEncoding.has(encoding,channel_1.Y2)){var channelDef=encoding[channel];var scaleSpec=(channelDef||{}).scale||{};var _scaleType=scale_2.scaleType(scaleSpec,channelDef,channel,mark);var scale=_scale[channel]=util_1.extend({type:_scaleType,round:config.scale.round,padding:config.scale.padding,useRawDomain:config.scale.useRawDomain},scaleSpec);scale.bandSize=scale_2.scaleBandSize(scale.type,scale.bandSize,config.scale,channel===channel_1.X?topLevelWidth:topLevelHeight,mark,channel)}return _scale},{})};UnitModel.prototype._initSize=function(mark,scale,width,height,cellConfig,scaleConfig){if(width!==undefined){this._width=width}else if(scale[channel_1.X]){if(scale[channel_1.X].type!==scale_1.ScaleType.ORDINAL||scale[channel_1.X].bandSize===scale_1.BANDSIZE_FIT){this._width=cellConfig.width}}else{if(mark===mark_1.TEXT){this._width=scaleConfig.textBandWidth}else{this._width=scaleConfig.bandSize}}if(height!==undefined){this._height=height}else if(scale[channel_1.Y]){if(scale[channel_1.Y].type!==scale_1.ScaleType.ORDINAL||scale[channel_1.Y].bandSize===scale_1.BANDSIZE_FIT){this._height=cellConfig.height}}else{this._height=scaleConfig.bandSize}};UnitModel.prototype._initAxis=function(encoding,config){return[channel_1.X,channel_1.Y].reduce(function(_axis,channel){if(vlEncoding.has(encoding,channel)||channel===channel_1.X&&vlEncoding.has(encoding,channel_1.X2)||channel===channel_1.Y&&vlEncoding.has(encoding,channel_1.Y2)){var axisSpec=(encoding[channel]||{}).axis;if(axisSpec!==null&&axisSpec!==false){_axis[channel]=util_1.extend({},config.axis,axisSpec===true?{}:axisSpec||{})}}return _axis},{})};UnitModel.prototype._initLegend=function(encoding,config){return channel_1.NONSPATIAL_SCALE_CHANNELS.reduce(function(_legend,channel){if(vlEncoding.has(encoding,channel)){var legendSpec=encoding[channel].legend;if(legendSpec!==null&&legendSpec!==false){_legend[channel]=util_1.extend({},config.legend,legendSpec===true?{}:legendSpec||{})}}return _legend},{})};Object.defineProperty(UnitModel.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(UnitModel.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});UnitModel.prototype.parseData=function(){this.component.data=data_2.parseUnitData(this)};UnitModel.prototype.parseSelectionData=function(){};UnitModel.prototype.parseLayoutData=function(){this.component.layout=layout_1.parseUnitLayout(this)};UnitModel.prototype.parseScale=function(){this.component.scale=scale_2.parseScaleComponent(this)};UnitModel.prototype.parseMark=function(){this.component.mark=mark_2.parseMark(this)};UnitModel.prototype.parseAxis=function(){this.component.axis=axis_1.parseAxisComponent(this,[channel_1.X,channel_1.Y])};UnitModel.prototype.parseAxisGroup=function(){return null};UnitModel.prototype.parseGridGroup=function(){return null};UnitModel.prototype.parseLegend=function(){this.component.legend=legend_1.parseLegendComponent(this)};UnitModel.prototype.assembleData=function(data){return data_2.assembleData(this,data)};UnitModel.prototype.assembleLayout=function(layoutData){return layout_1.assembleLayout(this,layoutData)};UnitModel.prototype.assembleMarks=function(){return this.component.mark};UnitModel.prototype.assembleParentGroupProperties=function(cellConfig){return common_1.applyConfig({},cellConfig,common_1.FILL_STROKE_CONFIG.concat(["clip"]))};UnitModel.prototype.channels=function(){return channel_1.UNIT_CHANNELS};UnitModel.prototype.mapping=function(){return this.encoding()};UnitModel.prototype.stack=function(){return this._stack};UnitModel.prototype.toSpec=function(excludeConfig,excludeData){var encoding=util_1.duplicate(this._encoding);var spec;spec={mark:this._mark,encoding:encoding};if(!excludeConfig){spec.config=util_1.duplicate(this._config)}if(!excludeData){spec.data=util_1.duplicate(this._data)}return spec};UnitModel.prototype.mark=function(){return this._mark};UnitModel.prototype.has=function(channel){return vlEncoding.has(this._encoding,channel)};UnitModel.prototype.encoding=function(){return this._encoding};UnitModel.prototype.fieldDef=function(channel){return this._encoding[channel]||{}};UnitModel.prototype.field=function(channel,opt){if(opt===void 0){opt={}}var fieldDef=this.fieldDef(channel);if(fieldDef.bin){opt=util_1.extend({binSuffix:this.scale(channel).type===scale_1.ScaleType.ORDINAL?"range":"start"},opt)}return fielddef_1.field(fieldDef,opt)};UnitModel.prototype.dataTable=function(){return this.dataName(vlEncoding.isAggregate(this._encoding)?data_1.SUMMARY:data_1.SOURCE)};UnitModel.prototype.isUnit=function(){return true};return UnitModel}(model_1.Model);exports.UnitModel=UnitModel},{"../aggregate":242,"../channel":245,"../config":278,"../data":279,"../encoding":281,"../fielddef":283,"../mark":286,"../scale":287,"../stack":291,"../type":294,"../util":295,"./axis":246,"./common":247,"./config":249,"./data/data":252,"./layout":265,"./legend":266,"./mark/mark":270,"./model":275,"./scale":276}],278:[function(require,module,exports){"use strict";var scale_1=require("./scale");var axis_1=require("./axis");var legend_1=require("./legend");exports.defaultCellConfig={width:200,height:200};exports.defaultFacetCellConfig={stroke:"#ccc",strokeWidth:1};var defaultFacetGridConfig={color:"#000000",opacity:.4,offset:0};exports.defaultFacetConfig={scale:scale_1.defaultFacetScaleConfig,axis:axis_1.defaultFacetAxisConfig,grid:defaultFacetGridConfig,cell:exports.defaultFacetCellConfig};(function(FontWeight){FontWeight[FontWeight["NORMAL"]="normal"]="NORMAL";FontWeight[FontWeight["BOLD"]="bold"]="BOLD"})(exports.FontWeight||(exports.FontWeight={}));var FontWeight=exports.FontWeight;(function(Shape){Shape[Shape["CIRCLE"]="circle"]="CIRCLE";Shape[Shape["SQUARE"]="square"]="SQUARE";Shape[Shape["CROSS"]="cross"]="CROSS";Shape[Shape["DIAMOND"]="diamond"]="DIAMOND";Shape[Shape["TRIANGLEUP"]="triangle-up"]="TRIANGLEUP";Shape[Shape["TRIANGLEDOWN"]="triangle-down"]="TRIANGLEDOWN"})(exports.Shape||(exports.Shape={}));var Shape=exports.Shape;(function(Orient){Orient[Orient["HORIZONTAL"]="horizontal"]="HORIZONTAL";Orient[Orient["VERTICAL"]="vertical"]="VERTICAL"})(exports.Orient||(exports.Orient={}));var Orient=exports.Orient;(function(HorizontalAlign){HorizontalAlign[HorizontalAlign["LEFT"]="left"]="LEFT";HorizontalAlign[HorizontalAlign["RIGHT"]="right"]="RIGHT";HorizontalAlign[HorizontalAlign["CENTER"]="center"]="CENTER"})(exports.HorizontalAlign||(exports.HorizontalAlign={}));var HorizontalAlign=exports.HorizontalAlign;(function(VerticalAlign){VerticalAlign[VerticalAlign["TOP"]="top"]="TOP";VerticalAlign[VerticalAlign["MIDDLE"]="middle"]="MIDDLE";VerticalAlign[VerticalAlign["BOTTOM"]="bottom"]="BOTTOM"})(exports.VerticalAlign||(exports.VerticalAlign={}));var VerticalAlign=exports.VerticalAlign;(function(FontStyle){FontStyle[FontStyle["NORMAL"]="normal"]="NORMAL";FontStyle[FontStyle["ITALIC"]="italic"]="ITALIC"})(exports.FontStyle||(exports.FontStyle={}));var FontStyle=exports.FontStyle;(function(Interpolate){Interpolate[Interpolate["LINEAR"]="linear"]="LINEAR";Interpolate[Interpolate["LINEAR_CLOSED"]="linear-closed"]="LINEAR_CLOSED";Interpolate[Interpolate["STEP"]="step"]="STEP";Interpolate[Interpolate["STEP_BEFORE"]="step-before"]="STEP_BEFORE";Interpolate[Interpolate["STEP_AFTER"]="step-after"]="STEP_AFTER";Interpolate[Interpolate["BASIS"]="basis"]="BASIS";Interpolate[Interpolate["BASIS_OPEN"]="basis-open"]="BASIS_OPEN";Interpolate[Interpolate["BASIS_CLOSED"]="basis-closed"]="BASIS_CLOSED";Interpolate[Interpolate["CARDINAL"]="cardinal"]="CARDINAL";Interpolate[Interpolate["CARDINAL_OPEN"]="cardinal-open"]="CARDINAL_OPEN";Interpolate[Interpolate["CARDINAL_CLOSED"]="cardinal-closed"]="CARDINAL_CLOSED";Interpolate[Interpolate["BUNDLE"]="bundle"]="BUNDLE";Interpolate[Interpolate["MONOTONE"]="monotone"]="MONOTONE"})(exports.Interpolate||(exports.Interpolate={}));var Interpolate=exports.Interpolate;(function(AreaOverlay){AreaOverlay[AreaOverlay["LINE"]="line"]="LINE";AreaOverlay[AreaOverlay["LINEPOINT"]="linepoint"]="LINEPOINT";AreaOverlay[AreaOverlay["NONE"]="none"]="NONE"})(exports.AreaOverlay||(exports.AreaOverlay={}));var AreaOverlay=exports.AreaOverlay;exports.defaultOverlayConfig={line:false,pointStyle:{filled:true},lineStyle:{}};exports.defaultMarkConfig={color:"#4682b4",shape:Shape.CIRCLE,strokeWidth:2,size:30,barThinSize:2,ruleSize:1,tickThickness:1,fontSize:10,baseline:VerticalAlign.MIDDLE,text:"Abc",applyColorToBackground:false};exports.defaultConfig={numberFormat:"s",timeFormat:"%b %d, %Y",countTitle:"Number of Records",cell:exports.defaultCellConfig,mark:exports.defaultMarkConfig,overlay:exports.defaultOverlayConfig,scale:scale_1.defaultScaleConfig,axis:axis_1.defaultAxisConfig,legend:legend_1.defaultLegendConfig,facet:exports.defaultFacetConfig}},{"./axis":243,"./legend":285,"./scale":287}],279:[function(require,module,exports){"use strict";var type_1=require("./type");(function(DataFormatType){DataFormatType[DataFormatType["JSON"]="json"]="JSON";DataFormatType[DataFormatType["CSV"]="csv"]="CSV";DataFormatType[DataFormatType["TSV"]="tsv"]="TSV";DataFormatType[DataFormatType["TOPOJSON"]="topojson"]="TOPOJSON"})(exports.DataFormatType||(exports.DataFormatType={}));var DataFormatType=exports.DataFormatType;(function(DataTable){DataTable[DataTable["SOURCE"]="source"]="SOURCE";DataTable[DataTable["SUMMARY"]="summary"]="SUMMARY";DataTable[DataTable["STACKED_SCALE"]="stacked_scale"]="STACKED_SCALE";DataTable[DataTable["LAYOUT"]="layout"]="LAYOUT"})(exports.DataTable||(exports.DataTable={}));var DataTable=exports.DataTable;exports.SUMMARY=DataTable.SUMMARY;exports.SOURCE=DataTable.SOURCE;exports.STACKED_SCALE=DataTable.STACKED_SCALE;exports.LAYOUT=DataTable.LAYOUT;exports.types={boolean:type_1.Type.NOMINAL,number:type_1.Type.QUANTITATIVE,integer:type_1.Type.QUANTITATIVE,date:type_1.Type.TEMPORAL,string:type_1.Type.NOMINAL}},{"./type":294}],280:[function(require,module,exports){"use strict";var util_1=require("./util");var SUNDAY_YEAR=2006;function isDateTime(o){return!!o&&(!!o.year||!!o.quarter||!!o.month||!!o.date||!!o.day||!!o.hours||!!o.minutes||!!o.seconds||!!o.milliseconds)}exports.isDateTime=isDateTime;exports.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"];exports.SHORT_MONTHS=exports.MONTHS.map(function(m){return m.substr(0,3)});exports.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];exports.SHORT_DAYS=exports.DAYS.map(function(d){return d.substr(0,3)});function normalizeQuarter(q){if(util_1.isNumber(q)){return q-1+""}else{console.warn("Potentially invalid quarter",q);return q}}function normalizeMonth(m){if(util_1.isNumber(m)){return m-1+""}else{var lowerM=m.toLowerCase();var monthIndex=exports.MONTHS.indexOf(lowerM);if(monthIndex!==-1){return monthIndex+""}var shortM=lowerM.substr(0,3);var shortMonthIndex=exports.SHORT_MONTHS.indexOf(shortM);if(shortMonthIndex!==-1){return shortMonthIndex+""}console.warn("Potentially invalid month",m);return m}}function normalizeDay(d){if(util_1.isNumber(d)){return d%7+""}else{var lowerD=d.toLowerCase();var dayIndex=exports.DAYS.indexOf(lowerD);if(dayIndex!==-1){return dayIndex+""}var shortD=lowerD.substr(0,3);var shortDayIndex=exports.SHORT_DAYS.indexOf(shortD);if(shortDayIndex!==-1){return shortDayIndex+""}console.warn("Potentially invalid day",d);return d}}function timestamp(d,normalize){var date=new Date(0,0,1,0,0,0,0);if(d.day!==undefined){if(util_1.keys(d).length>1){console.warn("Dropping day from datetime",JSON.stringify(d),"as day cannot be combined with other units.");d=util_1.duplicate(d);delete d.day}else{date.setFullYear(SUNDAY_YEAR);var day=normalize?normalizeDay(d.day):d.day;date.setDate(+day+1)}}if(d.year!==undefined){date.setFullYear(d.year)}if(d.quarter!==undefined){var quarter=normalize?normalizeQuarter(d.quarter):d.quarter;date.setMonth(+quarter*3)}if(d.month!==undefined){var month=normalize?normalizeMonth(d.month):d.month;date.setMonth(+month)}if(d.date!==undefined){date.setDate(d.date)}if(d.hours!==undefined){date.setHours(d.hours)}if(d.minutes!==undefined){date.setMinutes(d.minutes)}if(d.seconds!==undefined){date.setSeconds(d.seconds)}if(d.milliseconds!==undefined){date.setMilliseconds(d.milliseconds)}return date.getTime()}exports.timestamp=timestamp;function dateTimeExpr(d,normalize){if(normalize===void 0){normalize=false}var units=[];if(normalize&&d.day!==undefined){if(util_1.keys(d).length>1){console.warn("Dropping day from datetime",JSON.stringify(d),"as day cannot be combined with other units.");d=util_1.duplicate(d);delete d.day}}if(d.year!==undefined){units.push(d.year)}else if(d.day!==undefined){units.push(SUNDAY_YEAR)}else{units.push(0)}if(d.month!==undefined){var month=normalize?normalizeMonth(d.month):d.month;units.push(month)}else if(d.quarter!==undefined){var quarter=normalize?normalizeQuarter(d.quarter):d.quarter;units.push(quarter+"*3")}else{units.push(0)}if(d.date!==undefined){units.push(d.date)}else if(d.day!==undefined){var day=normalize?normalizeDay(d.day):d.day;units.push(day+"+1")}else{units.push(1)}for(var _i=0,_a=["hours","minutes","seconds","milliseconds"];_i<_a.length;_i++){var timeUnit=_a[_i];if(d[timeUnit]!==undefined){units.push(d[timeUnit])}else{units.push(0)}}return"datetime("+units.join(", ")+")"}exports.dateTimeExpr=dateTimeExpr},{"./util":295}],281:[function(require,module,exports){"use strict";var channel_1=require("./channel");var util_1=require("./util");function countRetinal(encoding){var count=0;if(encoding.color){count++}if(encoding.opacity){count++}if(encoding.size){count++}if(encoding.shape){count++}return count}exports.countRetinal=countRetinal;function channels(encoding){return channel_1.CHANNELS.filter(function(channel){return has(encoding,channel)})}exports.channels=channels;function has(encoding,channel){var channelEncoding=encoding&&encoding[channel];return channelEncoding&&(channelEncoding.field!==undefined||util_1.isArray(channelEncoding)&&channelEncoding.length>0)}exports.has=has;function isAggregate(encoding){return util_1.some(channel_1.CHANNELS,function(channel){if(has(encoding,channel)&&encoding[channel].aggregate){return true}return false})}exports.isAggregate=isAggregate;function isRanged(encoding){return encoding&&(!!encoding.x&&!!encoding.x2||!!encoding.y&&!!encoding.y2)}exports.isRanged=isRanged;function fieldDefs(encoding){var arr=[];channel_1.CHANNELS.forEach(function(channel){if(has(encoding,channel)){if(util_1.isArray(encoding[channel])){encoding[channel].forEach(function(fieldDef){arr.push(fieldDef)})}else{arr.push(encoding[channel])}}});return arr}exports.fieldDefs=fieldDefs;function forEach(encoding,f,thisArg){channelMappingForEach(channel_1.CHANNELS,encoding,f,thisArg)}exports.forEach=forEach;function channelMappingForEach(channels,mapping,f,thisArg){var i=0;channels.forEach(function(channel){if(has(mapping,channel)){if(util_1.isArray(mapping[channel])){mapping[channel].forEach(function(fieldDef){f.call(thisArg,fieldDef,channel,i++)})}else{f.call(thisArg,mapping[channel],channel,i++)}}})}exports.channelMappingForEach=channelMappingForEach;function map(encoding,f,thisArg){return channelMappingMap(channel_1.CHANNELS,encoding,f,thisArg)}exports.map=map;function channelMappingMap(channels,mapping,f,thisArg){var arr=[];channels.forEach(function(channel){if(has(mapping,channel)){if(util_1.isArray(mapping[channel])){mapping[channel].forEach(function(fieldDef){arr.push(f.call(thisArg,fieldDef,channel))})}else{arr.push(f.call(thisArg,mapping[channel],channel))}}});return arr}exports.channelMappingMap=channelMappingMap;function reduce(encoding,f,init,thisArg){return channelMappingReduce(channel_1.CHANNELS,encoding,f,init,thisArg)}exports.reduce=reduce;function channelMappingReduce(channels,mapping,f,init,thisArg){var r=init;channel_1.CHANNELS.forEach(function(channel){if(has(mapping,channel)){if(util_1.isArray(mapping[channel])){mapping[channel].forEach(function(fieldDef){r=f.call(thisArg,r,fieldDef,channel)})}else{r=f.call(thisArg,r,mapping[channel],channel)}}});return r}exports.channelMappingReduce=channelMappingReduce},{"./channel":245,"./util":295}],282:[function(require,module,exports){"use strict"},{}],283:[function(require,module,exports){"use strict";var aggregate_1=require("./aggregate");var scale_1=require("./scale");var type_1=require("./type");var util_1=require("./util");function field(fieldDef,opt){if(opt===void 0){opt={}}var field=fieldDef.field;var prefix=opt.prefix;var suffix=opt.suffix;if(isCount(fieldDef)){field="count"}else{var fn=opt.fn;if(!opt.nofn){if(fieldDef.bin){fn="bin";suffix=opt.binSuffix||(opt.scaleType===scale_1.ScaleType.ORDINAL?"range":"start")}else if(!opt.noAggregate&&fieldDef.aggregate){fn=String(fieldDef.aggregate)}else if(fieldDef.timeUnit){fn=String(fieldDef.timeUnit)}}if(!!fn){field=fn+"_"+field}}if(!!suffix){field=field+"_"+suffix}if(!!prefix){field=prefix+"_"+field}if(opt.datum){field='datum["'+field+'"]'}return field}exports.field=field;function _isFieldDimension(fieldDef){if(util_1.contains([type_1.NOMINAL,type_1.ORDINAL],fieldDef.type)){return true}else if(!!fieldDef.bin){return true}else if(fieldDef.type===type_1.TEMPORAL){return!!fieldDef.timeUnit}return false}function isDimension(fieldDef){return fieldDef&&fieldDef.field&&_isFieldDimension(fieldDef)}exports.isDimension=isDimension;function isMeasure(fieldDef){return fieldDef&&fieldDef.field&&!_isFieldDimension(fieldDef)}exports.isMeasure=isMeasure;function count(){return{field:"*",aggregate:aggregate_1.AggregateOp.COUNT,type:type_1.QUANTITATIVE}}exports.count=count;function isCount(fieldDef){return fieldDef.aggregate===aggregate_1.AggregateOp.COUNT}exports.isCount=isCount;function title(fieldDef,config){if(fieldDef.title!=null){return fieldDef.title}if(isCount(fieldDef)){return config.countTitle}var fn=fieldDef.aggregate||fieldDef.timeUnit||fieldDef.bin&&"bin";if(fn){return fn.toString().toUpperCase()+"("+fieldDef.field+")"}else{return fieldDef.field}}exports.title=title},{"./aggregate":242,"./scale":287,"./type":294,"./util":295}],284:[function(require,module,exports){"use strict";var datetime_1=require("./datetime");var fielddef_1=require("./fielddef");var timeunit_1=require("./timeunit");var util_1=require("./util");function isEqualFilter(filter){return filter&&!!filter.field&&filter.equal!==undefined}exports.isEqualFilter=isEqualFilter;function isRangeFilter(filter){if(filter&&!!filter.field){if(util_1.isArray(filter.range)&&filter.range.length===2){return true}}return false}exports.isRangeFilter=isRangeFilter;function isOneOfFilter(filter){return filter&&!!filter.field&&(util_1.isArray(filter.oneOf)||util_1.isArray(filter.in))}exports.isOneOfFilter=isOneOfFilter;function expression(filter){if(util_1.isString(filter)){return filter}else{var fieldExpr=filter.timeUnit?"time("+timeunit_1.fieldExpr(filter.timeUnit,filter.field)+")":fielddef_1.field(filter,{datum:true});if(isEqualFilter(filter)){return fieldExpr+"==="+valueExpr(filter.equal,filter.timeUnit)}else if(isOneOfFilter(filter)){var oneOf=filter.oneOf||filter["in"];return"indexof(["+oneOf.map(function(v){return valueExpr(v,filter.timeUnit)}).join(",")+"], "+fieldExpr+") !== -1"}else if(isRangeFilter(filter)){var lower=filter.range[0];var upper=filter.range[1];if(lower!==null&&upper!==null){return"inrange("+fieldExpr+", "+valueExpr(lower,filter.timeUnit)+", "+valueExpr(upper,filter.timeUnit)+")"}else if(lower!==null){return fieldExpr+" >= "+lower}else if(upper!==null){return fieldExpr+" <= "+upper}}}return undefined}exports.expression=expression;function valueExpr(v,timeUnit){if(datetime_1.isDateTime(v)){var expr=datetime_1.dateTimeExpr(v,true);return"time("+expr+")"}if(timeunit_1.isSingleTimeUnit(timeUnit)){var datetime={};datetime[timeUnit]=v;var expr=datetime_1.dateTimeExpr(datetime,true);return"time("+expr+")"}return JSON.stringify(v)}},{"./datetime":280,"./fielddef":283,"./timeunit":292,"./util":295}],285:[function(require,module,exports){"use strict";exports.defaultLegendConfig={orient:undefined}},{}],286:[function(require,module,exports){"use strict";(function(Mark){Mark[Mark["AREA"]="area"]="AREA";Mark[Mark["BAR"]="bar"]="BAR";Mark[Mark["LINE"]="line"]="LINE";Mark[Mark["POINT"]="point"]="POINT";Mark[Mark["TEXT"]="text"]="TEXT";Mark[Mark["TICK"]="tick"]="TICK";Mark[Mark["RULE"]="rule"]="RULE";Mark[Mark["CIRCLE"]="circle"]="CIRCLE";Mark[Mark["SQUARE"]="square"]="SQUARE";Mark[Mark["ERRORBAR"]="errorBar"]="ERRORBAR"})(exports.Mark||(exports.Mark={}));var Mark=exports.Mark;exports.AREA=Mark.AREA;exports.BAR=Mark.BAR;exports.LINE=Mark.LINE;exports.POINT=Mark.POINT;exports.TEXT=Mark.TEXT;exports.TICK=Mark.TICK;exports.RULE=Mark.RULE;exports.CIRCLE=Mark.CIRCLE;exports.SQUARE=Mark.SQUARE;exports.ERRORBAR=Mark.ERRORBAR;exports.PRIMITIVE_MARKS=[exports.AREA,exports.BAR,exports.LINE,exports.POINT,exports.TEXT,exports.TICK,exports.RULE,exports.CIRCLE,exports.SQUARE]},{}],287:[function(require,module,exports){"use strict";(function(ScaleType){ScaleType[ScaleType["LINEAR"]="linear"]="LINEAR";ScaleType[ScaleType["LOG"]="log"]="LOG";ScaleType[ScaleType["POW"]="pow"]="POW";ScaleType[ScaleType["SQRT"]="sqrt"]="SQRT";ScaleType[ScaleType["QUANTILE"]="quantile"]="QUANTILE";ScaleType[ScaleType["QUANTIZE"]="quantize"]="QUANTIZE";ScaleType[ScaleType["ORDINAL"]="ordinal"]="ORDINAL";ScaleType[ScaleType["TIME"]="time"]="TIME";ScaleType[ScaleType["UTC"]="utc"]="UTC"})(exports.ScaleType||(exports.ScaleType={}));var ScaleType=exports.ScaleType;(function(NiceTime){NiceTime[NiceTime["SECOND"]="second"]="SECOND";NiceTime[NiceTime["MINUTE"]="minute"]="MINUTE";NiceTime[NiceTime["HOUR"]="hour"]="HOUR";NiceTime[NiceTime["DAY"]="day"]="DAY";NiceTime[NiceTime["WEEK"]="week"]="WEEK";NiceTime[NiceTime["MONTH"]="month"]="MONTH";NiceTime[NiceTime["YEAR"]="year"]="YEAR"})(exports.NiceTime||(exports.NiceTime={}));var NiceTime=exports.NiceTime;(function(BandSize){BandSize[BandSize["FIT"]="fit"]="FIT"})(exports.BandSize||(exports.BandSize={}));var BandSize=exports.BandSize;exports.BANDSIZE_FIT=BandSize.FIT;exports.defaultScaleConfig={round:true,textBandWidth:90,bandSize:21,padding:.1,useRawDomain:false,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]};exports.defaultFacetScaleConfig={round:true,padding:16}},{}],288:[function(require,module,exports){"use strict";var aggregate_1=require("./aggregate");var timeunit_1=require("./timeunit");var type_1=require("./type");var vlEncoding=require("./encoding");var mark_1=require("./mark");exports.DELIM="|";exports.ASSIGN="=";exports.TYPE=",";exports.FUNC="_";function shorten(spec){return"mark"+exports.ASSIGN+spec.mark+exports.DELIM+shortenEncoding(spec.encoding)}exports.shorten=shorten;function parse(shorthand,data,config){var split=shorthand.split(exports.DELIM),mark=split.shift().split(exports.ASSIGN)[1].trim(),encoding=parseEncoding(split.join(exports.DELIM));var spec={mark:mark_1.Mark[mark],encoding:encoding};if(data!==undefined){spec.data=data}if(config!==undefined){spec.config=config}return spec}exports.parse=parse;function shortenEncoding(encoding){return vlEncoding.map(encoding,function(fieldDef,channel){return channel+exports.ASSIGN+shortenFieldDef(fieldDef)}).join(exports.DELIM)}exports.shortenEncoding=shortenEncoding;function parseEncoding(encodingShorthand){return encodingShorthand.split(exports.DELIM).reduce(function(m,e){var split=e.split(exports.ASSIGN),enctype=split[0].trim(),fieldDefShorthand=split[1];m[enctype]=parseFieldDef(fieldDefShorthand);return m},{})}exports.parseEncoding=parseEncoding;function shortenFieldDef(fieldDef){return(fieldDef.aggregate?fieldDef.aggregate+exports.FUNC:"")+(fieldDef.timeUnit?fieldDef.timeUnit+exports.FUNC:"")+(fieldDef.bin?"bin"+exports.FUNC:"")+(fieldDef.field||"")+exports.TYPE+type_1.SHORT_TYPE[fieldDef.type]}exports.shortenFieldDef=shortenFieldDef;function shortenFieldDefs(fieldDefs,delim){if(delim===void 0){delim=exports.DELIM}return fieldDefs.map(shortenFieldDef).join(delim)}exports.shortenFieldDefs=shortenFieldDefs;function parseFieldDef(fieldDefShorthand){var split=fieldDefShorthand.split(exports.TYPE);var fieldDef={field:split[0].trim(),type:type_1.TYPE_FROM_SHORT_TYPE[split[1].trim()]};for(var i=0;i<aggregate_1.AGGREGATE_OPS.length;i++){var a=aggregate_1.AGGREGATE_OPS[i];if(fieldDef.field.indexOf(a+"_")===0){fieldDef.field=fieldDef.field.substr(a.toString().length+1);if(a===aggregate_1.AggregateOp.COUNT&&fieldDef.field.length===0){fieldDef.field="*"}fieldDef.aggregate=a;break}}for(var i=0;i<timeunit_1.TIMEUNITS.length;i++){var tu=timeunit_1.TIMEUNITS[i];if(fieldDef.field&&fieldDef.field.indexOf(tu+"_")===0){fieldDef.field=fieldDef.field.substr(fieldDef.field.length+1);fieldDef.timeUnit=tu;break}}if(fieldDef.field&&fieldDef.field.indexOf("bin_")===0){fieldDef.field=fieldDef.field.substr(4);fieldDef.bin=true}return fieldDef}exports.parseFieldDef=parseFieldDef},{"./aggregate":242,"./encoding":281,"./mark":286,"./timeunit":292,"./type":294}],289:[function(require,module,exports){"use strict";(function(SortOrder){SortOrder[SortOrder["ASCENDING"]="ascending"]="ASCENDING";SortOrder[SortOrder["DESCENDING"]="descending"]="DESCENDING";SortOrder[SortOrder["NONE"]="none"]="NONE"})(exports.SortOrder||(exports.SortOrder={}));var SortOrder=exports.SortOrder;function isSortField(sort){return!!sort&&!!sort["field"]&&!!sort["op"]}exports.isSortField=isSortField},{}],290:[function(require,module,exports){"use strict";var config_1=require("./config");var encoding_1=require("./encoding");var mark_1=require("./mark");var stack_1=require("./stack");var channel_1=require("./channel");var vlEncoding=require("./encoding");var util_1=require("./util");function isSomeFacetSpec(spec){return spec["facet"]!==undefined}exports.isSomeFacetSpec=isSomeFacetSpec;function isExtendedUnitSpec(spec){if(isSomeUnitSpec(spec)){var hasRow=encoding_1.has(spec.encoding,channel_1.ROW);var hasColumn=encoding_1.has(spec.encoding,channel_1.COLUMN);return hasRow||hasColumn}return false}exports.isExtendedUnitSpec=isExtendedUnitSpec;function isUnitSpec(spec){if(isSomeUnitSpec(spec)){return!isExtendedUnitSpec(spec)}return false}exports.isUnitSpec=isUnitSpec;function isSomeUnitSpec(spec){return spec["mark"]!==undefined}exports.isSomeUnitSpec=isSomeUnitSpec;function isLayerSpec(spec){return spec["layers"]!==undefined}exports.isLayerSpec=isLayerSpec;function normalize(spec){if(isExtendedUnitSpec(spec)){return normalizeExtendedUnitSpec(spec)}if(isUnitSpec(spec)){return normalizeUnitSpec(spec)}return spec}exports.normalize=normalize;function normalizeExtendedUnitSpec(spec){var hasRow=encoding_1.has(spec.encoding,channel_1.ROW);var hasColumn=encoding_1.has(spec.encoding,channel_1.COLUMN);var encoding=util_1.duplicate(spec.encoding);delete encoding.column;delete encoding.row;return util_1.extend(spec.name?{name:spec.name}:{},spec.description?{description:spec.description}:{},{data:spec.data},spec.transform?{transform:spec.transform}:{},{facet:util_1.extend(hasRow?{row:spec.encoding.row}:{},hasColumn?{column:spec.encoding.column}:{}),spec:normalizeUnitSpec(util_1.extend(spec.width?{width:spec.width}:{},spec.height?{height:spec.height}:{},{mark:spec.mark,encoding:encoding},spec.config?{config:spec.config}:{}))},spec.config?{config:spec.config}:{})}exports.normalizeExtendedUnitSpec=normalizeExtendedUnitSpec;function normalizeUnitSpec(spec){var config=spec.config;var overlayConfig=config&&config.overlay;var overlayWithLine=overlayConfig&&spec.mark===mark_1.AREA&&util_1.contains([config_1.AreaOverlay.LINEPOINT,config_1.AreaOverlay.LINE],overlayConfig.area);var overlayWithPoint=overlayConfig&&(overlayConfig.line&&spec.mark===mark_1.LINE||overlayConfig.area===config_1.AreaOverlay.LINEPOINT&&spec.mark===mark_1.AREA);if(spec.mark===mark_1.ERRORBAR){return normalizeErrorBarUnitSpec(spec)}if(encoding_1.isRanged(spec.encoding)){return normalizeRangedUnitSpec(spec)}if(overlayWithPoint||overlayWithLine){return normalizeOverlay(spec,overlayWithPoint,overlayWithLine)}return spec}exports.normalizeUnitSpec=normalizeUnitSpec;function normalizeRangedUnitSpec(spec){if(spec.encoding){var hasX=encoding_1.has(spec.encoding,channel_1.X);var hasY=encoding_1.has(spec.encoding,channel_1.Y);var hasX2=encoding_1.has(spec.encoding,channel_1.X2);var hasY2=encoding_1.has(spec.encoding,channel_1.Y2);if(hasX2&&!hasX||hasY2&&!hasY){var normalizedSpec=util_1.duplicate(spec);if(hasX2&&!hasX){normalizedSpec.encoding.x=normalizedSpec.encoding.x2;delete normalizedSpec.encoding.x2}if(hasY2&&!hasY){normalizedSpec.encoding.y=normalizedSpec.encoding.y2;delete normalizedSpec.encoding.y2}return normalizedSpec}}return spec}exports.normalizeRangedUnitSpec=normalizeRangedUnitSpec;function normalizeErrorBarUnitSpec(spec){var layerSpec=util_1.extend(spec.name?{name:spec.name}:{},spec.description?{description:spec.description}:{},spec.data?{data:spec.data}:{},spec.transform?{transform:spec.transform}:{},spec.config?{config:spec.config}:{},{layers:[]});if(!spec.encoding){return layerSpec}if(spec.mark===mark_1.ERRORBAR){var ruleSpec={mark:mark_1.RULE,encoding:util_1.extend(spec.encoding.x?{x:util_1.duplicate(spec.encoding.x)}:{},spec.encoding.y?{y:util_1.duplicate(spec.encoding.y)}:{},spec.encoding.x2?{x2:util_1.duplicate(spec.encoding.x2)}:{},spec.encoding.y2?{y2:util_1.duplicate(spec.encoding.y2)}:{},{})};var lowerTickSpec={mark:mark_1.TICK,encoding:util_1.extend(spec.encoding.x?{x:util_1.duplicate(spec.encoding.x)}:{},spec.encoding.y?{y:util_1.duplicate(spec.encoding.y)}:{},spec.encoding.size?{size:util_1.duplicate(spec.encoding.size)}:{},{})};var upperTickSpec={mark:mark_1.TICK,encoding:util_1.extend({x:spec.encoding.x2?util_1.duplicate(spec.encoding.x2):util_1.duplicate(spec.encoding.x),y:spec.encoding.y2?util_1.duplicate(spec.encoding.y2):util_1.duplicate(spec.encoding.y)},spec.encoding.size?{size:util_1.duplicate(spec.encoding.size)}:{})};layerSpec.layers.push(normalizeUnitSpec(ruleSpec));layerSpec.layers.push(normalizeUnitSpec(lowerTickSpec));layerSpec.layers.push(normalizeUnitSpec(upperTickSpec))}return layerSpec}exports.normalizeErrorBarUnitSpec=normalizeErrorBarUnitSpec;function normalizeOverlay(spec,overlayWithPoint,overlayWithLine){var outerProps=["name","description","data","transform"];var baseSpec=util_1.omit(spec,outerProps.concat("config"));var baseConfig=util_1.duplicate(spec.config);delete baseConfig.overlay;var stacked=stack_1.stack(spec.mark,spec.encoding,spec.config&&spec.config.mark?spec.config.mark.stacked:undefined);var layerSpec=util_1.extend(util_1.pick(spec,outerProps),{layers:[baseSpec]},util_1.keys(baseConfig).length>0?{config:baseConfig}:{});if(overlayWithLine){var lineSpec=util_1.duplicate(baseSpec);lineSpec.mark=mark_1.LINE;var markConfig=util_1.extend({},config_1.defaultOverlayConfig.lineStyle,spec.config.overlay.lineStyle,stacked?{stacked:stacked.offset}:null);if(util_1.keys(markConfig).length>0){lineSpec.config={mark:markConfig}}layerSpec.layers.push(lineSpec)}if(overlayWithPoint){var pointSpec=util_1.duplicate(baseSpec);pointSpec.mark=mark_1.POINT;var markConfig=util_1.extend({},config_1.defaultOverlayConfig.pointStyle,spec.config.overlay.pointStyle,stacked?{stacked:stacked.offset}:null);if(util_1.keys(markConfig).length>0){pointSpec.config={mark:markConfig}}layerSpec.layers.push(pointSpec)}return layerSpec}exports.normalizeOverlay=normalizeOverlay;function accumulate(dict,fieldDefs){fieldDefs.forEach(function(fieldDef){var pureFieldDef=["field","type","value","timeUnit","bin","aggregate"].reduce(function(f,key){if(fieldDef[key]!==undefined){f[key]=fieldDef[key]}return f},{});var key=util_1.hash(pureFieldDef);dict[key]=dict[key]||fieldDef});return dict}function fieldDefIndex(spec,dict){if(dict===void 0){dict={}}if(isLayerSpec(spec)){spec.layers.forEach(function(layer){accumulate(dict,vlEncoding.fieldDefs(layer.encoding))})}else if(isSomeFacetSpec(spec)){accumulate(dict,vlEncoding.fieldDefs(spec.facet));fieldDefIndex(spec.spec,dict)}else{accumulate(dict,vlEncoding.fieldDefs(spec.encoding))}return dict}function fieldDefs(spec){return util_1.vals(fieldDefIndex(spec))}exports.fieldDefs=fieldDefs;function isStacked(spec){return stack_1.stack(spec.mark,spec.encoding,spec.config&&spec.config.mark?spec.config.mark.stacked:undefined)!==null}exports.isStacked=isStacked},{"./channel":245,"./config":278,"./encoding":281,"./mark":286,"./stack":291,"./util":295}],291:[function(require,module,exports){"use strict";var aggregate_1=require("./aggregate");var channel_1=require("./channel");var encoding_1=require("./encoding");var mark_1=require("./mark");var scale_1=require("./scale");var util_1=require("./util");(function(StackOffset){StackOffset[StackOffset["ZERO"]="zero"]="ZERO";StackOffset[StackOffset["CENTER"]="center"]="CENTER";StackOffset[StackOffset["NORMALIZE"]="normalize"]="NORMALIZE";StackOffset[StackOffset["NONE"]="none"]="NONE"})(exports.StackOffset||(exports.StackOffset={}));var StackOffset=exports.StackOffset;function stack(mark,encoding,stacked){if(util_1.contains([StackOffset.NONE,null,false],stacked)){return null}if(!util_1.contains([mark_1.BAR,mark_1.AREA,mark_1.POINT,mark_1.CIRCLE,mark_1.SQUARE,mark_1.LINE,mark_1.TEXT,mark_1.TICK],mark)){return null}if(!encoding_1.isAggregate(encoding)){return null}var stackByChannels=channel_1.STACK_GROUP_CHANNELS.reduce(function(sc,channel){if(encoding_1.has(encoding,channel)&&!encoding[channel].aggregate){sc.push(channel)}return sc},[]);if(stackByChannels.length===0){return null}var hasXField=encoding_1.has(encoding,channel_1.X);var hasYField=encoding_1.has(encoding,channel_1.Y);var xIsAggregate=hasXField&&!!encoding.x.aggregate;var yIsAggregate=hasYField&&!!encoding.y.aggregate;if(xIsAggregate!==yIsAggregate){var fieldChannel=xIsAggregate?channel_1.X:channel_1.Y;var fieldChannelAggregate=encoding[fieldChannel].aggregate;var fieldChannelScale=encoding[fieldChannel].scale;if(fieldChannelScale&&fieldChannelScale.type&&fieldChannelScale.type!==scale_1.ScaleType.LINEAR){console.warn("Cannot stack non-linear ("+fieldChannelScale.type+") scale");return null}if(util_1.contains(aggregate_1.SUM_OPS,fieldChannelAggregate)){if(util_1.contains([mark_1.BAR,mark_1.AREA],mark)){stacked=stacked===undefined?StackOffset.ZERO:stacked}}else{console.warn("Cannot stack when the aggregate function is "+fieldChannelAggregate+"(non-summative).");return null}if(!stacked){return null}return{groupbyChannel:xIsAggregate?hasYField?channel_1.Y:null:hasXField?channel_1.X:null,fieldChannel:fieldChannel,stackByChannels:stackByChannels,offset:stacked}}return null}exports.stack=stack},{"./aggregate":242,"./channel":245,"./encoding":281,"./mark":286,"./scale":287,"./util":295}],292:[function(require,module,exports){"use strict";var channel_1=require("./channel");var datetime_1=require("./datetime");var scale_1=require("./scale");var util_1=require("./util");(function(TimeUnit){TimeUnit[TimeUnit["YEAR"]="year"]="YEAR";TimeUnit[TimeUnit["MONTH"]="month"]="MONTH";TimeUnit[TimeUnit["DAY"]="day"]="DAY";TimeUnit[TimeUnit["DATE"]="date"]="DATE";TimeUnit[TimeUnit["HOURS"]="hours"]="HOURS";TimeUnit[TimeUnit["MINUTES"]="minutes"]="MINUTES";TimeUnit[TimeUnit["SECONDS"]="seconds"]="SECONDS";TimeUnit[TimeUnit["MILLISECONDS"]="milliseconds"]="MILLISECONDS";TimeUnit[TimeUnit["YEARMONTH"]="yearmonth"]="YEARMONTH";TimeUnit[TimeUnit["YEARMONTHDATE"]="yearmonthdate"]="YEARMONTHDATE";TimeUnit[TimeUnit["YEARMONTHDATEHOURS"]="yearmonthdatehours"]="YEARMONTHDATEHOURS";TimeUnit[TimeUnit["YEARMONTHDATEHOURSMINUTES"]="yearmonthdatehoursminutes"]="YEARMONTHDATEHOURSMINUTES";TimeUnit[TimeUnit["YEARMONTHDATEHOURSMINUTESSECONDS"]="yearmonthdatehoursminutesseconds"]="YEARMONTHDATEHOURSMINUTESSECONDS";TimeUnit[TimeUnit["MONTHDATE"]="monthdate"]="MONTHDATE";TimeUnit[TimeUnit["HOURSMINUTES"]="hoursminutes"]="HOURSMINUTES";TimeUnit[TimeUnit["HOURSMINUTESSECONDS"]="hoursminutesseconds"]="HOURSMINUTESSECONDS";TimeUnit[TimeUnit["MINUTESSECONDS"]="minutesseconds"]="MINUTESSECONDS";TimeUnit[TimeUnit["SECONDSMILLISECONDS"]="secondsmilliseconds"]="SECONDSMILLISECONDS";TimeUnit[TimeUnit["QUARTER"]="quarter"]="QUARTER";TimeUnit[TimeUnit["YEARQUARTER"]="yearquarter"]="YEARQUARTER";TimeUnit[TimeUnit["QUARTERMONTH"]="quartermonth"]="QUARTERMONTH";TimeUnit[TimeUnit["YEARQUARTERMONTH"]="yearquartermonth"]="YEARQUARTERMONTH"})(exports.TimeUnit||(exports.TimeUnit={}));var TimeUnit=exports.TimeUnit;exports.SINGLE_TIMEUNITS=[TimeUnit.YEAR,TimeUnit.QUARTER,TimeUnit.MONTH,TimeUnit.DAY,TimeUnit.DATE,TimeUnit.HOURS,TimeUnit.MINUTES,TimeUnit.SECONDS,TimeUnit.MILLISECONDS];var SINGLE_TIMEUNIT_INDEX=exports.SINGLE_TIMEUNITS.reduce(function(d,timeUnit){d[timeUnit]=true;return d},{});function isSingleTimeUnit(timeUnit){return!!SINGLE_TIMEUNIT_INDEX[timeUnit]}exports.isSingleTimeUnit=isSingleTimeUnit;function convert(unit,date){var result=new Date(0,0,1,0,0,0,0);exports.SINGLE_TIMEUNITS.forEach(function(singleUnit){if(containsTimeUnit(unit,singleUnit)){switch(singleUnit){case TimeUnit.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case TimeUnit.YEAR:result.setFullYear(date.getFullYear());break;case TimeUnit.QUARTER:result.setMonth(Math.floor(date.getMonth()/3)*3);break;case TimeUnit.MONTH:result.setMonth(date.getMonth());break;case TimeUnit.DATE:result.setDate(date.getDate());break;case TimeUnit.HOURS:result.setHours(date.getHours());break;case TimeUnit.MINUTES:result.setMinutes(date.getMinutes());break;case TimeUnit.SECONDS:result.setSeconds(date.getSeconds());break;case TimeUnit.MILLISECONDS:result.setMilliseconds(date.getMilliseconds());break}}});return result}exports.convert=convert;exports.MULTI_TIMEUNITS=[TimeUnit.YEARQUARTER,TimeUnit.YEARQUARTERMONTH,TimeUnit.YEARMONTH,TimeUnit.YEARMONTHDATE,TimeUnit.YEARMONTHDATEHOURS,TimeUnit.YEARMONTHDATEHOURSMINUTES,TimeUnit.YEARMONTHDATEHOURSMINUTESSECONDS,TimeUnit.QUARTERMONTH,TimeUnit.HOURSMINUTES,TimeUnit.HOURSMINUTESSECONDS,TimeUnit.MINUTESSECONDS,TimeUnit.SECONDSMILLISECONDS];var MULTI_TIMEUNIT_INDEX=exports.MULTI_TIMEUNITS.reduce(function(d,timeUnit){d[timeUnit]=true;return d},{});function isMultiTimeUnit(timeUnit){return!!MULTI_TIMEUNIT_INDEX[timeUnit]}exports.isMultiTimeUnit=isMultiTimeUnit;exports.TIMEUNITS=exports.SINGLE_TIMEUNITS.concat(exports.MULTI_TIMEUNITS);function containsTimeUnit(fullTimeUnit,timeUnit){var fullTimeUnitStr=fullTimeUnit.toString();var timeUnitStr=timeUnit.toString();var index=fullTimeUnitStr.indexOf(timeUnitStr);return index>-1&&(timeUnit!==TimeUnit.SECONDS||index===0||fullTimeUnitStr.charAt(index-1)!=="i")}exports.containsTimeUnit=containsTimeUnit;function defaultScaleType(timeUnit){switch(timeUnit){case TimeUnit.HOURS:case TimeUnit.DAY:case TimeUnit.MONTH:case TimeUnit.QUARTER:return scale_1.ScaleType.ORDINAL}return scale_1.ScaleType.TIME}exports.defaultScaleType=defaultScaleType;function fieldExpr(fullTimeUnit,field){var fieldRef='datum["'+field+'"]';function func(timeUnit){if(timeUnit===TimeUnit.QUARTER){return"floor(month("+fieldRef+")"+"/3)"}else{return timeUnit+"("+fieldRef+")"}}var d=exports.SINGLE_TIMEUNITS.reduce(function(_d,tu){if(containsTimeUnit(fullTimeUnit,tu)){_d[tu]=func(tu)}return _d},{});if(d.day&&util_1.keys(d).length>1){console.warn('Time unit "'+fullTimeUnit+'" is not supported. We are replacing it with ',(fullTimeUnit+"").replace("day","date")+".");delete d.day;d.date=func(TimeUnit.DATE)}return datetime_1.dateTimeExpr(d)}exports.fieldExpr=fieldExpr;function imputedDomain(timeUnit,channel){if(util_1.contains([channel_1.ROW,channel_1.COLUMN,channel_1.SHAPE,channel_1.COLOR],channel)){return null}switch(timeUnit){case TimeUnit.SECONDS:return util_1.range(0,60);case TimeUnit.MINUTES:return util_1.range(0,60);case TimeUnit.HOURS:return util_1.range(0,24);case TimeUnit.DAY:return util_1.range(0,7);case TimeUnit.DATE:return util_1.range(1,32);case TimeUnit.MONTH:return util_1.range(0,12);case TimeUnit.QUARTER:return[0,1,2,3]}return null}exports.imputedDomain=imputedDomain;function smallestUnit(timeUnit){if(!timeUnit){return undefined}if(containsTimeUnit(timeUnit,TimeUnit.SECONDS)){return"second"}if(containsTimeUnit(timeUnit,TimeUnit.MINUTES)){return"minute"}if(containsTimeUnit(timeUnit,TimeUnit.HOURS)){return"hour"}if(containsTimeUnit(timeUnit,TimeUnit.DAY)||containsTimeUnit(timeUnit,TimeUnit.DATE)){return"day"}if(containsTimeUnit(timeUnit,TimeUnit.MONTH)){return"month"}if(containsTimeUnit(timeUnit,TimeUnit.YEAR)){return"year"}return undefined}exports.smallestUnit=smallestUnit;function template(timeUnit,field,shortTimeLabels){if(!timeUnit){return undefined}var dateComponents=[];var template="";var hasYear=containsTimeUnit(timeUnit,TimeUnit.YEAR);if(containsTimeUnit(timeUnit,TimeUnit.QUARTER)){template="Q{{"+field+" | quarter}}"}if(containsTimeUnit(timeUnit,TimeUnit.MONTH)){dateComponents.push(shortTimeLabels!==false?"%b":"%B")}if(containsTimeUnit(timeUnit,TimeUnit.DAY)){dateComponents.push(shortTimeLabels?"%a":"%A")}else if(containsTimeUnit(timeUnit,TimeUnit.DATE)){dateComponents.push("%d"+(hasYear?",":""))}if(hasYear){dateComponents.push(shortTimeLabels?"%y":"%Y")}var timeComponents=[];if(containsTimeUnit(timeUnit,TimeUnit.HOURS)){timeComponents.push("%H")}if(containsTimeUnit(timeUnit,TimeUnit.MINUTES)){timeComponents.push("%M")}if(containsTimeUnit(timeUnit,TimeUnit.SECONDS)){timeComponents.push("%S")}if(containsTimeUnit(timeUnit,TimeUnit.MILLISECONDS)){timeComponents.push("%L")}var dateTimeComponents=[];if(dateComponents.length>0){dateTimeComponents.push(dateComponents.join(" "))}if(timeComponents.length>0){dateTimeComponents.push(timeComponents.join(":"))}if(dateTimeComponents.length>0){if(template){template+=" "}template+="{{"+field+" | time:'"+dateTimeComponents.join(" ")+"'}}"}return template||undefined}exports.template=template},{"./channel":245,"./datetime":280,"./scale":287,"./util":295}],293:[function(require,module,exports){"use strict"},{}],294:[function(require,module,exports){"use strict";(function(Type){Type[Type["QUANTITATIVE"]="quantitative"]="QUANTITATIVE";Type[Type["ORDINAL"]="ordinal"]="ORDINAL";Type[Type["TEMPORAL"]="temporal"]="TEMPORAL";Type[Type["NOMINAL"]="nominal"]="NOMINAL"})(exports.Type||(exports.Type={}));var Type=exports.Type;exports.QUANTITATIVE=Type.QUANTITATIVE;exports.ORDINAL=Type.ORDINAL;exports.TEMPORAL=Type.TEMPORAL;exports.NOMINAL=Type.NOMINAL;exports.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"};exports.TYPE_FROM_SHORT_TYPE={Q:exports.QUANTITATIVE,T:exports.TEMPORAL,O:exports.ORDINAL,N:exports.NOMINAL};function getFullName(type){var typeString=type;return exports.TYPE_FROM_SHORT_TYPE[typeString.toUpperCase()]||typeString.toLowerCase()}exports.getFullName=getFullName},{}],295:[function(require,module,exports){"use strict";var stringify=require("json-stable-stringify");var util_1=require("datalib/src/util");exports.keys=util_1.keys;exports.extend=util_1.extend;exports.duplicate=util_1.duplicate;exports.isArray=util_1.isArray;exports.vals=util_1.vals;exports.truncate=util_1.truncate;exports.toMap=util_1.toMap;exports.isObject=util_1.isObject;exports.isString=util_1.isString;exports.isNumber=util_1.isNumber;exports.isBoolean=util_1.isBoolean;var util_2=require("datalib/src/util");var util_3=require("datalib/src/util");function pick(obj,props){var copy={};props.forEach(function(prop){if(obj.hasOwnProperty(prop)){copy[prop]=obj[prop]}});return copy}exports.pick=pick;function range(start,stop,step){if(arguments.length<3){step=1;if(arguments.length<2){stop=start;start=0}}if((stop-start)/step===Infinity){throw new Error("Infinite range")}var range=[],i=-1,j;if(step<0){while((j=start+step*++i)>stop){range.push(j)}}else{while((j=start+step*++i)<stop){range.push(j)}}return range}exports.range=range;function omit(obj,props){var copy=util_2.duplicate(obj);props.forEach(function(prop){delete copy[prop]});return copy}exports.omit=omit;function hash(a){if(util_3.isString(a)||util_3.isNumber(a)||util_3.isBoolean(a)){return String(a)}return stringify(a)}exports.hash=hash;function contains(array,item){return array.indexOf(item)>-1}exports.contains=contains;function without(array,excludedItems){return array.filter(function(item){return!contains(excludedItems,item)})}exports.without=without;function union(array,other){return array.concat(without(other,array))}exports.union=union;function forEach(obj,f,thisArg){if(obj.forEach){obj.forEach.call(thisArg,f)}else{for(var k in obj){if(obj.hasOwnProperty(k)){f.call(thisArg,obj[k],k,obj)}}}}exports.forEach=forEach;function reduce(obj,f,init,thisArg){if(obj.reduce){return obj.reduce.call(thisArg,f,init)}else{for(var k in obj){if(obj.hasOwnProperty(k)){init=f.call(thisArg,init,obj[k],k,obj)}}return init}}exports.reduce=reduce;function map(obj,f,thisArg){if(obj.map){return obj.map.call(thisArg,f)}else{var output=[];for(var k in obj){if(obj.hasOwnProperty(k)){output.push(f.call(thisArg,obj[k],k,obj))}}return output}}exports.map=map;function some(arr,f){var i=0;for(var k=0;k<arr.length;k++){if(f(arr[k],k,i++)){return true}}return false}exports.some=some;function every(arr,f){var i=0;for(var k=0;k<arr.length;k++){if(!f(arr[k],k,i++)){return false}}return true}exports.every=every;function flatten(arrays){return[].concat.apply([],arrays)}exports.flatten=flatten;function mergeDeep(dest){var src=[];for(var _i=1;_i<arguments.length;_i++){src[_i-1]=arguments[_i]}for(var i=0;i<src.length;i++){dest=deepMerge_(dest,src[i])}return dest}exports.mergeDeep=mergeDeep;function deepMerge_(dest,src){if(typeof src!=="object"||src===null){return dest}for(var p in src){if(!src.hasOwnProperty(p)){continue}if(src[p]===undefined){continue}if(typeof src[p]!=="object"||src[p]===null){dest[p]=src[p]}else if(typeof dest[p]!=="object"||dest[p]===null){dest[p]=mergeDeep(src[p].constructor===Array?[]:{},src[p])}else{mergeDeep(dest[p],src[p])}}return dest}function unique(values,f){var results=[];var u={},v,i,n;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(v in u){continue}u[v]=1;results.push(values[i])}return results}exports.unique=unique;function warning(message){console.warn("[VL Warning]",message)}exports.warning=warning;function error(message){console.error("[VL Error]",message)}exports.error=error;function differ(dict,other){for(var key in dict){if(dict.hasOwnProperty(key)){if(other[key]&&dict[key]&&other[key]!==dict[key]){return true}}}return false}exports.differ=differ},{"datalib/src/util":239,"json-stable-stringify":240}],296:[function(require,module,exports){"use strict";var util_1=require("./util");var mark_1=require("./mark");exports.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]};exports.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:util_1.toMap(["row","column","x","y","size","color","detail"]),line:util_1.toMap(["row","column","x","y","color","detail"]),area:util_1.toMap(["row","column","x","y","color","detail"]),tick:util_1.toMap(["row","column","x","y","color","detail"]),circle:util_1.toMap(["row","column","x","y","color","size","detail"]),square:util_1.toMap(["row","column","x","y","color","size","detail"]),point:util_1.toMap(["row","column","x","y","color","size","detail","shape"]),text:util_1.toMap(["row","column","size","color","text"])};function getEncodingMappingError(spec,requiredChannelMap,supportedChannelMap){if(requiredChannelMap===void 0){requiredChannelMap=exports.DEFAULT_REQUIRED_CHANNEL_MAP}if(supportedChannelMap===void 0){supportedChannelMap=exports.DEFAULT_SUPPORTED_CHANNEL_TYPE}var mark=spec.mark;var encoding=spec.encoding;var requiredChannels=requiredChannelMap[mark];var supportedChannels=supportedChannelMap[mark];for(var i in requiredChannels){if(!(requiredChannels[i]in encoding)){return'Missing encoding channel "'+requiredChannels[i]+'" for mark "'+mark+'"'}}for(var channel in encoding){if(!supportedChannels[channel]){return'Encoding channel "'+channel+'" is not supported by mark type "'+mark+'"'}}if(mark===mark_1.BAR&&!encoding.x&&!encoding.y){return"Missing both x and y for bar"}return null}exports.getEncodingMappingError=getEncodingMappingError},{"./mark":286,"./util":295}],297:[function(require,module,exports){"use strict";var util_1=require("./util");function isUnionedDomain(domain){if(!util_1.isArray(domain)){return"fields"in domain}return false}exports.isUnionedDomain=isUnionedDomain;function isDataRefDomain(domain){if(!util_1.isArray(domain)){return"data"in domain}return false}exports.isDataRefDomain=isDataRefDomain},{"./util":295}],298:[function(require,module,exports){"use strict";exports.axis=require("./axis");exports.aggregate=require("./aggregate");exports.bin=require("./bin");exports.channel=require("./channel");exports.compile=require("./compile/compile").compile;exports.config=require("./config");exports.data=require("./data");exports.datetime=require("./datetime");exports.encoding=require("./encoding");exports.facet=require("./facet");exports.fieldDef=require("./fielddef");exports.legend=require("./legend");exports.mark=require("./mark");exports.scale=require("./scale");exports.shorthand=require("./shorthand");exports.sort=require("./sort");exports.spec=require("./spec");exports.stack=require("./stack");exports.timeUnit=require("./timeunit");exports.transform=require("./transform");exports.type=require("./type");exports.util=require("./util");exports.validate=require("./validate");exports.version=require("../package.json").version},{"../package.json":241,"./aggregate":242,"./axis":243,"./bin":244,"./channel":245,"./compile/compile":248,"./config":278,"./data":279,"./datetime":280,"./encoding":281,"./facet":282,"./fielddef":283,"./legend":285,"./mark":286,"./scale":287,"./shorthand":288,"./sort":289,"./spec":290,"./stack":291,"./timeunit":292,"./transform":293,"./type":294,"./util":295,"./validate":296}],299:[function(require,module,exports){var ts=Date.now();function write(msg){console.log("[Vega Log]",msg)}function error(msg){console.error("[Vega Err]",msg)}function debug(input,args){if(!debug.enable)return;var log=Function.prototype.bind.call(console.log,console);var state={prevTime:Date.now()-ts,stamp:input.stamp};if(input.add){state.add=input.add.length;state.mod=input.mod.length;state.rem=input.rem.length;state.reflow=!!input.reflow}log.apply(console,(args.push(JSON.stringify(state)),args));ts=Date.now()}module.exports={log:write,error:error,debug:(debug.enable=false,debug)}},{}],300:[function(require,module,exports){module.exports={path:require("./path"),render:require("./render"),Item:require("./util/Item"),bound:require("./util/bound"),Bounds:require("./util/Bounds"),canvas:require("./util/canvas"),Gradient:require("./util/Gradient"),toJSON:require("./util/scene").toJSON,fromJSON:require("./util/scene").fromJSON}},{"./path":302,"./render":322,"./util/Bounds":328,"./util/Gradient":330,"./util/Item":332,"./util/bound":333,"./util/canvas":334,"./util/scene":336}],301:[function(require,module,exports){var segmentCache={},bezierCache={},join=[].join;function segments(x,y,rx,ry,large,sweep,rotateX,ox,oy){var key=join.call(arguments);if(segmentCache[key]){return segmentCache[key]}var th=rotateX*(Math.PI/180);var sin_th=Math.sin(th);var cos_th=Math.cos(th);rx=Math.abs(rx);ry=Math.abs(ry);var px=cos_th*(ox-x)*.5+sin_th*(oy-y)*.5;var py=cos_th*(oy-y)*.5-sin_th*(ox-x)*.5;var pl=px*px/(rx*rx)+py*py/(ry*ry);if(pl>1){pl=Math.sqrt(pl);rx*=pl;ry*=pl}var a00=cos_th/rx;var a01=sin_th/rx;var a10=-sin_th/ry;var a11=cos_th/ry;var x0=a00*ox+a01*oy;var y0=a10*ox+a11*oy;var x1=a00*x+a01*y;var y1=a10*x+a11*y;var d=(x1-x0)*(x1-x0)+(y1-y0)*(y1-y0);var sfactor_sq=1/d-.25;if(sfactor_sq<0)sfactor_sq=0;var sfactor=Math.sqrt(sfactor_sq);if(sweep==large)sfactor=-sfactor;var xc=.5*(x0+x1)-sfactor*(y1-y0);var yc=.5*(y0+y1)+sfactor*(x1-x0);var th0=Math.atan2(y0-yc,x0-xc);var th1=Math.atan2(y1-yc,x1-xc);var th_arc=th1-th0;if(th_arc<0&&sweep===1){th_arc+=2*Math.PI}else if(th_arc>0&&sweep===0){th_arc-=2*Math.PI}var segs=Math.ceil(Math.abs(th_arc/(Math.PI*.5+.001)));var result=[];for(var i=0;i<segs;++i){var th2=th0+i*th_arc/segs;var th3=th0+(i+1)*th_arc/segs;result[i]=[xc,yc,th2,th3,rx,ry,sin_th,cos_th]}return segmentCache[key]=result}function bezier(params){var key=join.call(params);if(bezierCache[key]){return bezierCache[key]}var cx=params[0],cy=params[1],th0=params[2],th1=params[3],rx=params[4],ry=params[5],sin_th=params[6],cos_th=params[7];var a00=cos_th*rx;var a01=-sin_th*ry;var a10=sin_th*rx;var a11=cos_th*ry;var cos_th0=Math.cos(th0);var sin_th0=Math.sin(th0);var cos_th1=Math.cos(th1);var sin_th1=Math.sin(th1);var th_half=.5*(th1-th0);var sin_th_h2=Math.sin(th_half*.5);var t=8/3*sin_th_h2*sin_th_h2/Math.sin(th_half);var x1=cx+cos_th0-t*sin_th0;var y1=cy+sin_th0+t*cos_th0;var x3=cx+cos_th1;var y3=cy+sin_th1;var x2=x3+t*sin_th1;var y2=y3-t*cos_th1;return bezierCache[key]=[a00*x1+a01*y1,a10*x1+a11*y1,a00*x2+a01*y2,a10*x2+a11*y2,a00*x3+a01*y3,a10*x3+a11*y3]}module.exports={segments:segments,bezier:bezier,cache:{segments:segmentCache,bezier:bezierCache}}},{}],302:[function(require,module,exports){module.exports={parse:require("./parse"),render:require("./render")}},{"./parse":303,"./render":304}],303:[function(require,module,exports){var cmdlen={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},regexp=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];module.exports=function(pathstr){var result=[],path,curr,chunks,parsed,param,cmd,len,i,j,n,m;path=pathstr.slice().replace(regexp[0],"###$1").split(regexp[1]).slice(1);for(i=0,n=path.length;i<n;++i){curr=path[i];chunks=curr.slice(1).trim().replace(regexp[2],"$1###$2").split(regexp[3]);cmd=curr.charAt(0);parsed=[cmd];for(j=0,m=chunks.length;j<m;++j){if((param=+chunks[j])===param){parsed.push(param)}}len=cmdlen[cmd.toLowerCase()];if(parsed.length-1>len){for(j=1,m=parsed.length;j<m;j+=len){result.push([cmd].concat(parsed.slice(j,j+len)))}}else{result.push(parsed)}}return result}},{}],304:[function(require,module,exports){var arc=require("./arc");module.exports=function(g,path,l,t){var current,previous=null,x=0,y=0,controlX=0,controlY=0,tempX,tempY,tempControlX,tempControlY;if(l==null)l=0;if(t==null)t=0;g.beginPath();for(var i=0,len=path.length;i<len;++i){current=path[i];switch(current[0]){case"l":x+=current[1];y+=current[2];g.lineTo(x+l,y+t);break;case"L":x=current[1];y=current[2];g.lineTo(x+l,y+t);break;case"h":x+=current[1];g.lineTo(x+l,y+t);break;case"H":x=current[1];g.lineTo(x+l,y+t);break;case"v":y+=current[1];g.lineTo(x+l,y+t);break;case"V":y=current[1];g.lineTo(x+l,y+t);break;case"m":x+=current[1];y+=current[2];g.moveTo(x+l,y+t);break;case"M":x=current[1];y=current[2];g.moveTo(x+l,y+t);break;case"c":tempX=x+current[5];tempY=y+current[6];controlX=x+current[3];controlY=y+current[4];g.bezierCurveTo(x+current[1]+l,y+current[2]+t,controlX+l,controlY+t,tempX+l,tempY+t);x=tempX;y=tempY;break;case"C":x=current[5];y=current[6];controlX=current[3];controlY=current[4];g.bezierCurveTo(current[1]+l,current[2]+t,controlX+l,controlY+t,x+l,y+t);break;case"s":tempX=x+current[3];tempY=y+current[4];controlX=2*x-controlX;controlY=2*y-controlY;g.bezierCurveTo(controlX+l,controlY+t,x+current[1]+l,y+current[2]+t,tempX+l,tempY+t);controlX=x+current[1];controlY=y+current[2];x=tempX;y=tempY;break;case"S":tempX=current[3];tempY=current[4];controlX=2*x-controlX;controlY=2*y-controlY;g.bezierCurveTo(controlX+l,controlY+t,current[1]+l,current[2]+t,tempX+l,tempY+t);x=tempX;y=tempY;controlX=current[1];controlY=current[2];break;case"q":tempX=x+current[3];tempY=y+current[4];controlX=x+current[1];controlY=y+current[2];g.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x=tempX;y=tempY;break;case"Q":tempX=current[3];tempY=current[4];g.quadraticCurveTo(current[1]+l,current[2]+t,tempX+l,tempY+t);x=tempX;y=tempY;controlX=current[1];controlY=current[2];break;case"t":tempX=x+current[1];tempY=y+current[2];if(previous[0].match(/[QqTt]/)===null){controlX=x;controlY=y}else if(previous[0]==="t"){controlX=2*x-tempControlX;controlY=2*y-tempControlY}else if(previous[0]==="q"){controlX=2*x-controlX;controlY=2*y-controlY}tempControlX=controlX;tempControlY=controlY;g.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x=tempX;y=tempY;controlX=x+current[1];controlY=y+current[2];break;case"T":tempX=current[1];tempY=current[2];controlX=2*x-controlX;controlY=2*y-controlY;g.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x=tempX;y=tempY;break;case"a":drawArc(g,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+x+l,current[7]+y+t]);x+=current[6];y+=current[7];break;case"A":drawArc(g,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+l,current[7]+t]);x=current[6];y=current[7];break;case"z":case"Z":g.closePath();break}previous=current}};function drawArc(g,x,y,coords){var seg=arc.segments(coords[5],coords[6],coords[0],coords[1],coords[3],coords[4],coords[2],x,y);for(var i=0;i<seg.length;++i){var bez=arc.bezier(seg[i]);g.bezierCurveTo.apply(g,bez)}}},{"./arc":301}],305:[function(require,module,exports){function Handler(){this._active=null;this._handlers={}}var prototype=Handler.prototype;prototype.initialize=function(el,pad,obj){this._el=el;this._obj=obj||null;return this.padding(pad)};prototype.element=function(){return this._el};prototype.padding=function(pad){this._padding=pad||{top:0,left:0,bottom:0,right:0};return this};prototype.scene=function(scene){if(!arguments.length)return this._scene;this._scene=scene;return this};prototype.on=function(){};prototype.off=function(){};prototype.handlers=function(){var h=this._handlers,a=[],k;for(k in h){a.push.apply(a,h[k])}return a};prototype.eventName=function(name){var i=name.indexOf(".");return i<0?name:name.slice(0,i)};module.exports=Handler},{}],306:[function(require,module,exports){function Renderer(){this._el=null;this._bgcolor=null}var prototype=Renderer.prototype;prototype.initialize=function(el,width,height,padding){this._el=el;return this.resize(width,height,padding)};prototype.element=function(){return this._el};prototype.scene=function(){return this._el&&this._el.firstChild};prototype.background=function(bgcolor){if(arguments.length===0)return this._bgcolor;this._bgcolor=bgcolor;return this};prototype.resize=function(width,height,padding){this._width=width;this._height=height;this._padding=padding||{top:0,left:0,bottom:0,right:0};return this};prototype.render=function(){return this};module.exports=Renderer},{}],307:[function(require,module,exports){var DOM=require("../../util/dom"),Handler=require("../Handler"),marks=require("./marks");function CanvasHandler(){Handler.call(this);this._down=null;this._touch=null;this._first=true}var base=Handler.prototype;var prototype=CanvasHandler.prototype=Object.create(base);prototype.constructor=CanvasHandler;prototype.initialize=function(el,pad,obj){var canvas=this._canvas=DOM.find(el,"canvas");if(canvas){var that=this;this.events.forEach(function(type){canvas.addEventListener(type,function(evt){if(prototype[type]){prototype[type].call(that,evt)}else{that.fire(type,evt)}})})}return base.initialize.call(this,el,pad,obj)};prototype.canvas=function(){return this._canvas};prototype.context=function(){return this._canvas.getContext("2d")};prototype.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"];prototype.DOMMouseScroll=function(evt){this.fire("mousewheel",evt)};function move(moveEvent,overEvent,outEvent){return function(evt){var a=this._active,p=this.pickEvent(evt);if(p===a){this.fire(moveEvent,evt)}else{this.fire(outEvent,evt);this._active=p;this.fire(overEvent,evt);this.fire(moveEvent,evt)}}}function inactive(type){return function(evt){this.fire(type,evt);this._active=null}}prototype.mousemove=move("mousemove","mouseover","mouseout");prototype.dragover=move("dragover","dragenter","dragleave");prototype.mouseout=inactive("mouseout");prototype.dragleave=inactive("dragleave");prototype.mousedown=function(evt){this._down=this._active;this.fire("mousedown",evt)};prototype.click=function(evt){if(this._down===this._active){this.fire("click",evt);this._down=null}};prototype.touchstart=function(evt){this._touch=this.pickEvent(evt.changedTouches[0]);if(this._first){this._active=this._touch;this._first=false}this.fire("touchstart",evt,true)};prototype.touchmove=function(evt){this.fire("touchmove",evt,true)};prototype.touchend=function(evt){this.fire("touchend",evt,true);this._touch=null};prototype.fire=function(type,evt,touch){var a=touch?this._touch:this._active,h=this._handlers[type],i,len;if(h){evt.vegaType=type;for(i=0,len=h.length;i<len;++i){h[i].handler.call(this._obj,evt,a)}}};prototype.on=function(type,handler){var name=this.eventName(type),h=this._handlers;(h[name]||(h[name]=[])).push({type:type,handler:handler});return this};prototype.off=function(type,handler){var name=this.eventName(type),h=this._handlers[name],i;if(!h)return;for(i=h.length;--i>=0;){if(h[i].type!==type)continue;if(!handler||h[i].handler===handler)h.splice(i,1)}return this};prototype.pickEvent=function(evt){var rect=this._canvas.getBoundingClientRect(),pad=this._padding,x,y;return this.pick(this._scene,x=evt.clientX-rect.left,y=evt.clientY-rect.top,x-pad.left,y-pad.top)};prototype.pick=function(scene,x,y,gx,gy){var g=this.context(),mark=marks[scene.marktype];return mark.pick.call(this,g,scene,x,y,gx,gy)};module.exports=CanvasHandler},{"../../util/dom":335,"../Handler":305,"./marks":314}],308:[function(require,module,exports){var DOM=require("../../util/dom"),Bounds=require("../../util/Bounds"),ImageLoader=require("../../util/ImageLoader"),Canvas=require("../../util/canvas"),Renderer=require("../Renderer"),marks=require("./marks");function CanvasRenderer(loadConfig){Renderer.call(this);this._loader=new ImageLoader(loadConfig)}CanvasRenderer.RETINA=true;var base=Renderer.prototype;var prototype=CanvasRenderer.prototype=Object.create(base);prototype.constructor=CanvasRenderer;prototype.initialize=function(el,width,height,padding){this._canvas=Canvas.instance(width,height);if(el){DOM.clear(el,0).appendChild(this._canvas);this._canvas.setAttribute("class","marks")}return base.initialize.call(this,el,width,height,padding)};prototype.resize=function(width,height,padding){base.resize.call(this,width,height,padding);Canvas.resize(this._canvas,this._width,this._height,this._padding,CanvasRenderer.RETINA);return this};prototype.canvas=function(){return this._canvas};prototype.context=function(){return this._canvas?this._canvas.getContext("2d"):null};prototype.pendingImages=function(){return this._loader.pending()};function clipToBounds(g,items){if(!items)return null;var b=new Bounds,i,n,item,mark,group;for(i=0,n=items.length;i<n;++i){item=items[i];mark=item.mark;group=mark.group;item=marks[mark.marktype].nested?mark:item;b.union(translate(item.bounds,group));if(item["bounds:prev"]){b.union(translate(item["bounds:prev"],group))}}b.round();g.beginPath();g.rect(b.x1,b.y1,b.width(),b.height());g.clip();return b}function translate(bounds,group){if(group==null)return bounds;var b=bounds.clone();for(;group!=null;group=group.mark.group){b.translate(group.x||0,group.y||0)}return b}prototype.render=function(scene,items){var g=this.context(),p=this._padding,w=this._width+p.left+p.right,h=this._height+p.top+p.bottom,b;this._scene=scene;g.save();b=clipToBounds(g,items);this.clear(-p.left,-p.top,w,h);this.draw(g,scene,b);g.restore();this._scene=null;return this};prototype.draw=function(ctx,scene,bounds){var mark=marks[scene.marktype];mark.draw.call(this,ctx,scene,bounds)};prototype.clear=function(x,y,w,h){var g=this.context();g.clearRect(x,y,w,h);if(this._bgcolor!=null){g.fillStyle=this._bgcolor;g.fillRect(x,y,w,h)}};prototype.loadImage=function(uri){var renderer=this,scene=this._scene;return this._loader.loadImage(uri,function(){renderer.renderAsync(scene)})};prototype.renderAsync=function(scene){var renderer=this;if(renderer._async_id){clearTimeout(renderer._async_id)}renderer._async_id=setTimeout(function(){renderer.render(scene);delete renderer._async_id},10)};module.exports=CanvasRenderer},{"../../util/Bounds":328,"../../util/ImageLoader":331,"../../util/canvas":334,"../../util/dom":335,"../Renderer":306,"./marks":314}],309:[function(require,module,exports){module.exports={Handler:require("./CanvasHandler"),Renderer:require("./CanvasRenderer")}},{"./CanvasHandler":307,"./CanvasRenderer":308}],310:[function(require,module,exports){var util=require("./util");var halfpi=Math.PI/2;function path(g,o){var x=o.x||0,y=o.y||0,ir=o.innerRadius||0,or=o.outerRadius||0,sa=(o.startAngle||0)-halfpi,ea=(o.endAngle||0)-halfpi;g.beginPath();if(ir===0)g.moveTo(x,y);else g.arc(x,y,ir,sa,ea,0);g.arc(x,y,or,ea,sa,1);g.closePath()}module.exports={draw:util.drawAll(path),pick:util.pickPath(path)}},{"./util":321}],311:[function(require,module,exports){var util=require("./util"),parse=require("../../../path/parse"),render=require("../../../path/render"),areaPath=require("../../../util/svg").path.area;function path(g,items){var o=items[0],p=o.pathCache||(o.pathCache=parse(areaPath(items)));render(g,p)}function pick(g,scene,x,y,gx,gy){var items=scene.items,b=scene.bounds;if(!items||!items.length||b&&!b.contains(gx,gy)){return null}if(g.pixelratio!=null&&g.pixelratio!==1){x*=g.pixelratio;y*=g.pixelratio}return hit(g,items,x,y)?items[0]:null}var hit=util.testPath(path);module.exports={draw:util.drawOne(path),pick:pick,nested:true}},{"../../../path/parse":303,"../../../path/render":304,"../../../util/svg":337,"./util":321}],312:[function(require,module,exports){var util=require("./util"),EMPTY=[];function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var groups=scene.items,renderer=this,group,items,axes,legends,gx,gy,w,h,opac,i,n,j,m;for(i=0,n=groups.length;i<n;++i){group=groups[i];axes=group.axisItems||EMPTY;items=group.items||EMPTY;legends=group.legendItems||EMPTY;gx=group.x||0;gy=group.y||0;w=group.width||0;h=group.height||0;if(group.stroke||group.fill){opac=group.opacity==null?1:group.opacity;if(opac>0){if(group.fill&&util.fill(g,group,opac)){g.fillRect(gx,gy,w,h)}if(group.stroke&&util.stroke(g,group,opac)){g.strokeRect(gx,gy,w,h)}}}g.save();g.translate(gx,gy);if(group.clip){g.beginPath();g.rect(0,0,w,h);g.clip()}if(bounds)bounds.translate(-gx,-gy);for(j=0,m=axes.length;j<m;++j){if(axes[j].layer==="back"){renderer.draw(g,axes[j],bounds)}}for(j=0,m=items.length;j<m;++j){renderer.draw(g,items[j],bounds)}for(j=0,m=axes.length;j<m;++j){if(axes[j].layer!=="back"){renderer.draw(g,axes[j],bounds)}}for(j=0,m=legends.length;j<m;++j){renderer.draw(g,legends[j],bounds)}if(bounds)bounds.translate(gx,gy);g.restore()}}function pick(g,scene,x,y,gx,gy){if(scene.bounds&&!scene.bounds.contains(gx,gy)){return null}var groups=scene.items||EMPTY,subscene,group,axes,items,legends,hits,dx,dy,i,j,b;for(i=groups.length;--i>=0;){group=groups[i];b=group.bounds;if(b&&!b.contains(gx,gy))continue;axes=group.axisItems||EMPTY;items=group.items||EMPTY;legends=group.legendItems||EMPTY;dx=group.x||0;dy=group.y||0;g.save();g.translate(dx,dy);dx=gx-dx;dy=gy-dy;for(j=legends.length;--j>=0;){subscene=legends[j];if(subscene.interactive!==false){hits=this.pick(subscene,x,y,dx,dy);if(hits){g.restore();return hits}}}for(j=axes.length;--j>=0;){subscene=axes[j];if(subscene.interactive!==false&&subscene.layer!=="back"){hits=this.pick(subscene,x,y,dx,dy);if(hits){g.restore();return hits}}}for(j=items.length;--j>=0;){subscene=items[j];if(subscene.interactive!==false){hits=this.pick(subscene,x,y,dx,dy);if(hits){g.restore();return hits}}}for(j=axes.length;--j>=0;){subscene=axes[j];if(subscene.interative!==false&&subscene.layer==="back"){hits=this.pick(subscene,x,y,dx,dy);if(hits){g.restore();return hits}}}g.restore();if(scene.interactive!==false&&(group.fill||group.stroke)&&dx>=0&&dx<=group.width&&dy>=0&&dy<=group.height){return group}}return null}module.exports={draw:draw,pick:pick}},{"./util":321}],313:[function(require,module,exports){var util=require("./util");function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var renderer=this,items=scene.items,o;for(var i=0,len=items.length;i<len;++i){o=items[i];if(bounds&&!bounds.intersects(o.bounds))continue;if(!(o.image&&o.image.url===o.url)){o.image=renderer.loadImage(o.url);o.image.url=o.url}var x=o.x||0,y=o.y||0,w=o.width||o.image&&o.image.width||0,h=o.height||o.image&&o.image.height||0,opac;x=x-(o.align==="center"?w/2:o.align==="right"?w:0);y=y-(o.baseline==="middle"?h/2:o.baseline==="bottom"?h:0);if(o.image.loaded){g.globalAlpha=(opac=o.opacity)!=null?opac:1;g.drawImage(o.image,x,y,w,h)}}}module.exports={draw:draw,pick:util.pick()}},{"./util":321}],314:[function(require,module,exports){module.exports={arc:require("./arc"),area:require("./area"),group:require("./group"),image:require("./image"),line:require("./line"),path:require("./path"),rect:require("./rect"),rule:require("./rule"),symbol:require("./symbol"),text:require("./text")}},{"./arc":310,"./area":311,"./group":312,"./image":313,"./line":315,"./path":316,"./rect":317,"./rule":318,"./symbol":319,"./text":320}],315:[function(require,module,exports){var util=require("./util"),parse=require("../../../path/parse"),render=require("../../../path/render"),linePath=require("../../../util/svg").path.line;function path(g,items){var o=items[0],p=o.pathCache||(o.pathCache=parse(linePath(items)));render(g,p)}function pick(g,scene,x,y,gx,gy){var items=scene.items,b=scene.bounds;if(!items||!items.length||b&&!b.contains(gx,gy)){return null}if(g.pixelratio!=null&&g.pixelratio!==1){x*=g.pixelratio;y*=g.pixelratio}return hit(g,items,x,y)?items[0]:null}var hit=util.testPath(path,false);module.exports={draw:util.drawOne(path),pick:pick,nested:true}},{"../../../path/parse":303,"../../../path/render":304,"../../../util/svg":337,"./util":321}],316:[function(require,module,exports){var util=require("./util"),parse=require("../../../path/parse"),render=require("../../../path/render");function path(g,o){if(o.path==null)return true;var p=o.pathCache||(o.pathCache=parse(o.path));render(g,p,o.x,o.y)}module.exports={draw:util.drawAll(path),pick:util.pickPath(path)}},{"../../../path/parse":303,"../../../path/render":304,"./util":321}],317:[function(require,module,exports){var util=require("./util");function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var items=scene.items,o,opac,x,y,w,h;for(var i=0,len=items.length;i<len;++i){o=items[i];if(bounds&&!bounds.intersects(o.bounds))continue;opac=o.opacity==null?1:o.opacity;if(opac===0)continue;x=o.x||0;y=o.y||0;w=o.width||0;h=o.height||0;if(o.fill&&util.fill(g,o,opac)){g.fillRect(x,y,w,h)}if(o.stroke&&util.stroke(g,o,opac)){g.strokeRect(x,y,w,h)}}}module.exports={draw:draw,pick:util.pick()}},{"./util":321}],318:[function(require,module,exports){var util=require("./util");function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var items=scene.items,o,opac,x1,y1,x2,y2;for(var i=0,len=items.length;i<len;++i){o=items[i];if(bounds&&!bounds.intersects(o.bounds))continue;opac=o.opacity==null?1:o.opacity;if(opac===0)continue;x1=o.x||0;y1=o.y||0;x2=o.x2!=null?o.x2:x1;y2=o.y2!=null?o.y2:y1;if(o.stroke&&util.stroke(g,o,opac)){g.beginPath();g.moveTo(x1,y1);g.lineTo(x2,y2);g.stroke()}}}function stroke(g,o){var x1=o.x||0,y1=o.y||0,x2=o.x2!=null?o.x2:x1,y2=o.y2!=null?o.y2:y1,lw=o.strokeWidth,lc=o.strokeCap;g.lineWidth=lw!=null?lw:1;g.lineCap=lc!=null?lc:"butt";g.beginPath();g.moveTo(x1,y1);g.lineTo(x2,y2)}function hit(g,o,x,y){if(!g.isPointInStroke)return false;stroke(g,o);return g.isPointInStroke(x,y)}module.exports={draw:draw,pick:util.pick(hit)}},{"./util":321}],319:[function(require,module,exports){var util=require("./util"),parse=require("../../../path/parse"),render=require("../../../path/render");var sqrt3=Math.sqrt(3),tan30=Math.tan(30*Math.PI/180);function path(g,o){var size=o.size!=null?o.size:100,x=o.x,y=o.y,r,t,rx,ry;g.beginPath();if(o.shape==null||o.shape==="circle"){r=Math.sqrt(size/Math.PI);g.arc(x,y,r,0,2*Math.PI,0);g.closePath();return}switch(o.shape){case"cross":r=Math.sqrt(size/5)/2;t=3*r;g.moveTo(x-t,y-r);g.lineTo(x-r,y-r);g.lineTo(x-r,y-t);g.lineTo(x+r,y-t);g.lineTo(x+r,y-r);g.lineTo(x+t,y-r);g.lineTo(x+t,y+r);g.lineTo(x+r,y+r);g.lineTo(x+r,y+t);g.lineTo(x-r,y+t);g.lineTo(x-r,y+r);g.lineTo(x-t,y+r);break;case"diamond":ry=Math.sqrt(size/(2*tan30));rx=ry*tan30;g.moveTo(x,y-ry);g.lineTo(x+rx,y);g.lineTo(x,y+ry);g.lineTo(x-rx,y);break;case"square":t=Math.sqrt(size);r=t/2;g.rect(x-r,y-r,t,t);break;case"triangle-down":rx=Math.sqrt(size/sqrt3);ry=rx*sqrt3/2;g.moveTo(x,y+ry);g.lineTo(x+rx,y-ry);g.lineTo(x-rx,y-ry);break;case"triangle-up":rx=Math.sqrt(size/sqrt3);ry=rx*sqrt3/2;g.moveTo(x,y-ry);g.lineTo(x+rx,y+ry);g.lineTo(x-rx,y+ry);break;default:var pathArray=resize(parse(o.shape),size);render(g,pathArray,x,y)}g.closePath()}function resize(path,size){var sz=Math.sqrt(size),i,n,j,m,curr;for(i=0,n=path.length;i<n;++i){for(curr=path[i],j=1,m=curr.length;j<m;++j){curr[j]*=sz}}return path}module.exports={draw:util.drawAll(path),pick:util.pickPath(path)}},{"../../../path/parse":303,"../../../path/render":304,"./util":321}],320:[function(require,module,exports){var Bounds=require("../../../util/Bounds"),textBounds=require("../../../util/bound").text,text=require("../../../util/text"),util=require("./util"),tempBounds=new Bounds;function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var items=scene.items,o,opac,x,y,r,t,str;for(var i=0,len=items.length;i<len;++i){o=items[i];if(bounds&&!bounds.intersects(o.bounds))continue;str=text.value(o.text);if(!str)continue;opac=o.opacity==null?1:o.opacity;if(opac===0)continue;g.font=text.font(o);g.textAlign=o.align||"left";x=o.x||0;y=o.y||0;if(r=o.radius){t=(o.theta||0)-Math.PI/2;x+=r*Math.cos(t);y+=r*Math.sin(t)}if(o.angle){g.save();g.translate(x,y);g.rotate(o.angle*Math.PI/180);x=y=0}x+=o.dx||0;y+=(o.dy||0)+text.offset(o);if(o.fill&&util.fill(g,o,opac)){g.fillText(str,x,y)}if(o.stroke&&util.stroke(g,o,opac)){g.strokeText(str,x,y)}if(o.angle)g.restore()}}function hit(g,o,x,y,gx,gy){if(o.fontSize<=0)return false;if(!o.angle)return true;var b=textBounds(o,tempBounds,true),a=-o.angle*Math.PI/180,cos=Math.cos(a),sin=Math.sin(a),ox=o.x,oy=o.y,px=cos*gx-sin*gy+(ox-ox*cos+oy*sin),py=sin*gx+cos*gy+(oy-ox*sin-oy*cos);return b.contains(px,py)}module.exports={draw:draw,pick:util.pick(hit)}},{"../../../util/Bounds":328,"../../../util/bound":333,"../../../util/text":338,"./util":321}],321:[function(require,module,exports){function drawPathOne(path,g,o,items){if(path(g,items))return;var opac=o.opacity==null?1:o.opacity;if(opac===0)return;if(o.fill&&fill(g,o,opac)){g.fill()}if(o.stroke&&stroke(g,o,opac)){g.stroke()}}function drawPathAll(path,g,scene,bounds){var i,len,item;for(i=0,len=scene.items.length;i<len;++i){item=scene.items[i];if(!bounds||bounds.intersects(item.bounds)){drawPathOne(path,g,item,item)}}}function drawAll(pathFunc){return function(g,scene,bounds){drawPathAll(pathFunc,g,scene,bounds)}}function drawOne(pathFunc){return function(g,scene,bounds){if(!scene.items.length)return;if(!bounds||bounds.intersects(scene.bounds)){drawPathOne(pathFunc,g,scene.items[0],scene.items)}}}var trueFunc=function(){return true};function pick(test){if(!test)test=trueFunc;return function(g,scene,x,y,gx,gy){if(!scene.items.length)return null;var o,b,i;if(g.pixelratio!=null&&g.pixelratio!==1){x*=g.pixelratio;y*=g.pixelratio}for(i=scene.items.length;--i>=0;){o=scene.items[i];b=o.bounds;if(b&&!b.contains(gx,gy)||!b)continue;if(test(g,o,x,y,gx,gy))return o}return null}}function testPath(path,filled){return function(g,o,x,y){var item=Array.isArray(o)?o[0]:o,fill=filled==null?item.fill:filled,stroke=item.stroke&&g.isPointInStroke,lw,lc;if(stroke){lw=item.strokeWidth;lc=item.strokeCap;g.lineWidth=lw!=null?lw:1;g.lineCap=lc!=null?lc:"butt"}return path(g,o)?false:fill&&g.isPointInPath(x,y)||stroke&&g.isPointInStroke(x,y)}}function pickPath(path){return pick(testPath(path))}function fill(g,o,opacity){opacity*=o.fillOpacity==null?1:o.fillOpacity;if(opacity>0){g.globalAlpha=opacity;g.fillStyle=color(g,o,o.fill);return true}else{return false}}function stroke(g,o,opacity){var lw=(lw=o.strokeWidth)!=null?lw:1,lc;if(lw<=0)return false;opacity*=o.strokeOpacity==null?1:o.strokeOpacity;if(opacity>0){g.globalAlpha=opacity;g.strokeStyle=color(g,o,o.stroke);g.lineWidth=lw;g.lineCap=(lc=o.strokeCap)!=null?lc:"butt";g.vgLineDash(o.strokeDash||null);g.vgLineDashOffset(o.strokeDashOffset||0);return true}else{return false}}function color(g,o,value){return value.id?gradient(g,value,o.bounds):value}function gradient(g,p,b){var w=b.width(),h=b.height(),x1=b.x1+p.x1*w,y1=b.y1+p.y1*h,x2=b.x1+p.x2*w,y2=b.y1+p.y2*h,grad=g.createLinearGradient(x1,y1,x2,y2),stop=p.stops,i,n;for(i=0,n=stop.length;i<n;++i){grad.addColorStop(stop[i].offset,stop[i].color)}return grad}module.exports={drawOne:drawOne,drawAll:drawAll,pick:pick,pickPath:pickPath,testPath:testPath,stroke:stroke,fill:fill,color:color,gradient:gradient}},{}],322:[function(require,module,exports){module.exports={canvas:require("./canvas"),svg:require("./svg")}},{"./canvas":309,"./svg":326}],323:[function(require,module,exports){var DOM=require("../../util/dom"),Handler=require("../Handler");function SVGHandler(){Handler.call(this)}var base=Handler.prototype;var prototype=SVGHandler.prototype=Object.create(base);prototype.constructor=SVGHandler;prototype.initialize=function(el,pad,obj){this._svg=DOM.find(el,"svg");return base.initialize.call(this,el,pad,obj)};prototype.svg=function(){return this._svg};prototype.listener=function(handler){var that=this;return function(evt){var target=evt.target,item=target.__data__;evt.vegaType=evt.type;item=Array.isArray(item)?item[0]:item;handler.call(that._obj,evt,item)}};prototype.on=function(type,handler){var name=this.eventName(type),svg=this._svg,h=this._handlers,x={type:type,handler:handler,listener:this.listener(handler)};(h[name]||(h[name]=[])).push(x);svg.addEventListener(name,x.listener);return this};prototype.off=function(type,handler){var name=this.eventName(type),svg=this._svg,h=this._handlers[name],i;if(!h)return;for(i=h.length;--i>=0;){if(h[i].type===type&&!handler||h[i].handler===handler){svg.removeEventListener(name,h[i].listener);h.splice(i,1)}}return this};module.exports=SVGHandler},{"../../util/dom":335,"../Handler":305}],324:[function(require,module,exports){var ImageLoader=require("../../util/ImageLoader"),Renderer=require("../Renderer"),text=require("../../util/text"),DOM=require("../../util/dom"),SVG=require("../../util/svg"),ns=SVG.metadata.xmlns,marks=require("./marks");function SVGRenderer(loadConfig){Renderer.call(this);this._loader=new ImageLoader(loadConfig);this._dirtyID=0}var base=Renderer.prototype;var prototype=SVGRenderer.prototype=Object.create(base);prototype.constructor=SVGRenderer;prototype.initialize=function(el,width,height,padding){if(el){this._svg=DOM.child(el,0,"svg",ns,"marks");DOM.clear(el,1);this._root=DOM.child(this._svg,0,"g",ns);DOM.clear(this._svg,1)}this._defs={clip_id:1,gradient:{},clipping:{}};this.background(this._bgcolor);return base.initialize.call(this,el,width,height,padding)};prototype.background=function(bgcolor){if(arguments.length&&this._svg){this._svg.style.setProperty("background-color",bgcolor)}return base.background.apply(this,arguments)};prototype.resize=function(width,height,padding){base.resize.call(this,width,height,padding);if(this._svg){var w=this._width,h=this._height,p=this._padding;this._svg.setAttribute("width",w+p.left+p.right);this._svg.setAttribute("height",h+p.top+p.bottom);this._root.setAttribute("transform","translate("+p.left+","+p.top+")")}return this};prototype.svg=function(){if(!this._svg)return null;var attr={class:"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var key in SVG.metadata){attr[key]=SVG.metadata[key]}return DOM.openTag("svg",attr)+this._svg.innerHTML+DOM.closeTag("svg")};prototype.imageURL=function(url){return this._loader.imageURL(url)};prototype.render=function(scene,items){if(this._dirtyCheck(items)){if(this._dirtyAll)this._resetDefs();this.draw(this._root,scene,-1);DOM.clear(this._root,1)}this.updateDefs();return this};prototype.draw=function(el,scene,index){this.drawMark(el,scene,index,marks[scene.marktype])};prototype.updateDefs=function(){var svg=this._svg,defs=this._defs,el=defs.el,index=0,id;for(id in defs.gradient){if(!el)el=defs.el=DOM.child(svg,0,"defs",ns);updateGradient(el,defs.gradient[id],index++)}for(id in defs.clipping){if(!el)el=defs.el=DOM.child(svg,0,"defs",ns);updateClipping(el,defs.clipping[id],index++)}if(el){if(index===0){svg.removeChild(el);defs.el=null}else{DOM.clear(el,index)}}};function updateGradient(el,grad,index){var i,n,stop;el=DOM.child(el,index,"linearGradient",ns);el.setAttribute("id",grad.id);el.setAttribute("x1",grad.x1);el.setAttribute("x2",grad.x2);el.setAttribute("y1",grad.y1);el.setAttribute("y2",grad.y2);for(i=0,n=grad.stops.length;i<n;++i){stop=DOM.child(el,i,"stop",ns);stop.setAttribute("offset",grad.stops[i].offset);stop.setAttribute("stop-color",grad.stops[i].color)}DOM.clear(el,i)}function updateClipping(el,clip,index){var rect;el=DOM.child(el,index,"clipPath",ns);el.setAttribute("id",clip.id);rect=DOM.child(el,0,"rect",ns);rect.setAttribute("x",0);rect.setAttribute("y",0);rect.setAttribute("width",clip.width);rect.setAttribute("height",clip.height)}prototype._resetDefs=function(){var def=this._defs;def.clip_id=1;def.gradient={};def.clipping={}};prototype.isDirty=function(item){return this._dirtyAll||item.dirty===this._dirtyID};prototype._dirtyCheck=function(items){this._dirtyAll=true;if(!items)return true;var id=++this._dirtyID,item,mark,type,mdef,i,n,o;for(i=0,n=items.length;i<n;++i){item=items[i];mark=item.mark;if(mark.marktype!==type){type=mark.marktype;mdef=marks[type]}if(item.status==="exit"){if(item._svg){if(mdef.nest&&item.mark.items.length){this._update(mdef,item._svg,item.mark.items[0]);o=item.mark.items[0];o._svg=item._svg;o._update=id}else{DOM.remove(item._svg)}item._svg=null}continue}item=mdef.nest?mark.items[0]:item;if(item._update===id){continue}else if(item._svg){this._update(mdef,item._svg,item)}else{this._dirtyAll=false;dirtyParents(item,id)}item._update=id}return!this._dirtyAll};function dirtyParents(item,id){for(;item&&item.dirty!==id;item=item.mark.group){item.dirty=id;if(item.mark&&item.mark.dirty!==id){item.mark.dirty=id}else return}}prototype.drawMark=function(el,scene,index,mdef){if(!this.isDirty(scene))return;var items=mdef.nest?scene.items&&scene.items.length?[scene.items[0]]:[]:scene.items||[],events=scene.interactive===false?"none":null,isGroup=mdef.tag==="g",className=DOM.cssClass(scene),p,i,n,c,d,insert;p=DOM.child(el,index+1,"g",ns,className);p.setAttribute("class",className);scene._svg=p;if(!isGroup&&events){p.style.setProperty("pointer-events",events)}for(i=0,n=items.length;i<n;++i){if(this.isDirty(d=items[i])){insert=!(this._dirtyAll||d._svg);c=bind(p,mdef,d,i,insert);this._update(mdef,c,d);if(isGroup){if(insert)this._dirtyAll=true;this._recurse(c,d);if(insert)this._dirtyAll=false}}}DOM.clear(p,i);return p};prototype._recurse=function(el,group){var items=group.items||[],legends=group.legendItems||[],axes=group.axisItems||[],idx=0,j,m;for(j=0,m=axes.length;j<m;++j){if(axes[j].layer==="back"){this.drawMark(el,axes[j],idx++,marks.group)}}for(j=0,m=items.length;j<m;++j){this.draw(el,items[j],idx++)}for(j=0,m=axes.length;j<m;++j){if(axes[j].layer!=="back"){this.drawMark(el,axes[j],idx++,marks.group)}}for(j=0,m=legends.length;j<m;++j){this.drawMark(el,legends[j],idx++,marks.group)}DOM.clear(el,1+idx)};function bind(el,mdef,item,index,insert){var node=DOM.child(el,index,mdef.tag,ns,null,insert);node.__data__=item;node.__values__={fill:"default"};if(mdef.tag==="g"){var bg=DOM.child(node,0,"rect",ns,"background");bg.__data__=item}return item._svg=node}var element=null,values=null;var mark_extras={group:function(mdef,el,item){element=el.childNodes[0];values=el.__values__;mdef.background(emit,item,this);var value=item.mark.interactive===false?"none":null;if(value!==values.events){element.style.setProperty("pointer-events",value);values.events=value}},text:function(mdef,el,item){var str=text.value(item.text);if(str!==values.text){el.textContent=str;values.text=str}str=text.font(item);if(str!==values.font){el.style.setProperty("font",str);values.font=str}}};prototype._update=function(mdef,el,item){element=el;values=el.__values__;mdef.attr(emit,item,this);var extra=mark_extras[mdef.type];if(extra)extra(mdef,el,item);this.style(element,item)};function emit(name,value,ns){if(value===values[name])return;if(value!=null){if(ns){element.setAttributeNS(ns,name,value)}else{element.setAttribute(name,value)}}else{if(ns){element.removeAttributeNS(ns,name)}else{element.removeAttribute(name)}}values[name]=value}prototype.style=function(el,o){if(o==null)return;var i,n,prop,name,value;for(i=0,n=SVG.styleProperties.length;i<n;++i){prop=SVG.styleProperties[i];value=o[prop];if(value===values[prop])continue;name=SVG.styles[prop];if(value==null){if(name==="fill"){el.style.setProperty(name,"none")}else{el.style.removeProperty(name)}}else{if(value.id){this._defs.gradient[value.id]=value;value="url("+href()+"#"+value.id+")"}el.style.setProperty(name,value+"")}values[prop]=value}};function href(){return typeof window!=="undefined"?window.location.href:""}module.exports=SVGRenderer},{"../../util/ImageLoader":331,"../../util/dom":335,"../../util/svg":337,"../../util/text":338,"../Renderer":306,"./marks":327}],325:[function(require,module,exports){var Renderer=require("../Renderer"),ImageLoader=require("../../util/ImageLoader"),SVG=require("../../util/svg"),text=require("../../util/text"),DOM=require("../../util/dom"),openTag=DOM.openTag,closeTag=DOM.closeTag,MARKS=require("./marks");function SVGStringRenderer(loadConfig){Renderer.call(this);this._loader=new ImageLoader(loadConfig);this._text={head:"",root:"",foot:"",defs:"",body:""};this._defs={clip_id:1,gradient:{},clipping:{}}}var base=Renderer.prototype;var prototype=SVGStringRenderer.prototype=Object.create(base);prototype.constructor=SVGStringRenderer;prototype.resize=function(width,height,padding){base.resize.call(this,width,height,padding);var p=this._padding,t=this._text;var attr={class:"marks",width:this._width+p.left+p.right,height:this._height+p.top+p.bottom};for(var key in SVG.metadata){attr[key]=SVG.metadata[key]}t.head=openTag("svg",attr);t.root=openTag("g",{transform:"translate("+p.left+","+p.top+")"});t.foot=closeTag("g")+closeTag("svg");return this};prototype.svg=function(){var t=this._text;return t.head+t.defs+t.root+t.body+t.foot};prototype.render=function(scene){this._text.body=this.mark(scene);this._text.defs=this.buildDefs();return this};prototype.reset=function(){this._defs.clip_id=0;return this};prototype.buildDefs=function(){var all=this._defs,defs="",i,id,def,stops;for(id in all.gradient){def=all.gradient[id];stops=def.stops;defs+=openTag("linearGradient",{id:id,x1:def.x1,x2:def.x2,y1:def.y1,y2:def.y2});for(i=0;i<stops.length;++i){defs+=openTag("stop",{offset:stops[i].offset,"stop-color":stops[i].color})+closeTag("stop")}defs+=closeTag("linearGradient")}for(id in all.clipping){def=all.clipping[id];defs+=openTag("clipPath",{id:id});defs+=openTag("rect",{x:0,y:0,width:def.width,height:def.height})+closeTag("rect");defs+=closeTag("clipPath")}return defs.length>0?openTag("defs")+defs+closeTag("defs"):""};prototype.imageURL=function(url){return this._loader.imageURL(url)};var object;function emit(name,value,ns,prefixed){object[prefixed||name]=value}prototype.attributes=function(attr,item){object={};attr(emit,item,this);return object};prototype.mark=function(scene){var mdef=MARKS[scene.marktype],tag=mdef.tag,attr=mdef.attr,nest=mdef.nest||false,data=nest?scene.items&&scene.items.length?[scene.items[0]]:[]:scene.items||[],defs=this._defs,str="",style,i,item;if(tag!=="g"&&scene.interactive===false){style='style="pointer-events: none;"'}str+=openTag("g",{class:DOM.cssClass(scene)},style);for(i=0;i<data.length;++i){item=data[i];style=tag!=="g"?styles(item,scene,tag,defs):null;str+=openTag(tag,this.attributes(attr,item),style);if(tag==="text"){str+=escape_text(text.value(item.text))}else if(tag==="g"){str+=openTag("rect",this.attributes(mdef.background,item),styles(item,scene,"bgrect",defs))+closeTag("rect");str+=this.markGroup(item)}str+=closeTag(tag)}return str+closeTag("g")};prototype.markGroup=function(scene){var str="",axes=scene.axisItems||[],items=scene.items||[],legends=scene.legendItems||[],j,m;for(j=0,m=axes.length;j<m;++j){if(axes[j].layer==="back"){str+=this.mark(axes[j])}}for(j=0,m=items.length;j<m;++j){str+=this.mark(items[j])}for(j=0,m=axes.length;j<m;++j){if(axes[j].layer!=="back"){str+=this.mark(axes[j])}}for(j=0,m=legends.length;j<m;++j){str+=this.mark(legends[j])}return str};function styles(o,mark,tag,defs){if(o==null)return"";var i,n,prop,name,value,s="";if(tag==="bgrect"&&mark.interactive===false){s+="pointer-events: none;"}if(tag==="text"){s+="font: "+text.font(o)+";"}for(i=0,n=SVG.styleProperties.length;i<n;++i){prop=SVG.styleProperties[i];name=SVG.styles[prop];value=o[prop];if(value==null){if(name==="fill"){s+=(s.length?" ":"")+"fill: none;"}}else{if(value.id){defs.gradient[value.id]=value;value="url(#"+value.id+")"}s+=(s.length?" ":"")+name+": "+value+";"}}return s?'style="'+s+'"':null}function escape_text(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}module.exports=SVGStringRenderer},{"../../util/ImageLoader":331,"../../util/dom":335,"../../util/svg":337,"../../util/text":338,"../Renderer":306,"./marks":327}],326:[function(require,module,exports){module.exports={Handler:require("./SVGHandler"),Renderer:require("./SVGRenderer"),string:{Renderer:require("./SVGStringRenderer")}}},{"./SVGHandler":323,"./SVGRenderer":324,"./SVGStringRenderer":325}],327:[function(require,module,exports){var text=require("../../util/text"),SVG=require("../../util/svg"),symbolTypes=SVG.symbolTypes,textAlign=SVG.textAlign,path=SVG.path;function translateItem(o){return translate(o.x||0,o.y||0)}function translate(x,y){return"translate("+x+","+y+")"}module.exports={arc:{tag:"path",type:"arc",attr:function(emit,o){emit("transform",translateItem(o));emit("d",path.arc(o))}},area:{tag:"path",type:"area",nest:true,attr:function(emit,o){var items=o.mark.items;if(items.length)emit("d",path.area(items))}},group:{tag:"g",type:"group",attr:function(emit,o,renderer){var id=null,defs,c;emit("transform",translateItem(o));if(o.clip){defs=renderer._defs;id=o.clip_id||(o.clip_id="clip"+defs.clip_id++);c=defs.clipping[id]||(defs.clipping[id]={id:id});c.width=o.width||0;c.height=o.height||0}emit("clip-path",id?"url(#"+id+")":null)},background:function(emit,o){emit("class","background");emit("width",o.width||0);emit("height",o.height||0)}},image:{tag:"image",type:"image",attr:function(emit,o,renderer){var x=o.x||0,y=o.y||0,w=o.width||0,h=o.height||0,url=renderer.imageURL(o.url);x=x-(o.align==="center"?w/2:o.align==="right"?w:0);y=y-(o.baseline==="middle"?h/2:o.baseline==="bottom"?h:0);emit("href",url,"http://www.w3.org/1999/xlink","xlink:href");emit("transform",translate(x,y));emit("width",w);emit("height",h)}},line:{tag:"path",type:"line",nest:true,attr:function(emit,o){var items=o.mark.items;if(items.length)emit("d",path.line(items))}},path:{tag:"path",type:"path",attr:function(emit,o){emit("transform",translateItem(o));emit("d",o.path)}},rect:{tag:"rect",type:"rect",nest:false,attr:function(emit,o){emit("transform",translateItem(o));emit("width",o.width||0);emit("height",o.height||0)}},rule:{tag:"line",type:"rule",attr:function(emit,o){emit("transform",translateItem(o));emit("x2",o.x2!=null?o.x2-(o.x||0):0);emit("y2",o.y2!=null?o.y2-(o.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(emit,o){var pathStr=!o.shape||symbolTypes[o.shape]?path.symbol(o):path.resize(o.shape,o.size);emit("transform",translateItem(o));emit("d",pathStr)}},text:{tag:"text",type:"text",nest:false,attr:function(emit,o){var dx=o.dx||0,dy=(o.dy||0)+text.offset(o),x=o.x||0,y=o.y||0,a=o.angle||0,r=o.radius||0,t;if(r){t=(o.theta||0)-Math.PI/2;x+=r*Math.cos(t);y+=r*Math.sin(t)}emit("text-anchor",textAlign[o.align]||"start");if(a){t=translate(x,y)+" rotate("+a+")";if(dx||dy)t+=" "+translate(dx,dy)}else{t=translate(x+dx,y+dy)}emit("transform",t)}}}},{"../../util/svg":337,"../../util/text":338}],328:[function(require,module,exports){function Bounds(b){this.clear();if(b)this.union(b)}var prototype=Bounds.prototype;prototype.clone=function(){return new Bounds(this)};prototype.clear=function(){this.x1=+Number.MAX_VALUE;this.y1=+Number.MAX_VALUE;this.x2=-Number.MAX_VALUE;this.y2=-Number.MAX_VALUE;return this};prototype.set=function(x1,y1,x2,y2){this.x1=x1;this.y1=y1;this.x2=x2;this.y2=y2;return this};prototype.add=function(x,y){if(x<this.x1)this.x1=x;if(y<this.y1)this.y1=y;if(x>this.x2)this.x2=x;if(y>this.y2)this.y2=y;return this};prototype.expand=function(d){this.x1-=d;this.y1-=d;this.x2+=d;this.y2+=d;return this};prototype.round=function(){this.x1=Math.floor(this.x1);this.y1=Math.floor(this.y1);this.x2=Math.ceil(this.x2);this.y2=Math.ceil(this.y2);return this};prototype.translate=function(dx,dy){this.x1+=dx;this.x2+=dx;this.y1+=dy;this.y2+=dy;return this};prototype.rotate=function(angle,x,y){var cos=Math.cos(angle),sin=Math.sin(angle),cx=x-x*cos+y*sin,cy=y-x*sin-y*cos,x1=this.x1,x2=this.x2,y1=this.y1,y2=this.y2;return this.clear().add(cos*x1-sin*y1+cx,sin*x1+cos*y1+cy).add(cos*x1-sin*y2+cx,sin*x1+cos*y2+cy).add(cos*x2-sin*y1+cx,sin*x2+cos*y1+cy).add(cos*x2-sin*y2+cx,sin*x2+cos*y2+cy)};prototype.union=function(b){if(b.x1<this.x1)this.x1=b.x1;if(b.y1<this.y1)this.y1=b.y1;if(b.x2>this.x2)this.x2=b.x2;if(b.y2>this.y2)this.y2=b.y2;return this};prototype.encloses=function(b){return b&&(this.x1<=b.x1&&this.x2>=b.x2&&this.y1<=b.y1&&this.y2>=b.y2)};prototype.alignsWith=function(b){return b&&(this.x1==b.x1||this.x2==b.x2||this.y1==b.y1||this.y2==b.y2)};prototype.intersects=function(b){return b&&!(this.x2<b.x1||this.x1>b.x2||this.y2<b.y1||this.y1>b.y2)};prototype.contains=function(x,y){return!(x<this.x1||x>this.x2||y<this.y1||y>this.y2)};prototype.width=function(){return this.x2-this.x1};prototype.height=function(){return this.y2-this.y1};module.exports=Bounds},{}],329:[function(require,module,exports){module.exports=function(b){function noop(){}function add(x,y){b.add(x,y)}return{bounds:function(_){if(!arguments.length)return b;return b=_,this},beginPath:noop,closePath:noop,moveTo:add,lineTo:add,quadraticCurveTo:function(x1,y1,x2,y2){b.add(x1,y1);b.add(x2,y2)},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){b.add(x1,y1);b.add(x2,y2);b.add(x3,y3)}}}},{}],330:[function(require,module,exports){var gradient_id=0;function Gradient(type){this.id="gradient_"+gradient_id++;this.type=type||"linear";this.stops=[];this.x1=0;this.x2=1;this.y1=0;this.y2=0}var prototype=Gradient.prototype;prototype.stop=function(offset,color){this.stops.push({offset:offset,color:color});return this};module.exports=Gradient},{}],331:[function(require,module,exports){(function(global){var load=require("datalib/src/import/load");function ImageLoader(loadConfig){this._pending=0;this._config=loadConfig||ImageLoader.Config}ImageLoader.Config=null;var prototype=ImageLoader.prototype;prototype.pending=function(){return this._pending};prototype.params=function(uri){var p={url:uri},k;for(k in this._config){p[k]=this._config[k]}return p};prototype.imageURL=function(uri){return load.sanitizeUrl(this.params(uri))};function browser(uri,callback){var url=load.sanitizeUrl(this.params(uri));if(!url){if(callback)callback(uri,null);return null}var loader=this,image=new Image;loader._pending+=1;image.onload=function(){loader._pending-=1;image.loaded=true;if(callback)callback(null,image)};image.src=url;return image}function server(uri,callback){var loader=this,image=new(typeof window!=="undefined"?window["canvas"]:typeof global!=="undefined"?global["canvas"]:null).Image;loader._pending+=1;load(this.params(uri),function(err,data){loader._pending-=1;if(err){if(callback)callback(err,null);return null}image.src=data;image.loaded=true;if(callback)callback(null,image)});return image}prototype.loadImage=function(uri,callback){return load.useXHR?browser.call(this,uri,callback):server.call(this,uri,callback)};module.exports=ImageLoader}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"datalib/src/import/load":25}],332:[function(require,module,exports){function Item(mark){this.mark=mark}var prototype=Item.prototype;prototype.hasPropertySet=function(name){var props=this.mark.def.properties;return props&&props[name]!=null};prototype.cousin=function(offset,index){if(offset===0)return this;offset=offset||-1;var mark=this.mark,group=mark.group,iidx=index==null?mark.items.indexOf(this):index,midx=group.items.indexOf(mark)+offset;return group.items[midx].items[iidx]};prototype.sibling=function(offset){if(offset===0)return this;offset=offset||-1;var mark=this.mark,iidx=mark.items.indexOf(this)+offset;return mark.items[iidx]};prototype.remove=function(){var item=this,list=item.mark.items,i=list.indexOf(item);if(i>=0){if(i===list.length-1){list.pop()}else{list.splice(i,1)}}return item};prototype.touch=function(){if(this.pathCache)this.pathCache=null};module.exports=Item},{}],333:[function(require,module,exports){var BoundsContext=require("./BoundsContext"),Bounds=require("./Bounds"),canvas=require("./canvas"),svg=require("./svg"),text=require("./text"),paths=require("../path"),parse=paths.parse,drawPath=paths.render,areaPath=svg.path.area,linePath=svg.path.line,halfpi=Math.PI/2,sqrt3=Math.sqrt(3),tan30=Math.tan(30*Math.PI/180),g2D=null,bc=BoundsContext();function context(){return g2D||(g2D=canvas.instance(1,1).getContext("2d"))}function strokeBounds(o,bounds){if(o.stroke&&o.opacity!==0&&o.stokeOpacity!==0){bounds.expand(o.strokeWidth!=null?o.strokeWidth:1)}return bounds}function pathBounds(o,path,bounds,x,y){if(path==null){bounds.set(0,0,0,0)}else{drawPath(bc.bounds(bounds),path,x,y);strokeBounds(o,bounds)}return bounds}function path(o,bounds){var p=o.path?o.pathCache||(o.pathCache=parse(o.path)):null;return pathBounds(o,p,bounds,o.x,o.y)}function area(mark,bounds){if(mark.items.length===0)return bounds;var items=mark.items,item=items[0],p=item.pathCache||(item.pathCache=parse(areaPath(items)));return pathBounds(item,p,bounds)}function line(mark,bounds){if(mark.items.length===0)return bounds;var items=mark.items,item=items[0],p=item.pathCache||(item.pathCache=parse(linePath(items)));return pathBounds(item,p,bounds)}function rect(o,bounds){var x,y;return strokeBounds(o,bounds.set(x=o.x||0,y=o.y||0,x+o.width||0,y+o.height||0))}function image(o,bounds){var x=o.x||0,y=o.y||0,w=o.width||0,h=o.height||0;x=x-(o.align==="center"?w/2:o.align==="right"?w:0);y=y-(o.baseline==="middle"?h/2:o.baseline==="bottom"?h:0);return bounds.set(x,y,x+w,y+h)}function rule(o,bounds){var x1,y1;return strokeBounds(o,bounds.set(x1=o.x||0,y1=o.y||0,o.x2!=null?o.x2:x1,o.y2!=null?o.y2:y1))}function arc(o,bounds){var cx=o.x||0,cy=o.y||0,ir=o.innerRadius||0,or=o.outerRadius||0,sa=(o.startAngle||0)-halfpi,ea=(o.endAngle||0)-halfpi,xmin=Infinity,xmax=-Infinity,ymin=Infinity,ymax=-Infinity,a,i,n,x,y,ix,iy,ox,oy;var angles=[sa,ea],s=sa-sa%halfpi;for(i=0;i<4&&s<ea;++i,s+=halfpi){angles.push(s)}for(i=0,n=angles.length;i<n;++i){a=angles[i];x=Math.cos(a);ix=ir*x;ox=or*x;y=Math.sin(a);iy=ir*y;oy=or*y;xmin=Math.min(xmin,ix,ox);xmax=Math.max(xmax,ix,ox);ymin=Math.min(ymin,iy,oy);ymax=Math.max(ymax,iy,oy)}return strokeBounds(o,bounds.set(cx+xmin,cy+ymin,cx+xmax,cy+ymax))}function symbol(o,bounds){var size=o.size!=null?o.size:100,x=o.x||0,y=o.y||0,r,t,rx,ry;switch(o.shape){case"cross":t=3*Math.sqrt(size/5)/2;bounds.set(x-t,y-t,x+t,y+t);break;case"diamond":ry=Math.sqrt(size/(2*tan30));rx=ry*tan30;bounds.set(x-rx,y-ry,x+rx,y+ry);break;case"square":t=Math.sqrt(size);r=t/2;bounds.set(x-r,y-r,x+r,y+r);break;case"triangle-down":rx=Math.sqrt(size/sqrt3);ry=rx*sqrt3/2;bounds.set(x-rx,y-ry,x+rx,y+ry);break;case"triangle-up":rx=Math.sqrt(size/sqrt3);ry=rx*sqrt3/2;bounds.set(x-rx,y-ry,x+rx,y+ry);break;default:r=Math.sqrt(size/Math.PI);bounds.set(x-r,y-r,x+r,y+r)}return strokeBounds(o,bounds)}function textMark(o,bounds,noRotate){var g=context(),h=text.size(o),a=o.align,r=o.radius||0,x=o.x||0,y=o.y||0,dx=o.dx||0,dy=(o.dy||0)+text.offset(o)-Math.round(.8*h),w,t;if(r){t=(o.theta||0)-Math.PI/2;x+=r*Math.cos(t);y+=r*Math.sin(t)}g.font=text.font(o);w=g.measureText(text.value(o.text)).width;if(a==="center"){dx-=w/2}else if(a==="right"){dx-=w}else{}bounds.set(dx+=x,dy+=y,dx+w,dy+h);if(o.angle&&!noRotate){bounds.rotate(o.angle*Math.PI/180,x,y)}return bounds.expand(noRotate?0:1)}function group(g,bounds,includeLegends){var axes=g.axisItems||[],items=g.items||[],legends=g.legendItems||[],j,m;if(!g.clip){for(j=0,m=axes.length;j<m;++j){bounds.union(axes[j].bounds)}for(j=0,m=items.length;j<m;++j){if(items[j].bounds)bounds.union(items[j].bounds)}if(includeLegends){for(j=0,m=legends.length;j<m;++j){bounds.union(legends[j].bounds)}}}if(g.clip||g.width||g.height){strokeBounds(g,bounds.add(0,0).add(g.width||0,g.height||0))}return bounds.translate(g.x||0,g.y||0)}var methods={group:group,symbol:symbol,image:image,rect:rect,rule:rule,arc:arc,text:textMark,path:path,area:area,line:line};methods.area.nest=true;methods.line.nest=true;function itemBounds(item,func,opt){var type=item.mark.marktype;func=func||methods[type];if(func.nest)item=item.mark;var curr=item.bounds,prev=item["bounds:prev"]||(item["bounds:prev"]=new Bounds);if(curr){prev.clear().union(curr);curr.clear()}else{item.bounds=new Bounds}func(item,item.bounds,opt);if(!curr)prev.clear().union(item.bounds);return item.bounds}var DUMMY_ITEM={mark:null};function markBounds(mark,bounds,opt){var type=mark.marktype,func=methods[type],items=mark.items,hasi=items&&items.length,i,n,o,b;if(func.nest){o=hasi?items[0]:(DUMMY_ITEM.mark=mark,DUMMY_ITEM);b=itemBounds(o,func,opt);bounds=bounds&&bounds.union(b)||b;return bounds}bounds=bounds||mark.bounds&&mark.bounds.clear()||new Bounds;if(hasi){for(i=0,n=items.length;i<n;++i){bounds.union(itemBounds(items[i],func,opt))}}return mark.bounds=bounds}module.exports={mark:markBounds,item:itemBounds,text:textMark,group:group}},{"../path":302,"./Bounds":328,"./BoundsContext":329,"./canvas":334,"./svg":337,"./text":338}],334:[function(require,module,exports){(function(global){function instance(w,h){w=w||1;h=h||1;var canvas;if(typeof document!=="undefined"&&document.createElement){canvas=document.createElement("canvas");canvas.width=w;canvas.height=h}else{var Canvas=typeof window!=="undefined"?window["canvas"]:typeof global!=="undefined"?global["canvas"]:null;if(!Canvas.prototype)return null;canvas=new Canvas(w,h)}return lineDash(canvas)}function resize(canvas,w,h,p,retina){var g=this._ctx=canvas.getContext("2d"),s=1;canvas.width=w+p.left+p.right;canvas.height=h+p.top+p.bottom;if(retina&&typeof HTMLElement!=="undefined"&&canvas instanceof HTMLElement){g.pixelratio=s=pixelRatio(canvas)||1}g.setTransform(s,0,0,s,s*p.left,s*p.top);return canvas}function pixelRatio(canvas){var g=canvas.getContext("2d");var devicePixelRatio=window&&window.devicePixelRatio||1,backingStoreRatio=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1,ratio=devicePixelRatio/backingStoreRatio;if(devicePixelRatio!==backingStoreRatio){var w=canvas.width,h=canvas.height;canvas.width=w*ratio;canvas.height=h*ratio;canvas.style.width=w+"px";canvas.style.height=h+"px"}return ratio}function lineDash(canvas){var g=canvas.getContext("2d");if(g.vgLineDash)return;var NOOP=function(){},NODASH=[];if(g.setLineDash){g.vgLineDash=function(dash){this.setLineDash(dash||NODASH)};g.vgLineDashOffset=function(off){this.lineDashOffset=off}}else if(g.webkitLineDash!==undefined){g.vgLineDash=function(dash){this.webkitLineDash=dash||NODASH};g.vgLineDashOffset=function(off){this.webkitLineDashOffset=off}}else if(g.mozDash!==undefined){g.vgLineDash=function(dash){this.mozDash=dash};g.vgLineDashOffset=NOOP}else{g.vgLineDash=NOOP;g.vgLineDashOffset=NOOP}return canvas}module.exports={instance:instance,resize:resize,lineDash:lineDash}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],335:[function(require,module,exports){function create(doc,tag,ns){return ns?doc.createElementNS(ns,tag):doc.createElement(tag)}function remove(el){if(!el)return;var p=el.parentNode;if(p){p.removeChild(el);if(!p.childNodes||!p.childNodes.length)remove(p)}}module.exports={find:function(el,tag){tag=tag.toLowerCase();for(var i=0,n=el.childNodes.length;i<n;++i){if(el.childNodes[i].tagName.toLowerCase()===tag){return el.childNodes[i]}}},child:function(el,index,tag,ns,className,insert){var a,b;a=b=el.childNodes[index];if(!a||insert||a.tagName.toLowerCase()!==tag.toLowerCase()||className&&a.getAttribute("class")!=className){a=create(el.ownerDocument,tag,ns);el.insertBefore(a,b||null);if(className)a.setAttribute("class",className)}return a},clear:function(el,index){var curr=el.childNodes.length;while(curr>index){el.removeChild(el.childNodes[--curr])}return el},remove:remove,cssClass:function(mark){return"mark-"+mark.marktype+(mark.name?" "+mark.name:"")},openTag:function(tag,attr,raw){var s="<"+tag,key,val;if(attr){for(key in attr){val=attr[key];if(val!=null){s+=" "+key+'="'+val+'"'}}}if(raw)s+=" "+raw;return s+">"},closeTag:function(tag){return"</"+tag+">"}}},{}],336:[function(require,module,exports){var bound=require("../util/bound");var sets=["items","axisItems","legendItems"];var keys=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function toJSON(scene,indent){return JSON.stringify(scene,keys,indent)}function fromJSON(json){var scene=typeof json==="string"?JSON.parse(json):json;return initialize(scene)}function initialize(scene){var type=scene.marktype,i,n,s,m,items;for(s=0,m=sets.length;s<m;++s){if(items=scene[sets[s]]){for(i=0,n=items.length;i<n;++i){items[i][type?"mark":"group"]=scene;if(!type||type==="group"){initialize(items[i])}}}}if(type)bound.mark(scene);return scene}module.exports={toJSON:toJSON,fromJSON:fromJSON}},{"../util/bound":333}],337:[function(require,module,exports){(function(global){var dl=require("datalib"),d3_svg=(typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null).svg,parse=require("../path/parse");function x(o){return o.x||0}function y(o){return o.y||0}function xw(o){return(o.x||0)+(o.width||0)}function yh(o){return(o.y||0)+(o.height||0)}function size(o){return o.size==null?100:o.size}function shape(o){return o.shape||"circle"}var areav=d3_svg.area().x(x).y1(y).y0(yh),areah=d3_svg.area().y(y).x1(x).x0(xw),line=d3_svg.line().x(x).y(y);module.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:d3_svg.arc(),symbol:d3_svg.symbol().type(shape).size(size),area:function(items){var o=items[0];return(o.orient==="horizontal"?areah:areav).interpolate(o.interpolate||"linear").tension(o.tension||.7)(items)},line:function(items){var o=items[0];return line.interpolate(o.interpolate||"linear").tension(o.tension||.7)(items)},resize:function(pathStr,size){var path=parse(pathStr),newPath="",command,current,index,i,n,j,m;size=Math.sqrt(size);for(i=0,n=path.length;i<n;++i){for(command=path[i],j=0,m=command.length;j<m;++j){if(command[j]==="Z")break;if((current=+command[j])===current){index=pathStr.indexOf(current);newPath+=pathStr.substring(0,index)+current*size;pathStr=pathStr.substring(index+(current+"").length)}}}return newPath+"Z"}},symbolTypes:dl.toMap(d3_svg.symbolTypes),textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../path/parse":303,datalib:29}],338:[function(require,module,exports){function size(item){return item.fontSize!=null?item.fontSize:11}module.exports={size:size,value:function(s){return s!=null?String(s):""},font:function(item,quote){var font=item.font;if(quote&&font){font=String(font).replace(/\"/g,"'")}return""+(item.fontStyle?item.fontStyle+" ":"")+(item.fontVariant?item.fontVariant+" ":"")+(item.fontWeight?item.fontWeight+" ":"")+size(item)+"px "+(font||"sans-serif")},offset:function(item){var baseline=item.baseline,h=size(item);return Math.round(baseline==="top"?.93*h:baseline==="middle"?.3*h:baseline==="bottom"?-.21*h:0)}}},{}],339:[function(require,module,exports){module.exports={version:"2.6.5",dataflow:require("vega-dataflow"),parse:require("./src/parse/"),scene:{Bounder:require("./src/scene/Bounder"),Builder:require("./src/scene/Builder"),Encoder:require("./src/scene/Encoder"),GroupBuilder:require("./src/scene/GroupBuilder"),visit:require("./src/scene/visit")},transforms:require("./src/transforms"),Transform:require("./src/transforms/Transform"),BatchTransform:require("./src/transforms/BatchTransform"),Parameter:require("./src/transforms/Parameter"),schema:require("./src/core/schema"),config:require("./src/core/config"),util:require("./src/util"),logging:require("vega-logging"),debug:require("vega-logging").debug}},{"./src/core/config":343,"./src/core/schema":344,"./src/parse/":349,"./src/scene/Bounder":361,"./src/scene/Builder":362,"./src/scene/Encoder":363,"./src/scene/GroupBuilder":364,"./src/scene/visit":369,"./src/transforms":397,"./src/transforms/BatchTransform":371,"./src/transforms/Parameter":387,"./src/transforms/Transform":392,"./src/util":400,"vega-dataflow":232,"vega-logging":299}],340:[function(require,module,exports){var sg=require("vega-scenegraph").render,canvas=sg.canvas,svg=sg.svg.string,View=require("./View");function HeadlessView(width,height,model){View.call(this,width,height,model);this._type="canvas";this._renderers={canvas:canvas,svg:svg}}var prototype=HeadlessView.prototype=new View;prototype.renderer=function(type){if(type)this._type=type;return View.prototype.renderer.apply(this,arguments)};prototype.canvas=function(){return this._type==="canvas"?this._renderer.canvas():null};prototype.canvasAsync=function(callback){var r=this._renderer,view=this;function wait(){if(r.pendingImages()===0){view.render();callback(view.canvas())}else{setTimeout(wait,10)}}if(this._type!=="canvas")return null;if(r.pendingImages()>0){wait()}else{callback(this.canvas())}};prototype.svg=function(){return this._type==="svg"?this._renderer.svg():null};prototype.initialize=function(){var w=this._width,h=this._height,bg=this._bgcolor,pad=this._padding,config=this.model().config();if(this._viewport){w=this._viewport[0]-(pad?pad.left+pad.right:0);h=this._viewport[1]-(pad?pad.top+pad.bottom:0)}this._renderer=(this._renderer||new this._io.Renderer(config.load)).initialize(null,w,h,pad).background(bg);return this._repaint=true,this};module.exports=HeadlessView},{"./View":342,"vega-scenegraph":300}],341:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),ChangeSet=df.ChangeSet,Base=df.Graph.prototype,Node=df.Node,GroupBuilder=require("../scene/GroupBuilder"),visit=require("../scene/visit"),compiler=require("../parse/expr"),config=require("./config");function Model(cfg){this._defs={};this._predicates={};this._scene=null;this._groups=null;this._node=null;this._builder=null;this._reset={axes:false,legends:false};this.config(cfg);this.expr=compiler(this);Base.init.call(this)}var prototype=Model.prototype=Object.create(Base);prototype.constructor=Model;prototype.defs=function(defs){if(!arguments.length)return this._defs;this._defs=defs;return this};prototype.config=function(cfg){if(!arguments.length)return this._config;this._config=Object.create(config);for(var name in cfg){var x=cfg[name],y=this._config[name];if(dl.isObject(x)&&dl.isObject(y)){this._config[name]=dl.extend({},y,x)}else{this._config[name]=x}}return this};prototype.width=function(width){if(this._defs)this._defs.width=width;if(this._defs&&this._defs.marks)this._defs.marks.width=width;if(this._scene){this._scene.items[0].width=width;this._scene.items[0]._dirty=true}this._reset.axes=true;return this};prototype.height=function(height){if(this._defs)this._defs.height=height;if(this._defs&&this._defs.marks)this._defs.marks.height=height;if(this._scene){this._scene.items[0].height=height;this._scene.items[0]._dirty=true}this._reset.axes=true;return this};prototype.node=function(){return this._node||(this._node=new Node(this))};prototype.data=function(){var data=Base.data.apply(this,arguments);if(arguments.length>1){this.node().addListener(data.pipeline()[0])}return data};function predicates(name){var m=this,pred={};if(!dl.isArray(name))return this._predicates[name];name.forEach(function(n){pred[n]=m._predicates[n]});return pred}prototype.predicate=function(name,predicate){if(arguments.length===1)return predicates.call(this,name);return this._predicates[name]=predicate};prototype.predicates=function(){return this._predicates};prototype.scene=function(renderer){if(!arguments.length)return this._scene;if(this._builder){this.node().removeListener(this._builder);this._builder._groupBuilder.disconnect()}var m=this,b=this._builder=new Node(this);b.evaluate=function(input){if(b._groupBuilder)return input;var gb=b._groupBuilder=new GroupBuilder(m,m._defs.marks,m._scene={}),p=gb.pipeline();m._groups={};this.addListener(gb.connect());p[p.length-1].addListener(renderer);return input};this.addListener(b);return this};prototype.group=function(id,item){var groups=this._groups;if(arguments.length===1)return groups[id];return groups[id]=item,this};prototype.reset=function(){if(this._scene&&this._reset.axes){visit(this._scene,function(item){if(item.axes)item.axes.forEach(function(axis){axis.reset()})});this._reset.axes=false}if(this._scene&&this._reset.legends){visit(this._scene,function(item){if(item.legends)item.legends.forEach(function(l){l.reset()})});this._reset.legends=false}return this};prototype.addListener=function(l){this.node().addListener(l)};prototype.removeListener=function(l){this.node().removeListener(l)};prototype.fire=function(cs){if(!cs)cs=ChangeSet.create();this.propagate(cs,this.node())};module.exports=Model},{"../parse/expr":348,"../scene/GroupBuilder":364,"../scene/visit":369,"./config":343,datalib:29,"vega-dataflow":232}],342:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),df=require("vega-dataflow"),scene=require("vega-scenegraph"),sg=scene.render,bound=scene.bound,log=require("vega-logging"),Deps=df.Dependencies,parseStreams=require("../parse/streams"),Encoder=require("../scene/Encoder"),Transition=require("../scene/Transition");function View(el,width,height){this._el=null;this._model=null;this._width=this.__width=width||500;this._height=this.__height=height||300;this._bgcolor=null;this._cursor=true;this._autopad=1;this._padding={top:0,left:0,bottom:0,right:0};this._viewport=null;this._renderer=null;this._handler=null;this._streamer=null;this._skipSignals=false;this._changeset=null;this._repaint=true;this._renderers=sg;this._io=null;this._api={}}var prototype=View.prototype;prototype.model=function(model){if(!arguments.length)return this._model;if(this._model!==model){this._model=model;this._streamer=new df.Node(model);this._streamer._rank=-1;this._changeset=df.ChangeSet.create();if(this._handler)this._handler.model(model)}return this};function streaming(src){var view=this,ds=this._model.data(src);if(!ds)return log.error('Data source "'+src+'" is not defined.');var listener=ds.pipeline()[0],streamer=this._streamer,api={};if(this._api[src])return this._api[src];api.insert=function(vals){ds.insert(dl.duplicate(vals));streamer.addListener(listener);view._changeset.data[src]=1;return api};api.update=function(){streamer.addListener(listener);view._changeset.data[src]=1;return ds.update.apply(ds,arguments),api};api.remove=function(){streamer.addListener(listener);view._changeset.data[src]=1;return ds.remove.apply(ds,arguments),api};api.values=function(){return ds.values()};return this._api[src]=api}prototype.data=function(data){var v=this;if(!arguments.length)return v._model.values();else if(dl.isString(data))return streaming.call(v,data);else if(dl.isObject(data)){dl.keys(data).forEach(function(k){var api=streaming.call(v,k);data[k](api)})}return this};var VIEW_SIGNALS=dl.toMap(["width","height","padding"]);prototype.signal=function(name,value,skip){var m=this._model,key,values;if(!arguments.length){return m.values(Deps.SIGNALS)}else if(arguments.length===1&&dl.isString(name)){return m.values(Deps.SIGNALS,name)}if(dl.isObject(name)){values=name;skip=value}else{values={};values[name]=value}for(key in values){if(VIEW_SIGNALS[key]){this[key](values[key])}else{setSignal.call(this,key,values[key])}}return this._skipSignals=skip,this};function setSignal(name,value){var cs=this._changeset,sg=this._model.signal(name);if(!sg)return log.error('Signal "'+name+'" is not defined.');this._streamer.addListener(sg.value(value));cs.signals[name]=1;cs.reflow=true}prototype.width=function(width){if(!arguments.length)return this.__width;if(this.__width!==width){this._width=this.__width=width;this.model().width(width);this.initialize();if(this._strict)this._autopad=1;setSignal.call(this,"width",width)}return this};prototype.height=function(height){if(!arguments.length)return this.__height;if(this.__height!==height){this._height=this.__height=height;this.model().height(height);this.initialize();if(this._strict)this._autopad=1;setSignal.call(this,"height",height)}return this};prototype.background=function(bgcolor){if(!arguments.length)return this._bgcolor;if(this._bgcolor!==bgcolor){this._bgcolor=bgcolor;this.initialize()}return this};prototype.padding=function(pad){if(!arguments.length)return this._padding;if(this._padding!==pad){if(dl.isString(pad)){this._autopad=1;this._padding={top:0,left:0,bottom:0,right:0};this._strict=pad==="strict"}else{this._autopad=0;this._padding=pad;this._strict=false}if(this._renderer)this._renderer.resize(this._width,this._height,this._padding);if(this._handler)this._handler.padding(this._padding);setSignal.call(this,"padding",this._padding)}return this._repaint=true,this};function viewBounds(){var s=this.model().scene(),legends=s.items[0].legendItems,i=0,len=legends.length,b,lb;if(this._strict){b=bound.mark(s,null,false);for(;i<len;++i){lb=legends[i].bounds;b.add(lb.x1,0).add(lb.x2,0)}return b}return s.bounds}prototype.autopad=function(opt){if(this._autopad<1)return this;else this._autopad=0;var b=viewBounds.call(this),pad=this._padding,config=this.model().config(),inset=config.autopadInset,l=b.x1<0?Math.ceil(-b.x1)+inset:0,t=b.y1<0?Math.ceil(-b.y1)+inset:0,r=b.x2>this._width?Math.ceil(+b.x2-this._width)+inset:0;b=b.y2>this._height?Math.ceil(+b.y2-this._height)+inset:0;pad={left:l,top:t,right:r,bottom:b};if(this._strict){this._autopad=0;this._padding=pad;this._width=Math.max(0,this.__width-(l+r));this._height=Math.max(0,this.__height-(t+b));this._model.width(this._width).height(this._height).reset();setSignal.call(this,"width",this._width);setSignal.call(this,"height",this._height);setSignal.call(this,"padding",pad);this.initialize().update({props:"enter"}).update({props:"update"})}else{this.padding(pad).update(opt)}return this};prototype.viewport=function(size){if(!arguments.length)return this._viewport;if(this._viewport!==size){this._viewport=size;this.initialize()}return this};prototype.renderer=function(type){if(!arguments.length)return this._renderer;if(this._renderers[type])type=this._renderers[type];else if(dl.isString(type))throw new Error("Unknown renderer: "+type);else if(!type)throw new Error("No renderer specified");if(this._io!==type){this._io=type;this._renderer=null;this.initialize();if(this._build)this.render()}return this};prototype.initialize=function(el){var v=this,prevHandler,w=v._width,h=v._height,pad=v._padding,bg=v._bgcolor,config=this.model().config();if(!arguments.length||el===null){el=this._el?this._el.parentNode:null;if(!el)return this}d3.select(el).select("div.vega").remove();this._el=el=d3.select(el).append("div").attr("class","vega").style("position","relative").node();if(v._viewport){d3.select(el).style("width",(v._viewport[0]||w)+"px").style("height",(v._viewport[1]||h)+"px").style("overflow","auto")}sg.canvas.Renderer.RETINA=config.render.retina;v._renderer=(v._renderer||new this._io.Renderer(config.load)).initialize(el,w,h,pad).background(bg);prevHandler=v._handler;v._handler=(new this._io.Handler).initialize(el,pad,v);if(prevHandler){prevHandler.handlers().forEach(function(h){v._handler.on(h.type,h.handler)})}else{v._detach=parseStreams(this)}return this._repaint=true,this};prototype.destroy=function(){if(this._detach)this._detach()};function build(){var v=this;v._renderNode=new df.Node(v._model).router(true);v._renderNode.evaluate=function(input){log.debug(input,["rendering"]);var s=v._model.scene(),h=v._handler;if(h&&h.scene)h.scene(s);if(input.trans){input.trans.start(function(items){v._renderer.render(s,items)})}else if(v._repaint){v._renderer.render(s)}else if(input.dirty.length){v._renderer.render(s,input.dirty)}if(input.dirty.length){input.dirty.forEach(function(i){i._dirty=false});s.items[0]._dirty=false}v._repaint=v._skipSignals=false;return input};return v._model.scene(v._renderNode),true}prototype.update=function(opt){opt=opt||{};var v=this,model=this._model,streamer=this._streamer,cs=this._changeset,trans=opt.duration?new Transition(opt.duration,opt.ease):null;if(trans)cs.trans=trans;if(opt.props!==undefined){if(dl.keys(cs.data).length>0){throw Error("New data values are not reflected in the visualization."+" Please call view.update() before updating a specified property set.")}cs.reflow=true;cs.request=opt.props}var built=v._build;v._build=v._build||build.call(this);if(opt.items&&built){Encoder.update(model,opt.trans,opt.props,opt.items,cs.dirty);v._renderNode.evaluate(cs)}else if(streamer.listeners().length&&built){if(this._repaint)streamer.addListener(model.node());model.propagate(cs,streamer,null,this._skipSignals);streamer.disconnect()}else{model.fire(cs)}v._changeset=df.ChangeSet.create();return v.autopad(opt)};prototype.toImageURL=function(type){var v=this,Renderer;switch(type||"png"){case"canvas":case"png":Renderer=sg.canvas.Renderer;break;case"svg":Renderer=sg.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+type)}var retina=sg.canvas.Renderer.RETINA;sg.canvas.Renderer.RETINA=false;var ren=new Renderer(v._model.config.load).initialize(null,v._width,v._height,v._padding).background(v._bgcolor).render(v._model.scene());sg.canvas.Renderer.RETINA=retina;if(type==="svg"){var blob=new Blob([ren.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(blob)}else{return ren.canvas().toDataURL("image/png")}};prototype.render=function(items){this._renderer.render(this._model.scene(),items);return this};prototype.on=function(){this._handler.on.apply(this._handler,arguments);return this};prototype.onSignal=function(name,handler){var sg=this._model.signal(name);return sg?sg.on(handler):log.error('Signal "'+name+'" is not defined.'),this};prototype.off=function(){this._handler.off.apply(this._handler,arguments);return this};prototype.offSignal=function(name,handler){var sg=this._model.signal(name);return sg?sg.off(handler):log.error('Signal "'+name+'" is not defined.'),this};View.factory=function(model){var HeadlessView=require("./HeadlessView");return function(opt){opt=opt||{};var defs=model.defs();var v=(opt.el?new View:new HeadlessView).model(model).renderer(opt.renderer||"canvas").width(defs.width).height(defs.height).background(defs.background).padding(defs.padding).viewport(defs.viewport).initialize(opt.el);if(opt.data)v.data(opt.data);if(opt.el){if(opt.hover!==false){v.on("mouseover",function(evt,item){if(item&&item.hasPropertySet("hover")){this.update({props:"hover",items:item})}}).on("mouseout",function(evt,item){if(item&&item.hasPropertySet("hover")){this.update({props:"update",items:item})}})}if(opt.cursor!==false){v.onSignal("cursor",function(name,value){var body=d3.select("body");if(dl.isString(value)){v._cursor=value==="default";body.style("cursor",value)}else if(dl.isObject(value)&&v._cursor){body.style("cursor",value.default)}})}}return v}};module.exports=View}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../parse/streams":359,"../scene/Encoder":363,"../scene/Transition":366,"./HeadlessView":340,datalib:29,"vega-dataflow":232,"vega-logging":299,"vega-scenegraph":300}],343:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,config={};config.load={baseURL:"",domainWhiteList:false};config.autopadInset=5;config.scale={time:d3.time.scale,utc:d3.time.scale.utc};config.render={retina:true};config.scene={fill:undefined,fillOpacity:undefined,stroke:undefined,strokeOpacity:undefined,strokeWidth:undefined,strokeDash:undefined,strokeDashOffset:undefined};config.axis={layer:"back",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1e4,titleOffsetAutoMargin:4};config.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"};config.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]};config.range={category10:d3.scale.category10().range(),category20:d3.scale.category20().range(),category20b:d3.scale.category20b().range(),category20c:d3.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]};module.exports=config}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],344:[function(require,module,exports){var dl=require("datalib"),parse=require("../parse"),Scale=require("../scene/Scale"),config=require("./config");function compile(module,opt,schema){var s=module.schema;if(!s)return;if(s.refs)dl.extend(schema.refs,s.refs);if(s.defs)dl.extend(schema.defs,s.defs)}module.exports=function(opt){var schema=null;opt=opt||{};if(opt.url){schema=dl.json(dl.extend({url:opt.url},config.load))}else{schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"};dl.keys(parse).forEach(function(k){compile(parse[k],opt,schema)});compile(Scale,opt,schema)}if(opt.properties)dl.keys(opt.properties).forEach(function(k){schema.defs.propset.properties[k]={$ref:"#/refs/"+opt.properties[k]+"Value"}});if(opt.propertySets)dl.keys(opt.propertySets).forEach(function(k){schema.defs.mark.properties.properties.properties[k]={$ref:"#/defs/propset"}});return schema}},{"../parse":349,"../scene/Scale":365,"./config":343,datalib:29}],345:[function(require,module,exports){var dl=require("datalib"),axs=require("../scene/axis"),themeVal=require("../util/theme-val");var ORIENT={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};function parseAxes(model,spec,axes,group){var cfg=config(model);(spec||[]).forEach(function(def,index){axes[index]=axes[index]||axs(model,cfg[def.type]);parseAxis(cfg[def.type],def,index,axes[index],group)})}function parseAxis(config,def,index,axis,group){var scale;if(def.scale!==undefined){axis.scale(scale=group.scale(def.scale))}var grid=config.grid;if(dl.isObject(grid)){config.grid=grid[scale.type]!==undefined?grid[scale.type]:grid.default}axis.orient(themeVal(def,config,"orient",ORIENT[def.type]));axis.offset(themeVal(def,config,"offset",0));axis.layer(themeVal(def,config,"layer","front"));axis.grid(themeVal(def,config,"grid",false));axis.title(def.title||null);axis.titleOffset(themeVal(def,config,"titleOffset"));axis.tickValues(def.values||null);axis.tickFormat(def.format||null);axis.tickFormatType(def.formatType||null);axis.tickSubdivide(def.subdivide||0);axis.tickPadding(themeVal(def,config,"tickPadding",config.padding));var ts=themeVal(def,config,"tickSize"),size=[ts,ts,ts];size[0]=themeVal(def,config,"tickSizeMajor",size[0]);size[1]=themeVal(def,config,"tickSizeMinor",size[1]);size[2]=themeVal(def,config,"tickSizeEnd",size[2]);if(size.length){axis.tickSize.apply(axis,size)}axis.tickCount(themeVal(def,config,"ticks"));var p=def.properties;if(p&&p.ticks){axis.majorTickProperties(p.majorTicks?dl.extend({},p.ticks,p.majorTicks):p.ticks);axis.minorTickProperties(p.minorTicks?dl.extend({},p.ticks,p.minorTicks):p.ticks)}else{axis.majorTickProperties(p&&p.majorTicks||{});axis.minorTickProperties(p&&p.minorTicks||{})}axis.tickLabelProperties(p&&p.labels||{});axis.titleProperties(p&&p.title||{});axis.gridLineProperties(p&&p.grid||{});axis.domainProperties(p&&p.axis||{})}function config(model){var cfg=model.config(),axis=cfg.axis;return{x:dl.extend(dl.duplicate(axis),cfg.axis_x),y:dl.extend(dl.duplicate(axis),cfg.axis_y)}}module.exports=parseAxes},{"../scene/axis":367,"../util/theme-val":401,datalib:29}],346:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null;function parseBg(bg){if(bg==null)return null;return d3.rgb(bg)+""}module.exports=parseBg}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],347:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),parseTransforms=require("./transforms"),parseModify=require("./modify");function parseData(model,spec,callback){var config=model.config(),count=0;function onError(error,d){log.error("PARSE DATA FAILED: "+d.name+" "+error);count=-1;callback(error)}function onLoad(d){return function(error,data){if(error){onError(error,d)}else if(count>0){try{model.data(d.name).values(dl.read(data,d.format));if(--count===0)callback()}catch(err){onError(err,d)}}}}(spec||[]).forEach(function(d){if(d.url){count+=1;dl.load(dl.extend({url:d.url},config.load),onLoad(d))}try{parseData.datasource(model,d)}catch(err){onError(err,d)}});if(count===0)setTimeout(callback,1);return spec}parseData.datasource=function(model,d){var transform=(d.transform||[]).map(function(t){return parseTransforms(model,t)}),mod=(d.modify||[]).map(function(m){return parseModify(model,m,d)}),ds=model.data(d.name,mod.concat(transform));if(d.values){ds.values(dl.read(d.values,d.format))}else if(d.source){ds.source(d.source).addListener(ds);model.removeListener(ds.pipeline()[0])}return ds};module.exports=parseData},{"./modify":353,"./transforms":360,datalib:29,"vega-logging":299}],348:[function(require,module,exports){var dl=require("datalib"),template=dl.template,expr=require("vega-expression"),args=["datum","parent","event","signals"];var compile=expr.compiler(args,{idWhiteList:args,fieldVar:args[0],globalVar:function(id){return"this.sig["+dl.str(id)+"]._value"},functions:function(codegen){var fn=expr.functions(codegen);fn.eventItem="event.vg.getItem";fn.eventGroup="event.vg.getGroup";fn.eventX="event.vg.getX";fn.eventY="event.vg.getY";fn.open=openGen(codegen);fn.scale=scaleGen(codegen,false);fn.iscale=scaleGen(codegen,true);fn.inrange="this.defs.inrange";fn.indata=indataGen(codegen);fn.format="this.defs.format";fn.timeFormat="this.defs.timeFormat";fn.utcFormat="this.defs.utcFormat";return fn},functionDefs:function(){return{scale:scale,inrange:inrange,indata:indata,format:numberFormat,timeFormat:timeFormat,utcFormat:utcFormat,open:windowOpen}}});function openGen(codegen){return function(args){args=args.map(codegen);var n=args.length;if(n<1||n>2){throw Error("open takes exactly 1 or 2 arguments.")}return"this.defs.open(this.model, "+args[0]+(n>1?","+args[1]:"")+")"}}function windowOpen(model,url,name){if(typeof window!=="undefined"&&window&&window.open){var opt=dl.extend({type:"open",url:url,name:name},model.config().load),uri=dl.load.sanitizeUrl(opt);if(uri){window.open(uri,name)}else{throw Error("Invalid URL: "+opt.url)}}else{throw Error("Open function can only be invoked in a browser.")}}function scaleGen(codegen,invert){return function(args){args=args.map(codegen);var n=args.length;if(n<2||n>3){throw Error("scale takes exactly 2 or 3 arguments.")}return"this.defs.scale(this.model, "+invert+", "+args[0]+","+args[1]+(n>2?","+args[2]:"")+")"}}function scale(model,invert,name,value,scope){if(!scope||!scope.scale){scope=scope&&scope.mark?scope.mark.group:model.scene().items[0]}if(model.group(scope._id)!==scope){throw Error('Scope for scale "'+name+'" is not a valid group item.')}var s=scope.scale(name);return!s?value:invert?s.invert(value):s(value)}function inrange(val,a,b,exclusive){var min=a,max=b;if(a>b){min=b;max=a}return exclusive?min<val&&max>val:min<=val&&max>=val}function indataGen(codegen){return function(args,globals,fields,dataSources){var data;if(args.length!==3){throw Error("indata takes 3 arguments.")}if(args[0].type!=="Literal"){throw Error("Data source name must be a literal for indata.")}data=args[0].value;dataSources[data]=1;if(args[2].type==="Literal"){indataGen.model.requestIndex(data,args[2].value)}args=args.map(codegen);return"this.defs.indata(this.model,"+args[0]+","+args[1]+","+args[2]+")"}}function indata(model,dataname,val,field){var data=model.data(dataname),index=data.getIndex(field);return index[val]>0}function numberFormat(specifier,v){return template.format(specifier,"number")(v)}function timeFormat(specifier,d){return template.format(specifier,"time")(d)}function utcFormat(specifier,d){return template.format(specifier,"utc")(d)}function wrap(model){return function(str){indataGen.model=model;var x=compile(str);x.model=model;x.sig=model?model._signals:{};return x}}wrap.scale=scale;wrap.codegen=compile.codegen;module.exports=wrap},{datalib:29,"vega-expression":237}],349:[function(require,module,exports){module.exports={axes:require("./axes"),background:require("./background"),data:require("./data"),events:require("vega-event-selector"),expr:require("./expr"),legends:require("./legends"),mark:require("./mark"),marks:require("./marks"),modify:require("./modify"),padding:require("./padding"),predicates:require("./predicates"),properties:require("./properties"),signals:require("./signals"),spec:require("./spec"),streams:require("./streams"),transforms:require("./transforms")}},{"./axes":345,"./background":346,"./data":347,"./expr":348,"./legends":350,"./mark":351,"./marks":352,"./modify":353,"./padding":354,"./predicates":355,"./properties":356,"./signals":357,"./spec":358,"./streams":359,"./transforms":360,"vega-event-selector":233}],350:[function(require,module,exports){var lgnd=require("../scene/legend");function parseLegends(model,spec,legends,group){(spec||[]).forEach(function(def,index){legends[index]=legends[index]||lgnd(model);parseLegend(def,index,legends[index],group)})}function parseLegend(def,index,legend,group){legend.size(def.size?group.scale(def.size):null);legend.shape(def.shape?group.scale(def.shape):null);legend.fill(def.fill?group.scale(def.fill):null);legend.stroke(def.stroke?group.scale(def.stroke):null);legend.opacity(def.opacity?group.scale(def.opacity):null);if(def.orient)legend.orient(def.orient);if(def.offset!=null)legend.offset(def.offset);legend.title(def.title||null);legend.values(def.values||null);legend.format(def.format!==undefined?def.format:null);legend.formatType(def.formatType||null);var p=def.properties;legend.titleProperties(p&&p.title||{});legend.labelProperties(p&&p.labels||{});legend.legendProperties(p&&p.legend||{});legend.symbolProperties(p&&p.symbols||{});legend.gradientProperties(p&&p.gradient||{})}module.exports=parseLegends},{"../scene/legend":368}],351:[function(require,module,exports){var dl=require("datalib"),parseProperties=require("./properties");function parseMark(model,mark,applyDefaults){var props=mark.properties||applyDefaults&&(mark.properties={}),enter=props.enter||applyDefaults&&(props.enter={}),group=mark.marks,config=model.config().marks||{};if(applyDefaults){if(mark.type==="symbol"&&!enter.size&&config.symbolSize){enter.size={value:config.symbolSize}}var colorMap={arc:"fill",area:"fill",rect:"fill",symbol:"fill",text:"fill",line:"stroke",path:"stroke",rule:"stroke"};var colorProp=colorMap[mark.type];if(!enter[colorProp]&&config.color){enter[colorProp]={value:config.color}}}dl.keys(props).forEach(function(k){props[k]=parseProperties(model,mark.type,props[k])});if(mark.delay){mark.delay=parseProperties(model,mark.type,{delay:mark.delay})}if(group){mark.marks=group.map(function(g){return parseMark(model,g,true)})}return mark}module.exports=parseMark},{"./properties":356,datalib:29}],352:[function(require,module,exports){var parseMark=require("./mark"),parseProperties=require("./properties");function parseRootMark(model,spec,width,height){return{type:"group",width:width,height:height,properties:defaults(spec.scene||{},model),scales:spec.scales||[],axes:spec.axes||[],legends:spec.legends||[],marks:(spec.marks||[]).map(function(m){return parseMark(model,m,true)})}}var PROPERTIES=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];function defaults(spec,model){var config=model.config().scene,props={},i,n,m,p,s;for(i=0,n=m=PROPERTIES.length;i<n;++i){p=PROPERTIES[i];if((s=spec[p])!==undefined){props[p]=s.signal?s:{value:s}}else if(config[p]){props[p]={value:config[p]}}else{--m}}return m?{update:parseProperties(model,"group",props)}:{}}module.exports=parseRootMark},{"./mark":351,"./properties":356}],353:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),df=require("vega-dataflow"),Node=df.Node,Tuple=df.Tuple,Deps=df.Dependencies;var Types={INSERT:"insert",REMOVE:"remove",UPSERT:"upsert",TOGGLE:"toggle",CLEAR:"clear"};var EMPTY=[];function filter(fields,value,src,dest){var splice=true,len=fields.length,i,j,f,v;for(i=src.length-1;i>=0;--i){for(j=0;j<len;++j){f=fields[j];v=value&&f(value)||value;if(f(src[i])!==v){splice=false;break}}if(splice)dest.push.apply(dest,src.splice(i,1));splice=true}}function insert(input,datum,source){var t=Tuple.ingest(datum);input.add.push(t);source._data.push(t)}function parseModify(model,def,ds){var signal=def.signal?dl.field(def.signal):null,signalName=signal?signal[0]:null,predicate=def.predicate?model.predicate(def.predicate.name||def.predicate):null,exprTrigger=def.test?model.expr(def.test):null,reeval=predicate===null&&exprTrigger===null,isClear=def.type===Types.CLEAR,fields=dl.array(def.field||"data"),getters=fields.map(dl.accessor),setters=fields.map(dl.mutator),node=new Node(model).router(isClear);node.evaluate=function(input){var db,sg;if(predicate!==null){db=model.values(Deps.DATA,predicate.data||EMPTY);sg=model.values(Deps.SIGNALS,predicate.signals||EMPTY);reeval=predicate.call(predicate,{},db,sg,model._predicates)}if(exprTrigger!==null){sg=model.values(Deps.SIGNALS,exprTrigger.globals||EMPTY);reeval=exprTrigger.fn()}log.debug(input,[def.type+"ing",reeval]);if(!reeval||!isClear&&!input.signals[signalName])return input;var value=signal?model.signalRef(def.signal):null,d=model.data(ds.name),t=null,add=[],rem=[],up=0,datum;if(dl.isObject(value)){datum=value;if(!def.field){fields=dl.keys(datum);getters=fields.map(dl.accessor);setters=fields.map(dl.mutator)}}else{datum={};setters.forEach(function(f){f(datum,value)})}if(def.type===Types.INSERT){insert(input,datum,d)}else if(def.type===Types.REMOVE){filter(getters,value,input.mod,input.rem);filter(getters,value,input.add,rem);filter(getters,value,d._data,rem)}else if(def.type===Types.UPSERT){input.mod.forEach(function(x){var every=getters.every(function(f){return f(x)===f(datum)});if(every)up=(dl.extend(x,datum),up+1)});if(up===0)insert(input,datum,d)}else if(def.type===Types.TOGGLE){filter(getters,value,input.mod,rem);input.rem.push.apply(input.rem,rem);filter(getters,value,input.add,add);if(add.length||rem.length){d._data=d._data.filter(function(x){return rem.indexOf(x)<0&&add.indexOf(x)<0})}else{input.add.push(t=Tuple.ingest(datum));d._data.push(t)}}else if(def.type===Types.CLEAR){input.rem.push.apply(input.rem,input.mod.splice(0));input.add.splice(0);d._data.splice(0)}fields.forEach(function(f){input.fields[f]=1});return input};if(signalName)node.dependency(Deps.SIGNALS,signalName);if(predicate){node.dependency(Deps.DATA,predicate.data);node.dependency(Deps.SIGNALS,predicate.signals)}if(exprTrigger){node.dependency(Deps.SIGNALS,exprTrigger.globals);node.dependency(Deps.DATA,exprTrigger.dataSources)}return node}module.exports=parseModify},{datalib:29,"vega-dataflow":232,"vega-logging":299}],354:[function(require,module,exports){var dl=require("datalib");function parsePadding(pad){return pad==null?"auto":dl.isObject(pad)?pad:dl.isNumber(pad)?{top:pad,left:pad,right:pad,bottom:pad}:pad==="strict"?pad:"auto"}module.exports=parsePadding},{datalib:29}],355:[function(require,module,exports){var dl=require("datalib");var types={"=":parseComparator,"==":parseComparator,"!=":parseComparator,">":parseComparator,">=":parseComparator,"<":parseComparator,"<=":parseComparator,and:parseLogical,"&&":parseLogical,or:parseLogical,"||":parseLogical,in:parseIn};var nullScale=function(){return 0};nullScale.invert=nullScale;function parsePredicates(model,spec){(spec||[]).forEach(function(s){var parse=types[s.type](model,s);var pred=Function("args","db","signals","predicates",parse.code);pred.root=function(){return model.scene().items[0]};pred.nullScale=nullScale;pred.isFunction=dl.isFunction;pred.signals=parse.signals;pred.data=parse.data;model.predicate(s.name,pred)});return spec}function parseSignal(signal,signals){var s=dl.field(signal),code="signals["+s.map(dl.str).join("][")+"]";signals[s[0]]=1;return code}function parseOperands(model,operands){var decl=[],defs=[],signals={},db={};function setSignal(s){signals[s]=1}function setData(d){db[d]=1}dl.array(operands).forEach(function(o,i){var name="o"+i,def="";if(o.value!==undefined){def=dl.str(o.value)}else if(o.arg){def="args["+dl.str(o.arg)+"]"}else if(o.signal){def=parseSignal(o.signal,signals)}else if(o.predicate){var ref=o.predicate,predName=ref&&(ref.name||ref),pred=model.predicate(predName),p="predicates["+dl.str(predName)+"]";pred.signals.forEach(setSignal);pred.data.forEach(setData);if(dl.isObject(ref)){dl.keys(ref).forEach(function(k){if(k==="name")return;var i=ref[k];def+="args["+dl.str(k)+"] = ";if(i.signal){def+=parseSignal(i.signal,signals)}else if(i.arg){def+="args["+dl.str(i.arg)+"]"}def+=", "})}def+=p+".call("+p+", args, db, signals, predicates)"}decl.push(name);defs.push(name+"=("+def+")")});return{code:"var "+decl.join(", ")+";\n"+defs.join(";\n")+";\n",signals:dl.keys(signals),data:dl.keys(db)}}function parseComparator(model,spec){var ops=parseOperands(model,spec.operands);if(spec.type==="=")spec.type="==";ops.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\n"+"o1 = o1 instanceof Date ? o1.getTime() : o1;\n";return{code:ops.code+"return "+["o0","o1"].join(spec.type)+";",signals:ops.signals,data:ops.data}}function parseLogical(model,spec){var ops=parseOperands(model,spec.operands),o=[],i=0,len=spec.operands.length;while(o.push("o"+i++)<len);if(spec.type==="and")spec.type="&&";else if(spec.type==="or")spec.type="||";return{code:ops.code+"return "+o.join(spec.type)+";",signals:ops.signals,data:ops.data}}function parseIn(model,spec){var o=[spec.item],code="";if(spec.range)o.push.apply(o,spec.range);if(spec.scale){code=parseScale(spec.scale,o)}var ops=parseOperands(model,o);code=ops.code+code+"\n  var ordSet = null;\n";if(spec.data){var field=dl.field(spec.field).map(dl.str);code+="var where = function(d) { return d["+field.join("][")+"] == o0 };\n";code+="return db["+dl.str(spec.data)+"].filter(where).length > 0;"}else if(spec.range){if(spec.scale){code+="if (scale.length == 2) {\n"+"  ordSet = scale(o1, o2);\n"+"} else {\n"+"  o1 = scale(o1);\no2 = scale(o2);\n"+"}"}code+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n"+"  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;"}return{code:code,signals:ops.signals,data:ops.data.concat(spec.data?[spec.data]:[])}}function parseScale(spec,ops){var code="var scale = ",idx=ops.length;if(dl.isString(spec)){ops.push({value:spec});code+="this.root().scale(o"+idx+")"}else if(spec.arg){ops.push(spec);code+="o"+idx}else if(spec.name){ops.push(dl.isString(spec.name)?{value:spec.name}:spec.name);code+="(this.isFunction(o"+idx+") ? o"+idx+" : ";if(spec.scope){ops.push(spec.scope);code+="((o"+(idx+1)+".scale || this.root().scale)(o"+idx+") || this.nullScale)"}else{code+="this.root().scale(o"+idx+")"}code+=")"}if(spec.invert===true){code+=".invert"}return code+";\n"}module.exports=parsePredicates},{datalib:29}],356:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),log=require("vega-logging"),Tuple=require("vega-dataflow").Tuple;var DEPS=["signals","scales","data","fields"];function properties(model,mark,spec){var config=model.config(),code="",names=dl.keys(spec),exprs=[],i,len,name,ref,vars={},deps={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:false};code+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\n"+"tmpl.datum  = item.datum;\n"+"tmpl.group  = group;\n"+"tmpl.parent = group.datum;\n";function handleDep(p){if(ref[p]==null)return;var k=dl.array(ref[p]),i,n;for(i=0,n=k.length;i<n;++i){deps[p][k[i]]=1}}function handleNestedRefs(r){var k=(r.parent?"parent_":"group_")+r.level;deps._nRefs[k]=r}parseShape(model,config,spec);for(i=0,len=names.length;i<len;++i){ref=spec[name=names[i]];code+=i>0?"\n  ":"  ";if(ref.rule){ref=rule(model,name,ref.rule,exprs);code+="\n  "+ref.code}else if(dl.isArray(ref)){ref=rule(model,name,ref,exprs);code+="\n  "+ref.code}else{ref=valueRef(config,name,ref);code+="d += set(o, "+dl.str(name)+", "+ref.val+");"}vars[name]=true;DEPS.forEach(handleDep);deps.reflow=deps.reflow||ref.reflow;if(ref.nested.length)ref.nested.forEach(handleNestedRefs)}dl.keys(deps._nRefs).forEach(function(k){deps.nested.push(deps._nRefs[k])});deps.nested.sort(function(a,b){a=a.level;b=b.level;return a<b?-1:a>b?1:a>=b?0:NaN});if(vars.x2){if(vars.x){code+="\n  if (o.x > o.x2) { "+"\n    t = o.x;"+"\n    d += set(o, 'x', o.x2);"+"\n    d += set(o, 'x2', t); "+"\n  };";code+="\n  d += set(o, 'width', (o.x2 - o.x));"}else if(vars.width){code+="\n  d += set(o, 'x', (o.x2 - o.width));"}else{code+="\n  d += set(o, 'x', o.x2);"}}if(vars.xc){if(vars.width){code+="\n  d += set(o, 'x', (o.xc - o.width/2));"}else{code+="\n  d += set(o, 'x', o.xc);"}}if(vars.y2){if(vars.y){code+="\n  if (o.y > o.y2) { "+"\n    t = o.y;"+"\n    d += set(o, 'y', o.y2);"+"\n    d += set(o, 'y2', t);"+"\n  };";code+="\n  d += set(o, 'height', (o.y2 - o.y));"}else if(vars.height){code+="\n  d += set(o, 'y', (o.y2 - o.height));"}else{code+="\n  d += set(o, 'y', o.y2);"}}if(vars.yc){if(vars.height){code+="\n  d += set(o, 'y', (o.yc - o.height/2));"}else{code+="\n  d += set(o, 'y', o.yc);"}}if(hasPath(mark,vars))code+="\n  d += (item.touch(), 1);";code+="\n  if (trans) trans.interpolate(item, o);";code+="\n  return d > 0;";try{var encoder=Function("item","group","trans","db","signals","predicates",code);encoder.tpl=Tuple;encoder.exprs=exprs;encoder.util=dl;encoder.d3=d3;dl.extend(encoder,dl.template.context);return{encode:encoder,signals:dl.keys(deps.signals),scales:dl.keys(deps.scales),data:dl.keys(deps.data),fields:dl.keys(deps.fields),nested:deps.nested,reflow:deps.reflow}}catch(e){log.error(e);log.log(code)}}function dependencies(a,b){if(!dl.isObject(a)){a={reflow:false,nested:[]};DEPS.forEach(function(d){a[d]=[]})}if(dl.isObject(b)){a.reflow=a.reflow||b.reflow;a.nested.push.apply(a.nested,b.nested);DEPS.forEach(function(d){a[d].push.apply(a[d],b[d])})}return a}function hasPath(mark,vars){return vars.path||(mark==="area"||mark==="line")&&(vars.x||vars.x2||vars.width||vars.y||vars.y2||vars.height||vars.tension||vars.interpolate)}var hb=/{{(.*?)}}/g;function parseShape(model,config,spec){var shape=spec.shape,last=0,value,match;if(shape&&(value=shape.value)){if(config.shape&&config.shape[value]){value=config.shape[value]}shape="";while((match=hb.exec(value))!==null){shape+=value.substring(last,match.index);shape+=model.expr(match[1]).fn();last=hb.lastIndex}spec.shape.value=shape+value.substring(last)}}function rule(model,name,rules,exprs){var config=model.config(),deps=dependencies(),inputs=[],code="";(rules||[]).forEach(function(r,i){var ref=valueRef(config,name,r);dependencies(deps,ref);if(r.test){var exprFn=model.expr(r.test);deps.signals.push.apply(deps.signals,exprFn.globals);deps.data.push.apply(deps.data,exprFn.dataSources);code+="if (exprs["+exprs.length+"](item.datum, item.mark.group.datum, null)) {"+"\n    d += set(o, "+dl.str(name)+", "+ref.val+");";code+=rules[i+1]?"\n  } else ":"  }";exprs.push(exprFn.fn)}else{var def=r.predicate,predName=def&&(def.name||def),pred=model.predicate(predName),p="predicates["+dl.str(predName)+"]",input=[],args=name+"_arg"+i;if(dl.isObject(def)){dl.keys(def).forEach(function(k){if(k==="name")return;var ref=valueRef(config,i,def[k],true);input.push(dl.str(k)+": "+ref.val);dependencies(deps,ref)})}if(predName){deps.signals.push.apply(deps.signals,pred.signals);deps.data.push.apply(deps.data,pred.data);inputs.push(args+" = {\n    "+input.join(",\n    ")+"\n  }");code+="if ("+p+".call("+p+","+args+", db, signals, predicates)) {"+"\n    d += set(o, "+dl.str(name)+", "+ref.val+");";code+=rules[i+1]?"\n  } else ":"  }"}else{code+="{"+"\n    d += set(o, "+dl.str(name)+", "+ref.val+");"+"\n  }\n"}}});if(inputs.length)code="var "+inputs.join(",\n      ")+";\n  "+code;return deps.code=code,deps}function valueRef(config,name,ref,predicateArg){if(ref==null)return null;if(name==="fill"||name==="stroke"){if(ref.c){return colorRef(config,"hcl",ref.h,ref.c,ref.l)}else if(ref.h||ref.s){return colorRef(config,"hsl",ref.h,ref.s,ref.l)}else if(ref.l||ref.a){return colorRef(config,"lab",ref.l,ref.a,ref.b)}else if(ref.r||ref.g||ref.b){return colorRef(config,"rgb",ref.r,ref.g,ref.b)}}var val=null,scale=null,deps=dependencies(),sgRef=null,fRef=null,sRef=null,tmpl={};if(ref.template!==undefined){val=dl.template.source(ref.template,"tmpl",tmpl);dl.keys(tmpl).forEach(function(k){var f=dl.field(k),a=f.shift();if(a==="parent"||a==="group"){deps.nested.push({parent:a==="parent",group:a==="group",level:1})}else if(a==="datum"){deps.fields.push(f[0])}else{deps.signals.push(a)}})}if(ref.value!==undefined){val=dl.str(ref.value)}if(ref.signal!==undefined){sgRef=dl.field(ref.signal);val="signals["+sgRef.map(dl.str).join("][")+"]";deps.signals.push(sgRef.shift())}if(ref.field!==undefined){ref.field=dl.isString(ref.field)?{datum:ref.field}:ref.field;fRef=fieldRef(ref.field);val=fRef.val;dependencies(deps,fRef)}if(ref.scale!==undefined){sRef=scaleRef(ref.scale);scale=sRef.val;dependencies(deps,sRef);deps.scales.push(ref.scale.name||ref.scale);if(val!==null||ref.band||ref.mult||ref.offset||!predicateArg){val=scale+(ref.band?".rangeBand()":"("+(val!==null?val:"item.datum.data")+")")}else if(predicateArg){val=scale}}val="("+(ref.mult?dl.number(ref.mult)+" * ":"")+val+")"+(ref.offset?" + "+dl.number(ref.offset):"");return deps.val=val,deps}function colorRef(config,type,x,y,z){var xx=x?valueRef(config,"",x):config.color[type][0],yy=y?valueRef(config,"",y):config.color[type][1],zz=z?valueRef(config,"",z):config.color[type][2],deps=dependencies();[xx,yy,zz].forEach(function(v){if(dl.isArray)return;dependencies(deps,v)});var val="(this.d3."+type+"("+[xx.val,yy.val,zz.val].join(",")+') + "")';return deps.val=val,deps}function fieldRef(ref){if(dl.isString(ref)){return{val:dl.field(ref).map(dl.str).join("][")}}var l=ref.level||1,nested=(ref.group||ref.parent)&&l,scope=nested?Array(l).join("group.mark."):"",r=fieldRef(ref.datum||ref.group||ref.parent||ref.signal),val=r.val,deps=dependencies(null,r);if(ref.datum){val="item.datum["+val+"]";deps.fields.push(ref.datum)}else if(ref.group){val=scope+"group["+val+"]";deps.nested.push({level:l,group:true})}else if(ref.parent){val=scope+"group.datum["+val+"]";deps.nested.push({level:l,parent:true})}else if(ref.signal){val="signals["+val+"]";deps.signals.push(dl.field(ref.signal)[0]);deps.reflow=true}return deps.val=val,deps}function scaleRef(ref){var scale=null,fr=null,deps=dependencies();if(dl.isString(ref)){scale=dl.str(ref)}else if(ref.name){scale=dl.isString(ref.name)?dl.str(ref.name):(fr=fieldRef(ref.name)).val}else{scale=(fr=fieldRef(ref)).val}scale="(item.mark._scaleRefs["+scale+"] = 1, group.scale("+scale+"))";if(ref.invert)scale+=".invert";if(fr)fr.nested.forEach(function(g){g.scale=true});return fr?(fr.val=scale,fr):(deps.val=scale,deps)}module.exports=properties}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{datalib:29,"vega-dataflow":232,"vega-logging":299}],357:[function(require,module,exports){var dl=require("datalib"),expr=require("./expr"),SIGNALS=require("vega-dataflow").Dependencies.SIGNALS;var RESERVED=["datum","event","signals","width","height","padding"].concat(dl.keys(expr.codegen.functions));function parseSignals(model,spec){(spec||[]).forEach(function(s){if(RESERVED.indexOf(s.name)!==-1){throw Error('Signal name "'+s.name+'" is a '+"reserved keyword ("+RESERVED.join(", ")+").")}var signal=model.signal(s.name,s.init).verbose(s.verbose);if(s.init&&s.init.expr){s.init.expr=model.expr(s.init.expr);signal.value(exprVal(model,s.init))}if(s.expr){s.expr=model.expr(s.expr);signal.evaluate=function(input){var val=exprVal(model,s),sg=input.signals;if(val!==signal.value()||signal.verbose()){signal.value(val);sg[s.name]=1}return sg[s.name]?input:model.doNotPropagate};signal.dependency(SIGNALS,s.expr.globals);s.expr.globals.forEach(function(dep){model.signal(dep).addListener(signal)})}});return spec}function exprVal(model,spec){var e=spec.expr,v=e.fn();return spec.scale?parseSignals.scale(model,spec,v):v}parseSignals.scale=function scale(model,spec,value,datum,evt){var def=spec.scale,name=def.name||def.signal||def,scope=def.scope,e;if(scope){if(scope.signal){scope=model.signalRef(scope.signal)}else if(dl.isString(scope)){e=def._expr=def._expr||model.expr(scope);scope=e.fn(datum,evt)}}return expr.scale(model,def.invert,name,value,scope)};module.exports=parseSignals},{"./expr":348,datalib:29,"vega-dataflow":232}],358:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),themeVal=require("../util/theme-val"),Model=require("../core/Model"),View=require("../core/View");function parseSpec(spec){var arglen=arguments.length,argidx=2,cb=arguments[arglen-1],model=new Model,viewFactory=View.factory,config;if(arglen>argidx&&dl.isFunction(arguments[arglen-argidx])){viewFactory=arguments[arglen-argidx];++argidx}if(arglen>argidx&&dl.isObject(arguments[arglen-argidx])){model.config(arguments[arglen-argidx])}config=model.config();if(dl.isObject(spec)){parse(spec)}else if(dl.isString(spec)){var opts=dl.extend({url:spec},config.load);dl.json(opts,function(err,spec){if(err)done("SPECIFICATION LOAD FAILED: "+err);else parse(spec)})}else{done("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}function parse(spec){try{spec=dl.duplicate(spec);var parsers=require("./"),width=themeVal(spec,config,"width",500),height=themeVal(spec,config,"height",500),padding=parsers.padding(themeVal(spec,config,"padding")),background=themeVal(spec,config,"background");model.signal("width",width);model.signal("height",height);model.signal("padding",padding);cursor(spec);model.defs({width:width,height:height,padding:padding,viewport:spec.viewport||null,background:parsers.background(background),signals:parsers.signals(model,spec.signals),predicates:parsers.predicates(model,spec.predicates),marks:parsers.marks(model,spec,width,height),data:parsers.data(model,spec.data,done)})}catch(err){done(err)}}function cursor(spec){var signals=spec.signals||(spec.signals=[]),def;signals.some(function(sg){return sg.name==="cursor"?(def=sg,true):false});if(!def)signals.push(def={name:"cursor",streams:[]});def.init=def.init||{};def.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}function done(err){var view;if(err){log.error(err)}else{view=viewFactory(model.buildIndexes())}if(cb){if(cb.length>1)cb(err,view);else if(!err)cb(view);cb=null}}}module.exports=parseSpec},{"../core/Model":341,"../core/View":342,"../util/theme-val":401,"./":349,datalib:29,"vega-logging":299}],359:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),df=require("vega-dataflow"),selector=require("vega-event-selector"),parseSignals=require("./signals");var GATEKEEPER="_vgGATEKEEPER",EVALUATOR="_vgEVALUATOR";var vgEvent={getItem:function(){return this.item},getGroup:function(name){var group=name?this.name[name]:this.group,mark=group&&group.mark,interactive=mark&&(mark.interactive||mark.interactive===undefined);return interactive?group:{}},getXY:function(item){var p={x:this.x,y:this.y};if(typeof item==="string"){item=this.name[item]}for(;item;item=item.mark&&item.mark.group){p.x-=item.x||0;p.y-=item.y||0}return p},getX:function(item){return this.getXY(item).x},getY:function(item){return this.getXY(item).y}};function parseStreams(view){var model=view.model(),trueFn=model.expr("true"),falseFn=model.expr("false"),spec=model.defs().signals,registry={handlers:{},nodes:{}},internal=dl.duplicate(registry),external=dl.duplicate(registry);dl.array(spec).forEach(function(sig){var signal=model.signal(sig.name);if(sig.expr)return;dl.array(sig.streams).forEach(function(stream){var sel=selector.parse(stream.type),exp=model.expr(stream.expr);mergedStream(signal,sel,exp,stream)})});dl.keys(internal.handlers).forEach(function(type){view.on(type,function(evt,item){evt.preventDefault();extendEvent(evt,item);fire(internal,type,item&&item.datum||{},item&&item.mark&&item.mark.group&&item.mark.group.datum||{},evt)})});dl.keys(external.handlers).forEach(function(type){if(typeof window==="undefined")return;var h=external.handlers[type],t=type.split(":"),elt=t[0]==="window"?[window]:window.document.querySelectorAll(t[0]);function handler(evt){extendEvent(evt);fire(external,type,d3.select(this).datum(),this.parentNode&&d3.select(this.parentNode).datum(),evt)}for(var i=0;i<elt.length;++i){elt[i].addEventListener(t[1],handler)}h.elements=elt;h.listener=handler});external.detach=function(){dl.keys(external.handlers).forEach(function(type){var h=external.handlers[type],t=type.split(":"),elt=dl.array(h.elements);for(var i=0;i<elt.length;++i){elt[i].removeEventListener(t[1],h.listener)}})};return external.detach;function extendEvent(evt,item){var mouse=d3.mouse((d3.event=evt,view.renderer().scene())),pad=view.padding(),names={},mark,group,i;if(item){mark=item.mark;group=mark.marktype==="group"?item:mark.group;for(i=item;i!=null;i=i.mark.group){if(i.mark.def.name){names[i.mark.def.name]=i}}}names.root=view.model().scene().items[0];evt.vg=Object.create(vgEvent);evt.vg.group=group;evt.vg.item=item||{};evt.vg.name=names;evt.vg.x=mouse[0]-pad.left;evt.vg.y=mouse[1]-pad.top}function fire(registry,type,datum,parent,evt){var handlers=registry.handlers[type],node=registry.nodes[type],cs=df.ChangeSet.create(null,true),filtered=false,val,i,n,h;function invoke(f){return!f.fn(datum,parent,evt)}for(i=0,n=handlers.length;i<n;++i){h=handlers[i];filtered=h.filters.some(invoke);if(filtered)continue;val=h.exp.fn(datum,parent,evt);if(h.spec.scale){val=parseSignals.scale(model,h.spec,val,datum,evt)}if(val!==h.signal.value()||h.signal.verbose()){h.signal.value(val);cs.signals[h.signal.name()]=1}}model.propagate(cs,node)}function mergedStream(sig,selector,exp,spec){selector.forEach(function(s){if(s.event)domEvent(sig,s,exp,spec);else if(s.signal)signal(sig,s,exp,spec);else if(s.start)orderedStream(sig,s,exp,spec);else if(s.stream){if(s.filters)s.stream.forEach(function(ms){ms.filters=dl.array(ms.filters).concat(s.filters)});mergedStream(sig,s.stream,exp,spec)}})}function domEvent(sig,selector,exp,spec){var evt=selector.event,name=selector.name,mark=selector.mark,target=selector.target,filters=dl.array(selector.filters),registry=target?external:internal,type=target?target+":"+evt:evt,node=registry.nodes[type]||(registry.nodes[type]=new df.Node(model)),handlers=registry.handlers[type]||(registry.handlers[type]=[]);if(name){filters.push('!!event.vg.name["'+name+'"]')}else if(mark){filters.push("event.vg.item.mark && event.vg.item.mark.marktype==="+dl.str(mark))}handlers.push({signal:sig,exp:exp,spec:spec,filters:filters.map(function(f){return model.expr(f)})});node.addListener(sig)}function signal(sig,selector,exp,spec){var n=sig.name(),s=model.signal(n+EVALUATOR,null);s.evaluate=function(input){if(!input.signals[selector.signal])return model.doNotPropagate;var val=exp.fn();if(spec.scale){val=parseSignals.scale(model,spec,val)}if(val!==sig.value()||sig.verbose()){sig.value(val);input.signals[n]=1;input.reflow=true}return input};s.dependency(df.Dependencies.SIGNALS,selector.signal);s.addListener(sig);model.signal(selector.signal).addListener(s)}function orderedStream(sig,selector,exp,spec){var name=sig.name(),gk=name+GATEKEEPER,middle=selector.middle,filters=middle.filters||(middle.filters=[]),gatekeeper=model.signal(gk)||model.signal(gk,false);mergedStream(gatekeeper,[selector.start],trueFn,{});mergedStream(gatekeeper,[selector.end],falseFn,{});filters.push(gatekeeper.name());mergedStream(sig,[selector.middle],exp,spec)}}module.exports=parseStreams}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./signals":357,datalib:29,"vega-dataflow":232,"vega-event-selector":233}],360:[function(require,module,exports){var dl=require("datalib"),transforms=require("../transforms/index");function parseTransforms(model,def){var transform=transforms[def.type],tx;if(!transform)throw new Error('"'+def.type+'" is not a valid transformation');tx=new transform(model);if(def.output)tx.output(def.output);dl.keys(def).forEach(function(k){if(k==="type"||k==="output")return;tx.param(k,def[k])});return tx}module.exports=parseTransforms},{"../transforms/index":397,datalib:29}],361:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),scene=require("vega-scenegraph"),Node=df.Node,log=require("vega-logging"),bound=scene.bound,Bounds=scene.Bounds,Encoder=require("./Encoder");function Bounder(graph,mark){this._mark=mark;return Node.prototype.init.call(this,graph).router(true).reflows(true).mutates(true)}var proto=Bounder.prototype=new Node;proto.evaluate=function(input){log.debug(input,["bounds",this._mark.marktype]);var mark=this._mark,type=mark.marktype,isGrp=type==="group",items=mark.items,hasLegends=dl.array(mark.def.legends).length>0,bounds=mark.bounds,rebound=!bounds||input.rem.length,i,ilen,j,jlen,group,legend;if(type==="line"||type==="area"){bound.mark(mark,null,isGrp&&!hasLegends)}else{input.add.forEach(function(item){bound.item(item);rebound=rebound||bounds&&!bounds.encloses(item.bounds)});input.mod.forEach(function(item){rebound=rebound||bounds&&bounds.alignsWith(item.bounds);bound.item(item)});if(rebound){bounds=mark.bounds&&mark.bounds.clear()||(mark.bounds=new Bounds);for(i=0,ilen=items.length;i<ilen;++i)bounds.union(items[i].bounds)}}if(isGrp&&hasLegends){for(i=0,ilen=items.length;i<ilen;++i){group=items[i];group._legendPositions=null;for(j=0,jlen=group.legendItems.length;j<jlen;++j){legend=group.legendItems[j];Encoder.update(this._graph,input.trans,"legendPosition",legend.items,input.dirty);bound.mark(legend,null,false)}}bound.mark(mark,null,true)}return df.ChangeSet.create(input,true)};module.exports=Bounder},{"./Encoder":363,datalib:29,"vega-dataflow":232,"vega-logging":299,"vega-scenegraph":300}],362:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),Item=require("vega-scenegraph").Item,df=require("vega-dataflow"),Node=df.Node,Deps=df.Dependencies,Tuple=df.Tuple,ChangeSet=df.ChangeSet,Sentinel={},Encoder=require("./Encoder"),Bounder=require("./Bounder"),parseData=require("../parse/data");function Builder(){return arguments.length?this.init.apply(this,arguments):this}var Status=Builder.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"};var CONNECTED=1,DISCONNECTED=2;var proto=Builder.prototype=new Node;proto.init=function(graph,def,mark,parent,parent_id,inheritFrom){Node.prototype.init.call(this,graph).router(true).collector(true);this._def=def;this._mark=mark;this._from=(def.from?def.from.data:null)||inheritFrom;this._ds=dl.isString(this._from)?graph.data(this._from):null;this._map={};this._status=null;mark.def=def;mark.marktype=def.type;mark.interactive=def.interactive!==false;mark.items=[];if(dl.isValid(def.name))mark.name=def.name;this._parent=parent;this._parent_id=parent_id;if(def.from&&(def.from.mark||def.from.transform||def.from.modify)){inlineDs.call(this)}this._isSuper=this._def.type!=="group";this._encoder=new Encoder(this._graph,this._mark,this);this._bounder=new Bounder(this._graph,this._mark);this._output=null;if(this._ds){this._encoder.dependency(Deps.DATA,this._from)}this.dependency(Deps.DATA,this._encoder.dependency(Deps.DATA));this.dependency(Deps.SCALES,this._encoder.dependency(Deps.SCALES));this.dependency(Deps.SIGNALS,this._encoder.dependency(Deps.SIGNALS));return this};function inlineDs(){var from=this._def.from,geom=from.mark,src,name,spec,sibling,output,input,node;if(geom){sibling=this.sibling(geom);src=sibling._isSuper?sibling:sibling._bounder;name=["vg",this._parent_id,geom,src.listeners(true).length].join("_");spec={name:name,transform:from.transform,modify:from.modify}}else{src=this._graph.data(this._from);if(!src)throw Error('Data source "'+this._from+'" is not defined.');name=["vg",this._from,this._def.type,src.listeners(true).length].join("_");spec={name:name,source:this._from,transform:from.transform,modify:from.modify}}this._from=name;this._ds=parseData.datasource(this._graph,spec);if(geom){node=new Node(this._graph).addListener(this._ds.listener());node.evaluate=function(input){var out=ChangeSet.create(input),sout=sibling._output;out.add=sout.add;out.mod=sout.mod;out.rem=sout.rem;return out};src.addListener(node)}else{output=this._ds.source().last();input=ChangeSet.create(output);input.add=output.add;input.mod=output.mod;input.rem=output.rem;input.stamp=null;this._graph.propagate(input,this._ds.listener(),output.stamp)}}proto.ds=function(){return this._ds};proto.parent=function(){return this._parent};proto.encoder=function(){return this._encoder};proto.pipeline=function(){return[this]};proto.connect=function(){var builder=this;this._graph.connect(this.pipeline());this._encoder._scales.forEach(function(s){if(!(s=builder._parent.scale(s)))return;s.addListener(builder)});if(this._parent){if(this._isSuper)this.addListener(this._parent._collector);else this._bounder.addListener(this._parent._collector)}return this._status=CONNECTED,this};proto.disconnect=function(){var builder=this;if(!this._listeners.length)return this;function disconnectScales(scales){for(var i=0,len=scales.length,s;i<len;++i){if(!(s=builder._parent.scale(scales[i])))continue;s.removeListener(builder)}}Node.prototype.disconnect.call(this);this._graph.disconnect(this.pipeline());disconnectScales(this._encoder._scales);disconnectScales(dl.keys(this._mark._scaleRefs));return this._status=DISCONNECTED,this};proto.sibling=function(name){return this._parent.child(name,this._parent_id)};proto.evaluate=function(input){log.debug(input,["building",this._from||this._def.from,this._def.type]);var self=this,def=this._mark.def,props=def.properties||{},update=props.update||{},output=ChangeSet.create(input),fullUpdate,fcs,data,name;if(this._ds){data=output.data[name=this._ds.name()];output.data[name]=null;fullUpdate=this._encoder.reevaluate(output);output.data[name]=data;fcs=this._ds.last();if(!fcs)throw Error("Builder evaluated before backing DataSource.");if(fcs.stamp>this._stamp){join.call(this,fcs,output,this._ds.values(),true,fullUpdate)}else if(fullUpdate){output.mod=this._mark.items.slice()}}else{data=dl.isFunction(this._def.from)?this._def.from():[Sentinel];join.call(this,input,output,data)}this._output=output=this._graph.evaluate(output,this._encoder);if(update.nested&&update.nested.length&&this._status===CONNECTED){dl.keys(this._mark._scaleRefs).forEach(function(s){var scale=self._parent.scale(s);if(!scale)return;scale.addListener(self);self.dependency(Deps.SCALES,s);self._encoder.dependency(Deps.SCALES,s)})}if(this._isSuper){output.mod=output.mod.filter(function(x){return x._dirty});output=this._graph.evaluate(output,this._bounder)}return output};function newItem(){var item=Tuple.ingest(new Item(this._mark));if(this._def.width)Tuple.set(item,"width",this._def.width);if(this._def.height)Tuple.set(item,"height",this._def.height);return item}function join(input,output,data,ds,fullUpdate){var keyf=keyFunction(this._def.key||(ds?"_id":null)),prev=this._mark.items||[],rem=ds?input.rem:prev,mod=Tuple.idMap(!ds||fullUpdate?data:input.mod),next=[],i,key,len,item,datum,enter,diff;for(i=0,len=rem.length;i<len;++i){item=rem[i]===prev[i]?prev[i]:keyf?this._map[keyf(rem[i])]:rem[i];item.status=Status.EXIT}for(i=0,len=data.length;i<len;++i){datum=data[i];item=keyf?this._map[key=keyf(datum)]:prev[i];enter=item?false:(item=newItem.call(this),true);item.status=enter?Status.ENTER:Status.UPDATE;diff=!enter&&item.datum!==datum;item.datum=datum;if(keyf){Tuple.set(item,"key",key);this._map[key]=item}if(enter){output.add.push(item)}else if(diff||mod[datum._id]){output.mod.push(item)}next.push(item)}for(i=0,len=rem.length;i<len;++i){item=rem[i]===prev[i]?prev[i]:keyf?this._map[key=keyf(rem[i])]:rem[i];if(item.status===Status.EXIT){item._dirty=true;input.dirty.push(item);next.push(item);output.rem.push(item);if(keyf)this._map[key]=null}}return this._mark.items=next,output}function keyFunction(key){if(key==null)return null;var f=dl.array(key).map(dl.accessor);return function(d){for(var s="",i=0,n=f.length;i<n;++i){if(i>0)s+="|";s+=String(f[i](d))}return s}}module.exports=Builder},{"../parse/data":347,"./Bounder":361,"./Encoder":363,datalib:29,"vega-dataflow":232,"vega-logging":299,"vega-scenegraph":300}],363:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),df=require("vega-dataflow"),Node=df.Node,Deps=df.Dependencies,bound=require("vega-scenegraph").bound;var EMPTY={};function Encoder(graph,mark,builder){var props=mark.def.properties||{},enter=props.enter,update=props.update,exit=props.exit;Node.prototype.init.call(this,graph);this._mark=mark;this._builder=builder;var s=this._scales=[];if(enter)s.push.apply(s,enter.scales);if(update){this.dependency(Deps.DATA,update.data);this.dependency(Deps.SIGNALS,update.signals);this.dependency(Deps.FIELDS,update.fields);this.dependency(Deps.SCALES,update.scales);s.push.apply(s,update.scales)}if(exit)s.push.apply(s,exit.scales);return this.mutates(true)}var proto=Encoder.prototype=new Node;proto.evaluate=function(input){log.debug(input,["encoding",this._mark.def.type]);var graph=this._graph,props=this._mark.def.properties||{},items=this._mark.items,enter=props.enter,update=props.update,exit=props.exit,dirty=input.dirty,preds=graph.predicates(),req=input.request,group=this._mark.group,guide=group&&(group.mark.axis||group.mark.legend),db=EMPTY,sg=EMPTY,i,len,item,prop;if(req&&!guide){if((prop=props[req])&&input.mod.length){db=prop.data?graph.values(Deps.DATA,prop.data):null;sg=prop.signals?graph.values(Deps.SIGNALS,prop.signals):null;for(i=0,len=input.mod.length;i<len;++i){item=input.mod[i];encode.call(this,prop,item,input.trans,db,sg,preds,dirty)}}return input}db=values(Deps.DATA,graph,input,props);sg=values(Deps.SIGNALS,graph,input,props);for(i=0,len=input.rem.length;i<len;++i){item=input.rem[i];if(exit)encode.call(this,exit,item,input.trans,db,sg,preds,dirty);if(input.trans&&!exit)input.trans.interpolate(item,EMPTY);else if(!input.trans)items.pop()}var update_status=require("./Builder").STATUS.UPDATE;for(i=0,len=input.add.length;i<len;++i){item=input.add[i];if(enter)encode.call(this,enter,item,input.trans,db,sg,preds,dirty);if(update)encode.call(this,update,item,input.trans,db,sg,preds,dirty);item.status=update_status}if(update){for(i=0,len=input.mod.length;i<len;++i){item=input.mod[i];encode.call(this,update,item,input.trans,db,sg,preds,dirty)}}return input};function values(type,graph,input,props){var p,x,o,add=input.add.length;if((p=props.enter)&&(x=p[type]).length&&add){o=graph.values(type,x,o=o||{})}if((p=props.exit)&&(x=p[type]).length&&input.rem.length){o=graph.values(type,x,o=o||{})}if((p=props.update)&&(x=p[type]).length&&(add||input.mod.length)){o=graph.values(type,x,o=o||{})}return o||EMPTY}function encode(prop,item,trans,db,sg,preds,dirty){var enc=prop.encode,wasDirty=item._dirty,isDirty=enc.call(enc,item,item.mark.group||item,trans,db,sg,preds);item._dirty=isDirty||wasDirty;if(isDirty&&!wasDirty)dirty.push(item)}proto.reevaluate=function(pulse){var def=this._mark.def,props=def.properties||{},reeval=dl.isFunction(def.from)||def.orient||pulse.request||Node.prototype.reevaluate.call(this,pulse);return reeval||(props.update?nestedRefs.call(this):false)};function nestedRefs(){var refs=this._mark.def.properties.update.nested,parent=this._builder,level=0,i=0,len=refs.length,ref,ds,stamp;for(;i<len;++i){ref=refs[i];if(ref.scale)continue;for(;level<ref.level;++level){parent=parent.parent();ds=parent.ds()}stamp=(ref.group?parent.encoder():ds.last())._stamp;if(stamp>this._stamp)return true}return false}Encoder.update=function(graph,trans,request,items,dirty){items=dl.array(items);var preds=graph.predicates(),db=graph.values(Deps.DATA),sg=graph.values(Deps.SIGNALS),i,len,item,props,prop;for(i=0,len=items.length;i<len;++i){item=items[i];props=item.mark.def.properties;prop=props&&props[request];if(prop){encode.call(null,prop,item,trans,db,sg,preds,dirty);bound.item(item)}}};module.exports=Encoder},{"./Builder":362,datalib:29,"vega-dataflow":232,"vega-logging":299,"vega-scenegraph":300}],364:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),Node=df.Node,Deps=df.Dependencies,Tuple=df.Tuple,Collector=df.Collector,log=require("vega-logging"),Builder=require("./Builder"),Scale=require("./Scale"),parseAxes=require("../parse/axes"),parseLegends=require("../parse/legends");function GroupBuilder(){this._children={};this._scaler=null;this._recursor=null;this._scales={};this.scale=scale.bind(this);return arguments.length?this.init.apply(this,arguments):this}var Types=GroupBuilder.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"};var proto=GroupBuilder.prototype=new Builder;proto.init=function(graph,def){var builder=this,name;this._scaler=new Node(graph);(def.scales||[]).forEach(function(s){s=builder.scale(name=s.name,new Scale(graph,s,builder));builder.scale(name+":prev",s);builder._scaler.addListener(s)});this._recursor=new Node(graph);this._recursor.evaluate=recurse.bind(this);var scales=(def.axes||[]).reduce(function(acc,x){acc[x.scale]=1;return acc},{});scales=(def.legends||[]).reduce(function(acc,x){acc[x.size||x.shape||x.fill||x.stroke||x.opacity]=1;return acc},scales);this._recursor.dependency(Deps.SCALES,dl.keys(scales));this._collector=new Collector(graph);return Builder.prototype.init.apply(this,arguments)};proto.evaluate=function(){var output=Builder.prototype.evaluate.apply(this,arguments),model=this._graph,builder=this,scales=this._scales,items=this._mark.items;if(output.mod.length<items.length){var fullUpdate=dl.keys(scales).some(function(s){return scales[s].reevaluate(output)});if(!fullUpdate&&this._def.axes){fullUpdate=this._def.axes.reduce(function(acc,a){return acc||output.scales[a.scale]},false)}if(!fullUpdate&&this._def.legends){fullUpdate=this._def.legends.reduce(function(acc,l){return acc||output.scales[l.size||l.shape||l.fill||l.stroke]},false)}if(fullUpdate){output.mod=output.mod.concat(Tuple.idFilter(items,output.mod,output.add,output.rem))}}output.add.forEach(function(group){buildGroup.call(builder,output,group)});output.rem.forEach(function(group){model.group(group._id,null)});return output};proto.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]};proto.disconnect=function(){var builder=this;dl.keys(builder._children).forEach(function(group_id){builder._children[group_id].forEach(function(c){builder._recursor.removeListener(c.builder);c.builder.disconnect()})});builder._children={};return Builder.prototype.disconnect.call(this)};proto.child=function(name,group_id){var children=this._children[group_id],i=0,len=children.length,child;for(;i<len;++i){child=children[i];if(child.type==Types.MARK&&child.builder._def.name==name)break}return child.builder};function recurse(input){var builder=this,hasMarks=dl.array(this._def.marks).length>0,hasAxes=dl.array(this._def.axes).length>0,hasLegends=dl.array(this._def.legends).length>0,i,j,c,len,group,pipeline,def,inline=false;for(i=0,len=input.add.length;i<len;++i){group=input.add[i];if(hasMarks)buildMarks.call(this,input,group);if(hasAxes)buildAxes.call(this,input,group);if(hasLegends)buildLegends.call(this,input,group)}for(i=input.add.length-1;i>=0;--i){group=input.add[i];for(j=this._children[group._id].length-1;j>=0;--j){c=this._children[group._id][j];c.builder.connect();pipeline=c.builder.pipeline();def=c.builder._def;inline=def.type!==Types.GROUP;inline=inline&&this._graph.data(c.from)!==undefined;inline=inline&&pipeline[pipeline.length-1].listeners().length===1;inline=inline&&(def.from&&!def.from.mark);c.inline=inline;if(inline)this._graph.evaluate(input,c.builder);else this._recursor.addListener(c.builder)}}function removeTemp(c){if(c.type==Types.MARK&&!c.inline&&builder._graph.data(c.from)!==undefined){builder._recursor.removeListener(c.builder)}}function updateAxis(a){var scale=a.scale();if(!input.scales[scale.scaleName])return;a.reset().def()}function updateLegend(l){var scale=l.size()||l.shape()||l.fill()||l.stroke()||l.opacity();if(!input.scales[scale.scaleName])return;l.reset().def()}for(i=0,len=input.mod.length;i<len;++i){group=input.mod[i];if(hasMarks)builder._children[group._id].forEach(removeTemp);if(hasAxes)group.axes.forEach(updateAxis);if(hasLegends)group.legends.forEach(updateLegend)}function disconnectChildren(c){builder._recursor.removeListener(c.builder);c.builder.disconnect()}for(i=0,len=input.rem.length;i<len;++i){group=input.rem[i];builder._children[group._id].forEach(disconnectChildren);delete builder._children[group._id]}return input}function scale(name,x){var group=this,s=null;if(arguments.length===2)return group._scales[name]=x,x;while(s==null){s=group._scales[name];group=group.mark?group.mark.group:group._parent;if(!group)break}return s}function buildGroup(input,group){log.debug(input,["building group",group._id]);group._scales=group._scales||{};group.scale=scale.bind(group);group.items=group.items||[];this._children[group._id]=this._children[group._id]||[];group.axes=group.axes||[];group.axisItems=group.axisItems||[];group.legends=group.legends||[];group.legendItems=group.legendItems||[];this._graph.group(group._id,group)}function buildMarks(input,group){log.debug(input,["building children marks #"+group._id]);var marks=this._def.marks,mark,from,inherit,i,len,b;for(i=0,len=marks.length;i<len;++i){mark=marks[i];from=mark.from||{};inherit=group.datum._facetID;group.items[i]={group:group,_scaleRefs:{}};b=mark.type===Types.GROUP?new GroupBuilder:new Builder;b.init(this._graph,mark,group.items[i],this,group._id,inherit);this._children[group._id].push({builder:b,from:from.data||(from.mark?"vg_"+group._id+"_"+from.mark:inherit),type:Types.MARK})}}function buildAxes(input,group){var axes=group.axes,axisItems=group.axisItems,builder=this;parseAxes(this._graph,this._def.axes,axes,group);axes.forEach(function(a,i){var scale=builder._def.axes[i].scale,def=a.def(),b=null;axisItems[i]={group:group,axis:a,layer:def.layer};b=def.type===Types.GROUP?new GroupBuilder:new Builder;b.init(builder._graph,def,axisItems[i],builder).dependency(Deps.SCALES,scale);builder._children[group._id].push({builder:b,type:Types.AXIS,scale:scale})})}function buildLegends(input,group){var legends=group.legends,legendItems=group.legendItems,builder=this;parseLegends(this._graph,this._def.legends,legends,group);legends.forEach(function(l,i){var scale=l.size()||l.shape()||l.fill()||l.stroke()||l.opacity(),def=l.def(),b=null;legendItems[i]={group:group,legend:l};b=def.type===Types.GROUP?new GroupBuilder:new Builder;b.init(builder._graph,def,legendItems[i],builder).dependency(Deps.SCALES,scale);builder._children[group._id].push({builder:b,type:Types.LEGEND,scale:scale})})}module.exports=GroupBuilder},{"../parse/axes":345,"../parse/legends":350,"./Builder":362,"./Scale":365,datalib:29,"vega-dataflow":232,"vega-logging":299}],365:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),df=require("vega-dataflow"),log=require("vega-logging"),Node=df.Node,Deps=df.Dependencies,Aggregate=require("../transforms/Aggregate");var Properties={width:1,height:1};var Types={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"};var DataRef={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"};function Scale(graph,def,parent){this._def=def;this._parent=parent;this._updated=false;return Node.prototype.init.call(this,graph).reflows(true)}var proto=Scale.prototype=new Node;proto.evaluate=function(input){var self=this,fn=function(group){scale.call(self,group)};this._updated=false;input.add.forEach(fn);input.mod.forEach(fn);if(this._updated){input.scales[this._def.name]=1;log.debug(input,["scale",this._def.name])}return df.ChangeSet.create(input,true)};proto.dependency=function(type,deps){if(arguments.length==2){var method=type===Deps.DATA?"data":"signal";deps=dl.array(deps);for(var i=0,len=deps.length;i<len;++i){this._graph[method](deps[i]).addListener(this._parent)}}return Node.prototype.dependency.call(this,type,deps)};function scale(group){var name=this._def.name,prev=name+":prev",s=instance.call(this,group.scale(name)),m=s.type===Types.ORDINAL?ordinal:quantitative,rng=range.call(this,group);m.call(this,s,rng,group);group.scale(name,s);group.scale(prev,group.scale(prev)||s);return s}function instance(scale){var config=this._graph.config(),type=this._def.type||Types.LINEAR;if(!scale||type!==scale.type){var ctor=config.scale[type]||d3.scale[type];if(!ctor)throw Error("Unrecognized scale type: "+type);(scale=ctor()).type=scale.type||type;scale.scaleName=this._def.name;scale._prev={}}return scale}function ordinal(scale,rng,group){var def=this._def,prev=scale._prev,dataDrivenRange=false,pad=signal.call(this,def.padding)||0,outer=def.outerPadding==null?pad:signal.call(this,def.outerPadding),points=def.points&&signal.call(this,def.points),round=signal.call(this,def.round)||def.round==null,domain,str,spatial=true;if(dl.isObject(def.range)&&!dl.isArray(def.range)){dataDrivenRange=true;rng=dataRef.call(this,DataRef.RANGE,def.range,scale,group)}domain=dataRef.call(this,DataRef.DOMAIN,def.domain,scale,group);if(domain&&!dl.equal(prev.domain,domain)){scale.domain(domain);prev.domain=domain;this._updated=true}if(!dl.equal(prev.range,rng)){if(def.bandSize){var bw=signal.call(this,def.bandSize),len=domain.length,space=def.points?pad*bw:pad*bw*(len-1)+2*outer,start;if(rng[0]>rng[1]){start=rng[1]||0;rng=[start+(bw*len+space),start]}else{start=rng[0]||0;rng=[start,start+(bw*len+space)]}if(def.reverse)rng=rng.reverse()}str=typeof rng[0]==="string";if(str||rng.length>2||rng.length===1||dataDrivenRange){scale.range(rng);spatial=false}else if(points&&round){scale.rangeRoundPoints(rng,pad)}else if(points){scale.rangePoints(rng,pad)}else if(round){scale.rangeRoundBands(rng,pad,outer)}else{scale.rangeBands(rng,pad,outer)}prev.range=rng;this._updated=true}if(!scale.invert&&spatial)invertOrdinal(scale)}var bisect=d3.bisector(dl.numcmp).right,findAsc=function(a,x){return bisect(a,x)-1},findDsc=d3.bisector(function(a,b){return-1*dl.numcmp(a,b)}).left;function invertOrdinal(scale){scale.invert=function(x,y){var rng=scale.range(),asc=rng[0]<rng[1],find=asc?findAsc:findDsc;if(arguments.length===1){if(!dl.isNumber(x)){throw Error("Ordinal scale inversion is only supported for numeric input ("+x+").")}return scale.domain()[find(rng,x)]}else if(arguments.length===2){if(!dl.isNumber(x)||!dl.isNumber(y)){throw Error("Extents to ordinal invert are not numbers ("+x+", "+y+").")}var domain=scale.domain(),a=find(rng,x),b=find(rng,y),n=rng.length-1,r;if(b<a){r=a;a=b;b=a}if(a<0)a=0;if(b>n)b=n;return(asc?dl.range(a,b+1):dl.range(b,a-1,-1)).map(function(i){return domain[i]})}}}function quantitative(scale,rng,group){var def=this._def,prev=scale._prev,round=signal.call(this,def.round),exponent=signal.call(this,def.exponent),clamp=signal.call(this,def.clamp),nice=signal.call(this,def.nice),domain,interval;domain=def.type===Types.QUANTILE?dataRef.call(this,DataRef.DOMAIN,def.domain,scale,group):domainMinMax.call(this,scale,group);if(domain&&!dl.equal(prev.domain,domain)){scale.domain(domain);prev.domain=domain;this._updated=true}if(signal.call(this,def.range)==="height")rng=rng.reverse();if(rng&&!dl.equal(prev.range,rng)){scale[round&&scale.rangeRound?"rangeRound":"range"](rng);prev.range=rng;this._updated=true}if(exponent&&def.type===Types.POWER)scale.exponent(exponent);if(clamp)scale.clamp(true);if(nice){if(def.type===Types.TIME){interval=d3.time[nice];if(!interval)log.error("Unrecognized interval: "+interval);scale.nice(interval)}else{scale.nice()}}}function isUniques(scale){return scale.type===Types.ORDINAL||scale.type===Types.QUANTILE}function getRefs(def){return def.fields||dl.array(def)}function inherits(refs){return refs.some(function(r){if(!r.data)return true;return r.data&&dl.array(r.field).some(function(f){return f.parent})})}function getFields(ref,group){return dl.array(ref.field).map(function(f){return f.parent?dl.accessor(f.parent)(group.datum):f})}function aggrType(def,scale){var refs=getRefs(def);if(refs.length==1&&dl.array(refs[0].field).length==1){return Aggregate.TYPES.TUPLE}if(!isUniques(scale))return Aggregate.TYPES.VALUE;if(!dl.isObject(def.sort))return Aggregate.TYPES.VALUE;return Aggregate.TYPES.MULTI}function getCache(which,def,scale,group){var refs=getRefs(def),inherit=inherits(refs),atype=aggrType(def,scale),uniques=isUniques(scale),sort=def.sort,ck="_"+which,fields=getFields(refs[0],group);if(scale[ck]||this[ck])return scale[ck]||this[ck];var cache=new Aggregate(this._graph).type(atype),groupby,summarize;if(inherit){scale[ck]=cache}else{this[ck]=cache}if(uniques){if(atype===Aggregate.TYPES.VALUE){groupby=[{name:DataRef.GROUPBY,get:dl.identity}];summarize={"*":DataRef.COUNT}}else if(atype===Aggregate.TYPES.TUPLE){groupby=[{name:DataRef.GROUPBY,get:dl.$(fields[0])}];summarize=dl.isObject(sort)?[{field:DataRef.VALUE,get:dl.$(sort.field),ops:[sort.op]}]:{"*":DataRef.COUNT}}else{groupby=DataRef.GROUPBY;summarize=[{field:DataRef.VALUE,ops:[sort.op]}]}}else{groupby=[];summarize=[{field:DataRef.VALUE,get:atype==Aggregate.TYPES.TUPLE?dl.$(fields[0]):dl.identity,ops:[DataRef.MIN,DataRef.MAX],as:[DataRef.MIN,DataRef.MAX]}]}cache.param("groupby",groupby).param("summarize",summarize);return cache._lastUpdate=-1,cache}function dataRef(which,def,scale,group){if(def==null){return[]}if(dl.isArray(def))return def.map(signal.bind(this));var self=this,graph=this._graph,refs=getRefs(def),inherit=inherits(refs),atype=aggrType(def,scale),cache=getCache.apply(this,arguments),sort=def.sort,uniques=isUniques(scale),i,rlen,j,flen,ref,fields,field,data,from,cmp;function addDep(s){self.dependency(Deps.SIGNALS,s)}if(inherit||!inherit&&cache._lastUpdate<this._stamp){for(i=0,rlen=refs.length;i<rlen;++i){ref=refs[i];from=ref.data||group.datum._facetID;data=graph.data(from).last();if(data.stamp<=this._stamp)continue;fields=getFields(ref,group);for(j=0,flen=fields.length;j<flen;++j){field=fields[j];if(atype===Aggregate.TYPES.VALUE){cache.accessors(null,field)}else if(atype===Aggregate.TYPES.MULTI){cache.accessors(field,ref.sort||sort.field)}cache.evaluate(data)}this.dependency(Deps.DATA,from);cache.dependency(Deps.SIGNALS).forEach(addDep)}cache._lastUpdate=this._stamp;data=cache.aggr().result();if(uniques){if(dl.isObject(sort)){cmp=sort.op+"_"+DataRef.VALUE;cmp=dl.comparator(cmp)}else if(sort===true){cmp=dl.comparator(DataRef.GROUPBY)}if(cmp)data=data.sort(cmp);cache._values=data.map(function(d){return d[DataRef.GROUPBY]})}else{data=data[0];cache._values=!dl.isValid(data)?[]:[data[DataRef.MIN],data[DataRef.MAX]]}}return cache._values}function signal(v){if(!v||!v.signal)return v;var s=v.signal,ref;this.dependency(Deps.SIGNALS,(ref=dl.field(s))[0]);return this._graph.signalRef(ref)}function domainMinMax(scale,group){var def=this._def,domain=[null,null],s,z;if(def.domain!==undefined){domain=!dl.isObject(def.domain)?domain:dataRef.call(this,DataRef.DOMAIN,def.domain,scale,group)}z=domain.length-1;if(def.domainMin!==undefined){if(dl.isObject(def.domainMin)){if(def.domainMin.signal){domain[0]=dl.isValid(s=signal.call(this,def.domainMin))?s:domain[0]}else{domain[0]=dataRef.call(this,DataRef.DOMAIN+DataRef.MIN,def.domainMin,scale,group)[0]}}else{domain[0]=def.domainMin}}if(def.domainMax!==undefined){if(dl.isObject(def.domainMax)){if(def.domainMax.signal){domain[z]=dl.isValid(s=signal.call(this,def.domainMax))?s:domain[z]}else{domain[z]=dataRef.call(this,DataRef.DOMAIN+DataRef.MAX,def.domainMax,scale,group)[1]}}else{domain[z]=def.domainMax}}if(def.type!==Types.LOG&&def.type!==Types.TIME&&def.type!==Types.TIME_UTC&&(def.zero||def.zero===undefined)){domain[0]=Math.min(0,domain[0]);domain[z]=Math.max(0,domain[z])}return domain}function range(group){var def=this._def,config=this._graph.config(),rangeVal=signal.call(this,def.range),rng=[null,null];if(rangeVal!==undefined){if(typeof rangeVal==="string"){if(Properties[rangeVal]){rng=[0,group[rangeVal]]}else if(config.range[rangeVal]){rng=config.range[rangeVal]}else{log.error("Unrecogized range: "+rangeVal);return rng}}else if(dl.isArray(rangeVal)){rng=dl.duplicate(rangeVal).map(signal.bind(this))}else if(dl.isObject(rangeVal)){return null}else{rng=[0,rangeVal]}}if(def.rangeMin!==undefined){rng[0]=def.rangeMin.signal?signal.call(this,def.rangeMin):def.rangeMin}if(def.rangeMax!==undefined){rng[rng.length-1]=def.rangeMax.signal?signal.call(this,def.rangeMax):def.rangeMax}if(def.reverse!==undefined){var rev=signal.call(this,def.reverse);if(dl.isObject(rev)){rev=dl.accessor(rev.field)(group.datum)}if(rev)rng=rng.reverse()}var start=rng[0],end=rng[rng.length-1];if(start===null&&end!==null||start!==null&&end===null){log.error("Range is underspecified. Please ensure either the "+'"range" property or both "rangeMin" and "rangeMax" are specified.')}return rng}module.exports=Scale}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../transforms/Aggregate":370,datalib:29,"vega-dataflow":232,"vega-logging":299}],366:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,bound=require("vega-scenegraph").bound,Tuple=require("vega-dataflow").Tuple,Status=require("./Builder").STATUS;function Transition(duration,ease){this.duration=duration||500;this.ease=ease&&d3.ease(ease)||d3.ease("cubic-in-out");this.updates={next:null}}var prototype=Transition.prototype;var skip={text:1,url:1};prototype.interpolate=function(item,values){var key,curr,next,interp,list=null;for(key in values){curr=item[key];next=values[key];if(curr!==next){if(skip[key]||curr===undefined){Tuple.set(item,key,next)}else if(typeof curr==="number"&&!isFinite(curr)){Tuple.set(item,key,next)}else{interp=d3.interpolate(curr,next);interp.property=key;(list||(list=[])).push(interp)}}}if(list===null&&item.status===Status.EXIT){list=[]}if(list!=null){list.item=item;list.ease=item.mark.ease||this.ease;list.next=this.updates.next;this.updates.next=list}return this};prototype.start=function(callback){var t=this,prev=t.updates,curr=prev.next;for(;curr!=null;prev=curr,curr=prev.next){if(curr.item.status===Status.EXIT){curr.item.status=Status.UPDATE;curr.remove=true}}t.callback=callback;d3.timer(function(elapsed){return step.call(t,elapsed)})};function step(elapsed){var list=this.updates,prev=list,curr=prev.next,duration=this.duration,item,delay,f,e,i,n,stop=true;for(;curr!=null;prev=curr,curr=prev.next){item=curr.item;delay=item.delay||0;f=(elapsed-delay)/duration;if(f<0){stop=false;continue}if(f>1)f=1;e=curr.ease(f);for(i=0,n=curr.length;i<n;++i){item[curr[i].property]=curr[i](e)}item.touch();bound.item(item);if(f===1){if(curr.remove){item.status=Status.EXIT;item.remove()}prev.next=curr.next;curr=prev}else{stop=false}}this.callback();return stop}module.exports=Transition}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Builder":362,"vega-dataflow":232,"vega-scenegraph":300}],367:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,parseMark=require("../parse/mark"),util=require("../util");var axisBounds=new(require("vega-scenegraph").Bounds);var ORDINAL="ordinal";function axs(model,config){var scale,orient=config.orient,offset=0,titleOffset=config.titleOffset,axisDef={},layer="front",grid=false,title=null,tickMajorSize=config.tickSize,tickMinorSize=config.tickSize,tickEndSize=config.tickSize,tickPadding=config.tickPadding||config.padding,tickValues=null,tickFormatString=null,tickFormatType=null,tickSubdivide=0,tickCount=config.ticks,gridLineStyle={},tickLabelStyle={},majorTickStyle={},minorTickStyle={},titleStyle={},domainStyle={},m={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}};var axis={};function reset(){axisDef.type=null}function ingest(d){return{data:d}}function getTicks(format){var major=tickValues||(scale.ticks?scale.ticks(tickCount):scale.domain()),minor=axisSubdivide(scale,major,tickSubdivide).map(ingest);major=major.map(function(d){return d=ingest(d),d.label=format(d.data),d});return[major,minor]}axis.def=function(){if(!axisDef.type)axis_def(scale);var format=util.getTickFormat(scale,tickCount,tickFormatType,tickFormatString),ticks=getTicks(format),tdata=title?[title].map(ingest):[];axisDef.marks[0].from=function(){return grid?ticks[0]:[]};axisDef.marks[1].from=function(){return ticks[0]};axisDef.marks[2].from=function(){return ticks[1]};axisDef.marks[3].from=axisDef.marks[1].from;axisDef.marks[4].from=function(){return[1]};axisDef.marks[5].from=function(){return tdata};axisDef.offset=offset;axisDef.orient=orient;axisDef.layer=layer;if(titleOffset==="auto")titleAutoOffset(axisDef);return axisDef};function titleAutoOffset(axisDef){var orient=axisDef.orient,update=axisDef.marks[5].properties.update,fn=update.encode,min=config.titleOffsetAutoMin,max=config.titleOffsetAutoMax,pad=config.titleOffsetAutoMargin;update.encode=function(item,group,trans,db,signals,preds){var dirty=fn.call(fn,item,group,trans,db,signals,preds),field=orient==="bottom"||orient==="top"?"y":"x";if(titleStyle[field]!=null)return dirty;axisBounds.clear().union(group.items[3].bounds).union(group.items[4].bounds);var o=trans?{}:item,method=orient==="left"||orient==="right"?"width":"height",sign=orient==="top"||orient==="left"?-1:1,off=~~(axisBounds[method]()+item.fontSize/2+pad);Tuple.set(o,field,sign*Math.min(Math.max(min,off),max));if(trans)trans.interpolate(item,o);return true}}function axis_def(scale){var newScale,oldScale,range;if(scale.type===ORDINAL){newScale={scale:scale.scaleName,offset:.5+scale.rangeBand()/2};oldScale=newScale}else{newScale={scale:scale.scaleName,offset:.5};oldScale={scale:scale.scaleName+":prev",offset:.5}}range=axisScaleRange(scale);dl.extend(m.gridLines,axisTicks(config));dl.extend(m.majorTicks,axisTicks(config));dl.extend(m.minorTicks,axisTicks(config));dl.extend(m.tickLabels,axisTickLabels(config));dl.extend(m.domain,axisDomain(config));dl.extend(m.title,axisTitle(config));m.gridLines.properties.enter.stroke={value:config.gridColor};m.gridLines.properties.enter.strokeOpacity={value:config.gridOpacity};m.gridLines.properties.enter.strokeWidth={value:config.gridWidth};m.gridLines.properties.enter.strokeDash={value:config.gridDash};axisTicksExtend(orient,m.gridLines,oldScale,newScale,Infinity,scale,config,offset);axisTicksExtend(orient,m.majorTicks,oldScale,newScale,tickMajorSize,scale,config);axisTicksExtend(orient,m.minorTicks,oldScale,newScale,tickMinorSize,scale,config);axisLabelExtend(orient,m.tickLabels,oldScale,newScale,tickMajorSize,tickPadding);axisDomainExtend(orient,m.domain,range,tickEndSize);axisTitleExtend(orient,m.title,range,+titleOffset||-1);dl.extend(m.gridLines.properties.update,gridLineStyle);dl.extend(m.majorTicks.properties.update,majorTickStyle);dl.extend(m.minorTicks.properties.update,minorTickStyle);dl.extend(m.tickLabels.properties.update,tickLabelStyle);dl.extend(m.domain.properties.update,domainStyle);dl.extend(m.title.properties.update,titleStyle);var marks=[m.gridLines,m.majorTicks,m.minorTicks,m.tickLabels,m.domain,m.title];dl.extend(axisDef,{type:"group",interactive:false,properties:{enter:{encode:axisUpdate,scales:[scale.scaleName],signals:[],data:[]},update:{encode:axisUpdate,scales:[scale.scaleName],signals:[],data:[]}}});axisDef.marks=marks.map(function(m){return parseMark(model,m)})}axis.scale=function(x){if(!arguments.length)return scale;if(scale!==x){scale=x;reset()}return axis};axis.orient=function(x){if(!arguments.length)return orient;if(orient!==x){orient=x in axisOrients?x+"":config.orient;reset()}return axis};axis.title=function(x){if(!arguments.length)return title;if(title!==x){title=x;reset()}return axis};axis.tickCount=function(x){if(!arguments.length)return tickCount;tickCount=x;return axis};axis.tickValues=function(x){if(!arguments.length)return tickValues;tickValues=x;return axis};axis.tickFormat=function(x){if(!arguments.length)return tickFormatString;if(tickFormatString!==x){tickFormatString=x;reset()}return axis};axis.tickFormatType=function(x){if(!arguments.length)return tickFormatType;if(tickFormatType!==x){tickFormatType=x;reset()}return axis};axis.tickSize=function(x,y){if(!arguments.length)return tickMajorSize;var n=arguments.length-1,major=+x,minor=n>1?+y:tickMajorSize,end=n>0?+arguments[n]:tickMajorSize;if(tickMajorSize!==major||tickMinorSize!==minor||tickEndSize!==end){reset()}tickMajorSize=major;tickMinorSize=minor;tickEndSize=end;return axis};axis.tickSubdivide=function(x){if(!arguments.length)return tickSubdivide;tickSubdivide=+x;return axis};axis.offset=function(x){if(!arguments.length)return offset;offset=dl.isObject(x)?x:+x;return axis};axis.tickPadding=function(x){if(!arguments.length)return tickPadding;if(tickPadding!==+x){tickPadding=+x;reset()}return axis};axis.titleOffset=function(x){if(!arguments.length)return titleOffset;if(titleOffset!==x){titleOffset=x;reset()}return axis};axis.layer=function(x){if(!arguments.length)return layer;if(layer!==x){layer=x;reset()}return axis};axis.grid=function(x){if(!arguments.length)return grid;if(grid!==x){grid=x;reset()}return axis};axis.gridLineProperties=function(x){if(!arguments.length)return gridLineStyle;if(gridLineStyle!==x){gridLineStyle=x}return axis};axis.majorTickProperties=function(x){if(!arguments.length)return majorTickStyle;if(majorTickStyle!==x){majorTickStyle=x}return axis};axis.minorTickProperties=function(x){if(!arguments.length)return minorTickStyle;if(minorTickStyle!==x){minorTickStyle=x}return axis};axis.tickLabelProperties=function(x){if(!arguments.length)return tickLabelStyle;if(tickLabelStyle!==x){tickLabelStyle=x}return axis};axis.titleProperties=function(x){if(!arguments.length)return titleStyle;if(titleStyle!==x){titleStyle=x}return axis};axis.domainProperties=function(x){if(!arguments.length)return domainStyle;if(domainStyle!==x){domainStyle=x}return axis};axis.reset=function(){reset();return axis};return axis}var axisOrients={top:1,right:1,bottom:1,left:1};function axisSubdivide(scale,ticks,m){var subticks=[];if(m&&ticks.length>1){var extent=axisScaleExtent(scale.domain()),i=-1,n=ticks.length,d=(ticks[1]-ticks[0])/++m,j,v;while(++i<n){for(j=m;--j>0;){if((v=+ticks[i]-j*d)>=extent[0]){subticks.push(v)}}}for(--i,j=0;++j<m&&(v=+ticks[i]+j*d)<extent[1];){subticks.push(v)}}return subticks}function axisScaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function axisScaleRange(scale){return scale.rangeExtent?scale.rangeExtent():axisScaleExtent(scale.range())}var axisAlign={bottom:"center",top:"center",left:"right",right:"left"};var axisBaseline={bottom:"top",top:"bottom",left:"middle",right:"middle"};function axisLabelExtend(orient,labels,oldScale,newScale,size,pad){size=Math.max(size,0)+pad;if(orient==="left"||orient==="top"){size*=-1}if(orient==="top"||orient==="bottom"){dl.extend(labels.properties.enter,{x:oldScale,y:{value:size}});dl.extend(labels.properties.update,{x:newScale,y:{value:size},align:{value:"center"},baseline:{value:axisBaseline[orient]}})}else{dl.extend(labels.properties.enter,{x:{value:size},y:oldScale});dl.extend(labels.properties.update,{x:{value:size},y:newScale,align:{value:axisAlign[orient]},baseline:{value:"middle"}})}}function axisTicksExtend(orient,ticks,oldRef,newRef,size,scale,config,offset){var sign=orient==="left"||orient==="top"?-1:1;if(size===Infinity){size=orient==="top"||orient==="bottom"?{field:{group:"height",level:2},mult:-sign,offset:offset*-sign}:{field:{group:"width",level:2},mult:-sign,offset:offset*-sign}}else{size={value:sign*size,offset:offset}}if(config.tickPlacement==="between"&&scale.type===ORDINAL){var rng=scale.range(),tickOffset=.5+(scale.rangeBand()||(rng[1]-rng[0])/2);newRef=oldRef=dl.duplicate(newRef);newRef.offset=oldRef.offset=tickOffset}if(orient==="top"||orient==="bottom"){dl.extend(ticks.properties.enter,{x:oldRef,y:{value:0},y2:size});dl.extend(ticks.properties.update,{x:newRef,y:{value:0},y2:size});dl.extend(ticks.properties.exit,{x:newRef})}else{dl.extend(ticks.properties.enter,{x:{value:0},x2:size,y:oldRef});dl.extend(ticks.properties.update,{x:{value:0},x2:size,y:newRef});dl.extend(ticks.properties.exit,{y:newRef})}}function axisTitleExtend(orient,title,range,offset){var update=title.properties.update,mid=~~((range[0]+range[1])/2),sign=orient==="top"||orient==="left"?-1:1;if(orient==="bottom"||orient==="top"){update.x={value:mid};update.angle={value:0};if(offset>=0)update.y={value:sign*offset}}else{update.y={value:mid};update.angle={value:orient==="left"?-90:90};if(offset>=0)update.x={value:sign*offset}}}function axisDomainExtend(orient,domain,range,size){var path;if(orient==="top"||orient==="left"){size=-1*size}if(orient==="bottom"||orient==="top"){path="M"+range[0]+","+size+"V0H"+range[1]+"V"+size}else{path="M"+size+","+range[0]+"H0V"+range[1]+"H"+size}domain.properties.update.path={value:path}}function axisUpdate(item,group,trans){var o=trans?{}:item,offset=item.mark.def.offset,orient=item.mark.def.orient,width=group.width,height=group.height;if(dl.isArray(offset)){var ofx=offset[0],ofy=offset[1];switch(orient){case"left":{Tuple.set(o,"x",-ofx);Tuple.set(o,"y",ofy);break}case"right":{Tuple.set(o,"x",width+ofx);Tuple.set(o,"y",ofy);break}case"bottom":{Tuple.set(o,"x",ofx);Tuple.set(o,"y",height+ofy);break}case"top":{Tuple.set(o,"x",ofx);Tuple.set(o,"y",-ofy);break}default:{Tuple.set(o,"x",ofx);Tuple.set(o,"y",ofy)}}}else{if(dl.isObject(offset)){offset=-group.scale(offset.scale)(offset.value)}switch(orient){case"left":{Tuple.set(o,"x",-offset);Tuple.set(o,"y",0);break}case"right":{Tuple.set(o,"x",width+offset);Tuple.set(o,"y",0);break}case"bottom":{Tuple.set(o,"x",0);Tuple.set(o,"y",height+offset);break}case"top":{Tuple.set(o,"x",0);Tuple.set(o,"y",-offset);break}default:{Tuple.set(o,"x",0);Tuple.set(o,"y",0)}}}if(trans)trans.interpolate(item,o);return true}function axisTicks(config){return{type:"rule",interactive:false,key:"data",properties:{enter:{stroke:{value:config.tickColor},strokeWidth:{value:config.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function axisTickLabels(config){return{type:"text",interactive:true,key:"data",properties:{enter:{fill:{value:config.tickLabelColor},font:{value:config.tickLabelFont},fontSize:{value:config.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function axisTitle(config){return{type:"text",interactive:true,properties:{enter:{font:{value:config.titleFont},fontSize:{value:config.titleFontSize},fontWeight:{value:config.titleFontWeight},fill:{value:config.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}function axisDomain(config){return{type:"path",interactive:false,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:config.axisColor},strokeWidth:{value:config.axisWidth}},update:{}}}}module.exports=axs},{"../parse/mark":351,"../util":400,datalib:29,"vega-dataflow":232,"vega-scenegraph":300}],368:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Gradient=require("vega-scenegraph").Gradient,parseProperties=require("../parse/properties"),parseMark=require("../parse/mark"),util=require("../util");function lgnd(model){var size=null,shape=null,fill=null,stroke=null,opacity=null,spacing=null,values=null,formatString=null,formatType=null,title=null,config=model.config().legend,orient=config.orient,offset=config.offset,padding=config.padding,tickArguments=[5],legendStyle={},symbolStyle={},gradientStyle={},titleStyle={},labelStyle={},m={titles:{},symbols:{},labels:{},gradient:{}};var legend={},legendDef={};function reset(){legendDef.type=null}function ingest(d,i){return{data:d,index:i}}legend.def=function(){var scale=size||shape||fill||stroke||opacity;if(!legendDef.type){legendDef=(scale===fill||scale===stroke)&&!discrete(scale.type)?quantDef(scale):ordinalDef(scale)}legendDef.orient=orient;legendDef.offset=offset;legendDef.padding=padding;legendDef.margin=config.margin;return legendDef};function discrete(type){return type==="ordinal"||type==="quantize"||type==="quantile"||type==="threshold"}function ordinalDef(scale){var def=o_legend_def(size,shape,fill,stroke,opacity);var data=(values==null?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():values).map(ingest);var fmt=util.getTickFormat(scale,data.length,formatType,formatString);var fs,range,offset,pad=5,domain=d3.range(data.length);if(size){range=data.map(function(x){return Math.sqrt(size(x.data))});offset=d3.max(range);range=range.reduce(function(a,b,i,z){if(i>0)a[i]=a[i-1]+z[i-1]/2+pad;return a[i]+=b/2,a},[0]).map(Math.round)}else{offset=Math.round(Math.sqrt(config.symbolSize));range=spacing||(fs=labelStyle.fontSize)&&fs.value+pad||config.labelFontSize+pad;range=domain.map(function(d,i){return Math.round(offset/2+i*range)})}var sz=padding,ts;if(title){ts=titleStyle.fontSize;sz+=5+(ts&&ts.value||config.titleFontSize)}for(var i=0,n=range.length;i<n;++i)range[i]+=sz;def.scales=def.scales||[{}];dl.extend(def.scales[0],{name:"legend",type:"ordinal",points:true,domain:domain,range:range});var tdata=(title?[title]:[]).map(ingest);data.forEach(function(d){d.label=fmt(d.data);d.offset=offset});def.marks[0].from=function(){return tdata};def.marks[1].from=function(){return data};def.marks[2].from=def.marks[1].from;return def}function o_legend_def(size,shape,fill,stroke,opacity){var titles=dl.extend(m.titles,legendTitle(config)),symbols=dl.extend(m.symbols,legendSymbols(config)),labels=dl.extend(m.labels,vLegendLabels(config));legendSymbolExtend(symbols,size,shape,fill,stroke,opacity);dl.extend(titles.properties.update,titleStyle);dl.extend(symbols.properties.update,symbolStyle);dl.extend(labels.properties.update,labelStyle);titles.properties.enter.x.value+=padding;titles.properties.enter.y.value+=padding;labels.properties.enter.x.offset+=padding+1;symbols.properties.enter.x.offset=padding+1;labels.properties.update.x.offset+=padding+1;symbols.properties.update.x.offset=padding+1;dl.extend(legendDef,{type:"group",interactive:false,properties:{enter:parseProperties(model,"group",legendStyle),legendPosition:{encode:legendPosition.bind(null,config),signals:[],scales:[],data:[],fields:[]}}});legendDef.marks=[titles,symbols,labels].map(function(m){return parseMark(model,m)});return legendDef}function quantDef(scale){var def=q_legend_def(scale),dom=scale.domain(),data=(values==null?dom:values).map(ingest),width=gradientStyle.width&&gradientStyle.width.value||config.gradientWidth,fmt=util.getTickFormat(scale,data.length,formatType,formatString);def.scales=def.scales||[{}];var layoutSpec=dl.extend(def.scales[0],{name:"legend",type:scale.type,round:true,zero:false,domain:[dom[0],dom[dom.length-1]],range:[padding,width+padding]});if(scale.type==="pow")layoutSpec.exponent=scale.exponent();var tdata=(title?[title]:[]).map(ingest);data.forEach(function(d,i){d.label=fmt(d.data);d.align=i==data.length-1?"right":i===0?"left":"center"});def.marks[0].from=function(){return tdata};def.marks[1].from=function(){return[1]};def.marks[2].from=function(){return data};return def}function q_legend_def(scale){var titles=dl.extend(m.titles,legendTitle(config)),gradient=dl.extend(m.gradient,legendGradient(config)),labels=dl.extend(m.labels,hLegendLabels(config)),grad=new Gradient;var dom=scale.domain(),min=dom[0],max=dom[dom.length-1],f=scale.copy().domain([min,max]).range([0,1]);var stops=scale.type!=="linear"&&scale.ticks?scale.ticks.call(scale,15):dom;if(min!==stops[0])stops.unshift(min);if(max!==stops[stops.length-1])stops.push(max);for(var i=0,n=stops.length;i<n;++i){grad.stop(f(stops[i]),scale(stops[i]))}gradient.properties.enter.fill={value:grad};dl.extend(titles.properties.update,titleStyle);dl.extend(gradient.properties.update,gradientStyle);dl.extend(labels.properties.update,labelStyle);var gp=gradient.properties,gh=gradientStyle.height,hh=gh&&gh.value||gp.enter.height.value;labels.properties.enter.y.value=hh;labels.properties.update.y.value=hh;if(title){var tp=titles.properties,fs=titleStyle.fontSize,sz=4+(fs&&fs.value||tp.enter.fontSize.value);gradient.properties.enter.y.value+=sz;labels.properties.enter.y.value+=sz;gradient.properties.update.y.value+=sz;labels.properties.update.y.value+=sz}titles.properties.enter.x.value+=padding;titles.properties.enter.y.value+=padding;gradient.properties.enter.x.value+=padding;gradient.properties.enter.y.value+=padding;labels.properties.enter.y.value+=padding;gradient.properties.update.x.value+=padding;gradient.properties.update.y.value+=padding;labels.properties.update.y.value+=padding;dl.extend(legendDef,{type:"group",interactive:false,properties:{enter:parseProperties(model,"group",legendStyle),legendPosition:{encode:legendPosition.bind(null,config),signals:[],scales:[],data:[],fields:[]}}});legendDef.marks=[titles,gradient,labels].map(function(m){return parseMark(model,m)});return legendDef}legend.size=function(x){if(!arguments.length)return size;if(size!==x){size=x;reset()}return legend};legend.shape=function(x){if(!arguments.length)return shape;if(shape!==x){shape=x;reset()}return legend};legend.fill=function(x){if(!arguments.length)return fill;if(fill!==x){fill=x;reset()}return legend};legend.stroke=function(x){if(!arguments.length)return stroke;if(stroke!==x){stroke=x;reset()}return legend};legend.opacity=function(x){if(!arguments.length)return opacity;if(opacity!==x){opacity=x;reset()}return legend};legend.title=function(x){if(!arguments.length)return title;if(title!==x){title=x;reset()}return legend};legend.format=function(x){if(!arguments.length)return formatString;if(formatString!==x){formatString=x;reset()}return legend};legend.formatType=function(x){if(!arguments.length)return formatType;if(formatType!==x){formatType=x;reset()}return legend};legend.spacing=function(x){if(!arguments.length)return spacing;if(spacing!==+x){spacing=+x;reset()}return legend};legend.orient=function(x){if(!arguments.length)return orient;orient=x in LEGEND_ORIENT?x+"":config.orient;return legend};legend.offset=function(x){if(!arguments.length)return offset;offset=+x;return legend};legend.values=function(x){if(!arguments.length)return values;values=x;return legend};legend.legendProperties=function(x){if(!arguments.length)return legendStyle;legendStyle=x;return legend};legend.symbolProperties=function(x){if(!arguments.length)return symbolStyle;symbolStyle=x;return legend};legend.gradientProperties=function(x){if(!arguments.length)return gradientStyle;gradientStyle=x;return legend};legend.labelProperties=function(x){if(!arguments.length)return labelStyle;labelStyle=x;return legend};legend.titleProperties=function(x){if(!arguments.length)return titleStyle;titleStyle=x;return legend};legend.reset=function(){reset();return legend};return legend}var LEGEND_ORIENT={left:"x1",right:"x2","top-left":"x1","top-right":"x2","bottom-left":"x1","bottom-right":"x2"};function legendPosition(config,item,group,trans,db,signals,predicates){var o=trans?{}:item,i,def=item.mark.def,offset=def.offset,orient=def.orient,pad=def.padding*2,ao=orient==="left"?0:group.width,lw=~~item.bounds.width()+(item.width?0:pad),lh=~~item.bounds.height()+(item.height?0:pad),pos=group._legendPositions||(group._legendPositions={right:.5,left:.5});o.x=.5;o.y=.5;o.width=lw;o.height=lh;if(orient==="left"||orient==="right"){o.y=pos[orient];pos[orient]+=lh+def.margin;var axes=group.axes,items=group.axisItems,bound=LEGEND_ORIENT[orient];for(i=0;i<axes.length;++i){if(axes[i].orient()===orient){ao=Math.max(ao,Math.abs(items[i].bounds[bound]))}}}switch(orient){case"left":o.x-=ao+offset+lw;break;case"right":o.x+=ao+offset;break;case"top-left":o.x+=offset;o.y+=offset;break;case"top-right":o.x+=group.width-lw-offset;o.y+=offset;break;case"bottom-left":o.x+=offset;o.y+=group.height-lh-offset;break;case"bottom-right":o.x+=group.width-lw-offset;o.y+=group.height-lh-offset;break}var baseline=config.baseline,totalHeight=0;for(i=0;i<group.legendItems.length;i++){var currItem=group.legendItems[i];totalHeight+=currItem.bounds.height()+(item.height?0:pad)}if(baseline==="middle"){o.y+=offset+group.height/2-totalHeight/2}else if(baseline==="bottom"){o.y+=offset+group.height-totalHeight}if(trans)trans.interpolate(item,o);var enc=item.mark.def.properties.enter.encode;enc.call(enc,item,group,trans,db,signals,predicates);return true}function legendSymbolExtend(mark,size,shape,fill,stroke,opacity){var e=mark.properties.enter,u=mark.properties.update;if(size)e.size=u.size={scale:size.scaleName,field:"data"};if(shape)e.shape=u.shape={scale:shape.scaleName,field:"data"};if(fill)e.fill=u.fill={scale:fill.scaleName,field:"data"};if(stroke)e.stroke=u.stroke={scale:stroke.scaleName,field:"data"};if(opacity)u.opacity={scale:opacity.scaleName,field:"data"}}function legendTitle(config){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:config.titleColor},font:{value:config.titleFont},fontSize:{value:config.titleFontSize},fontWeight:{value:config.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function legendSymbols(config){return{type:"symbol",interactive:false,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:config.symbolShape},size:{value:config.symbolSize},stroke:{value:config.symbolColor},strokeWidth:{value:config.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}function vLegendLabels(config){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:config.labelColor},font:{value:config.labelFont},fontSize:{value:config.labelFontSize},align:{value:config.labelAlign},baseline:{value:config.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}function legendGradient(config){return{type:"rect",interactive:false,properties:{enter:{x:{value:0},y:{value:0},width:{value:config.gradientWidth},height:{value:config.gradientHeight},stroke:{value:config.gradientStrokeColor},strokeWidth:{value:config.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}function hLegendLabels(config){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:config.labelColor},font:{value:config.labelFont},fontSize:{value:config.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}module.exports=lgnd}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../parse/mark":351,"../parse/properties":356,"../util":400,datalib:29,"vega-scenegraph":300}],369:[function(require,module,exports){module.exports=function visit(node,func){var i,n,s,m,items;if(func(node))return true;var sets=["items","axisItems","legendItems"];for(s=0,m=sets.length;s<m;++s){if(items=node[sets[s]]){for(i=0,n=items.length;i<n;++i){if(visit(items[i],func))return true}}}}},{}],370:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),log=require("vega-logging"),ChangeSet=df.ChangeSet,Tuple=df.Tuple,Deps=df.Dependencies,Transform=require("./Transform"),Facetor=require("./Facetor");function Aggregate(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(summarize){var signalDeps={},tx=this._transform,i,len,f,fields,name,ops;if(!dl.isArray(fields=summarize)){fields=[];for(name in summarize){ops=dl.array(summarize[name]);fields.push({field:name,ops:ops})}}function sg(x){if(x.signal)signalDeps[x.signal]=1}for(i=0,len=fields.length;i<len;++i){f=fields[i];if(f.field.signal){signalDeps[f.field.signal]=1}dl.array(f.ops).forEach(sg);dl.array(f.as).forEach(sg)}tx._fields=fields;tx._aggr=null;tx.dependency(Deps.SIGNALS,dl.keys(signalDeps));return tx}}});this._aggr=null;this._input=null;this._args=null;this._fields=[];this._out=[];this._type=TYPES.TUPLE;this._acc={groupby:dl.true,value:dl.true};return this.router(true).produces(true)}var prototype=Aggregate.prototype=Object.create(Transform.prototype);prototype.constructor=Aggregate;var TYPES=Aggregate.TYPES={VALUE:1,TUPLE:2,MULTI:3};Aggregate.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"];prototype.type=function(type){return this._type=type,this};prototype.accessors=function(groupby,value){var acc=this._acc;acc.groupby=dl.$(groupby)||dl.true;acc.value=dl.$(value)||dl.true};prototype.aggr=function(){if(this._aggr)return this._aggr;var g=this._graph,hasGetter=false,args=[],groupby=this.param("groupby").field,value=function(x){return x.signal?g.signalRef(x.signal):x};var fields=this._fields.map(function(f){var field={name:value(f.field),as:dl.array(f.as),ops:dl.array(value(f.ops)).map(value),get:f.get};hasGetter=hasGetter||field.get!=null;args.push(field.name);return field});groupby.forEach(function(g){if(g.get)hasGetter=true;args.push(g.name||g)});this._args=hasGetter||!fields.length?null:args;if(!fields.length)fields={"*":"values"};var aggr=this._aggr=(new Facetor).groupby(groupby).stream(true).summarize(fields);this._out=getFields(aggr);if(this._type!==TYPES.VALUE){aggr.key("_id")}return aggr};function getFields(aggr){var f=[],i,n,j,m,dims,vals,meas;dims=aggr._dims;for(i=0,n=dims.length;i<n;++i){f.push(dims[i].name)}vals=aggr._aggr;for(i=0,n=vals.length;i<n;++i){meas=vals[i].measures.fields;for(j=0,m=meas.length;j<m;++j){f.push(meas[j])}}return f}prototype.transform=function(input,reset){log.debug(input,["aggregate"]);var output=ChangeSet.create(input),aggr=this.aggr(),out=this._out,args=this._args,reeval=true,p=Tuple.prev,add,rem,mod,mark,i;if(reset){output.rem.push.apply(output.rem,aggr.result());aggr.clear();this._aggr=null;aggr=this.aggr()}if(this._type===TYPES.TUPLE){add=function(x){aggr._add(x);Tuple.prev_init(x)};rem=function(x){aggr._rem(p(x))};mod=function(x){aggr._mod(x,p(x))};mark=function(x){aggr._markMod(x,p(x))}}else{var gby=this._acc.groupby,val=this._acc.value,get=this._type===TYPES.VALUE?val:function(x){return{_id:x._id,groupby:gby(x),value:val(x)}};add=function(x){aggr._add(get(x));Tuple.prev_init(x)};rem=function(x){aggr._rem(get(p(x)))};mod=function(x){aggr._mod(get(x),get(p(x)))};mark=function(x){aggr._mark(get(x),get(p(x)))}}input.add.forEach(add);if(reset){input.mod.forEach(add)}else{input.rem.forEach(rem);if(args)for(i=0,reeval=false;i<args.length;++i){if(input.fields[args[i]]){reeval=true;break}}input.mod.forEach(reeval?mod:mark)}for(i=0;i<out.length;++i){output.fields[out[i]]=1}return aggr._input=input,aggr.changes(output)};module.exports=Aggregate},{"./Facetor":376,"./Transform":392,datalib:29,"vega-dataflow":232,"vega-logging":299}],371:[function(require,module,exports){var Base=require("./Transform").prototype;function BatchTransform(){this._collector=null}var prototype=BatchTransform.prototype=Object.create(Base);prototype.constructor=BatchTransform;prototype.init=function(graph){Base.init.call(this,graph);return this.batch(true)};prototype.transform=function(input,reset){return this.batchTransform(input,this._collector.data(),reset)};prototype.batchTransform=function(){};module.exports=BatchTransform},{"./Transform":392}],372:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Bin(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value",default:10},maxbins:{type:"value",default:20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>",default:[5,2]}});this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"};return this.mutates(true)}var prototype=Bin.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Bin;prototype.extent=function(data){var e=[this.param("min"),this.param("max")],d;if(e[0]==null||e[1]==null){d=dl.extent(data,this.param("field").accessor);if(e[0]==null)e[0]=d[0];if(e[1]==null)e[1]=d[1]}return e};prototype.batchTransform=function(input,data){log.debug(input,["binning"]);var extent=this.extent(data),output=this._output,step=this.param("step"),steps=this.param("steps"),minstep=this.param("minstep"),get=this.param("field").accessor,opt={min:extent[0],max:extent[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};if(step)opt.step=step;if(steps)opt.steps=steps;if(minstep)opt.minstep=minstep;var b=dl.bins(opt),s=b.step;function update(d){var v=get(d);v=v==null?null:b.start+s*~~((v-b.start)/s);Tuple.set(d,output.start,v);Tuple.set(d,output.end,v+s);Tuple.set(d,output.mid,v+s/2)}input.add.forEach(update);input.mod.forEach(update);input.rem.forEach(update);input.fields[output.start]=1;input.fields[output.end]=1;input.fields[output.mid]=1;return input};module.exports=Bin},{"./BatchTransform":371,"./Transform":392,datalib:29,"vega-dataflow":232,"vega-logging":299}],373:[function(require,module,exports){var df=require("vega-dataflow"),Tuple=df.Tuple,log=require("vega-logging"),Transform=require("./Transform");function CountPattern(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"field",default:"data"},pattern:{type:"value",default:"[\\w']+"},case:{type:"value",default:"lower"},stopwords:{type:"value",default:""}});this._output={text:"text",count:"count"};return this.router(true).produces(true)}var prototype=CountPattern.prototype=Object.create(Transform.prototype);prototype.constructor=CountPattern;prototype.transform=function(input,reset){log.debug(input,["countpattern"]);var get=this.param("field").accessor,pattern=this.param("pattern"),stop=this.param("stopwords"),rem=false;if(this._stop!==stop){this._stop=stop;this._stop_re=new RegExp("^"+stop+"$","i");reset=true}if(this._pattern!==pattern){this._pattern=pattern;this._match=new RegExp(this._pattern,"g");reset=true}if(reset)this._counts={};function curr(t){return Tuple.prev_init(t),get(t)}function prev(t){return get(Tuple.prev(t))}this._add(input.add,curr);if(!reset)this._rem(input.rem,prev);if(reset||(rem=input.fields[get.field])){if(rem)this._rem(input.mod,prev);this._add(input.mod,curr)}return this._changeset(input)};prototype._changeset=function(input){var counts=this._counts,tuples=this._tuples||(this._tuples={}),change=df.ChangeSet.create(input),out=this._output,w,t,c;for(w in counts){t=tuples[w];c=counts[w]||0;if(!t&&c){tuples[w]=t=Tuple.ingest({});t[out.text]=w;t[out.count]=c;change.add.push(t)}else if(c===0){if(t)change.rem.push(t);delete counts[w];delete tuples[w]}else if(t[out.count]!==c){Tuple.set(t,out.count,c);change.mod.push(t)}}return change};prototype._tokenize=function(text){switch(this.param("case")){case"upper":text=text.toUpperCase();break;case"lower":text=text.toLowerCase();break}return text.match(this._match)};prototype._add=function(tuples,get){var counts=this._counts,stop=this._stop_re,tok,i,j,t;for(j=0;j<tuples.length;++j){tok=this._tokenize(get(tuples[j]));for(i=0;i<tok.length;++i){if(!stop.test(t=tok[i])){counts[t]=1+(counts[t]||0)}}}};prototype._rem=function(tuples,get){var counts=this._counts,stop=this._stop_re,tok,i,j,t;for(j=0;j<tuples.length;++j){tok=this._tokenize(get(tuples[j]));for(i=0;i<tok.length;++i){if(!stop.test(t=tok[i])){counts[t]-=1}}}};module.exports=CountPattern},{"./Transform":392,"vega-dataflow":232,"vega-logging":299}],374:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),ChangeSet=df.ChangeSet,Tuple=df.Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Cross(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{with:{type:"data"},diagonal:{type:"value",default:"true"},filter:{type:"expr"}});this._output={left:"a",right:"b"};this._lastWith=null;this._cids={};this._cache={};return this.router(true).produces(true)}var prototype=Cross.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Cross;function _cache(x,t){var c=this._cache,cross=c[x._id]||(c[x._id]={c:[],f:false});cross.c.push(t)}function _cid(left,x,y){return left?x._id+"_"+y._id:y._id+"_"+x._id}function add(output,left,data,diag,test,mids,x){var as=this._output,cache=this._cache,cids=this._cids,oadd=output.add,fltrd=false,i=0,len=data.length,t={},y,cid;for(;i<len;++i){y=data[i];cid=_cid(left,x,y);if(cids[cid])continue;if(x._id===y._id&&!diag)continue;Tuple.set(t,as.left,left?x:y);Tuple.set(t,as.right,left?y:x);if(!test||test(t)){oadd.push(t=Tuple.ingest(t));_cache.call(this,x,t);if(x._id!==y._id)_cache.call(this,y,t);mids[t._id]=1;cids[cid]=true;t={}}else{if(cache[y._id])cache[y._id].f=true;fltrd=true}}if(cache[x._id])cache[x._id].f=fltrd}function mod(output,left,data,diag,test,mids,rids,x){var as=this._output,cache=this._cache,cids=this._cids,cross=cache[x._id],tpls=cross&&cross.c,fltrd=!cross||cross.f,omod=output.mod,orem=output.rem,i,t,y,l,cid;if(tpls){for(i=tpls.length-1;i>=0;--i){t=tpls[i];l=x===t[as.left];y=l?t[as.right]:t[as.left];cid=_cid(l,x,y);if(!cache[y._id]){cids[cid]=false;tpls.splice(i,1);continue}if(!test||test(t)){if(mids[t._id])continue;omod.push(t);mids[t._id]=1}else{if(!rids[t._id])orem.push.apply(orem,tpls.splice(i,1));rids[t._id]=1;cids[cid]=false;cross.f=true}}}if(test&&fltrd)add.call(this,output,left,data,diag,test,mids,x)}function rem(output,left,rids,x){var as=this._output,cross=this._cache[x._id],cids=this._cids,orem=output.rem,i,len,t,y,l;if(!cross)return;for(i=0,len=cross.c.length;i<len;++i){t=cross.c[i];l=x===t[as.left];y=l?t[as.right]:t[as.left];cids[_cid(l,x,y)]=false;if(!rids[t._id]){orem.push(t);rids[t._id]=1}}this._cache[x._id]=null}function purge(output,rids){var cache=this._cache,keys=dl.keys(cache),rem=output.rem,i,len,j,jlen,cross,t;for(i=0,len=keys.length;i<len;++i){cross=cache[keys[i]];for(j=0,jlen=cross.c.length;j<jlen;++j){t=cross.c[j];if(rids[t._id])continue;rem.push(t);rids[t._id]=1}}this._cache={};this._cids={};this._lastWith=null}prototype.batchTransform=function(input,data,reset){log.debug(input,["crossing"]);var w=this.param("with"),diag=this.param("diagonal"),as=this._output,test=this.param("filter")||null,selfCross=!w.name,woutput=selfCross?input:w.source.last(),wdata=selfCross?data:w.source.values(),output=ChangeSet.create(input),mids={},rids={};if(reset){purge.call(this,output,rids);data.forEach(add.bind(this,output,true,wdata,diag,test,mids));this._lastWith=woutput.stamp}else{input.rem.forEach(rem.bind(this,output,true,rids));input.add.forEach(add.bind(this,output,true,wdata,diag,test,mids));if(woutput.stamp>this._lastWith){woutput.rem.forEach(rem.bind(this,output,false,rids));woutput.add.forEach(add.bind(this,output,false,data,diag,test,mids));woutput.mod.forEach(mod.bind(this,output,false,data,diag,test,mids,rids));this._lastWith=woutput.stamp}input.mod.forEach(mod.bind(this,output,true,wdata,diag,test,mids,rids))}output.fields[as.left]=1;output.fields[as.right]=1;return output};module.exports=Cross},{"./BatchTransform":371,"./Transform":392,datalib:29,"vega-dataflow":232,"vega-logging":299}],375:[function(require,module,exports){var Transform=require("./Transform"),Aggregate=require("./Aggregate");function Facet(graph){Transform.addParameters(this,{transform:{type:"custom",set:function(pipeline){return this._transform._pipeline=pipeline,this._transform},get:function(){var parse=require("../parse/transforms"),facet=this._transform;return facet._pipeline.map(function(t){return parse(facet._graph,t)})}}});this._pipeline=[];return Aggregate.call(this,graph)}var prototype=Facet.prototype=Object.create(Aggregate.prototype);prototype.constructor=Facet;prototype.aggr=function(){return Aggregate.prototype.aggr.call(this).facet(this)};prototype.transform=function(input,reset){var output=Aggregate.prototype.transform.call(this,input,reset);if(input.add.length){this.listeners()[0].rerank()}return output};module.exports=Facet},{"../parse/transforms":360,"./Aggregate":370,"./Transform":392}],376:[function(require,module,exports){var dl=require("datalib"),Aggregator=dl.Aggregator,Base=Aggregator.prototype,df=require("vega-dataflow"),Tuple=df.Tuple,log=require("vega-logging"),facetID=0;function Facetor(){Aggregator.call(this);this._facet=null;this._facetID=++facetID}var prototype=Facetor.prototype=Object.create(Base);prototype.constructor=Facetor;prototype.facet=function(f){return arguments.length?(this._facet=f,this):this._facet};prototype._ingest=function(t){return Tuple.ingest(t,null)};prototype._assign=Tuple.set;function disconnect_cell(facet){log.debug({},["disconnecting cell",this.tuple._id]);var pipeline=this.ds.pipeline();facet.removeListener(pipeline[0]);facet._graph.removeListener(pipeline[0]);facet._graph.disconnect(pipeline)}prototype._newcell=function(x,key){var cell=Base._newcell.call(this,x,key),facet=this._facet;if(facet){var graph=facet._graph,tuple=cell.tuple,pipeline=facet.param("transform");cell.ds=graph.data(tuple._facetID,pipeline,tuple);cell.disconnect=disconnect_cell;facet.addListener(pipeline[0])}return cell};prototype._newtuple=function(x,key){var t=Base._newtuple.call(this,x);if(this._facet){Tuple.set(t,"key",key);Tuple.set(t,"_facetID",this._facetID+"_"+key)}return t};prototype.clear=function(){if(this._facet){for(var k in this._cells){this._cells[k].disconnect(this._facet)}}return Base.clear.call(this)};prototype._on_add=function(x,cell){if(this._facet)cell.ds._input.add.push(x)};prototype._on_rem=function(x,cell){if(this._facet)cell.ds._input.rem.push(x)};prototype._on_mod=function(x,prev,cell0,cell1){if(this._facet){if(cell0===cell1){cell0.ds._input.mod.push(x)}else{cell0.ds._input.rem.push(x);cell1.ds._input.add.push(x)}}};prototype._on_drop=function(cell){if(this._facet)cell.disconnect(this._facet)};prototype._on_keep=function(cell){if(this._facet)df.ChangeSet.copy(this._input,cell.ds._input)};module.exports=Facetor},{datalib:29,"vega-dataflow":232,"vega-logging":299}],377:[function(require,module,exports){var df=require("vega-dataflow"),log=require("vega-logging"),Transform=require("./Transform");function Filter(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{test:{type:"expr"}});this._skip={};return this.router(true)}var prototype=Filter.prototype=Object.create(Transform.prototype);prototype.constructor=Filter;prototype.transform=function(input){log.debug(input,["filtering"]);var output=df.ChangeSet.create(input),skip=this._skip,test=this.param("test");input.rem.forEach(function(x){if(skip[x._id]!==1)output.rem.push(x);else skip[x._id]=0});input.add.forEach(function(x){if(test(x))output.add.push(x);else skip[x._id]=1});input.mod.forEach(function(x){var b=test(x),s=skip[x._id]===1;if(b&&s){skip[x._id]=0;output.add.push(x)}else if(b&&!s){output.mod.push(x)}else if(!b&&s){}else{output.rem.push(x);skip[x._id]=1}});return output};module.exports=Filter},{"./Transform":392,"vega-dataflow":232,"vega-logging":299}],378:[function(require,module,exports){var df=require("vega-dataflow"),Tuple=df.Tuple,log=require("vega-logging"),Transform=require("./Transform");function Fold(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{fields:{type:"array<field>"}});this._output={key:"key",value:"value"};this._cache={};return this.router(true).produces(true)}var prototype=Fold.prototype=Object.create(Transform.prototype);prototype.constructor=Fold;prototype._reset=function(input,output){for(var id in this._cache){output.rem.push.apply(output.rem,this._cache[id])}this._cache={}};prototype._tuple=function(x,i,len){var list=this._cache[x._id]||(this._cache[x._id]=Array(len));return list[i]?Tuple.rederive(x,list[i]):list[i]=Tuple.derive(x)};prototype._fn=function(data,on,out){var i,j,n,m,d,t;for(i=0,n=data.length;i<n;++i){d=data[i];for(j=0,m=on.field.length;j<m;++j){t=this._tuple(d,j,m);Tuple.set(t,this._output.key,on.field[j]);Tuple.set(t,this._output.value,on.accessor[j](d));out.push(t)}}};prototype.transform=function(input,reset){log.debug(input,["folding"]);var fold=this,on=this.param("fields"),output=df.ChangeSet.create(input);if(reset)this._reset(input,output);this._fn(input.add,on,output.add);this._fn(input.mod,on,reset?output.add:output.mod);input.rem.forEach(function(x){output.rem.push.apply(output.rem,fold._cache[x._id]);fold._cache[x._id]=null});if(input.add.length||input.rem.length||on.field.some(function(f){return!!input.fields[f]})){output.fields[this._output.key]=1;output.fields[this._output.value]=1}return output};module.exports=Fold},{"./Transform":392,"vega-dataflow":232,"vega-logging":299}],379:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,df=require("vega-dataflow"),Tuple=df.Tuple,ChangeSet=df.ChangeSet,log=require("vega-logging"),Transform=require("./Transform");function Force(graph){Transform.prototype.init.call(this,graph);this._prev=null;this._interactive=false;this._setup=true;this._nodes=[];this._links=[];this._layout=d3.layout.force();Transform.addParameters(this,{size:{type:"array<value>",default:require("./screen").size},bound:{type:"value",default:true},links:{type:"data"},linkStrength:{type:"value",default:1},linkDistance:{type:"value",default:20},charge:{type:"value",default:-30},chargeDistance:{type:"value",default:Infinity},friction:{type:"value",default:.9},theta:{type:"value",default:.8},gravity:{type:"value",default:.1},alpha:{type:"value",default:.1},iterations:{type:"value",default:500},interactive:{type:"value",default:this._interactive},active:{type:"value",default:this._prev},fixed:{type:"data"}});this._output={x:"layout_x",y:"layout_y"};return this.mutates(true)}var prototype=Force.prototype=Object.create(Transform.prototype);prototype.constructor=Force;prototype.transform=function(nodeInput,reset){log.debug(nodeInput,["force"]);reset=reset-(nodeInput.signals.active?1:0);var interactive=this.param("interactive"),linkSource=this.param("links").source,linkInput=linkSource.last(),active=this.param("active"),output=this._output,layout=this._layout,nodes=this._nodes,links=this._links;if(linkInput.stamp<nodeInput.stamp)linkInput=null;this.configure(nodeInput,linkInput,interactive,reset);if(!interactive){var iterations=this.param("iterations");for(var i=0;i<iterations;++i)layout.tick();layout.stop()}this.update(active);if(reset||active!==this._prev&&active&&active.update){layout.alpha(this.param("alpha"))}if(active!==this._prev){this._prev=active}if(nodeInput.rem.length){layout.nodes(this._nodes=Tuple.idFilter(nodes,nodeInput.rem))}if(linkInput&&linkInput.rem.length){layout.links(this._links=Tuple.idFilter(links,linkInput.rem))}nodeInput.fields[output.x]=1;nodeInput.fields[output.y]=1;return nodeInput};prototype.configure=function(nodeInput,linkInput,interactive,reset){var layout=this._layout,update=this._setup||nodeInput.add.length||linkInput&&linkInput.add.length||interactive!==this._interactive||this.param("charge")!==layout.charge()||this.param("linkStrength")!==layout.linkStrength()||this.param("linkDistance")!==layout.linkDistance();if(update||reset){layout.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction"))}if(!update)return;this._setup=false;this._interactive=interactive;var force=this,graph=this._graph,nodes=this._nodes,links=this._links,a,i;for(a=nodeInput.add,i=0;i<a.length;++i){nodes.push({tuple:a[i]})}if(linkInput)for(a=linkInput.add,i=0;i<a.length;++i){links.push({tuple:a[i],source:nodes[a[i].source],target:nodes[a[i].target]})}var tickHandler=!interactive?null:function(){graph.propagate(ChangeSet.create(null,true),force)};layout.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(nodes).links(links).on("tick",tickHandler).start().alpha(this.param("alpha"))};prototype.update=function(active){var output=this._output,bound=this.param("bound"),fixed=this.param("fixed"),size=this.param("size"),nodes=this._nodes,lut={},id,i,n,t,x,y;if(fixed&&fixed.source){fixed=fixed.source.values();for(i=0,n=fixed.length;i<n;++i){lut[fixed[i].id]=1}}for(i=0;i<nodes.length;++i){n=nodes[i];t=n.tuple;id=t._id;if(active&&active.id===id){n.fixed=1;if(active.update){n.x=n.px=active.x;n.y=n.py=active.y}}else{n.fixed=lut[id]||0}x=bound?Math.max(0,Math.min(n.x,size[0])):n.x;y=bound?Math.max(0,Math.min(n.y,size[1])):n.y;Tuple.set(t,output.x,x);Tuple.set(t,output.y,y)}};module.exports=Force}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Transform":392,"./screen":398,"vega-dataflow":232,"vega-logging":299}],380:[function(require,module,exports){var df=require("vega-dataflow"),Tuple=df.Tuple,log=require("vega-logging"),Transform=require("./Transform");function Formula(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"value"},expr:{type:"expr"}});return this.mutates(true)}var prototype=Formula.prototype=Object.create(Transform.prototype);prototype.constructor=Formula;prototype.transform=function(input){log.debug(input,["formulating"]);var field=this.param("field"),expr=this.param("expr"),updated=false;function set(x){Tuple.set(x,field,expr(x));updated=true}input.add.forEach(set);if(this.reevaluate(input)){input.mod.forEach(set)}if(updated)input.fields[field]=1;return input};module.exports=Formula},{"./Transform":392,"vega-dataflow":232,"vega-logging":299}],381:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform");function Geo(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,Geo.Parameters);Transform.addParameters(this,{lon:{type:"field"},lat:{type:"field"}});this._output={x:"layout_x",y:"layout_y"};return this.mutates(true)}Geo.Parameters={projection:{type:"value",default:"mercator"},center:{type:"array<value>"},translate:{type:"array<value>",default:require("./screen").center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}};Geo.d3Projection=function(){var p=this.param("projection"),param=Geo.Parameters,proj,name,value;if(p!==this._mode){this._mode=p;this._projection=d3.geo[p]()}proj=this._projection;for(name in param){if(name==="projection"||!proj[name])continue;value=this.param(name);if(value===undefined||dl.isArray(value)&&value.length===0){continue}if(value!==proj[name]()){proj[name](value)}}return proj};var prototype=Geo.prototype=Object.create(Transform.prototype);prototype.constructor=Geo;prototype.transform=function(input){log.debug(input,["geo"]);var output=this._output,lon=this.param("lon").accessor,lat=this.param("lat").accessor,proj=Geo.d3Projection.call(this);function set(t){var ll=[lon(t),lat(t)];var xy=proj(ll)||[null,null];Tuple.set(t,output.x,xy[0]);Tuple.set(t,output.y,xy[1])}input.add.forEach(set);if(this.reevaluate(input)){input.mod.forEach(set);input.rem.forEach(set)}input.fields[output.x]=1;input.fields[output.y]=1;return input};module.exports=Geo}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Transform":392,"./screen":398,datalib:29,"vega-dataflow":232,"vega-logging":299}],382:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Geo=require("./Geo"),Transform=require("./Transform");function GeoPath(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,Geo.Parameters);Transform.addParameters(this,{field:{type:"field",default:null}});this._output={path:"layout_path"};return this.mutates(true)}var prototype=GeoPath.prototype=Object.create(Transform.prototype);prototype.constructor=GeoPath;prototype.transform=function(input){log.debug(input,["geopath"]);var output=this._output,geojson=this.param("field").accessor||dl.identity,proj=Geo.d3Projection.call(this),path=d3.geo.path().projection(proj);function set(t){Tuple.set(t,output.path,path(geojson(t)))}input.add.forEach(set);if(this.reevaluate(input)){input.mod.forEach(set);input.rem.forEach(set)}input.fields[output.path]=1;return input};module.exports=GeoPath}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Geo":381,"./Transform":392,datalib:29,"vega-dataflow":232,"vega-logging":299}],383:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Hierarchy(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{sort:{type:"array<field>",default:null},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"value",default:null},mode:{type:"value",default:"tidy"},size:{type:"array<value>",default:require("./screen").size},nodesize:{type:"array<value>",default:null},orient:{type:"value",default:"cartesian"}});this._mode=null;this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"};return this.mutates(true)}var PARTITION="partition";var SEPARATION={cartesian:function(a,b){return a.parent===b.parent?1:2},radial:function(a,b){return(a.parent===b.parent?1:2)/a.depth}};var prototype=Hierarchy.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Hierarchy;prototype.batchTransform=function(input,data){log.debug(input,["hierarchy layout"]);var layout=this._layout,output=this._output,mode=this.param("mode"),sort=this.param("sort"),nodesz=this.param("nodesize"),parent=this.param("parent").accessor,root=data.filter(function(d){return parent(d)===null})[0];if(mode!==this._mode){this._mode=mode;if(mode==="tidy")mode="tree";layout=this._layout=d3.layout[mode]()}input.fields[output.x]=1;input.fields[output.y]=1;input.fields[output.depth]=1;if(mode===PARTITION){input.fields[output.width]=1;input.fields[output.height]=1;layout.value(this.param("field").accessor)}else{layout.separation(SEPARATION[this.param("orient")])}if(nodesz.length&&mode!==PARTITION){layout.nodeSize(nodesz)}else{layout.size(this.param("size"))}layout.sort(sort.field.length?dl.comparator(sort.field):null).children(this.param("children").accessor).nodes(root);data.forEach(function(n){Tuple.set(n,output.x,n.x);Tuple.set(n,output.y,n.y);Tuple.set(n,output.depth,n.depth);if(mode===PARTITION){Tuple.set(n,output.width,n.dx);Tuple.set(n,output.height,n.dy)}});return input};module.exports=Hierarchy}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./BatchTransform":371,"./Transform":392,"./screen":398,datalib:29,"vega-dataflow":232,"vega-logging":299}],384:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),Tuple=require("vega-dataflow").Tuple,Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Impute(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value",default:"value"},value:{type:"value",default:0}});return this.router(true).produces(true)}var prototype=Impute.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Impute;prototype.batchTransform=function(input,data){log.debug(input,["imputing"]);var groupby=this.param("groupby"),orderby=this.param("orderby"),method=this.param("method"),value=this.param("value"),field=this.param("field"),get=field.accessor,name=field.field,prev=this._imputed||[],curr=[],groups=partition(data,groupby.accessor,orderby.accessor),domain=groups.domain,group,i,j,n,m,t;function getval(x){return x==null?null:get(x)}for(j=0,m=groups.length;j<m;++j){group=groups[j];if(method!=="value"){value=dl[method](group,getval)}for(i=0,n=group.length;i<n;++i){if(group[i]==null){t=tuple(groupby.field,group.values,orderby.field,domain[i]);t[name]=value;curr.push(t)}}}for(i=0,n=curr.length;i<n;++i){input.add.push(curr[i])}for(i=0,n=prev.length;i<n;++i){input.rem.push(prev[i])}this._imputed=curr;return input};function tuple(gb,gv,ob,ov){var t={_imputed:true},i;for(i=0;i<gv.length;++i)t[gb[i]]=gv[i];for(i=0;i<ov.length;++i)t[ob[i]]=ov[i];return Tuple.ingest(t)}function partition(data,groupby,orderby){var groups=[],get=function(f){return f(x)},val=function(d){return x=d,orderby.map(get)},map,i,x,k,g,domain,lut,N;domain=groups.domain=dl.unique(data,val);N=domain.length;lut=domain.reduce(function(m,d,i){return m[d]={value:d,index:i},m},{});for(map={},i=0;i<data.length;++i){x=data[i];k=groupby==null?[]:groupby.map(get);g=map[k]||(groups.push(map[k]=Array(N)),map[k].values=k,map[k]);g[lut[val(x)].index]=x}return groups}module.exports=Impute},{"./BatchTransform":371,"./Transform":392,datalib:29,"vega-dataflow":232,"vega-logging":299}],385:[function(require,module,exports){var Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform");function LinkPath(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{sourceX:{type:"field",default:"_source.layout_x"},sourceY:{type:"field",default:"_source.layout_y"},targetX:{type:"field",default:"_target.layout_x"},targetY:{type:"field",default:"_target.layout_y"},tension:{type:"value",default:.2},shape:{type:"value",default:"line"}});this._output={path:"layout_path"};return this.mutates(true)}var prototype=LinkPath.prototype=Object.create(Transform.prototype);prototype.constructor=LinkPath;function line(sx,sy,tx,ty){return"M"+sx+","+sy+"L"+tx+","+ty}function curve(sx,sy,tx,ty,tension){var dx=tx-sx,dy=ty-sy,ix=tension*(dx+dy),iy=tension*(dy-dx);return"M"+sx+","+sy+"C"+(sx+ix)+","+(sy+iy)+" "+(tx+iy)+","+(ty-ix)+" "+tx+","+ty}function cornerX(sx,sy,tx,ty){return"M"+sx+","+sy+"V"+ty+"H"+tx}function cornerY(sx,sy,tx,ty){return"M"+sx+","+sy+"H"+tx+"V"+ty}function cornerR(sa,sr,ta,tr){var sc=Math.cos(sa),ss=Math.sin(sa),tc=Math.cos(ta),ts=Math.sin(ta),sf=Math.abs(ta-sa)>Math.PI?ta<=sa:ta>sa;return"M"+sr*sc+","+sr*ss+"A"+sr+","+sr+" 0 0,"+(sf?1:0)+" "+sr*tc+","+sr*ts+"L"+tr*tc+","+tr*ts}function diagonalX(sx,sy,tx,ty){var m=(sx+tx)/2;return"M"+sx+","+sy+"C"+m+","+sy+" "+m+","+ty+" "+tx+","+ty}function diagonalY(sx,sy,tx,ty){var m=(sy+ty)/2;return"M"+sx+","+sy+"C"+sx+","+m+" "+tx+","+m+" "+tx+","+ty}function diagonalR(sa,sr,ta,tr){var sc=Math.cos(sa),ss=Math.sin(sa),tc=Math.cos(ta),ts=Math.sin(ta),mr=(sr+tr)/2;return"M"+sr*sc+","+sr*ss+"C"+mr*sc+","+mr*ss+" "+mr*tc+","+mr*ts+" "+tr*tc+","+tr*ts}var shapes={line:line,curve:curve,cornerX:cornerX,cornerY:cornerY,cornerR:cornerR,diagonalX:diagonalX,diagonalY:diagonalY,diagonalR:diagonalR};prototype.transform=function(input){log.debug(input,["linkpath"]);var output=this._output,shape=shapes[this.param("shape")]||shapes.line,sourceX=this.param("sourceX").accessor,sourceY=this.param("sourceY").accessor,targetX=this.param("targetX").accessor,targetY=this.param("targetY").accessor,tension=this.param("tension");function set(t){var path=shape(sourceX(t),sourceY(t),targetX(t),targetY(t),tension);Tuple.set(t,output.path,path)}input.add.forEach(set);if(this.reevaluate(input)){input.mod.forEach(set);input.rem.forEach(set)}input.fields[output.path]=1;return input};module.exports=LinkPath},{"./Transform":392,"vega-dataflow":232,"vega-logging":299}],386:[function(require,module,exports){var Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform");function Lookup(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{on:{type:"data"},onKey:{type:"field",default:null},as:{type:"array<value>"},keys:{type:"array<field>",default:["data"]},default:{type:"value"}});return this.mutates(true)}var prototype=Lookup.prototype=Object.create(Transform.prototype);prototype.constructor=Lookup;prototype.transform=function(input,reset){log.debug(input,["lookup"]);var on=this.param("on"),onLast=on.source.last(),onData=on.source.values(),onKey=this.param("onKey"),onF=onKey.field,keys=this.param("keys"),get=keys.accessor,as=this.param("as"),defaultValue=this.param("default"),lut=this._lut,i,v;if(lut==null||this._on!==onF||onF&&onLast.fields[onF]||onLast.add.length||onLast.rem.length){if(onF){onKey=onKey.accessor;for(lut={},i=0;i<onData.length;++i){lut[onKey(v=onData[i])]=v}}else{lut=onData}this._lut=lut;this._on=onF;reset=true}function set(t){for(var i=0;i<get.length;++i){var v=lut[get[i](t)]||defaultValue;Tuple.set(t,as[i],v)}}input.add.forEach(set);var run=keys.field.some(function(f){return input.fields[f]});if(run||reset){input.mod.forEach(set);input.rem.forEach(set)}as.forEach(function(k){input.fields[k]=1});return input};module.exports=Lookup},{"./Transform":392,"vega-dataflow":232,"vega-logging":299}],387:[function(require,module,exports){var dl=require("datalib"),Deps=require("vega-dataflow").Dependencies;var arrayType=/array/i,dataType=/data/i,fieldType=/field/i,exprType=/expr/i,valType=/value/i;function Parameter(name,type,transform){this._name=name;this._type=type;this._transform=transform;this._value=[];this._accessors=[];this._resolution=false;this._signals=[]}var prototype=Parameter.prototype;function get(){var isArray=arrayType.test(this._type),isData=dataType.test(this._type),isField=fieldType.test(this._type);var val=isArray?this._value:this._value[0],acc=isArray?this._accessors:this._accessors[0];if(!dl.isValid(acc)&&valType.test(this._type)){return val}else{return isData?{name:val,source:acc}:isField?{field:val,accessor:acc}:val}}prototype.get=function(){var graph=this._transform._graph,isData=dataType.test(this._type),isField=fieldType.test(this._type),i,n,sig,idx,val;if(!this._resolution)return get.call(this);if(isData){this._accessors=this._value.map(function(v){return graph.data(v)});return get.call(this)}for(i=0,n=this._signals.length;i<n;++i){sig=this._signals[i];idx=sig.index;val=sig.value(graph);if(isField){this._accessors[idx]=this._value[idx]!=val?dl.accessor(val):this._accessors[idx]}this._value[idx]=val}return get.call(this)};prototype.set=function(value){var p=this,graph=p._transform._graph,isExpr=exprType.test(this._type),isData=dataType.test(this._type),isField=fieldType.test(this._type);p._signals=[];this._value=dl.array(value).map(function(v,i){var e;if(dl.isString(v)){if(isExpr){e=graph.expr(v);p._transform.dependency(Deps.FIELDS,e.fields);p._transform.dependency(Deps.SIGNALS,e.globals);p._transform.dependency(Deps.DATA,e.dataSources);return e.fn}else if(isField){p._accessors[i]=dl.accessor(v);p._transform.dependency(Deps.FIELDS,dl.field(v))}else if(isData){p._resolution=true;p._transform.dependency(Deps.DATA,v)}return v}else if(v.value!==undefined){return v.value}else if(v.field!==undefined){p._accessors[i]=dl.accessor(v.field);p._transform.dependency(Deps.FIELDS,dl.field(v.field));return v.field}else if(v.signal!==undefined){p._resolution=true;p._transform.dependency(Deps.SIGNALS,dl.field(v.signal)[0]);p._signals.push({index:i,value:function(graph){return graph.signalRef(v.signal)}});return v.signal}else if(v.expr!==undefined){p._resolution=true;e=graph.expr(v.expr);p._transform.dependency(Deps.SIGNALS,e.globals);p._signals.push({index:i,value:function(){return e.fn()}});return v.expr}return v});return p._transform};module.exports=Parameter},{datalib:29,"vega-dataflow":232}],388:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Pie(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"field",default:null},startAngle:{type:"value",default:0},endAngle:{type:"value",default:2*Math.PI},sort:{type:"value",default:false}});this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"};return this.mutates(true)}var prototype=Pie.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Pie;function ones(){return 1}prototype.batchTransform=function(input,data){log.debug(input,["pie"]);var output=this._output,field=this.param("field").accessor||ones,start=this.param("startAngle"),stop=this.param("endAngle"),sort=this.param("sort");var values=data.map(field),a=start,k=(stop-start)/dl.sum(values),index=dl.range(data.length),i,t,v;if(sort){index.sort(function(a,b){return values[a]-values[b]})}for(i=0;i<index.length;++i){t=data[index[i]];v=values[index[i]];Tuple.set(t,output.start,a);Tuple.set(t,output.mid,a+.5*v*k);Tuple.set(t,output.end,a+=v*k)}input.fields[output.start]=1;input.fields[output.end]=1;input.fields[output.mid]=1;return input};module.exports=Pie},{"./BatchTransform":371,"./Transform":392,datalib:29,"vega-dataflow":232,"vega-logging":299}],389:[function(require,module,exports){var Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Rank(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"field",default:null},normalize:{type:"value",default:false}});this._output={rank:"rank"};return this.mutates(true)}var prototype=Rank.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Rank;prototype.batchTransform=function(input,data){log.debug(input,["rank"]);var rank=this._output.rank,norm=this.param("normalize"),field=this.param("field").accessor,keys={},i,len=data.length,klen,d,f;if(field){for(i=0,klen=0;i<len;++i){d=data[i];keys[f=field(d)]=keys[f]||(keys[f]=++klen)}}for(i=0;i<len&&(d=data[i]);++i){if(field&&(f=field(d))){Tuple.set(d,rank,norm?keys[f]/klen:keys[f])}else{Tuple.set(d,rank,norm?(i+1)/len:i+1)}}input.fields[rank]=1;return input};module.exports=Rank},{"./BatchTransform":371,"./Transform":392,"vega-dataflow":232,"vega-logging":299}],390:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),Transform=require("./Transform");function Sort(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{by:{type:"array<field>"}});this.router(true)}var prototype=Sort.prototype=Object.create(Transform.prototype);prototype.constructor=Sort;prototype.transform=function(input){log.debug(input,["sorting"]);if(input.add.length||input.mod.length||input.rem.length){input.sort=dl.comparator(this.param("by").field)}return input};module.exports=Sort},{"./Transform":392,datalib:29,"vega-logging":299}],391:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Stack(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value",default:"zero"}});this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"};return this.mutates(true)}var prototype=Stack.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Stack;prototype.batchTransform=function(input,data){log.debug(input,["stacking"]);var groupby=this.param("groupby").accessor,sortby=dl.comparator(this.param("sortby").field),field=this.param("field").accessor,offset=this.param("offset"),output=this._output;var groups=partition(data,groupby,sortby,field);for(var i=0,max=groups.max;i<groups.length;++i){var group=groups[i],sum=group.sum,off=offset==="center"?(max-sum)/2:0,scale=offset==="normalize"?1/sum:1,j,x,a,b=off,v=0;for(j=0;j<group.length;++j){x=group[j];a=b;v+=field(x);b=scale*v+off;Tuple.set(x,output.start,a);Tuple.set(x,output.end,b);Tuple.set(x,output.mid,.5*(a+b))}}input.fields[output.start]=1;input.fields[output.end]=1;input.fields[output.mid]=1;return input};function partition(data,groupby,sortby,field){var groups=[],get=function(f){return f(x)},map,i,x,k,g,s,max;if(groupby==null){groups.push(data.slice())}else{for(map={},i=0;i<data.length;++i){x=data[i];k=groupby.map(get);g=map[k]||(groups.push(map[k]=[]),map[k]);g.push(x)}}for(k=0,max=0;k<groups.length;++k){g=groups[k];for(i=0,s=0;i<g.length;++i){s+=field(g[i])}g.sum=s;if(s>max)max=s;if(sortby!=null)g.sort(sortby)}groups.max=max;return groups}module.exports=Stack},{"./BatchTransform":371,"./Transform":392,datalib:29,"vega-dataflow":232,"vega-logging":299}],392:[function(require,module,exports){var df=require("vega-dataflow"),Base=df.Node.prototype,Deps=df.Dependencies,Parameter=require("./Parameter");function Transform(graph){if(graph)Base.init.call(this,graph)}Transform.addParameters=function(proto,params){proto._parameters=proto._parameters||{};for(var name in params){var p=params[name],param=new Parameter(name,p.type,proto);proto._parameters[name]=param;if(p.type==="custom"){if(p.set)param.set=p.set.bind(param);if(p.get)param.get=p.get.bind(param)}if(p.hasOwnProperty("default"))param.set(p.default)}};var prototype=Transform.prototype=Object.create(Base);prototype.constructor=Transform;prototype.param=function(name,value){var param=this._parameters[name];return param===undefined?this:arguments.length===1?param.get():param.set(value)};prototype.transform=function(input){return input};prototype.evaluate=function(input){var reset=this._stamp<input.stamp&&this.dependency(Deps.SIGNALS).reduce(function(c,s){return c+=input.signals[s]?1:0},0);return this.transform(input,reset)};prototype.output=function(map){for(var key in this._output){if(map[key]!==undefined){this._output[key]=map[key]}}return this};module.exports=Transform},{"./Parameter":387,"vega-dataflow":232}],393:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Treeify(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{groupby:{type:"array<field>"}});this._output={children:"children",parent:"parent"};return this.router(true).produces(true)}var prototype=Treeify.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Treeify;prototype.batchTransform=function(input,data){log.debug(input,["treeifying"]);var fields=this.param("groupby").field,childField=this._output.children,parentField=this._output.parent,summary=[{name:"*",ops:["values"],as:[childField]}],aggrs=fields.map(function(f){return dl.groupby(f).summarize(summary)}),prev=this._internal||[],curr=[],i,n;function level(index,node,values){var vals=aggrs[index].execute(values);node[childField]=vals;vals.forEach(function(n){n[parentField]=node;curr.push(Tuple.ingest(n));if(index+1<fields.length)level(index+1,n,n[childField]);else n[childField].forEach(function(c){c[parentField]=n})})}var root=Tuple.ingest({});root[parentField]=null;curr.push(root);level(0,root,data);for(i=0,n=curr.length;i<n;++i){input.add.push(curr[i])}for(i=0,n=prev.length;i<n;++i){input.rem.push(prev[i])}this._internal=curr;return input};module.exports=Treeify},{"./BatchTransform":371,"./Transform":392,datalib:29,"vega-dataflow":232,"vega-logging":299}],394:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");var defaultRatio=.5*(1+Math.sqrt(5));function Treemap(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{sort:{type:"array<field>",default:["-value"]},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"field",default:"value"},size:{type:"array<value>",default:require("./screen").size},round:{type:"value",default:true},sticky:{type:"value",default:false},ratio:{type:"value",default:defaultRatio},padding:{type:"value",default:null},mode:{type:"value",default:"squarify"}});this._layout=d3.layout.treemap();this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"};return this.mutates(true)}var prototype=Treemap.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Treemap;prototype.batchTransform=function(input,data){log.debug(input,["treemap"]);var layout=this._layout,output=this._output,sticky=this.param("sticky"),parent=this.param("parent").accessor,root=data.filter(function(d){return parent(d)===null})[0];if(layout.sticky()!==sticky){layout.sticky(sticky)}layout.sort(dl.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(root);data.forEach(function(n){Tuple.set(n,output.x,n.x);Tuple.set(n,output.y,n.y);Tuple.set(n,output.width,n.dx);Tuple.set(n,output.height,n.dy);Tuple.set(n,output.depth,n.depth)});input.fields[output.x]=1;input.fields[output.y]=1;input.fields[output.width]=1;input.fields[output.height]=1;input.fields[output.depth]=1;return input};module.exports=Treemap}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./BatchTransform":371,"./Transform":392,"./screen":398,datalib:29,"vega-dataflow":232,"vega-logging":299}],395:[function(require,module,exports){(function(global){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,Tuple=require("vega-dataflow/src/Tuple"),log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Voronoi(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{clipExtent:{type:"array<value>",default:require("./screen").extent},x:{type:"field",default:"layout_x"},y:{type:"field",default:"layout_y"}});this._layout=d3.geom.voronoi();this._output={path:"layout_path"};return this.mutates(true)}var prototype=Voronoi.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Voronoi;prototype.batchTransform=function(input,data){log.debug(input,["voronoi"]);var pathname=this._output.path;var polygons=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(data);for(var i=0;i<data.length;++i){if(polygons[i])Tuple.set(data[i],pathname,"M"+polygons[i].join("L")+"Z")}input.fields[pathname]=1;return input};module.exports=Voronoi}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./BatchTransform":371,"./Transform":392,"./screen":398,"vega-dataflow/src/Tuple":231,"vega-logging":299}],396:[function(require,module,exports){(function(global){var dl=require("datalib"),d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,d3_cloud=typeof window!=="undefined"?window["d3"]["layout"]["cloud"]:typeof global!=="undefined"?global["d3"]["layout"]["cloud"]:null,canvas=require("vega-scenegraph").canvas,Tuple=require("vega-dataflow/src/Tuple"),log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Wordcloud(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{size:{type:"array<value>",default:require("./screen").size},text:{type:"field",default:"data"},rotate:{type:"field|value",default:0},font:{type:"field|value",default:{value:"sans-serif"}},fontSize:{type:"field|value",default:14},fontStyle:{type:"field|value",default:{value:"normal"}},fontWeight:{type:"field|value",default:{value:"normal"}},fontScale:{type:"array<value>",default:[10,50]},padding:{type:"value",default:1},spiral:{type:"value",default:"archimedean"}});this._layout=d3_cloud().canvas(canvas.instance);this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"};return this.mutates(true)}var prototype=Wordcloud.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Wordcloud;function get(p){return p&&p.accessor||p}function wrap(tuple){var x=Object.create(tuple);x._tuple=tuple;return x}prototype.batchTransform=function(input,data){log.debug(input,["wordcloud"]);var layout=this._layout,output=this._output,fontSize=this.param("fontSize"),range=fontSize.accessor&&this.param("fontScale"),size,scale;fontSize=fontSize.accessor||d3.functor(fontSize);if(range.length){scale=d3.scale.sqrt().domain(dl.extent(data,size=fontSize)).range(range);fontSize=function(x){return scale(size(x))}}layout.size(this.param("size")).text(get(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(get(this.param("rotate"))).font(get(this.param("font"))).fontStyle(get(this.param("fontStyle"))).fontWeight(get(this.param("fontWeight"))).fontSize(fontSize).words(data.map(wrap)).on("end",function(words){var size=layout.size(),dx=size[0]>>1,dy=size[1]>>1,w,t,i,len;for(i=0,len=words.length;i<len;++i){w=words[i];t=w._tuple;Tuple.set(t,output.x,w.x+dx);Tuple.set(t,output.y,w.y+dy);Tuple.set(t,output.font,w.font);Tuple.set(t,output.fontSize,w.size);Tuple.set(t,output.fontStyle,w.style);Tuple.set(t,output.fontWeight,w.weight);Tuple.set(t,output.rotate,w.rotate)}}).start();for(var key in output)input.fields[output[key]]=1;return input};module.exports=Wordcloud}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./BatchTransform":371,"./Transform":392,"./screen":398,datalib:29,"vega-dataflow/src/Tuple":231,"vega-logging":299,"vega-scenegraph":300}],397:[function(require,module,exports){module.exports={aggregate:require("./Aggregate"),bin:require("./Bin"),cross:require("./Cross"),countpattern:require("./CountPattern"),linkpath:require("./LinkPath"),facet:require("./Facet"),filter:require("./Filter"),fold:require("./Fold"),force:require("./Force"),formula:require("./Formula"),geo:require("./Geo"),geopath:require("./GeoPath"),hierarchy:require("./Hierarchy"),impute:require("./Impute"),lookup:require("./Lookup"),pie:require("./Pie"),rank:require("./Rank"),sort:require("./Sort"),stack:require("./Stack"),treeify:require("./Treeify"),treemap:require("./Treemap"),voronoi:require("./Voronoi"),wordcloud:require("./Wordcloud")}},{"./Aggregate":370,"./Bin":372,"./CountPattern":373,"./Cross":374,"./Facet":375,"./Filter":377,"./Fold":378,"./Force":379,"./Formula":380,"./Geo":381,"./GeoPath":382,"./Hierarchy":383,"./Impute":384,"./LinkPath":385,"./Lookup":386,"./Pie":388,"./Rank":389,"./Sort":390,"./Stack":391,"./Treeify":393,"./Treemap":394,"./Voronoi":395,"./Wordcloud":396}],398:[function(require,module,exports){module.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},{}],399:[function(require,module,exports){var dl=require("datalib");var TIME="time",UTC="utc",STRING="string",ORDINAL="ordinal",NUMBER="number";function getTickFormat(scale,tickCount,tickFormatType,tickFormatString){var formatType=tickFormatType||inferFormatType(scale);return getFormatter(scale,tickCount,formatType,tickFormatString)}function inferFormatType(scale){switch(scale.type){case TIME:return TIME;case UTC:return UTC;case ORDINAL:return STRING;default:return NUMBER}}function logFilter(scale,domain,count,f){if(count==null)return f;var base=scale.base(),k=Math.min(base,scale.ticks().length/count),v=domain[0]>0?(e=1e-12,Math.ceil):(e=-1e-12,Math.floor),e;function log(x){return(domain[0]<0?-Math.log(x>0?0:-x):Math.log(x<0?0:x))/Math.log(base)}function pow(x){return domain[0]<0?-Math.pow(base,-x):Math.pow(base,x)}return function(d){return pow(v(log(d)+e))/d>=k?f(d):""}}function getFormatter(scale,tickCount,formatType,str){var fmt=dl.format,log=scale.type==="log",domain;switch(formatType){case NUMBER:domain=scale.domain();return log?logFilter(scale,domain,tickCount,fmt.auto.number(str||null)):fmt.auto.linear(domain,tickCount,str||null);case TIME:return(str?fmt:fmt.auto).time(str);case UTC:return(str?fmt:fmt.auto).utc(str);default:return String}}module.exports={getTickFormat:getTickFormat}},{datalib:29}],400:[function(require,module,exports){var dl=require("datalib"),u={};dl.extend(u,require("./format"));module.exports=dl.extend(u,dl)},{"./format":399,datalib:29}],401:[function(require,module,exports){module.exports=function(def,config,property,defaultVal){if(def[property]!==undefined){return def[property]}else if(config!==undefined&&config[property]!==undefined){return config[property]}else if(defaultVal!==undefined){return defaultVal}return undefined}},{}],402:[function(require,module,exports){var $=require("jquery"),_=require("underscore");var vg=require("vega"),vl=require("vega-lite");var kde=require("./stats").kde;function renderArray(specs,_options){var options=_.defaults(_options||{},{regularVega:false});var nSpecsRemaining=specs.length;var resultContainer=wpEditor.makeResultContainer();var $zoomDiv=$("<div>").addClass("zoomDiv");_.each(specs,function(spec){var vgSpec=options.regularVega?spec:vl.compile(spec).spec;var thumbnailContainer=$("<div>").addClass("thumbnail");$(resultContainer).append(thumbnailContainer);vg.parse.spec(vgSpec,function(error,chart){var view=chart({el:thumbnailContainer[0],renderer:"svg"}).update();var $svg=$(view._el).find("svg");var origHeight=$svg.attr("height");var origWidth=$svg.attr("width");var origTransform=$svg.children().attr("transform");$svg.attr({height:origHeight*.2,width:origWidth*.2});$svg.children().attr("transform","scale(0.2) "+origTransform);$svg.click(function(){var $zoomSvg=$(this).clone().attr({height:origHeight,width:origWidth});debugger;$zoomSvg.children().attr("transform",origTransform);$zoomDiv.empty().append($zoomSvg)})})});$(resultContainer).append($("<div>").addClass("clearboth")).append($zoomDiv)}function perms(data){data=data.slice();var permutations=[],stack=[];function doPerm(){if(data.length==0){permutations.push(stack.slice())}for(var i=0;i<data.length;i++){var x=data.splice(i,1);stack.push(x);doPerm();stack.pop();data.splice(i,0,x)}}doPerm();return permutations}var cccr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var typesExpanded=_.map(types,function(v,k){return{name:k,type:v}});var cDimNames=_(typesExpanded).chain().where({type:"categorical"}).pluck("name").value();var rDimNames=_(typesExpanded).chain().where({type:"real"}).pluck("name").value();var rDimName=rDimNames[0];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var categoricalPermutations=perms(cDimNames);var specs=_.map(categoricalPermutations,function(perm){var dataGroupedByC=_.groupBy(data,function(obs){return JSON.stringify(_.pick(obs,cDimNames))});var densityEstimates=_.mapObject(dataGroupedByC,function(states,k){var groupWeight=util.sum(_.pluck(states,"prob"));var rValues=_.pluck(states,rDimName);var estimates=kde(rValues);_.each(estimates,function(est){est.density*=groupWeight});return estimates});var densityEstimatesTidied=_.chain(densityEstimates).map(function(vs,k){var kParsed=JSON.parse(k);_.each(vs,function(v){_.extend(v,kParsed)});return vs}).flatten(1).value();return{data:{values:densityEstimatesTidied},mark:"line",encoding:{column:{type:"nominal",field:perm[0]},row:{type:"nominal",field:perm[1]},color:{type:"nominal",field:perm[2],axis:{title:perm[2]}},x:{type:"quantitative",field:"item",axis:{title:rDimName}},y:{type:"quantitative",field:"density"}}}});renderArray(specs,{})};module.exports=cccr},{"./stats":404,jquery:58,underscore:222,vega:339,"vega-lite":298}],403:[function(require,module,exports){(function(global){var _=require("underscore");var d3=require("d3");var $=require("jquery");global.d3=d3;var vl=require("vega-lite");var vg=require("vega");global.vg=vg;var React=require("react");var ReactDOM=require("react-dom");var md5=require("md5");var stats=require("./stats"),kde=stats.kde,kde2d=stats.kde2d;function runningInBrowser(){return typeof window==="object"}function isDist(x){return x.isContinuous||x.support&&x.score||x.score}function isTensor(x){return x instanceof T.__Tensor}function getScores(erp){return _.map(erp.support(),function(state){return scorer(erp,state)})}function scorer(erp,val){if(erp.score.length==2){return erp.score(null,val)}else{return erp.score(val)}}function samplesToDist(xs){var n=xs.length;var frequencies=_.countBy(xs,function(x){return JSON.stringify(x)});var support=_.keys(frequencies).map(function(x){return JSON.parse(x)});var probabilities=_.mapObject(frequencies,function(freq,key){return freq/n});var scorer=function(x){return Math.log(probabilities[JSON.stringify(x)])};var sampler=function(){return global.categorical(probabilities,support)};var ret={sample:sampler,score:scorer,support:function(){return support}};return ret}function isDataFrame(arr){var firstKeys=_.keys(arr[0]);if(_.isArray(arr[0])){return false}if(firstKeys.length==0){return false}for(var i=0,ii=arr.length;i<ii;i++){var rowKeys=_.keys(arr[i]);if(!_.isEqual(firstKeys,rowKeys)){return false}}return true}function isVector(arr){var anyStructuredObjects=false;for(var i=0,n=arr.length;i<n;i++){if(_.isObject(arr[i])){return false}}return true}function isPseudoDataFrame(arr,strict){if(strict===undefined){strict=true}var subArrayLengths=arr.map(function(x){return x.length});var subArrayLengthsOk=_.unique(subArrayLengths).length==1;if(!subArrayLengthsOk){return false}var n=subArrayLengths[0];var columnTypesOk=_.range(0,n).map(function(colNum){var values=_.pluck(arr,colNum+"");var types=_.map(values,function(v){return typeof v});return _.unique(types).length==1});return _.every(columnTypesOk)}var wait=function(ms,f){setTimeout(f,ms)};function stringifyIfObject(x){if(typeof x=="object"){return JSON.stringify(x)}else{return x}}var kindPrinter={};kindPrinter.c=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var fieldName=fieldNames[0];var values=_.pluck(support,fieldName);var probs=scores.map(function(score){return Math.exp(score)});barWrapper(values,probs,_.extend({xLabel:fieldName,yLabel:"frequency"},options))};kindPrinter.i=function(args,options){var dist=args.dist,support=args.support;var fieldNames=_.keys(support[0]);var fieldName=fieldNames[0];var valuesNonZero=_.pluck(support,fieldName),values=_.range(_.min(valuesNonZero),_.max(valuesNonZero)+1);var probs=values.map(function(v){if(_.contains(valuesNonZero,v)){return Math.exp(dist.score(fieldName=="(state)"?v:_.object([fieldName],[v])))}else{return 0}});barWrapper(values,probs,_.extend({xLabel:fieldName,yLabel:"frequency"},options))};kindPrinter.r=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var fieldName=fieldNames[0];var values=_.pluck(support,fieldName);var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var probs=_.pluck(data,"prob");var densityEstimates=kde(values,{weights:probs});var vlSpec={data:{values:densityEstimates},mark:"line",encoding:{x:{type:"quantitative",field:"item",axis:{title:fieldName},scale:{zero:false}},y:{type:"quantitative",field:"density"}}};renderSpec(vlSpec,options)};kindPrinter.cc=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var field1Name=fieldNames[0],field1Levels=_.unique(_.pluck(support,field1Name)).length;var field2Name=fieldNames[1],field2Levels=_.unique(_.pluck(support,field2Name)).length;var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var vlSpec;if(field1Levels>5&&field2Levels>5){vlSpec={data:{values:data},mark:"text",encoding:{row:{field:field1Name,type:"nominal"},column:{field:field2Name,type:"nominal"},color:{field:"prob",type:"quantitative"},text:{field:"prob",type:"quantitative"}},config:{mark:{applyColorToBackground:true},numberFormat:".1e",scale:{textBandWidth:40}}}}else{var xName=field1Levels>field2Levels?field1Name:field2Name;var gName=field1Levels>field2Levels?field2Name:field1Name;vlSpec={data:{values:data},mark:"bar",encoding:{column:{field:xName,type:"ordinal",scale:{padding:4},axis:{orient:"bottom",axisWidth:1,offset:-8,labelAngle:270}},x:{field:gName,type:"ordinal",scale:{bandSize:6},axis:false},color:{field:gName,type:"nominal",scale:{range:"category10"}},y:{field:"prob",type:"quantitative",axis:{title:"Probability",format:",r"}}},config:{facet:{cell:{strokeWidth:0}}}}}renderSpec(vlSpec,options)};kindPrinter.cr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var typesExpanded=_.map(types,function(v,k){return{name:k,type:v}});var cDimNames=_(typesExpanded).chain().where({type:"categorical"}).pluck("name").value();var rDimNames=_(typesExpanded).chain().where({type:"real"}).pluck("name").value();var cDimName=cDimNames[0];var rDimName=rDimNames[0];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var dataGroupedByC=_.groupBy(data,function(obs){return obs[cDimName]});var densityEstimates=_.mapObject(dataGroupedByC,function(states,k){var groupWeight=util.sum(_.pluck(states,"prob"));var rValues=_.pluck(states,rDimName);var estimates=kde(rValues);_.each(estimates,function(est){est.density*=groupWeight});return estimates});var densityEstimatesTidied=_.chain(densityEstimates).pairs().map(function(x){var cValue=x[0];var densityBins=x[1];densityBins.forEach(function(bin){bin[cDimName]=cValue});return densityBins}).flatten(1).value();var vlSpec={data:{values:densityEstimatesTidied},mark:"line",encoding:{x:{type:"quantitative",field:"item",axis:{title:rDimName},scale:{zero:false}},y:{type:"quantitative",field:"density"},color:{type:"nominal",field:cDimName,axis:{title:cDimName}}}};renderSpec(vlSpec,options)};kindPrinter.rr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var field1Name=fieldNames[0];var field2Name=fieldNames[1];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var vlSpec={data:{values:data},mark:"point",encoding:{x:{field:field1Name,type:"quantitative",scale:{zero:false}},y:{field:field2Name,type:"quantitative",scale:{zero:false}},size:{field:"prob",type:"quantitative"},color:{field:"prob",type:"quantitative"},order:{field:"prob",type:"quantitative",sort:"ascending"}},config:{numberFormat:".1e"}};renderSpec(vlSpec,options)};kindPrinter.ccc=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var field1Name=fieldNames[0];var field2Name=fieldNames[1];var field3Name=fieldNames[2];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var bucketedData=_.groupBy(data,field3Name);_.each(bucketedData,function(d,field3Value){global.print({},function(){},"",field3Name+" = "+field3Value);var vlSpec={data:{values:d},mark:"text",encoding:{row:{field:field1Name,type:"nominal"},column:{field:field2Name,type:"nominal"},color:{field:"prob",type:"quantitative"},text:{field:"prob",type:"quantitative"}},config:{mark:{applyColorToBackground:true},numberFormat:".1e"}};renderSpec(vlSpec)})};kindPrinter.ccr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var typesExpanded=_.map(types,function(v,k){return{name:k,type:v}});var cDimNames=_(typesExpanded).chain().where({type:"categorical"}).pluck("name").value();var rDimNames=_(typesExpanded).chain().where({type:"real"}).pluck("name").value();var facetDimName=cDimNames[0];var cDimName=cDimNames[1];var rDimName=rDimNames[0];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var dataGroupedByC=_.groupBy(data,function(obs){return obs[facetDimName]+","+obs[cDimName]});var densityEstimates=_.mapObject(dataGroupedByC,function(states,k){var groupWeight=util.sum(_.pluck(states,"prob"));var rValues=_.pluck(states,rDimName);var estimates=kde(rValues);_.each(estimates,function(est){est.density*=groupWeight});return estimates});var densityEstimatesTidied=_.chain(densityEstimates).pairs().map(function(x){var keySplit=x[0].split(",");var facetValue=keySplit[0];var cValue=keySplit[1];var densityBins=x[1];densityBins.forEach(function(bin){bin[facetDimName]=facetValue;bin[cDimName]=cValue});return densityBins}).flatten(1).value();var vlSpec={data:{values:densityEstimatesTidied},mark:"line",encoding:{x:{type:"quantitative",field:"item",axis:{title:rDimName},scale:{zero:false}},y:{type:"quantitative",field:"density"},color:{type:"nominal",field:cDimName,axis:{title:cDimName}},column:{type:"nominal",field:facetDimName}}};renderSpec(vlSpec,options)};kindPrinter.crr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var typesExpanded=_.map(types,function(v,k){return{name:k,type:v}});var cDimNames=_(typesExpanded).chain().where({type:"categorical"}).pluck("name").value();var rDimNames=_(typesExpanded).chain().where({type:"real"}).pluck("name").value();var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var vlSpec={data:{values:data},mark:"point",encoding:{column:{field:cDimNames[0],type:"nominal"},x:{field:rDimNames[0],type:"quantitative",scale:{zero:false}},y:{field:rDimNames[1],type:"quantitative",scale:{zero:false}},size:{field:"prob",type:"quantitative"},color:{field:"prob",type:"quantitative"},order:{field:"prob",type:"quantitative",sort:"ascending"}},config:{numberFormat:".1e"}};renderSpec(vlSpec,options)};kindPrinter.cccr=require("./cccr");function parallelCoordinates(args,options){var types=args.types,support=args.support,scores=args.scores,options=options||{};var fieldNames=_.keys(support[0]);var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var overallScale={name:"ord",type:"ordinal",points:true,range:"width",domain:fieldNames};var probWidthScale={name:"probWidth",type:"linear",range:[1,3],domain:{data:"values",field:"prob"}};var probOpacityScale={name:"probOpacity",type:"log",range:[.2,1],domain:{data:"values",field:"prob"}};var individualScales=_.map(fieldNames,function(name){var domain=options.bounds&&options.bounds[name]?options.bounds[name]:{data:"values",field:name};return{name:name,type:"linear",range:"height",zero:false,nice:true,domain:domain}});var individualAxes=_.map(fieldNames,function(name){return{type:"y",scale:name,offset:{scale:"ord",value:name}}});var vegaSpec={data:[{name:"values",values:data},{name:"fields",values:fieldNames}],scales:[overallScale,probWidthScale,probOpacityScale].concat(individualScales),axes:individualAxes,marks:[{type:"group",from:{data:"values"},marks:[{type:"line",from:{data:"fields"},properties:{enter:{x:{scale:"ord",field:"data"},y:{scale:{datum:"data"},field:{parent:{datum:"data"}}},stroke:{value:"steelblue"},strokeWidth:{field:{parent:"prob"},scale:"probWidth"},strokeOpacity:{field:{parent:"prob"},scale:"probOpacity"}}}}]},{type:"text",from:{data:"fields"},properties:{enter:{x:{scale:"ord",field:"data",offset:-8},y:{field:{group:"height"},offset:6},fontWeight:{value:"bold"},fill:{value:"black"},text:{field:"data"},align:{value:"right"},baseline:{value:"top"}}}}]};renderSpec(vegaSpec,_.extend({regularVega:true},options))}function auto(obj,_options){var options=_.defaults(_options||{},{});var getColumnType=function(columnValues){if(_.every(columnValues,_.isNumber)){return _.every(columnValues,Number.isInteger)?"integer":"real"}else{return"categorical"}};var getColumnTypes=function(df){var columnNames=_.keys(df[0]);return _.object(columnNames,_.map(columnNames,function(name){var columnValues=_.pluck(df,name);return getColumnType(columnValues)}))};var dist;if(_.isArray(obj)){dist=samplesToDist(obj)}else if(isDist(obj)){if(!obj.isContinuous){dist=obj}else{var n=options.samples||5e3;var name=obj.meta.name;console.info("viz: approximating "+name+" with "+n+" samples");var samples=[];while(n--){var sample=obj.sample();if(isTensor(sample)){sample=sample.toFlatArray()}samples.push(sample)}dist=samplesToDist(samples)}}else{throw new Error("autoviz takes a distribution or a list of samples as an argument")}var support;if(dist.support){support=dist.support()}else if(dist.meta.name=="Poisson"){console.info("viz: Setting support = {0, ..., 10} for Poisson distribution");support=_.range(11)}else{throw new Error("distribution has no support")}var supportStructure=isVector(support)?"vector":isPseudoDataFrame(support)?"pseudodataframe":isDataFrame(support)?"dataframe":"other";if(supportStructure=="other"){return table(dist)}var scores=_.map(support,function(state){return scorer(dist,state)});if(isVector(support)){support=support.map(function(x){return{"(state)":x}})}if(!isDataFrame(support)&&isPseudoDataFrame(support)){support=support.map(function(x){var n=x.length;var keys=_.range(0,n).map(function(i){return"(state_"+i+")"});return _.object(keys,x)})}var supportStringified=support.map(function(x){return _.mapObject(x,stringifyIfObject)});var columnTypesDict=getColumnTypes(support);var dfKind=_.values(columnTypesDict).map(function(str){return str.substring(0,1)}).sort().join("");if(dfKind.indexOf("c")==-1&&dfKind.length>=3){parallelCoordinates({types:columnTypesDict,support:supportStringified,scores:scores,dist:dist},options)}else if(_.has(kindPrinter,dfKind)){kindPrinter[dfKind]({types:columnTypesDict,support:supportStringified,scores:scores,dist:dist},options)}else if(_.has(kindPrinter,dfKind.replace(/i/g,"c"))){var transformedKind=dfKind.replace(/i/g,"c");var _typesDict=_.mapObject(columnTypesDict,function(v,k){return v=="integer"?"categorical":v});kindPrinter[transformedKind]({types:_typesDict,support:supportStringified,scores:scores,dist:dist},options)}else{console.log(dfKind);throw new Error("viz.auto() doesn't know how to render objects of kind "+dfKind)}}var GraphComponent=React.createClass({displayName:"GraphComponent",getInitialState:function(){return{view:0}},toggleSettings:function(){$(this.refs.wrench).toggleClass("white");$(this.refs.actions).toggleClass("expanded")},notYetImplemented:function(){alert("not yet implemented")},render:function(){var dataStringified=JSON.stringify(this.props.spec.data[0].values,null,2);var dataBlob=new Blob([dataStringified],{type:"application/json"});var dataUrl=URL.createObjectURL(dataBlob);var dataName=md5(dataStringified).substring(0,6)+".json";var vegaStringified=JSON.stringify(this.props.spec,null,2);var vegaBlob=new Blob([vegaStringified],{type:"application/json"});var vegaUrl=URL.createObjectURL(vegaBlob);var vegaName=md5(vegaStringified).substring(0,6)+".vega.json";var graphUrl=this.state.view==0?null:this.state.view.toImageURL("svg");var graphName=graphUrl==null?null:this.props.fileName||md5(graphUrl||"").substring(0,6)+".svg";return React.createElement("div",{className:"graphComponent"},React.createElement("div",{ref:"actions",className:"actions"},React.createElement("button",{ref:"wrench",className:"settings",onClick:this.toggleSettings}),React.createElement("ul",null,React.createElement("li",null,React.createElement("a",{href:graphUrl,download:graphName,target:"_blank"},"download graph")),React.createElement("li",null,React.createElement("a",{href:dataUrl,download:dataName,target:"_blank"},"download data")),React.createElement("li",null,React.createElement("a",{href:vegaUrl,download:vegaName,target:"_blank"},"download vega")),React.createElement("li",{onClick:this.notYetImplemented},"resize"))),React.createElement("div",{ref:"content",className:"content"}),React.createElement("div",{className:"clearboth"}))}});function renderSpec(spec,_options){var options=_.defaults(_options||{},{regularVega:false,fileName:false,smartNumbers:true,smartTickLabels:true,callback:function(){}});var vgSpec=options.regularVega?spec:vl.compile(spec).spec;if(options.smartNumbers){var formatterKeys=[",r",",.1r",",.2r",",.3r",",.4r",",.5r",",.6r",".1e"];var formatters=_.object(formatterKeys,_.map(formatterKeys,function(s){return d3.format(s)}));var allData=vgSpec.data;_.each(vgSpec.marks,function(mark){var scales=mark.scales;_.each(mark.axes,function(axis){var scale=_.findWhere(scales,{name:axis.scale}),scaleDomain=scale.domain;var domain;if(_.isArray(scaleDomain)){domain=scaleDomain}else{var dataSource=scale.domain.data,dataField=scale.domain.field||"item";domain=_.pluck(_.findWhere(allData,{name:dataSource}).values,dataField)}var sc=d3.scale.linear();sc.domain(domain);sc.range([scale.rangeMin,scale.rangeMax]);if(scale.nice){sc.nice()}var ticks=axis.values||sc.ticks(axis.ticks);var scores=_.map(formatterKeys,function(key){var f=formatters[key];var strings=_.map(ticks,function(tick){return f(tick)});var stringsAdjusted;var score;if(_.unique(strings).length<strings.length){score=9999999999}else{stringsAdjusted=_.map(strings,function(s){return s.replace(",","")});var lengths=_.pluck(stringsAdjusted,"length");score=_.max(lengths)}return{key:key,score:score+(key==".1e"?1:0),strings:strings,stringsAdjusted:stringsAdjusted}});var bestScore=_.min(_.pluck(scores,"score"));var bestKeys=_.pluck(_.where(scores,{score:bestScore}),"key");var bestKey=_.find(bestKeys,function(key){return key==",r"})||_.find(bestKeys,function(key){return key==",g"})||_.find(bestKeys,function(key){return key.indexOf("g")>-1})||_.find(bestKeys,function(key){return key.indexOf("r")>-1})||bestKeys[0];axis.format=bestKey})})}if(options.smartTickLabels){var marks=vgSpec.marks}if(runningInBrowser()){if(!_.has(wpEditor,"makeResultContainer")){}else{var resultContainer=wpEditor.makeResultContainer();var r=React.createElement(GraphComponent,_.extend({spec:vgSpec},_.pick(options,"fileName")));ReactDOM.render(r,resultContainer,function(){var comp=this;var node=this.refs.content;$(node).css({"min-height":255}).html("&nbsp;&nbsp;&nbsp&nbsp;Rendering graph...");vg.parse.spec(vgSpec,function(error,chart){$(node).empty();comp.setState({view:chart({el:node,renderer:"svg"}).update()});var tr=global["resumeTrampoline"];if(tr){tr(options.callback)}})})}}else{vg.parse.spec(vgSpec,function(error,chart){var view=chart({renderer:"svg"}).update();var svgText=view.svg();var fileName=options.fileName||md5(svgText).substring(0,7)+".svg";require("fs").writeFileSync(fileName,svgText);console.log("Rendered to "+fileName);util.trampolineRunners.cli()(options.callback())})}}function bar(df,options){options=_.defaults(options||{},{groupBy:false,xType:"nominal",fileName:false});var xName=_.keys(df[0])[0];var yName=_.keys(df[0])[1];var vlSpec={data:{values:df},mark:"bar",encoding:{x:{field:xName,type:options.xType,axis:{title:options.xLabel||xName},scale:{zero:false}},y:{field:yName,type:"quantitative",axis:{title:options.yLabel||yName}}}};if(options.groupBy){vlSpec.encoding.column={field:xName,type:"ordinal",scale:{padding:4},axis:{orient:"bottom",axisWidth:1,offset:-8,labelAngle:270}};vlSpec.encoding.x={field:options.groupBy,type:"ordinal",scale:{bandSize:6},axis:false};vlSpec.encoding.y.axis={grid:false};vlSpec.encoding.color={field:options.groupBy,type:"nominal",scale:{range:"category10"}};vlSpec.config={facet:{cell:{strokeWidth:0}}}}renderSpec(vlSpec,options)}function barWrapper(){var args=_.toArray(arguments);if(isDataFrame(arguments[0])){bar.apply(null,args)}else{var xs=args[0];var ys=args[1];var df=[];for(var i=0,ii=xs.length;i<ii;i++){df.push({x:xs[i],y:ys[i]})}bar.apply(null,[df].concat(args.slice(2)))}}function hist(obj,options){options=_.defaults(options||{},{numBins:12});var erp;if(_.isArray(obj)){erp=samplesToDist(obj)}else if(isDist(obj)){erp=obj}else{throw new Error("hist takes an ERP or a list of samples as an argument")}var rawSupport=erp.support(),probs=rawSupport.map(function(x){return Math.exp(scorer(erp,x))}),support;if(isDataFrame(rawSupport)){var key=_.keys(rawSupport[0])[0];options.xLabel=options.xLabel||key;support=_.pluck(rawSupport,key)}else{support=rawSupport}var xType,xDomain,xValues,xTickLabels,yValues,barWidth;if(!_.every(support,_.isNumber)){xType="nominal";xValues=support.map(stringifyIfObject);yValues=probs}else{xType="quantitative";var min=_.min(support),max=_.max(support);xDomain=[min,max];var numBins=max>min?options.numBins:1,binIndices=d3.range(numBins),bins=binIndices.map(function(){return[]}),binProbs=binIndices.map(function(){return 0});barWidth=120/numBins;var scale=d3.scale.quantize().domain(xDomain).range(binIndices);for(var i=0,ii=support.length;i<ii;i++){var x=support[i];var j=scale(x)||0;bins[j].push(x);binProbs[j]+=probs[i]}xTickLabels=binIndices.reduce(function(acc,x,i){var extent=scale.invertExtent(x);return acc.concat(i==0?extent:extent[1])},[]);xValues=_.zip(_.initial(xTickLabels,1),_.rest(xTickLabels)).map(function(pair){return(pair[0]+pair[1])/2});yValues=binProbs}var df=xValues.map(function(x,i){var y=yValues[i];return _.object([["x",x],["y",y]])});if(xType=="nominal"){df=_.sortBy(df,function(row){return row.x});xTickLabels=_.pluck(df,"x");xDomain=xTickLabels}var vlSpec={data:{values:df},mark:"bar",encoding:{x:{field:"x",type:xType,axis:{title:options.xLabel,values:_.unique(xTickLabels),labelAngle:270},scale:{zero:false,domain:xType=="quantitative"&&max==min?[.9*min,1.1*max]:xDomain}},y:{field:"y",type:"quantitative",axis:{title:"Probability"},scale:{zero:true}},size:xType=="nominal"?{}:{value:barWidth}}};renderSpec(vlSpec)}function scatter(df,options){options=_.defaults(options||{},{groupBy:false});var xName=_.keys(df[0])[0];var yName=_.keys(df[0])[1];var vlSpec={data:{values:df},mark:"point",encoding:{x:{field:xName,type:"quantitative",axis:{title:options.xName}},y:{field:yName,type:"quantitative",axis:{title:options.yName}}}};if(options.groupBy){vlSpec.encoding.color={field:options.groupBy,type:"nominal"}}renderSpec(vlSpec,options)}function scatterWrapper(){var args=_.toArray(arguments);if(isDataFrame(arguments[0])){scatter.apply(null,args)}else{var xs=args[0];var ys=args[1];var df=[];for(var i=0,ii=xs.length;i<ii;i++){df.push({x:xs[i],y:ys[i]})}scatter.apply(null,[df].concat(args.slice(2)))}}function heatMap(arg,options){var samples=[];if(!isDist(arg)){samples=arg}else{var n=arg.params.numSamples;var support=arg.support();support.forEach(function(s){var prob=Math.exp(arg.score(s)),m=Math.round(n*prob);for(var i=0;i<m;i++){samples.push(s)}})}var x,y;if(_.isArray(samples[0])){x=_.pluck(samples,"0");y=_.pluck(samples,"1")}else if(_.isObject(samples[0])){var keys=_.keys(samples[0]);x=_.pluck(samples,keys[0]);y=_.pluck(samples,keys[1])}var densityEstimate=kde2d(x,y);var spec={data:[{name:"csv",values:densityEstimate}],width:350,height:350,scales:[{name:"x",type:"linear",domain:{data:"csv",field:"x"},range:"width",zero:false},{name:"y",type:"linear",domain:{data:"csv",field:"y"},range:"height",zero:false},{name:"c",type:"linear",domain:{data:"csv",field:"density"},range:["#ffffff","#313695"]}],axes:[{type:"x",scale:"x",offset:16,ticks:10,title:keys?keys[0]:"x",properties:{labels:{angle:{value:45},align:{value:"left"}}}},{type:"y",scale:"y",offset:16,ticks:10,title:keys?keys[1]:"y"}],marks:[{type:"symbol",from:{data:"csv"},properties:{enter:{shape:{value:"square"},x:{scale:"x",field:"x"},size:{value:210},y:{scale:"y",field:"y"},fill:{scale:"c",field:"density"}}}}],legends:[{title:"density",fill:"c",values:[0,_.max(_.pluck(densityEstimate,"density"))]}]};renderSpec(spec,{regularVega:true})}function density(x,options){options=_.defaults(options||{},{bounds:"auto"});function extractNumber(z){return _.isNumber(z)?z:_.values(z)[0]}var xIsErp=isDist(x);var support=xIsErp?_.map(x.support(),extractNumber):x,weights=xIsErp?_.map(getScores(x),Math.exp):false;if(xIsErp&&isDataFrame(x.support())){var key=_.keys(x.support()[0])[0];options.xLabel=options.xLabel||key}else{options.xLabel="Value"}var min,max;if(options.bounds=="auto"){min=_.min(support);max=_.max(support)}else{min=options.bounds[0];max=options.bounds[1]}var densityEstimate=kde(support,_.extend({weights:weights},options));var vlSpec={data:{values:densityEstimate},mark:"line",encoding:{x:{field:"item",type:"quantitative",axis:{title:options.xLabel},scale:{domain:[min,max],zero:false}},y:{field:"density",type:"quantitative",axis:{title:"Density"}}},config:{mark:{interpolate:"monotone"}}};renderSpec(vlSpec,options)}function line(df,options){options=_.defaults(options||{},{groupBy:false});var xName=_.keys(df[0])[0];var yName=_.keys(df[0])[1];var vlSpec={data:{values:df},mark:"line",encoding:{x:{field:xName,axis:{title:options.xLabel||xName},type:"quantitative"},y:{field:yName,axis:{title:options.yLabel||yName},type:"quantitative"}}};if(options.groupBy){vlSpec.encoding.color={field:options.groupBy,type:"nominal"}}renderSpec(vlSpec,options)}function lineWrapper(){var args=_.toArray(arguments);if(isDataFrame(arguments[0])){line.apply(null,arguments)}else{var xs=args[0];var ys=args[1];var df=[];for(var i=0,ii=xs.length;i<ii;i++){df.push({x:xs[i],y:ys[i]})}line.apply(null,[df].concat(args.slice(2)))}}function table(obj,options){if(typeof wpEditor==="undefined"){console.log("viz.print: no wpEditor, not drawing");return}options=_.defaults(options||{},{log:false,top:false,destructure:true});var erp;if(_.isArray(obj)){erp=samplesToDist(obj)}else if(isDist(obj)){erp=obj}else{throw new Error("table takes an ERP or a list of samples as an argument")}var support=erp.support(),supportKeys=_.keys(support[0]),scores=support.map(function(state){return scorer(erp,state)});var sortedZipped=_.sortBy(_.zip(support,scores),function(z){return-z[1]});if(options.top){sortedZipped=sortedZipped.slice(0,options.top)}var tableString='<table class="wviz-table">';var doDestructure=options.destructure&&supportKeys.length>0;var headerString="<tr>";if(doDestructure){headerString+=supportKeys.map(function(k){return"<th>"+k+"</th>"}).join("")}else{headerString="<th>(state)</th>"}headerString+="<th>"+(options.log?"log probability":"probability")+"</th>";headerString+="</tr>";tableString+=headerString;sortedZipped.forEach(function(pair){var state=pair[0];var score=pair[1];var rowString="<tr>";if(doDestructure){rowString+=_.values(state).map(function(v){return"<td>"+stringifyIfObject(v)+"</td>"}).join("")}else{rowString+="<td>"+stringifyIfObject(state)+"</td>"}rowString+="<td>"+(options.log?score:Math.exp(score))+"</td>";rowString+="</tr>";tableString+=rowString});var resultContainer=wpEditor.makeResultContainer();resultContainer.innerHTML=tableString}function marginals(erp,options){var fullSupport=erp.support(),fullScores=getScores(erp),fullTable=_.map(fullScores,function(score,i){return _.extend({__score__:score},fullSupport[i])}),fields=_.keys(fullSupport[0]);_.each(fields,function(field){var support=_.unique(fullSupport.map(function(x){return _.pick(x,field)}),JSON.stringify);var fauxErp={support:function(){return support},score:function(x){var rows=_.where(fullTable,x);var scores=_.pluck(rows,"__score__");return util.logsumexp(scores)}};if(runningInBrowser()){print(field+":")}viz.auto(fauxErp,options)})}var coarsen=function(xs,numBins){var scale=d3.scale.quantile().domain(xs).range(d3.range(4));return xs.map(function(x){return scale(x)+""})};var viz=function(s,k,a){var _args=Array.prototype.slice.call(arguments,3);var callback=function(){return k(s,undefined)};var args=[_args[0],_.extend({callback:callback},_args[1]||{})];return auto.apply(null,args)};var vizExtensions={auto:auto,bar:barWrapper,hist:hist,scatter:scatterWrapper,density:density,line:lineWrapper,table:table,parCoords:parallelCoordinates,heatMap:heatMap,marginals:marginals,renderSpec:renderSpec,stats:stats,coarsen:coarsen};_.each(vizExtensions,function(v,k){viz[k]=v});if(typeof module!=="undefined"&&module.exports){exports=module.exports=viz}global.viz=viz}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./cccr":402,"./stats":404,d3:8,fs:405,jquery:58,md5:62,react:220,"react-dom":68,underscore:222,vega:339,"vega-lite":298}],404:[function(require,module,exports){var _=require("underscore");var d3=require("d3");function kde(samps,options){options=_.defaults(options||{},{bounds:"auto",bandwidth:"auto",kernel:"epanechnikov",numPoints:100,weights:false});var kernel;if(options.kernel==="epanechnikov"){kernel=function(u){return Math.abs(u)<=1?.75*(1-u*u):0}}else if(typeof options.kernel=="function"){kernel=options.kernel}var isWeighted=_.isArray(options.weights),weights=options.weights;var mean=0,n=samps.length;var sumWeights=0;if(isWeighted){for(var i=0;i<n;i++){sumWeights+=weights[i];mean+=weights[i]*samps[i]}mean=mean/sumWeights}else{mean=samps.reduce(function(x,y){return x+y})/n}var bandwidth;if(options.bandwidth=="auto"){var s=Math.sqrt(samps.reduce(function(acc,x,i){return acc+(isWeighted?weights[i]:1)*Math.pow(x-mean,2)},0)/(isWeighted?sumWeights:n-1));bandwidth=1.06*s*Math.pow(n,-.2)}else{bandwidth=options.bandwidth}var min,max;if(options.bounds=="auto"){min=_.min(samps);max=_.max(samps)}else{min=options.bounds[0];max=options.bounds[1]}var numPoints=options.numPoints;var binWidth=(max-min)/numPoints;var results=[];for(var i=0;i<=numPoints;i++){var x=min+i*binWidth;var kernelSum=0;for(var j=0,jj=samps.length;j<jj;j++){var w=isWeighted?weights[j]:1;kernelSum+=w*kernel((x-samps[j])/bandwidth)}results.push({item:x,density:kernelSum/((isWeighted?sumWeights:n)*bandwidth)})}return results}function kde2d(x,y){function dnorm(x){var mu=0,sigma=1;return 1/(sigma*Math.sqrt(2*Math.PI))*Math.exp(-Math.pow(x-mu,2)/(2*sigma*sigma))}function Matrix(ary){this.mtx=ary;this.height=ary.length;this.width=ary[0].length}Matrix.prototype.mult=function(other){if(this.width!=other.height){throw new Error("Matrix multiply: incompatible sizes ("+this.width+","+this.height+"), ("+other.width+","+other.height+")")}var result=[];for(var i=0;i<this.height;i++){result[i]=[];for(var j=0;j<other.width;j++){var sum=0;for(var k=0;k<this.width;k++){sum+=this.mtx[i][k]*other.mtx[k][j]}result[i][j]=sum}}return new Matrix(result)};Matrix.prototype.transpose=function(){var transposed=[];for(var i=0;i<this.width;i++){transposed[i]=[];for(var j=0;j<this.height;j++){transposed[i][j]=this.mtx[j][i]}}return new Matrix(transposed)};Matrix.prototype.map=function(f){var res=[];for(var i=0;i<this.height;i++){var row=[];for(var j=0;j<this.width;j++){row.push(f(this.mtx[i][j]))}res.push(row)}return new Matrix(res)};var nx=x.length;var n1=25;var n2=25;var minX=_.min(x);var maxX=_.max(x);var minY=_.min(y);var maxY=_.max(y);var stepWidthX=(maxX-minX)/(n1-1);var stepWidthY=(maxY-minY)/(n2-1);var gx=_.range(n1).map(function(k){return minX+k*stepWidthX});var gy=_.range(n2).map(function(k){return minY+k*stepWidthY});var mean=function(v){return util.sum(v)/v.length};var variance=function(v){var m=mean(v);return util.sum(_.map(v,function(vi){return(vi-m)*(vi-m)}))/(v.length-1)};var getBandwidth=function(v){var scale=d3.scale.quantile().domain(v).range(d3.range(4));var r=[scale.invertExtent(0)[1],scale.invertExtent(2)[1]];var h=(r[1]-r[0])/1.34;return 4*1.06*Math.min(Math.sqrt(variance(v)),h)*Math.pow(v.length,-.2)};var h=[getBandwidth(x)/4,getBandwidth(y)/4];var ax=_.map(gx,function(_gx){return _.map(x,function(_x){return(_gx-_x)/h[0]})});var ay=_.map(gy,function(_gy){return _.map(y,function(_y){return(_gy-_y)/h[1]})});var mx=new Matrix(ax).map(dnorm);var my=new Matrix(ay).map(dnorm);var z=mx.mult(my.transpose()).mtx.map(function(row){return row.map(function(col){return col/(nx*h[0]*h[1])})});var ret=[];for(var ix=0;ix<n1;ix++){for(var iy=0;iy<n2;iy++){ret.push({x:gx[ix],y:gy[iy],density:z[ix][iy]})}}return ret}var exports={kde:kde,kde2d:kde2d};if(typeof viz!=="undefined"){viz.stats=exports}module.exports=exports},{d3:8,underscore:222}],405:[function(require,module,exports){},{}],406:[function(require,module,exports){arguments[4][405][0].apply(exports,arguments)},{dup:405}],407:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}]},{},[403]);
